{"version":3,"sources":["components/Variables/Variables/CrearVariables/FuenteDatoForma.js"],"names":["variables","excel","formas","periodicidad","nombre","FuenteDatoForma","props","state","valorPeriodicidad","usuarios","crearVariable","bind","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","actualizarPeriodicidad","cargarDatePicker","isValidDate","tieneEspaciosEnBlanco","getUsuarios","nombreVariable","$","val","tipo","guardarVariable","is","fecha","localeCompare","Date","datepicker","responsable","length","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","getFullYear","getMonth","getDate","result","console","log","rollback","commit","alert","recordset","noExiste","i","toLowerCase","setState","format","todayHighlight","viewMode","minViewMode","language","Object","prototype","toString","call","isNaN","getTime","s","test","width","display","alignItems","justifyContent","periodicidadVariable","map","responsableVariable","actualizarNombreEncargado","usuario","ID","margin","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,SAAS,GAAG,EAAhB;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,MAAM,GAAG,EAAb;AAEA,IAAMC,YAAY,GAAG,CAAE;AAACC,EAAAA,MAAM,EAAE;AAAT,CAAF,EAAsB;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAtB,EAA2C;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA3C,EAAgE;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAhE,EAAwF;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAxF,EAA8G;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA9G,CAArB;;IAEqBC,e;;;;;AACjB,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,yFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,iBAAiB,EAAE,IADV;AAETC,MAAAA,QAAQ,EAAE;AAFD,KAAb;AAIA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB;AACA,UAAKE,QAAL,GAAgB,MAAKA,QAAL,CAAcF,IAAd,+BAAhB;AACA,UAAKG,SAAL,GAAiB,MAAKA,SAAL,CAAeH,IAAf,+BAAjB;AACA,UAAKI,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCJ,IAAhC,+BAAlC;AACA,UAAKK,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BL,IAA5B,+BAA9B;AACA,UAAKM,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBN,IAAtB,+BAAxB;AACA,UAAKO,WAAL,GAAmB,MAAKA,WAAL,CAAiBP,IAAjB,+BAAnB;AACA,UAAKQ,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BR,IAA3B,+BAA7B;AAEA,UAAKS,WAAL,GAAmB,MAAKA,WAAL,CAAiBT,IAAjB,+BAAnB;AAhBe;AAiBlB;;;;wCAEmB;AAChB,WAAKC,YAAL;AACA,WAAKC,QAAL;AACA,WAAKC,SAAL;AACA,WAAKM,WAAL;AACH;;;oCAEgB;AAAA;;AACb,UAAIC,cAAc,GAAGC,CAAC,CAAC,iBAAD,CAAD,CAAqBC,GAArB,EAArB;AACA,UAAIC,IAAI,GAAGF,CAAC,CAAC,OAAD,CAAD,CAAWC,GAAX,EAAX;AACA,UAAIE,eAAJ;AACA,UAAIH,CAAC,CAAC,kBAAD,CAAD,CAAsBI,EAAtB,CAAyB,UAAzB,CAAJ,EACID,eAAe,GAAG,IAAlB,CADJ,KAGIA,eAAe,GAAG,KAAlB;AACJ,UAAItB,YAAY,GAAGmB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,UAAII,KAAJ;AACA,UAAGxB,YAAY,CAACyB,aAAb,CAA2B,IAA3B,KAAoC,CAAvC,EACID,KAAK,GAAG,IAAIE,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,EAAlB,CAAR,CADJ,KAGIF,KAAK,GAAGL,CAAC,CAAC,QAAD,CAAD,CAAYQ,UAAZ,CAAuB,SAAvB,CAAR;AACJ,UAAIC,WAAW,GAAGT,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;;AACA,UAAGF,cAAc,CAACW,MAAf,GAAwB,CAAxB,IAA6BX,cAAc,CAACW,MAAf,GAAwB,GAAxD,EAA6D;AACzD,YAAG,CAAC,KAAKb,qBAAL,CAA2BE,cAA3B,CAAJ,EAAgD;AAC5C,cAAG,KAAKN,0BAAL,CAAgCM,cAAhC,CAAH,EAAoD;AAChD,gBAAGG,IAAI,CAACQ,MAAL,GAAc,CAAd,IAAmBR,IAAI,CAACQ,MAAL,GAAc,EAApC,EAAwC;AACpC,kBAAG7B,YAAY,CAAC6B,MAAb,GAAsB,CAAtB,IAA2B7B,YAAY,CAAC6B,MAAb,GAAsB,EAApD,EAAwD;AACpD,oBAAG,KAAKd,WAAL,CAAiBS,KAAjB,CAAH,EAA4B;AACxB,sBAAGI,WAAW,CAACC,MAAZ,GAAqB,CAArB,IAA0BD,WAAW,CAACC,MAAZ,GAAqB,GAAlD,EAAuD;AACnD,wBAAMC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7B,KAAL,CAAW8B,IAAhC,CAApB;AACAH,oBAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,0BAAIC,UAAU,GAAG,KAAjB;AACAN,sBAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,wBAAAA,UAAU,GAAG,IAAb;AACH,uBAFD;AAGA,0BAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,sBAAAA,OAAO,CAACE,KAAR,CAAc,iHAA+GvB,cAA/G,GAA8H,MAA9H,GAAqIG,IAArI,GAA0I,MAA1I,GAAiJrB,YAAjJ,GAA8J,MAA9J,GAAqKwB,KAAK,CAACkB,WAAN,EAArK,GAAyL,GAAzL,IAA8LlB,KAAK,CAACmB,QAAN,KAAiB,CAA/M,IAAkN,GAAlN,GAAsNnB,KAAK,CAACoB,OAAN,EAAtN,GAAsO,MAAtO,GAA6OhB,WAA7O,GAAyP,MAAzP,GAAgQN,eAAhQ,GAAgR,IAA9R,EAAoS,UAACa,GAAD,EAAMU,MAAN,EAAiB;AACjT,4BAAIV,GAAJ,EAAS;AACLW,0BAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,8BAAI,CAACC,UAAL,EAAiB;AACbN,4BAAAA,WAAW,CAACkB,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,yBAND,MAMO;AACHL,0BAAAA,WAAW,CAACmB,MAAZ,CAAmB,UAAAd,GAAG,EAAI;AACtBe,4BAAAA,KAAK,CAAC,iBAAD,CAAL;AACA/B,4BAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBC,GAArB,CAAyB,EAAzB;AACAD,4BAAAA,CAAC,CAAC,OAAD,CAAD,CAAWC,GAAX,CAAe,QAAf,EAHsB,CAItB;;AACAD,4BAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,CAAsB,IAAtB;;AACA,4BAAA,MAAI,CAACT,SAAL;;AACA,4BAAA,MAAI,CAACR,KAAL,CAAWQ,SAAX;AACH,2BARD;AASH;AACJ,uBAlBD;AAmBH,qBAzBD,EAFmD,CA2B/C;AACP,mBA5BD,MA4BO;AACHuC,oBAAAA,KAAK,CAAC,yEAAD,CAAL;AACH;AACJ,iBAhCD,MAgCO;AACHA,kBAAAA,KAAK,CAAC,gCAAD,CAAL;AACH;AACJ,eApCD,MAoCO;AACHA,gBAAAA,KAAK,CAAC,mFAAD,CAAL;AACH;AACJ,aAxCD,MAwCO;AACHA,cAAAA,KAAK,CAAC,iFAAD,CAAL;AACH;AACJ,WA5CD,MA4CO;AACHA,YAAAA,KAAK,CAAC,0CAAD,CAAL;AACH;AACJ,SAhDD,MAgDO;AACHA,UAAAA,KAAK,CAAC,8DAAD,CAAL;AACH;AACJ,OApDD,MAoDO;AACHA,QAAAA,KAAK,CAAC,oFAAD,CAAL;AACH;AACJ;;;mCAEc;AACX,UAAMpB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7B,KAAL,CAAW8B,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyC,UAACN,GAAD,EAAMU,MAAN,EAAiB;AACtD,cAAIV,GAAJ,EAAS;AACLW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACkB,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACmB,MAAZ,CAAmB,UAAAd,GAAG,EAAI;AACtBtC,cAAAA,SAAS,GAAGgD,MAAM,CAACM,SAAnB;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EAFW,CAqBP;AACP;;;+BAEU;AACP,UAAMrB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7B,KAAL,CAAW8B,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8BAAd,EAA8C,UAACN,GAAD,EAAMU,MAAN,EAAiB;AAC3D,cAAIV,GAAJ,EAAS;AACLW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACkB,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACmB,MAAZ,CAAmB,UAAAd,GAAG,EAAI;AACtBrC,cAAAA,KAAK,GAAG+C,MAAM,CAACM,SAAf;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EAFO,CAqBH;AACP;;;gCAEW;AACR,UAAMrB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7B,KAAL,CAAW8B,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,+BAAd,EAA+C,UAACN,GAAD,EAAMU,MAAN,EAAiB;AAC5D,cAAIV,GAAJ,EAAS;AACLW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACkB,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACmB,MAAZ,CAAmB,UAAAd,GAAG,EAAI;AACtBpC,cAAAA,MAAM,GAAG8C,MAAM,CAACM,SAAhB;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EAFQ,CAqBJ;AACP;;;+CAE2BlD,M,EAAQ;AAChC,UAAImD,QAAQ,GAAG,IAAf;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxD,SAAS,CAACgC,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;AACvC,YAAIxD,SAAS,CAACwD,CAAD,CAAT,CAAapD,MAAb,CAAoBqD,WAApB,GAAkC7B,aAAlC,CAAgDxB,MAAM,CAACqD,WAAP,EAAhD,KAAyE,CAA7E,EAAgF;AAC5EF,UAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;;AACD,UAAGA,QAAH,EAAa;AACT,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvD,KAAK,CAAC+B,MAA1B,EAAkCwB,CAAC,EAAnC,EAAuC;AACnC,cAAIvD,KAAK,CAACuD,CAAD,CAAL,CAASpD,MAAT,CAAgBqD,WAAhB,GAA8B7B,aAA9B,CAA4CxB,MAAM,CAACqD,WAAP,EAA5C,KAAqE,CAAzE,EAA4E;AACxEF,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ;;AACD,UAAGA,QAAH,EAAa;AACT,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtD,MAAM,CAAC8B,MAA3B,EAAmCwB,CAAC,EAApC,EAAwC;AACpC,cAAItD,MAAM,CAACsD,CAAD,CAAN,CAAUpD,MAAV,CAAiBqD,WAAjB,GAA+B7B,aAA/B,CAA6CxB,MAAM,CAACqD,WAAP,EAA7C,KAAsE,CAA1E,EAA6E;AACzEF,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ;;AACD,aAAOA,QAAP;AACH;;;6CAEyB;AACtB,UAAIpD,YAAY,GAAGmB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,WAAKmC,QAAL,CAAc;AACVlD,QAAAA,iBAAiB,EAAEL;AADT,OAAd,EAEG,KAAKc,gBAFR;AAGH;;;uCAEmB;AAChBK,MAAAA,CAAC,CAAC,QAAD,CAAD,CAAYQ,UAAZ,CAAuB;AACnB6B,QAAAA,MAAM,EAAE,YADW;AAEnBC,QAAAA,cAAc,EAAE,IAFG;AAGnBC,QAAAA,QAAQ,EAAE,MAHS;AAInBC,QAAAA,WAAW,EAAE,MAJM;AAKnBC,QAAAA,QAAQ,EAAE;AALS,OAAvB;AAOH;;;gCAEYpC,K,EAAO;AAChB,UAAIqC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BxC,KAA/B,MAA0C,eAA9C,EAA+D;AAC3D,YAAIyC,KAAK,CAACzC,KAAK,CAAC0C,OAAN,EAAD,CAAT,EAA4B;AACxBhB,UAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,iBAAO,KAAP;AACH,SAHD,MAGO;AACH,iBAAO,IAAP;AACH;AACJ,OAPD,MAOO;AACHA,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,eAAO,KAAP;AACH;AACJ;;;0CAEsBiB,C,EAAG;AACtB,aAAO,MAAMC,IAAN,CAAWD,CAAX,CAAP;AACH;;;kCAEc;AAAA;;AACX,UAAMrC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7B,KAAL,CAAW8B,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,wBAAd,EAAwC,UAACN,GAAD,EAAMU,MAAN,EAAiB;AACrD,cAAIV,GAAJ,EAAS;AACLW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACkB,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACmB,MAAZ,CAAmB,UAAAd,GAAG,EAAI;AACtB,cAAA,MAAI,CAACoB,QAAL,CAAc;AACVjD,gBAAAA,QAAQ,EAAEuC,MAAM,CAACM;AADP,eAAd;AAGH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFW,CAuBP;AACP;;;6BAEQ;AACL,aACI,6CACI,2CADJ,EAEI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACkB,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,gBAAf;AAAgC,QAAA,SAAS,EAAC;AAA1C,+BADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE,sDAAhB;AAAwE,QAAA,KAAK,EAAE;AAACC,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,UAAU,EAAE,QAA9B;AAAwCC,UAAAA,cAAc,EAAE;AAAxD;AAA/E,SACI;AAAO,QAAA,EAAE,EAAC,gBAAV;AAA2B,QAAA,IAAI,EAAC,MAAhC;AAAuC,QAAA,SAAS,EAAC;AAAjD,QADJ,CAJJ,CAFJ,EAUI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACH,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,MAAf;AAAsB,QAAA,SAAS,EAAC;AAAhC,6BADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE,sDAAhB;AAAwE,QAAA,KAAK,EAAE;AAACC,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,UAAU,EAAE,QAA9B;AAAwCC,UAAAA,cAAc,EAAE;AAAxD;AAA/E,SACI;AAAQ,QAAA,EAAE,EAAC,MAAX;AAAkB,QAAA,SAAS,EAAC;AAA5B,SACI;AAAQ,QAAA,KAAK,EAAC;AAAd,qBADJ,EAEI;AAAQ,QAAA,KAAK,EAAC;AAAd,kBAFJ,EAGI;AAAQ,QAAA,KAAK,EAAC;AAAd,iBAHJ,EAII;AAAQ,QAAA,KAAK,EAAC;AAAd,oBAJJ,CADJ,CAJJ,CAVJ,EAuBI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACH,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,cAAf;AAA8B,QAAA,SAAS,EAAC;AAAxC,wBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAQ,QAAA,EAAE,EAAC,cAAX;AAA0B,QAAA,YAAY,EAAE,KAAKlE,KAAL,CAAWsE,oBAAnD;AAAyE,QAAA,QAAQ,EAAE,KAAK5D,sBAAxF;AAAgH,QAAA,SAAS,EAAC;AAA1H,SACI;AAAQ,QAAA,KAAK,EAAC;AAAd,mBADJ,EAEKb,YAAY,CAAC0E,GAAb,CAAiB,UAAC1E,YAAD,EAAeqD,CAAf;AAAA,eACd;AAAQ,UAAA,KAAK,EAAErD,YAAY,CAACC,MAA5B;AAAoC,UAAA,GAAG,EAAED,YAAY,CAACC;AAAtD,WAA+DD,YAAY,CAACC,MAA5E,CADc;AAAA,OAAjB,CAFL,CADJ,CAJJ,CAvBJ,EAqCQ,KAAKG,KAAL,CAAWC,iBAAX,CAA6BoB,aAA7B,CAA2C,IAA3C,KAAoD,CAApD,GAEI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAAC4C,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,OAAf;AAAuB,QAAA,SAAS,EAAC;AAAjC,0CADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,cAA7B;AAA4C,QAAA,EAAE,EAAC;AAA/C,QADJ,CAJJ,CAFJ,GAUE,IA/CV,EAiDI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,aAAf;AAA6B,QAAA,SAAS,EAAC;AAAvC,4BADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAQ,QAAA,EAAE,EAAC,aAAX;AAAyB,QAAA,YAAY,EAAE,KAAKlE,KAAL,CAAWwE,mBAAlD;AAAuE,QAAA,QAAQ,EAAE,KAAKxE,KAAL,CAAWyE,yBAA5F;AAAuH,QAAA,SAAS,EAAC;AAAjI,SACI;AAAQ,QAAA,KAAK,EAAC;AAAd,mBADJ,EAEK,KAAKxE,KAAL,CAAWE,QAAX,CAAoBoE,GAApB,CAAwB,UAACG,OAAD,EAAUxB,CAAV;AAAA,eACrB;AAAQ,UAAA,KAAK,EAAEwB,OAAO,CAACC,EAAvB;AAA2B,UAAA,GAAG,EAAED,OAAO,CAACC;AAAxC,WAA6CD,OAAO,CAACA,OAArD,CADqB;AAAA,OAAxB,CAFL,CADJ,CAJJ,CAjDJ,EA8DI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACR,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,iBAAf;AAAiC,QAAA,SAAS,EAAC;AAA3C,sDADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI,2CADJ,EAEI;AAAK,QAAA,SAAS,EAAE,mCAAhB;AAAqD,QAAA,KAAK,EAAE;AAACU,UAAAA,MAAM,EAAC,QAAR;AAAkBT,UAAAA,OAAO,EAAC;AAA1B;AAA5D,SACI;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,cAAc,MAArC;AAAsC,QAAA,IAAI,EAAE,iBAA5C;AAA+D,QAAA,EAAE,EAAE;AAAnE,QADJ,EAC2F,8CACvF;AAAO,QAAA,OAAO,EAAE;AAAhB,QADuF,CAD3F,CAFJ,CAJJ,CA9DJ,EA0EI,2CA1EJ,EA2EI;AAAK,QAAA,SAAS,EAAE,aAAhB;AAA+B,QAAA,KAAK,EAAE;AAACD,UAAAA,KAAK,EAAE;AAAR;AAAtC,SACI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,sBAAtB;AAA6C,QAAA,OAAO,EAAE,KAAK9D;AAA3D,0BADJ,CA3EJ,EA8EI,2CA9EJ,CADJ;AAkFH;;;;EAtVwCyE,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nvar variables = [];\nvar excel = [];\nvar formas = [];\n\nconst periodicidad = [ {nombre: \"diario\"}, {nombre: \"semanal\"}, {nombre: \"mensual\"}, {nombre: \"trimestral\"}, {nombre: \"bi-anual\"}, {nombre: \"anual\"} ];\n\nexport default class FuenteDatoForma extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            valorPeriodicidad: '-1',\n            usuarios: []\n        }\n        this.crearVariable = this.crearVariable.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.cargarDatePicker = this.cargarDatePicker.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n\n        this.getUsuarios = this.getUsuarios.bind(this);\n    }\n\n    componentDidMount() {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n        this.getUsuarios();\n    }\n\n    crearVariable () {\n        var nombreVariable = $(\"#nombreVariable\").val();\n        var tipo = $(\"#tipo\").val();\n        var guardarVariable;\n        if ($(\"#guardarVariable\").is(':checked'))\n            guardarVariable = true;\n        else\n            guardarVariable = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fecha;\n        if(periodicidad.localeCompare(\"-1\") == 0)\n            fecha = new Date(1964, 4, 28);\n        else\n            fecha = $(\"#fecha\").datepicker('getDate');\n        var responsable = $(\"#responsable\").val();\n        if(nombreVariable.length > 0 && nombreVariable.length < 101) {\n            if(!this.tieneEspaciosEnBlanco(nombreVariable)) {\n                if(this.verificarNoExisteNombreVar(nombreVariable)) {\n                    if(tipo.length > 0 && tipo.length < 31) {\n                        if(periodicidad.length > 0 && periodicidad.length < 51) {\n                            if(this.isValidDate(fecha)) {\n                                if(responsable.length > 0 && responsable.length < 101) {\n                                    const transaction = new sql.Transaction( this.props.pool );\n                                    transaction.begin(err => {\n                                        var rolledBack = false;\n                                        transaction.on('rollback', aborted => {\n                                            rolledBack = true;\n                                        });\n                                        const request = new sql.Request(transaction);\n                                        request.query(\"insert into FormasVariables (nombre, tipo, periodicidad, fechaInicioCalculo, responsable, guardar) values ('\"+nombreVariable+\"', '\"+tipo+\"', '\"+periodicidad+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+responsable+\"', '\"+guardarVariable+\"')\", (err, result) => {\n                                            if (err) {\n                                                console.log(err);\n                                                if (!rolledBack) {\n                                                    transaction.rollback(err => {\n                                                    });\n                                                }\n                                            } else {\n                                                transaction.commit(err => {\n                                                    alert(\"Variable Creada\");\n                                                    $(\"#nombreVariable\").val(\"\");\n                                                    $(\"#tipo\").val(\"numero\");\n                                                    //$(\"#periodicidad\").val(\"\");\n                                                    $(\"#responsable\").val(\"-1\");\n                                                    this.getFormas();\n                                                    this.props.getFormas();\n                                                });\n                                            }\n                                        });\n                                    }); // fin transaction\n                                } else {\n                                    alert('Ingrese un valor para el responsable que debe ser menor a 51 caracteres');\n                                }\n                            } else {\n                                alert('Ingrese un valor para la fecha');\n                            }\n                        } else {\n                            alert('Ingrese un valor para el valor de periodicidad que debe ser menor a 51 caracteres');\n                        }\n                    } else {\n                        alert('Ingrese un valor para el tipo de la variable que debe ser menor a 31 caracteres');\n                    }\n                } else {\n                    alert('El nombre de la variable debe ser único.');\n                }\n            } else {\n                alert('El nombre de la variable no debe contener espacios en blanco');\n            }\n        } else {\n            alert('Ingrese un valor para el nombre de la variable que debe ser menor a 101 caracteres');\n        }\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        variables = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        excel = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        formas = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (nombre) {\n        var noExiste = true;\n        for (var i = 0; i < variables.length; i++) {\n            if (variables[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                noExiste = false;\n                break;\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < excel.length; i++) {\n                if (excel[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < formas.length; i++) {\n                if (formas[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        this.setState({\n            valorPeriodicidad: periodicidad\n        }, this.cargarDatePicker );\n    }\n\n    cargarDatePicker () {\n        $('#fecha').datepicker({\n            format: \"dd-mm-yyyy\",\n            todayHighlight: true,\n            viewMode: \"days\", \n            minViewMode: \"days\",\n            language: 'es'\n        });\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    getUsuarios () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Usuarios\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            usuarios: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"nombreVariable\" className=\"col-form-label\">Nombre de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <input id=\"nombreVariable\" type=\"text\" className=\"form-control form-control-sm\"/>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"tipo\" className=\"col-form-label\">Tipo de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <select id=\"tipo\" className=\"form-control\">\n                            <option value=\"numero\">Número</option>\n                            <option value=\"varchar\">Cadena</option>\n                            <option value=\"date\">Fecha</option>\n                            <option value=\"bit\">Booleano</option>\n                        </select>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"periodicidad\" className=\"col-form-label\">Periodicidad</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <select id=\"periodicidad\" defaultValue={this.props.periodicidadVariable} onChange={this.actualizarPeriodicidad} className=\"form-control\">\n                            <option value=\"-1\">Ninguno</option>\n                            {periodicidad.map((periodicidad, i) =>\n                                <option value={periodicidad.nombre} key={periodicidad.nombre}>{periodicidad.nombre}</option>\n                            )}\n                        </select>\n                    </div>\n                </div>\n                {\n                    this.state.valorPeriodicidad.localeCompare(\"-1\") != 0\n                    ?\n                        <div className={\"row\"} style={{width: \"100%\"}}>\n                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                <label htmlFor=\"fecha\" className=\"col-form-label\">Fecha de Inicio de Cálculo:</label>\n                            </div>\n                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                <input type=\"text\" className=\"form-control\" id=\"fecha\"/>\n                            </div>\n                        </div>\n                    : null\n                }\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"responsable\" className=\"col-form-label\">Nombre Encargado</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <select id=\"responsable\" defaultValue={this.props.responsableVariable} onChange={this.props.actualizarNombreEncargado} className=\"form-control\">\n                            <option value=\"-1\">Ninguno</option>\n                            {this.state.usuarios.map((usuario, i) =>\n                                <option value={usuario.ID} key={usuario.ID}>{usuario.usuario}</option>\n                            )}\n                        </select>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"guardarVariable\" className=\"col-form-label\">Guardar Valores Obtenidos en Base de Datos</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <br/>\n                        <div className={\"switch-button switch-button-yesno\"} style={{margin:\"0 auto\", display:\"block\"}}>\n                            <input type=\"checkbox\" defaultChecked name={\"guardarVariable\"} id={\"guardarVariable\"}/><span>\n                            <label htmlFor={\"guardarVariable\"}></label></span>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                    <a href=\"#\" className=\"btn btn-brand active\" onClick={this.crearVariable}>Crear Variable</a>\n                </div>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"FuenteDatoForma.js"}