{"version":3,"sources":["components/Variables/Variables/CrearVariables/CrearVariablesHome.js"],"names":["campoSeleccionado","valorSeleccionado","valorSeleccionadoTexto","operacionSeleccionada","objetoConexionSeleccionada","tipoDeAsignacionSeleccionado","tipoDeAsignacionSeleccionadoVarios","tipoDeAsignacionSeleccionadoUnico","indiceFormulaSeleccionadaEdit","nivelNuevoAtributoVarios","nivelNuevoAtributoUnico","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","posicionAtributoSeleccionado","indiceSeleccionadoFormula","idFormula","nombreVariable","descripcionVariable","fechaInicioVariable","periodicidadVariable","responsableVariable","categoriaVariable","nombreCampoNuevoAtributosVario","atributosVario","reglasVariosAtributos","segmentoReglasVariosAtributos","formulasVariosAtributos","elementosFormulasVariosAtributos","atributosUnico","reglasUnAtributo","segmentoReglasUnAtributo","formulasUnAtributo","elementosFormulasUnAtributos","variablesSQL","instruccionSQL","banderaEsObjeto","banderaEsInstruccionSQL","contadorObjetosAGuardar","contadorObjetosGuardados","CrearVariablesHome","props","state","componenteActual","atributos","reglas","formulas","esCondicion","navbar","tipoNuevaVariable","camposInstruccionSQL","comandoSQL","variables","excel","formas","esEditarVar","esOperacionSQL","operacionSQL","formulaSeleccionadaEdit","condicionFormula","condicionElemento","loadRules","bind","sortRules","returnToCreateVariable","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormula","goCreateVariableFieldSQL","createVariable","getVariableID","createVariableSQL","createInstructionSQL","createVariableField","getVariableFieldID","createVariableFieldRuleSegments","getVariableFieldRuleSegments","createVariableFieldRules","traerRegla","createVariableFieldFormula","getVariableFieldFormulaID","createVariableFieldFormulaElement","retornarCampo","actualizarCondicion","cambioDeArreglosDeAtributos","guardarVariable","guardarVariableSQL","guardarVariableUnAtributo","guardarVariableVariosAtributo","crearAtributoVariable","eliminarAtributoVariable","modificarNombreVariable","crearVariableSQL","crearInstruccionSQL","anadirRegla","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","modificarFormula","eliminarFormula","retornoCampoFormula","retornoCampoCondicion","retornarValor","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarEstadoSiEsObjeto","actualizarEstadoSiEsInstruccionSQL","actualizarNivelNuevaRegla","actualizarSeleccionFormula","actualizarIdFormula","actualizarNombreVariable","actualizarDescripcionVariable","actualizarFechaInicio","actualizarPeriodicidad","actualizarNombreEncargado","actualizarNombreCampoNuevoAtributosVario","actualizarCategoriaVariable","retornarCodigoOperacion","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","verificarNoExisteNombreCampo","actualizarCampoSQL","eliminarCampoSQL","isValidDate","tieneEspaciosEnBlanco","saveBitacora","tempCopy","i","length","setState","indice","configuracionHome","goOptions","retornoSeleccionVariables","posicionSel","undefined","esEditarVarN","operacion","localeCompare","variable","campos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","nombre","descripcion","esObjeto","esColeccion","objetoPadreID","esInstruccionSQL","guardar","periodicidad","responsable","fechaInicioCalculo","getFullYear","getMonth","getDate","result","console","log","limpiarArreglos","rollback","commit","showSuccesMessage","$","val","segmentoRegla","elementosFormulas","recordset","tipo","ID","variableCampo","posicionAtributo","nivel","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","push","posicionFormulaEnCampo","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","segmento","posicionSegmento","conexionTablaID","variableID","excelArchivoID","excelVariableID","formaVariableID","esConexionTabla","esValorManual","nivelMax","splice","k","segmentoReglaID","formulaID","regla","posicionRegla","reglaPadreID","nombreColumnaEnTabla","tipoCampoObjetivo","operacionTexto","valor","texto","formula","posicionFormula","existenSegmentos","elemento","posicionElemento","esFuenteDeDato","elementoVariableID","elementoVariableCampoID","tipoColumnaEnTabla","is","guardarResultadosEnBaseDatos","nuevosValores","hoy","userName","idVariable","campoNuevo","campoNuevoTexto","nuevoNivel","Date","datepicker","categoria","isNaN","nuevaVariable","showMessage","nuevoAtributo","nombreAtributo","arreglo","index","copiaAntiguaFormulas","copyAtributos","nombreCampo","nuevaVar","instruccionSQLN","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","nivelABuscar","reglaEsValida","indexOf","entrarACrearRegla","tablaID","variableSel","filter","object","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevaRegla","variableCampoID","posicionAInsertar","tipoNuevaAsig","tempNewCopy","texto2","formulaArreglo","numeroDeFormulaDeVariable","arregloDeElementos","array","Array","isArray","esFuenteDato","tipoOriginal","existeSoloUnaFormula","contadorFormulas","ForReglas","tipoVariable","campo","indiceSegmento","indiceRegla","tipoElemento","idFormulaN","nombreVariableN","descripcionVariableN","fecha","codigo","noExiste","toLowerCase","nombreN","tipoN","Object","prototype","toString","call","getTime","s","test","userID","width","height","terminoCrearCampo","columnas","nombreTablaSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport CrearVariable from './CrearVariable.js';\nimport InstruccionVariable from '../../../InstruccionVariable.js';\nimport Formula from '../../../Formula.js';\nimport InstruccionSQL from './InstruccionSQL.js';\n\nvar campoSeleccionado, valorSeleccionado, valorSeleccionadoTexto, operacionSeleccionada, objetoConexionSeleccionada;\nvar tipoDeAsignacionSeleccionado = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar tipoDeAsignacionSeleccionadoVarios = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar tipoDeAsignacionSeleccionadoUnico = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar indiceFormulaSeleccionadaEdit = -1;\n\n/*COMPONENTE PARA MANEJRA CAMBIO DE VISTA ENTRE CREAR VARIABLE Y VISTA DE CONDICIONES / INSTRUCIONES*/\n/*MANEJA TODA LA LOGICA CREAR FUENTE DATO VARIABLE (OBJETO)*/\n\n/*              ARREGLO DE ATRIBUTOS               */\n/* CADA POSICION REPRESENTA UN CAMPO / ATRIBUTO / COLUMNA */\n/*\n    [ {nombre: \"IDCLIENTE\"}, {nombre: \"NOMBRECLIENTE\"} ]\n*/\n\n/*              ARREGLO DE SEGMENTO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA CONDICION IF PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}], [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}] ]\n*/\n\n/*              ARREGLO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA REGLA PERTENECIENTE AL SEGMENTO DE REGLAS CORRESPONDIENTE A LA POSICION DEL SEGMENTO DE REGLAS DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{esCondicion: FALSE}], [{esCondicion: TRUE, esCondicion: FALSE}]], [[{esCondicion: FALSE}], [{esCondicion: FALSE}]] ]\n*/\n\n/*              ARREGLO DE FORMULAS               */\n/* CADA POSICION REPRESENTA UNA FORMULA PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{formula: \"x + y\"}, {formula: \"2x + 2y\"}], [{formula: \"3x + 3y\"}] ]\n*/\n\n/*              ARREGLO DE ELEMENTOS DE FORMULAS               */\n/* CADA POSICION REPRESENTA UN ELEMENTO DE FORMULA PERTENECIENTE A LA FORMULA CORRESPONDIENTE A LA POSICION DE LA FORMULA DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{formula: \"sum(saldo)\"}, {formula: \"asig(impuesto)\"}], []], [[{formula: \"sum(saldo)\"}], []] ]\n*/\n\nvar nivelNuevoAtributoVarios = 0;                   //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar nivelNuevoAtributoUnico = 0;                    //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar indiceSeleccionadoSegmentoReglas = -1;          //indice seleccionado del segmento al que pertenece la regla\nvar indiceSeleccionadoReglas = -1;                  //indice seleccionado de la regla dentro del segmento\nvar tipoElementoSeleccionadoRegla = '';             //tipo de seleccion de cursor de regla: esOtraRegla, arriba, abajo\nvar posicionAtributoSeleccionado = -1;              //posicion del arreglo donde se debe insertar el siguiente atributo / campo /  columna (para controlar cuando se agrega condiciones / instrucciones a un nuevo atributo)\nvar indiceSeleccionadoFormula = -1;                 //indice seleccionado formula\n\nvar idFormula = '';\nvar nombreVariable = '';\nvar descripcionVariable = '';\nvar fechaInicioVariable = '';\nvar periodicidadVariable = '';\nvar responsableVariable = '';\nvar categoriaVariable = '';\n\nvar nombreCampoNuevoAtributosVario = '';\nvar atributosVario = [];\nvar reglasVariosAtributos = [];\nvar segmentoReglasVariosAtributos = [];\nvar formulasVariosAtributos = [];\nvar elementosFormulasVariosAtributos = [];\nvar atributosUnico = [];\nvar reglasUnAtributo = [];\nvar segmentoReglasUnAtributo = [];\nvar formulasUnAtributo = [];\nvar elementosFormulasUnAtributos = [];\n\nvar variablesSQL = [];\nvar instruccionSQL = '';\n\nvar banderaEsObjeto = true;                                //bandera para saber si la variable actual es objeto o no a traves de las diferentes vistas / componentes\nvar banderaEsInstruccionSQL = true;                                //bandera para saber si la variable actual es instruccion SQL o no a traves de las diferentes vistas / componentes\n\nvar contadorObjetosAGuardar = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\nvar contadorObjetosGuardados = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\n\nexport default class CrearVariablesHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'crearVariable',\n            atributos: [],\n            reglas: [],\n            formulas: [],\n            esCondicion: true,                             //bandera para estado de nueva regla / instruccion, saber si es nueva comparacion o regla / instruccion = verdadero; si es falso = es nueva formula / asignacion\n            navbar: \"\",\n            tipoNuevaVariable: tipoDeAsignacionSeleccionado,\n            camposInstruccionSQL: [],\n            comandoSQL: \"\",\n            variables: [],\n            excel: [],\n            formas: [],\n            esEditarVar: false,\n            esOperacionSQL: false,\n            operacionSQL: \"\",\n            formulaSeleccionadaEdit: null,\n            condicionFormula: \"\",\n            condicionElemento: \"\"\n        }\n        this.loadRules = this.loadRules.bind(this);\n        this.sortRules = this.sortRules.bind(this);\n        this.returnToCreateVariable = this.returnToCreateVariable.bind(this);\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCreateVariableFieldSQL = this.goCreateVariableFieldSQL.bind(this);\n        this.createVariable = this.createVariable.bind(this);\n        this.getVariableID = this.getVariableID.bind(this);\n        this.createVariableSQL = this.createVariableSQL.bind(this);\n        this.createInstructionSQL = this.createInstructionSQL.bind(this);\n        this.createVariableField = this.createVariableField.bind(this);\n        this.getVariableFieldID = this.getVariableFieldID.bind(this);\n        this.createVariableFieldRuleSegments = this.createVariableFieldRuleSegments.bind(this);\n        this.getVariableFieldRuleSegments = this.getVariableFieldRuleSegments.bind(this);\n        this.createVariableFieldRules = this.createVariableFieldRules.bind(this);\n        this.traerRegla = this.traerRegla.bind(this);\n        this.createVariableFieldFormula = this.createVariableFieldFormula.bind(this);\n        this.getVariableFieldFormulaID = this.getVariableFieldFormulaID.bind(this);\n        this.createVariableFieldFormulaElement = this.createVariableFieldFormulaElement.bind(this);\n        this.retornarCampo = this.retornarCampo.bind(this);\n        this.actualizarCondicion = this.actualizarCondicion.bind(this);\n        this.cambioDeArreglosDeAtributos = this.cambioDeArreglosDeAtributos.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.guardarVariableSQL = this.guardarVariableSQL.bind(this);\n        this.guardarVariableUnAtributo = this.guardarVariableUnAtributo.bind(this);\n        this.guardarVariableVariosAtributo = this.guardarVariableVariosAtributo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.eliminarAtributoVariable = this.eliminarAtributoVariable.bind(this);\n        this.modificarNombreVariable = this.modificarNombreVariable.bind(this);\n        this.crearVariableSQL = this.crearVariableSQL.bind(this);\n        this.crearInstruccionSQL = this.crearInstruccionSQL.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.modificarFormula = this.modificarFormula.bind(this);\n        this.eliminarFormula = this.eliminarFormula.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarEstadoSiEsObjeto = this.actualizarEstadoSiEsObjeto.bind(this);\n        this.actualizarEstadoSiEsInstruccionSQL = this.actualizarEstadoSiEsInstruccionSQL.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarSeleccionFormula = this.actualizarSeleccionFormula.bind(this);\n        this.actualizarIdFormula = this.actualizarIdFormula.bind(this);\n        this.actualizarNombreVariable = this.actualizarNombreVariable.bind(this);\n        this.actualizarDescripcionVariable = this.actualizarDescripcionVariable.bind(this);\n        this.actualizarFechaInicio = this.actualizarFechaInicio.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.actualizarNombreEncargado = this.actualizarNombreEncargado.bind(this);\n        this.actualizarNombreCampoNuevoAtributosVario = this.actualizarNombreCampoNuevoAtributosVario.bind(this);\n        this.actualizarCategoriaVariable = this.actualizarCategoriaVariable.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.actualizarCampoSQL = this.actualizarCampoSQL.bind(this);\n        this.eliminarCampoSQL = this.eliminarCampoSQL.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n\n        this.saveBitacora = this.saveBitacora.bind(this);\n    }\n\n    componentDidMount () {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n    }\n\n    loadRules() {\n        //FINISH\n        this.sortRules();\n    }\n\n    sortRules() {\n        var tempCopy = [...this.state.reglas];\n        for (var i = 0; i < tempCopy.length; i++) {\n            tempCopy[i]\n        };\n    }\n\n    returnToCreateVariable () {\n        this.setState({\n            componenteActual: \"crearVariable\"\n        });\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var formulas, reglas;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(banderaEsObjeto) {\n            formulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n        } else {\n            formulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormula (indice, esEditarVarN) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        var esOperacionSQL, operacionSQL;\n        if(posicionAtributoSeleccionado == -1) {\n            esOperacionSQL = false;\n            operacionSQL = \"\";\n        }\n        if (this.state.formulaSeleccionadaEdit != null) {\n            if(this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"ASIG\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"COUNT\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"PROM\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MAX\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MIN\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"SUM\") == 0 || \n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                operacionSQL = this.state.formulaSeleccionadaEdit.operacion;\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar,\n            esEditarVar: esEditarVarN,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    goCreateVariableFieldSQL () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Instrucción SQL</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"variableSQL\",\n        });\n    }\n\n    createVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Variables (idFormula, nombre, descripcion, esObjeto, esColeccion, objetoPadreID, esInstruccionSQL, guardar, periodicidad, responsable, categoriaVariable, fechaInicioCalculo) values ('\"+variable.idFormula+\"', '\"+variable.nombre+\"', '\"+variable.descripcion+\"', '\"+variable.esObjeto+\"', '\"+variable.esColeccion+\"', \"+variable.objetoPadreID+\", '\"+variable.esInstruccionSQL+\"', '\"+variable.guardar+\"', '\"+variable.periodicidad+\"', '\"+variable.responsable+\"', '\"+variable.categoriaVariable+\"','\"+variable.fechaInicioCalculo.getFullYear()+\"-\"+(variable.fechaInicioCalculo.getMonth()+1)+\"-\"+variable.fechaInicioCalculo.getDate()+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.props.showSuccesMessage(\"Éxito\", 'Variable Creada.');\n                        nombreVariable = '';\n                        descripcionVariable = '';\n                        $(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");\n                        contadorObjetosGuardados++;\n                        var formulas, segmentoRegla, reglas, elementosFormulas;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                            reglas = reglasVariosAtributos;\n                            elementosFormulas = elementosFormulasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                            reglas = reglasUnAtributo;\n                            elementosFormulas = elementosFormulasUnAtributos;\n                        }\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableID (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Variables order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(banderaEsInstruccionSQL) {\n                                this.createVariableSQL(result.recordset[0]);\n                            } else {\n                                for (var i = 0; i < campos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableField(result.recordset[0], campos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableSQL (variable) {\n        for (let i = 0; i < variablesSQL.length; i++) {\n            let nombre = variablesSQL[i].nombre;\n            let tipo = variablesSQL[i].tipo;\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into InstruccionSQLCampos (variableID, nombre, tipo) values (\"+variable.ID+\", '\"+nombre+\"', '\"+tipo+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(i == variablesSQL.length-1)\n                                this.createInstructionSQL(variable);\n                        });\n                    }\n                });\n            }); // fin transaction\n        };\n    }\n\n    createInstructionSQL (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into InstruccionSQL (variableID, instruccionSQL) values (\"+variable.ID+\", '\"+instruccionSQL+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.limpiarArreglos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableField (variable, variableCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into VariablesCampos (variableID, nombre, tipo, nivel) values (\"+variable.ID+\", '\"+variableCampo.nombre+\"', '\"+variableCampo.tipo+\"', \"+variableCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldID(variable, variableCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldID (variable, variableCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where nombre = '\"+variableCampo.nombre+\"' and variableID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(variable, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(variable, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        //los campos variableID y variableCampoID se ponen luego de la creacion e importacion\n        //el campo variableIDCreacionCodigo es el variableID de segmento asignado al crear reglas\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasVariables (conexionTablaID, variableID, variableCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esConexionTabla, esValorManual, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esConexionTabla+\"', '\"+segmento.esValorManual+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasVariables where conexionTablaID = \"+segmento.conexionTablaID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and variableIDCreacionCodigo = \"+segmento.variableID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length > 0) {\n                            var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    \n    createVariableFieldRules (variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        if(regla != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasVariables (segmentoReglaID, variableID, variableCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmentoEnCampo, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasVariables where segmentoReglaID = \"+segmento.ID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasVariablesCampos (variableID, variableCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var elementosFormulas, segmentoRegla, formulas;\n                            if (banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(variable, variableCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                if(segmentoRegla.length > 0 ) {\n                                    for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                        if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                            arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                        arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                }\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (variable, variableCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        //if(elemento != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ElementoFormulasVariablesCampos (variableID, variableCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID , excelVariableID , formaVariableID , elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.esValorManual+\"', '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            /*var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                                for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                    if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                        arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                        if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                            arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                this.limpiarArreglos();\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        /*} else {\n            console.log('HOLA 8');\n            this.limpiarArreglos();\n        }*/\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            nivelNuevoAtributoVarios = 0;\n            nivelNuevoAtributoUnico = 0;\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n            posicionAtributoSeleccionado = -1;\n            indiceSeleccionadoFormula = -1;\n\n            atributosVario = [];\n            reglasVariosAtributos = [];\n            segmentoReglasVariosAtributos = [];\n            formulasVariosAtributos = [];\n            elementosFormulasVariosAtributos = [];\n            atributosUnico = [];\n            reglasUnAtributo = [];\n            segmentoReglasUnAtributo = [];\n            formulasUnAtributo = [];\n            elementosFormulasUnAtributos = [];\n\n            tipoDeAsignacionSeleccionado = '';\n            tipoDeAsignacionSeleccionadoVarios = '';\n            tipoDeAsignacionSeleccionadoUnico = '';\n\n            variablesSQL = [];\n            instruccionSQL = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                formulas: [],\n                camposInstruccionSQL: [],\n                comandoSQL: \"\",\n                tipoNuevaVariable: \"\"\n            });\n\n            this.getVariables();\n            \n            var esObjeto;\n            if ($(\"#esObjetoFuenteDato\").is(':checked'))\n                esObjeto = true;\n            else\n                esObjeto = false;\n            var esColeccion;\n            if ($(\"#esColeccion\").is(':checked'))\n                esColeccion = true;\n            else\n                esColeccion = false;\n            var guardarResultadosEnBaseDatos;\n            if ($(\"#guardarFuenteDato\").is(':checked'))\n                guardarResultadosEnBaseDatos = true;\n            else\n                guardarResultadosEnBaseDatos = false;\n            var esInstruccionSQL;\n            if ($(\"#esInstruccionSQL\").is(':checked'))\n                esInstruccionSQL = true;\n            else\n                esInstruccionSQL = false;\n            var nuevosValores = 'nombre: '+nombreVariable+'\\n'+\n                                'descripcion: '+descripcionVariable+'\\n'+\n                                'esObjeto: '+esObjeto+'\\n'+\n                                'esColeccion: '+esColeccion+'\\n'+\n                                'esInstruccionSQL: '+esInstruccionSQL+'\\n'+\n                                'guardar: '+guardarResultadosEnBaseDatos+'\\n'+\n                                'periodicidad: '+periodicidadVariable+'\\n'+\n                                'responsable: '+responsableVariable+'\\n'+\n                                'categoriaVariable: '+categoriaVariable+'\\n'+\n                                'fechaInicioCalculo: '+fechaInicioVariable+'\\n';\n            if (esObjeto && atributosVario.length > 0) {\n                nuevosValores += 'ATRIBUTOS\\n';\n                for (var i = 0; i < atributosVario.length; i++) {\n                    nuevosValores += 'nombre: '+atributosVario[i].nombre+', tipo: '+atributosVario[i].tipo+'\\n';\n                };\n            }\n            this.saveBitacora(hoy, \"Usuario: \"+this.props.userName+\" modifico la variable: \"+nombreVariable+\"\\nNuevos valores: \\n\"+nuevosValores, \"variable\", this.props.idVariable);\n        }\n    }\n\n    retornarCampo (campoNuevo) {\n        campoSeleccionado = campoNuevo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    actualizarCondicion (esCondicion) {\n        this.setState({\n            esCondicion: esCondicion\n        });\n    }\n\n    cambioDeArreglosDeAtributos () {\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        if (esObjeto) {\n            this.setState({\n                atributos: atributosVario\n            });\n        } else {\n            this.setState({\n                atributos: atributosUnico\n            });\n        }\n    }\n\n    guardarVariable() {\n        contadorObjetosGuardados = 0;\n        contadorObjetosAGuardar = 0;\n        if (banderaEsInstruccionSQL) {\n            this.guardarVariableSQL();\n        } else if (!banderaEsObjeto) {\n            this.guardarVariableUnAtributo();\n        } else {\n            this.guardarVariableVariosAtributo();\n        }\n    }\n\n    guardarVariableSQL () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 101 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(guardarResultadosEnBaseDatos != undefined) {\n                                    if(esInstruccionSQL != undefined) {\n                                        if(!isNaN(objetoPadreID)) {\n                                            if(periodicidad.length > 0) {\n                                                if(this.isValidDate(fechaInicioCalculo) ) {\n                                                    if(responsable.length > 0) {\n                                                        if(categoria.length < 101) {\n                                                            if(!isNaN(nuevoNivel)) {\n                                                                if(variablesSQL.length > 0) {\n                                                                    if(instruccionSQL.length > 0) {\n                                                                        var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: false, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                        this.createVariable(nuevaVariable);\n                                                                        contadorObjetosAGuardar++;\n                                                                    } else {\n                                                                        this.props.showMessage(\"Error\", \"Cree una instrucción SQL.\", true, false, {});\n                                                                    }\n                                                                } else {\n                                                                    this.props.showMessage(\"Error\", \"Cree una variable SQL.\", true, false, {});\n                                                                }\n                                                            } else {\n                                                                this.props.showMessage(\"Error\", \"Seleccione un nivel para el campo.\", true, false, {});\n                                                            }\n                                                        } else {\n                                                            this.props.showMessage(\"Error\", \"La categoria de variable debe ser menor a 101 caracteres.\", true, false, {});\n                                                        }\n                                                    } else {\n                                                        this.props.showMessage(\"Error\", \"Ingrese un valor para el responsable.\", true, false, {});\n                                                    }\n                                                } else {\n                                                    this.props.showMessage(\"Error\", \"Ingrese una fecha válida para el inicio de cálculo.\", true, false, {});\n                                                }\n                                            } else {\n                                                this.props.showMessage(\"Error\", \"Ingrese un valor para la periodicidad.\", true, false, {});\n                                            }\n                                        } else {\n                                            this.props.showMessage(\"Error\", \"Tiene que ingresar un valor para objeto padre.\", true, false, {});\n                                        }\n                                    } else {\n                                        this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable se calcula con intrucciones SQL.\", true, false, {});\n                                    }\n                                } else {\n                                    this.props.showMessage(\"Error\", \"Tiene que ingresar si guardar o no variable.\", true, false, {});\n                                }\n                            } else {\n                                this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable tiene un atributo o muchos.\", true, false, {});\n                            }\n                        } else {\n                            this.props.showMessage(\"Error\", \"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\", true, false, {});\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"Tiene que ingresar un nombre de la variable.\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Tiene que ingresar un identificador de la variable en fórmula.\", true, false, {});\n        }\n    }\n\n    guardarVariableUnAtributo () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var esColeccion;\n        if ($(\"#esColeccion\").is(':checked'))\n            esColeccion = true;\n        else\n            esColeccion = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 501 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(esColeccion != undefined) {\n                                    if(guardarResultadosEnBaseDatos != undefined) {\n                                        if(esInstruccionSQL != undefined) {\n                                            if(!isNaN(objetoPadreID)) {\n                                                if(periodicidad.length > 0) {\n                                                    if(this.isValidDate(fechaInicioCalculo) ) {\n                                                        if(responsable.length > 0) {\n                                                            if(categoria.length < 101) {\n                                                                if(!isNaN(nuevoNivel)) {\n                                                                    var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                                                    var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: esColeccion, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                    this.createVariable(nuevaVariable, [nuevoAtributo]);\n                                                                    contadorObjetosAGuardar++;\n                                                                } else {\n                                                                    this.props.showMessage(\"Error\", \"Seleccione un nivel para el campo.\", true, false, {});\n                                                                }\n                                                            } else {\n                                                                this.props.showMessage(\"Error\", \"La categoria de variable debe ser menor a 101 caracteres.\", true, false, {});\n                                                            }\n                                                        } else {\n                                                            this.props.showMessage(\"Error\", \"Ingrese un valor para el responsable.\", true, false, {});\n                                                        }\n                                                    } else {\n                                                        this.props.showMessage(\"Error\", \"Ingrese una fecha válida para el inicio de cálculo.\", true, false, {});\n                                                    }\n                                                } else {\n                                                    this.props.showMessage(\"Error\", \"Ingrese un valor para la periodicidad.\", true, false, {});\n                                                }\n                                            } else {\n                                                this.props.showMessage(\"Error\", \"Tiene que ingresar un valor para objeto padre.\", true, false, {});\n                                            }\n                                        } else {\n                                            this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable se calcula con intrucciones SQL.\", true, false, {});\n                                        }\n                                    } else {\n                                        this.props.showMessage(\"Error\", \"Tiene que ingresar si guardar o no variable.\", true, false, {});\n                                    }\n                                } else {\n                                    this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable es coleccion o no.\", true, false, {});\n                                }\n                            } else {\n                                this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable tiene un atributo o muchos.\", true, false, {});\n                            }\n                        } else {\n                            this.props.showMessage(\"Error\", \"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\", true, false, {});\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"Tiene que ingresar un nombre de la variable.\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Tiene que ingresar un identificador de la variable en fórmula.\", true, false, {});\n        }\n    }\n\n    guardarVariableVariosAtributo () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var esColeccion;\n        if ($(\"#esColeccion\").is(':checked'))\n            esColeccion = true;\n        else\n            esColeccion = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 101 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(esColeccion != undefined) {\n                                    if(guardarResultadosEnBaseDatos != undefined) {\n                                        if(esInstruccionSQL != undefined) {\n                                            if(!isNaN(objetoPadreID)) {\n                                                if(periodicidad.length > 0) {\n                                                    if(this.isValidDate(fechaInicioCalculo) ) {\n                                                        if(responsable.length > 0) {\n                                                            if(categoria.length < 101) {\n                                                                if(!isNaN(nuevoNivel)) {\n                                                                    var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: esColeccion, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                    this.createVariable(nuevaVariable, atributosVario);\n                                                                    contadorObjetosAGuardar++;\n                                                                } else {\n                                                                    this.props.showMessage(\"Error\", \"Seleccione un nivel para el campo.\", true, false, {});\n                                                                }\n                                                            } else {\n                                                                this.props.showMessage(\"Error\", \"La categoria de variable debe ser menor a 101 caracteres.\", true, false, {});\n                                                            }\n                                                        } else {\n                                                            this.props.showMessage(\"Error\", \"Ingrese un valor para el responsable.\", true, false, {});\n                                                        }\n                                                    } else {\n                                                        this.props.showMessage(\"Error\", \"Ingrese una fecha válida para el inicio de cálculo.\", true, false, {});\n                                                    }\n                                                } else {\n                                                    this.props.showMessage(\"Error\", \"Ingrese un valor para la periodicidad.\", true, false, {});\n                                                }\n                                            } else {\n                                                this.props.showMessage(\"Error\", \"Tiene que ingresar un valor para objeto padre.\", true, false, {});\n                                            }\n                                        } else {\n                                            this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable se calcula con intrucciones SQL.\", true, false, {});\n                                        }\n                                    } else {\n                                        this.props.showMessage(\"Error\", \"Tiene que ingresar si guardar o no variable.\", true, false, {});\n                                    }\n                                } else {\n                                    this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable es coleccion o no.\", true, false, {});\n                                }\n                            } else {\n                                this.props.showMessage(\"Error\", \"Tiene que ingresar si la variable tiene un atributo o muchos.\", true, false, {});\n                            }\n                        } else {\n                            this.props.showMessage(\"Error\", \"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\", true, false, {});\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"Tiene que ingresar un nombre de la variable.\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Tiene que ingresar un identificador de la variable  en fórmula.\", true, false, {});\n        }\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(!this.tieneEspaciosEnBlanco(nombreAtributo)) {\n                if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                    if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                        //seleccionar arreglo a insertar, si de varios atributos o unico\n                        var arreglo, nivel;\n                        if(banderaEsObjeto) {\n                            arreglo = atributosVario;\n                            nivel = nivelNuevoAtributoVarios;\n                        } else {\n                            arreglo = atributosUnico;\n                            nivel = nivelNuevoAtributoUnico;\n                        }\n                        var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                        //si la formula ya fue asignada, no agregar tipo\n                        /*if(this.state.atributos[this.state.posicionNuevoAtributo].nombre == undefined) {\n                            nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, campoEsArreglo: campoEsArreglo};\n                        } else {\n                            nuevoAtributo = this.state.atributos[this.state.posicionNuevoAtributo];\n                            nuevoAtributo.nombre = nombreAtributo;\n                            nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                        }*/\n                        arreglo.push(nuevoAtributo);\n                        this.setState({\n                            atributos: arreglo,\n                            tipoNuevaVariable: \"\"\n                        });\n                        nivelNuevoAtributoVarios = 0;\n                        if(banderaEsObjeto) {\n                            atributosVario = arreglo;\n                        } else {\n                            atributosUnico = arreglo;\n                        }\n                        nombreCampoNuevoAtributosVario = '';\n                        $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                        this.props.showSuccesMessage(\"Éxito\", 'Campo Creado.');\n                    } else {\n                        this.props.showMessage(\"Error\", \"Seleccione un tipo de asignación.\", true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", \"El nombre del campo debe ser unico.\", true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"El nombre del atributo no debe contener espacios en blanco.\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Ingrese un valor para el nombre del atributo.\", true, false, {});\n        }\n    }\n\n    eliminarAtributoVariable(index) {\n        var elementosFormulas, copiaAntiguaFormulas, reglas, segmentoRegla, atributos;\n        if(banderaEsObjeto) {\n            elementosFormulas = elementosFormulasVariosAtributos;\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n            atributos = atributosVario;\n        } else {\n            elementosFormulas = elementosFormulasUnAtributos;\n            copiaAntiguaFormulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n            atributos = atributosUnico;\n        }\n        elementosFormulas.splice(index, 1);\n        copiaAntiguaFormulas.splice(index, 1);\n        reglas.splice(index, 1);\n        segmentoRegla.splice(index, 1);\n        atributos.splice(index, 1);\n        this.setState({\n            atributos: atributos\n        });\n    }\n\n    modificarNombreVariable(index) {\n        var copyAtributos = [...this.state.atributos];\n        copyAtributos[index].nombre = $(\"#nombreAtributo\"+index).val();\n        if(!this.tieneEspaciosEnBlanco(copyAtributos[index].nombre)) {\n            this.setState({\n                atributos: copyAtributos\n            });\n        } else {\n            this.props.showMessage(\"Error\", \"El nombre del atributo no debe contener espacios en blanco.\", true, false, {});\n        }\n    }\n\n    crearVariableSQL () {\n        var nombreCampo = $(\"#nuevoCampo\").val();\n        var tipo = $(\"#tipo\").val();\n        if(nombreCampo.length > 0 && nombreCampo.length < 101) {\n            if(!this.tieneEspaciosEnBlanco(nombreCampo)) {\n                if(this.verificarNoExisteNombreCampo(nombreCampo)) {\n                    if(tipo.length < 101) {\n                        var nuevaVar = {nombre: nombreCampo, tipo: tipo};\n                        variablesSQL.push(nuevaVar);\n                        this.setState({\n                            camposInstruccionSQL: variablesSQL\n                        });\n                        $(\"#nuevoCampo\").val(\"\");\n                        $(\"#tipo\").val(\"varchar\");\n                    } else {\n                        this.props.showMessage(\"Error\", \"El tipo del campo debe tener una longitud menor a 31 caracteres.\", true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", \"El nombre del campo debe ser unico.\", true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"El nombre del campo no debe contener espacios en blanco.\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Ingrese un valor para el nombre del campo debe tener una longitud menor a 101 caracteres.\", true, false, {});\n        }\n    }\n\n    crearInstruccionSQL () {\n        var instruccionSQLN = $(\"#comandoSQL\").val();\n        if(instruccionSQLN.length < 101) {\n            instruccionSQL = instruccionSQLN;\n            this.setState({\n                comandoSQL: instruccionSQL\n            });\n            this.props.showSuccesMessage(\"Éxito\", 'Instrucción Guardada.');\n        } else {\n            this.props.showMessage(\"Error\", \"El nombre del campo debe tener una longitud menor a 101 caracteres.\", true, false, {});\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if( valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIEMPO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    if(!esFormula) {\n                        if(campoSeleccionado.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        var esValorManual = false;\n                        if(campoSeleccionado.tablaID != undefined && campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != undefined && campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != undefined && campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != undefined && campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        } else if(campoSeleccionado.esValorManual != undefined) {\n                            esValorManual = campoSeleccionado.esValorManual;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID,\n                                esValorManual: esValorManual\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta añadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta añadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = 0;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        var elementosFormulas;\n                        if(banderaEsObjeto) {\n                            elementosFormulas = elementosFormulasVariosAtributos;\n                        } else {\n                            elementosFormulas = elementosFormulasUnAtributos;\n                        }\n                        var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                        for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                            if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"ASIG\") == 0)\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MAX\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MIN\") == 0)\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"AUTOSUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"SUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"COUNT\") == 0)\n                                tipoNuevaAsig = 'int'\n                            else\n                                tipoNuevaAsig = 'decimal'\n                            break;\n                        };\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        //if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                        if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) ) {\n                            var nuevoNivel = 0;\n                            var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            var esValorManual = false;\n                            if(formulaSeleccionada.tablaID != undefined && formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != undefined && formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != undefined && formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != undefined && formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            } else if(formulaSeleccionada.esValorManual != undefined) {\n                                esValorManual = formulaSeleccionada.esValorManual;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID,\n                                    esValorManual: esValorManual\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            formulaSeleccionada = null;\n                            //if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoNuevaAsig\n                                });\n                            //}\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            //tipoDeAsignacionSeleccionado = '';\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                this.props.showMessage(\"Error\", \"El tipo de asignacion de formula no coincide el tipo de campo.\", true, false, {});\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado != null && campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparación';\n                    this.props.showMessage(\"Error\", \"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\", true, false, {});\n                }\n            } else {\n                this.props.showMessage(\"Error\", \"Seleccione una posición en la 'Lógica para el cálculo'\", true, false, {});\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                this.props.showMessage(\"Error\", \"Ingrese todos los campos necesarios para la condicion.\", true, false, {});\n            else if(!reglaEsValida && esFormula)\n                this.props.showMessage(\"Error\", \"Seleccione una formula.\", true, false, {});\n            else\n                this.props.showMessage(\"Error\", \"La comparación ya tiene una clausula 'SINO'\", true, false, {});\n        }\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            console.log(\"111\");\n            console.log(\"i = \"+i);\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                console.log(\"YEAH\");\n                console.log(\"i = \"+i);\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n                console.log(\"YEAH 2\");\n                console.log('elementosFormulas[posicionSel][posicionFormulaEnCampo]');\n                console.log(elementosFormulas[posicionSel][posicionFormulaEnCampo]);\n            }\n        };*/\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                var esValorManual = false;\n                if(formulaArreglo[i].esValorManual != undefined)\n                    esValorManual = formulaArreglo[i].esValorManual;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    esValorManual: esValorManual,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: formulaArreglo[i].tipoOriginal,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIEMPO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        if(!esFormula) {\n                            if(campoSeleccionado.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            campoSeleccionado = null;\n                            valorSeleccionado = '';\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var elementosFormulas;\n                            if(banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                            }\n                            var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                            for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                                if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"ASIG\") == 0)\n                                    tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MAX\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MIN\") == 0)\n                                    tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"AUTOSUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"SUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"COUNT\") == 0)\n                                    tipoNuevaAsig = 'int'\n                                else\n                                    tipoNuevaAsig = 'decimal'\n                                break;\n                            };\n                            //verificando que si modifica con un tipoDeAsignacionSeleccionado diferente al existente, que pueda entrar y actualizar tipo, si existe mas de una formula no se puede\n                            var existeSoloUnaFormula = false, contadorFormulas = 0;\n                            ForReglas:\n                            for (var i = 0; i < reglas[posicionSel].length; i++) {\n                                for (var j = 0; j < reglas[posicionSel][i].length; j++) {\n                                    if(!reglas[posicionSel][i][j].esCondicion) {\n                                        contadorFormulas++;\n                                    }\n                                };\n                            };\n                            if(contadorFormulas == 1) {\n                                existeSoloUnaFormula = true;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                            if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) || existeSoloUnaFormula ) {\n                                var nuevoNivel = 0;\n                                if(banderaEsObjeto) {\n                                    nuevoNivel = nivelNuevoAtributoVarios;\n                                } else {\n                                    nuevoNivel = nivelNuevoAtributoUnico;\n                                }\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta añadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta añadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(formulaSeleccionada.tablaID != undefined) {\n                                    conexionTablaID = formulaSeleccionada.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = formulaSeleccionada.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                });\n                                formulaSeleccionada = null;\n                                //if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoNuevaAsig\n                                    });\n                                //}\n                                //tipoDeAsignacionSeleccionado = '';\n                                if (banderaEsObjeto) {\n                                    reglasVariosAtributos = reglas;\n                                    segmentoReglasVariosAtributos = segmentoRegla;\n                                } else {\n                                    reglasUnAtributo = reglas;\n                                    segmentoReglasUnAtributo = segmentoRegla;\n                                }\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    this.props.showMessage(\"Error\", \"El tipo de asignacion de formula no coincide el tipo de campo.\", true, false, {});\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparación';\n                        this.props.showMessage(\"Error\", \"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\", true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", \"Seleccione una posición en la 'Lógica para el cálculo'\", true, false, {});\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    this.props.showMessage(\"Error\", \"Ingrese todos los campos necesarios para la condicion.\", true, false, {});\n                else if(!reglaEsValida && esFormula)\n                    this.props.showMessage(\"Error\", \"Seleccione una formula.\", true, false, {});\n                else\n                    this.props.showMessage(\"Error\", \"La comparación ya tiene una clausula 'SINO'\", true, false, {});\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Cree una comparación primero\", true, false, {});\n        }\n    }\n\n    eliminarRegla () {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            if (banderaEsObjeto) {\n                reglasVariosAtributos = reglas;\n                segmentoReglasVariosAtributos = segmentoRegla;\n            } else {\n                reglasUnAtributo = reglas;\n                segmentoReglasUnAtributo = segmentoRegla;\n            }\n        } else {\n            this.props.showMessage(\"Error\", \"Cree una comparación primero\", true, false, {});\n        }\n    }\n\n    modificarFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        copiaAntiguaFormulas[posicionSel][indiceFormulaSeleccionadaEdit] = formula;\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n    }\n\n    eliminarFormula() {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        copiaAntiguaFormulas[posicionSel].splice(indiceFormulaSeleccionadaEdit, 1);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        elementosFormulas[posicionSel].splice(posicionFormulaEnCampo, 1);\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        if(banderaEsObjeto) {\n            tipoDeAsignacionSeleccionadoVarios = tipoVariable;\n            tipoDeAsignacionSeleccionado = tipoVariable;\n        } else {\n            tipoDeAsignacionSeleccionadoUnico = tipoVariable;\n            tipoDeAsignacionSeleccionado = tipoVariable;\n        }\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        //indice = indice de regla dentro de arreglo de reglas\n        //tipoElemento = si la seleccion en el contenedor de reglas es cursor arriba, cursor abajo, y otra regla o otra formula\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarEstadoSiEsObjeto (esObjeto) {\n        banderaEsObjeto = esObjeto;\n        if(banderaEsObjeto) {\n            tipoDeAsignacionSeleccionado = tipoDeAsignacionSeleccionadoVarios;\n        } else {\n            tipoDeAsignacionSeleccionado = tipoDeAsignacionSeleccionadoUnico;\n        }\n        this.setState({\n            tipoNuevaVariable: tipoDeAsignacionSeleccionado\n        });\n    }\n\n    actualizarEstadoSiEsInstruccionSQL (esObjeto) {\n        banderaEsInstruccionSQL = esObjeto;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(banderaEsObjeto) {\n            if(nivelNuevoAtributoVarios < nivel)\n                nivelNuevoAtributoVarios = nivel;\n        } else {\n            if(nivelNuevoAtributoUnico < nivel)\n                nivelNuevoAtributoUnico = nivel;\n        }\n    }\n\n    actualizarSeleccionFormula (formula, indice) {\n        if(formula != null) {\n            var condicionFormula = \" ID = \"+formula.ID, condicionElemento = \" formulaID = \"+formula.ID;\n            this.setState({\n                formulaSeleccionadaEdit: formula,\n                condicionFormula: condicionFormula,\n                condicionElemento: condicionElemento\n            });\n            indiceFormulaSeleccionadaEdit =  indice;\n        } else {\n            //\n        }\n    }\n\n    actualizarIdFormula () {\n        var idFormulaN = $(\"#idFormula\").val();\n        idFormula = idFormulaN;\n    }\n\n    actualizarNombreVariable () {\n        var nombreVariableN = $(\"#nombreFuenteDato\").val();\n        nombreVariable = nombreVariableN;\n    }\n\n    actualizarDescripcionVariable () {\n        var descripcionVariableN = $(\"#descripcionFuenteDato\").val();\n        descripcionVariable = descripcionVariableN;\n    }\n\n    actualizarNombreCampoNuevoAtributosVario () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributosVario = nombreCampo;\n    }\n\n    actualizarFechaInicio (fecha) {\n        fechaInicioVariable = fecha;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        periodicidadVariable = periodicidad;\n    }\n\n    actualizarNombreEncargado () {\n        var responsable = $(\"#responsable\").val();\n        responsableVariable = responsable;\n    }\n\n    actualizarCategoriaVariable () {\n        var categoria = $(\"#categoriaVariable\").val();\n        categoriaVariable = categoria;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MÁXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MÍNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            variables: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            excel: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            formas: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (idFormula) {\n        var noExiste = true;\n        for (var i = 0; i < this.state.variables.length; i++) {\n            if (this.state.variables[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                noExiste = false;\n                break;\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < this.state.excel.length; i++) {\n                if (this.state.excel[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < this.state.formas.length; i++) {\n                if (this.state.formas[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < variablesSQL.length; i++) {\n                if (variablesSQL[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        } else {\n            for (var i = 0; i < atributosVario.length; i++) {\n                if (atributosVario[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarCampoSQL (index, nombreN, tipoN) {\n        var tempCopy = [...variablesSQL];\n        tempCopy[index].nombre = nombreN;\n        tempCopy[index].tipo = tipoN;\n        if(!this.tieneEspaciosEnBlanco(tempCopy[index].nombre)) {\n            this.setState({\n                camposInstruccionSQL: tempCopy\n            });\n        } else {\n            this.props.showMessage(\"Error\", \"El nombre del campo no debe contener espacios en blanco.\", true, false, {});\n        }\n    }\n\n    eliminarCampoSQL (index) {\n        var tempCopy = [...variablesSQL];\n        tempCopy.splice(index, 1);\n        variablesSQL.splice(index, 1);\n        this.setState({\n            camposInstruccionSQL: tempCopy\n        });\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    saveBitacora (fecha, descripcion, tipoVariable, idVariable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Bitacora (usuarioID, nombreUsuario, fecha, descripcion, tipoVariable, idVariable) values (\"+this.props.userID+\", '\"+this.props.userName+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+descripcion+\"', '\"+tipoVariable+\"', \"+idVariable+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.props.showMessage(\"Error\", 'No se pudo guardar información de bitacora.', true, false, {});\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    \n    render() {\n        if(this.state.componenteActual.localeCompare(\"crearVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <CrearVariable pool={this.props.pool}\n                                                terminoCrearCampo={this.props.terminoCrearCampo}\n                                                columnas={this.props.columnas}\n                                                atributos={this.state.atributos}\n                                                cambioDeArreglosDeAtributos={this.cambioDeArreglosDeAtributos}\n                                                idFormula={idFormula}\n                                                nombreVariable={nombreVariable}\n                                                tipoNuevaVariable={this.state.tipoNuevaVariable}\n                                                actualizarIdFormula={this.actualizarIdFormula}\n                                                actualizarNombreVariable={this.actualizarNombreVariable}\n                                                descripcionVariable={descripcionVariable}\n                                                actualizarDescripcionVariable={this.actualizarDescripcionVariable}\n                                                nombreCampoNuevoAtributosVario={nombreCampoNuevoAtributosVario}\n                                                actualizarNombreCampoNuevoAtributosVario={this.actualizarNombreCampoNuevoAtributosVario}\n                                                actualizarEstadoSiEsObjeto={this.actualizarEstadoSiEsObjeto}\n                                                actualizarEstadoSiEsInstruccionSQL={this.actualizarEstadoSiEsInstruccionSQL}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                goToCreateConditions={this.goToCreateConditions}\n                                                goCreateVariableFieldSQL={this.goCreateVariableFieldSQL}\n                                                guardarVariable={this.guardarVariable}\n                                                crearAtributoVariable={this.crearAtributoVariable}\n                                                eliminarAtributoVariable={this.eliminarAtributoVariable}\n                                                modificarNombreVariable={this.modificarNombreVariable}\n                                                actualizarFechaInicio={this.actualizarFechaInicio}\n                                                actualizarPeriodicidad={this.actualizarPeriodicidad}\n                                                actualizarNombreEncargado={this.actualizarNombreEncargado}\n                                                actualizarCategoriaVariable={this.actualizarCategoriaVariable}\n                                                fechaInicioVariable={fechaInicioVariable}\n                                                periodicidadVariable={periodicidadVariable}\n                                                responsableVariable={responsableVariable}\n                                                categoriaVariable={categoriaVariable}\n                                                getVariables={this.getVariables}\n                                                getExcel={this.getExcel}\n                                                getFormas={this.getFormas}>\n                    </CrearVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                actualizarSeleccionFormula={this.actualizarSeleccionFormula}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormula}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                eliminarFormula={this.eliminarFormula}\n                                                esEditarVar={false}\n                                                tablaBorrarFormulas={\"FormulasVariablesCampos\"}\n                                                tablaBorrarElementos={\"ElementoFormulasVariablesCampos\"}\n                                                condicionFormula={this.state.condicionFormula}\n                                                condicionElemento={this.state.condicionElemento}\n                                                showSuccesMessage={this.props.showSuccesMessage}\n                                                showMessage={this.props.showMessage}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            esEditarVar={this.state.esEditarVar}\n                                            esOperacionSQL={this.state.esOperacionSQL}\n                                            operacionSQL={this.state.operacionSQL}\n                                            formulaSeleccionadaEdit={this.state.formulaSeleccionadaEdit}\n                                            anadirFormula={this.anadirFormula}\n                                            modificarFormula={this.modificarFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}\n                                            showSuccesMessage={this.props.showSuccesMessage}\n                                            showMessage={this.props.showMessage}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableSQL\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionSQL pool={this.props.pool}\n                                            variableID={this.state.variableID}\n                                            nombreVariable={this.state.nombreVariable}\n                                            camposInstruccionSQL={this.state.camposInstruccionSQL}\n                                            comandoSQL={this.state.comandoSQL}\n                                            agregarCampo={this.crearVariableSQL}\n                                            agregarInstruccionSQL={this.crearInstruccionSQL}\n                                            actualizarCampo={this.actualizarCampoSQL}\n                                            eliminarCampo={this.eliminarCampoSQL}\n                                            navbar={this.state.navbar}\n                                            showSuccesMessage={this.props.showSuccesMessage}\n                                            showMessage={this.props.showMessage}>\n                    </InstruccionSQL>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CrearVariablesHome.js"}