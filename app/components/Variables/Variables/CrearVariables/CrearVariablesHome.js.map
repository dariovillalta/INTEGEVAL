{"version":3,"sources":["components/Variables/Variables/CrearVariables/CrearVariablesHome.js"],"names":["campoSeleccionado","valorSeleccionado","valorSeleccionadoTexto","operacionSeleccionada","objetoConexionSeleccionada","tipoDeAsignacionSeleccionado","nivelNuevoAtributoVarios","nivelNuevoAtributoUnico","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","posicionAtributoSeleccionado","indiceSeleccionadoFormula","nombreVariable","descripcionVariable","fechaInicioVariable","periodicidadVariable","analistaVariable","nombreCampoNuevoAtributosVario","atributosVario","reglasVariosAtributos","segmentoReglasVariosAtributos","formulasVariosAtributos","elementosFormulasVariosAtributos","atributosUnico","reglasUnAtributo","segmentoReglasUnAtributo","formulasUnAtributo","elementosFormulasUnAtributos","variablesSQL","instruccionSQL","banderaEsObjeto","banderaEsInstruccionSQL","contadorObjetosAGuardar","contadorObjetosGuardados","CrearVariablesHome","props","state","componenteActual","atributos","reglas","formulas","esCondicion","navbar","tipoNuevaVariable","camposInstruccionSQL","comandoSQL","variables","excel","formas","loadRules","bind","sortRules","returnToCreateVariable","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormula","goCreateVariableFieldSQL","createVariable","getVariableID","createVariableSQL","createInstructionSQL","createVariableField","getVariableFieldID","createVariableFieldRuleSegments","getVariableFieldRuleSegments","createVariableFieldRules","traerRegla","createVariableFieldFormula","getVariableFieldFormulaID","createVariableFieldFormulaElement","retornarCampo","actualizarCondicion","cambioDeArreglosDeAtributos","guardarVariable","guardarVariableSQL","guardarVariableUnAtributo","guardarVariableVariosAtributo","crearAtributoVariable","crearVariableSQL","crearInstruccionSQL","anadirRegla","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","retornoCampoFormula","retornoCampoCondicion","retornarValor","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarEstadoSiEsObjeto","actualizarEstadoSiEsInstruccionSQL","actualizarNivelNuevaRegla","actualizarNombreVariable","actualizarDescripcionVariable","actualizarFechaInicio","actualizarPeriodicidad","actualizarNombreEncargado","actualizarNombreCampoNuevoAtributosVario","retornarCodigoOperacion","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","verificarNoExisteNombreCampo","actualizarCampoSQL","eliminarCampoSQL","isValidDate","tempCopy","i","length","setState","indice","configuracionHome","goOptions","retornoSeleccionVariables","posicionSel","undefined","variable","campos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","nombre","descripcion","esObjeto","objetoPadreID","esInstruccionSQL","guardar","periodicidad","analista","fechaInicioCalculo","getFullYear","getMonth","getDate","result","console","log","rollback","commit","alert","$","val","segmentoRegla","elementosFormulas","recordset","tipo","ID","limpiarArreglos","variableCampo","posicionAtributo","nivel","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","push","posicionFormulaEnCampo","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","segmento","posicionSegmento","conexionTablaID","variableID","excelArchivoID","excelVariableID","formaVariableID","esConexionTabla","nivelMax","splice","k","segmentoReglaID","formulaID","regla","posicionRegla","reglaPadreID","nombreColumnaEnTabla","tipoCampoObjetivo","operacion","operacionTexto","valor","texto","formula","posicionFormula","existenSegmentos","elemento","posicionElemento","esFuenteDeDato","elementoVariableID","elementoVariableCampoID","tipoColumnaEnTabla","campoNuevo","campoNuevoTexto","is","guardarResultadosEnBaseDatos","nuevoNivel","localeCompare","Date","datepicker","isNaN","nuevaVariable","nuevoAtributo","nombreAtributo","arreglo","nombreCampo","nuevaVar","instruccionSQLN","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","nivelABuscar","reglaEsValida","indexOf","entrarACrearRegla","tablaID","variableSel","filter","object","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevaRegla","variableCampoID","posicionAInsertar","tempNewCopy","self","setTimeout","texto2","formulaArreglo","copiaAntiguaFormulas","numeroDeFormulaDeVariable","arregloDeElementos","array","Array","isArray","esFuenteDato","tipoOriginal","tipoVariable","campo","indiceSegmento","indiceRegla","tipoElemento","nombreVariableN","descripcionVariableN","fecha","codigo","noExiste","toLowerCase","index","nombreN","tipoN","Object","prototype","toString","call","getTime","width","height","terminoCrearCampo","columnas","nombreTablaSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport CrearVariable from './CrearVariable.js';\nimport InstruccionVariable from '../../../InstruccionVariable.js';\nimport Formula from '../../../Formula.js';\nimport InstruccionSQL from './InstruccionSQL.js';\n\nvar campoSeleccionado, valorSeleccionado, valorSeleccionadoTexto, operacionSeleccionada, objetoConexionSeleccionada;\nvar tipoDeAsignacionSeleccionado = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\n\n/*COMPONENTE PARA MANEJRA CAMBIO DE VISTA ENTRE CREAR VARIABLE Y VISTA DE CONDICIONES / INSTRUCIONES*/\n/*MANEJA TODA LA LOGICA CREAR FUENTE DATO VARIABLE (OBJETO)*/\n\n/*              ARREGLO DE ATRIBUTOS               */\n/* CADA POSICION REPRESENTA UN CAMPO / ATRIBUTO / COLUMNA */\n/*\n    [ {nombre: \"IDCLIENTE\"}, {nombre: \"NOMBRECLIENTE\"} ]\n*/\n\n/*              ARREGLO DE SEGMENTO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA CONDICION IF PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}], [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}] ]\n*/\n\n/*              ARREGLO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA REGLA PERTENECIENTE AL SEGMENTO DE REGLAS CORRESPONDIENTE A LA POSICION DEL SEGMENTO DE REGLAS DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{esCondicion: FALSE}], [{esCondicion: TRUE, esCondicion: FALSE}]], [[{esCondicion: FALSE}], [{esCondicion: FALSE}]] ]\n*/\n\n/*              ARREGLO DE FORMULAS               */\n/* CADA POSICION REPRESENTA UNA FORMULA PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{formula: \"x + y\"}, {formula: \"2x + 2y\"}], [{formula: \"3x + 3y\"}] ]\n*/\n\n/*              ARREGLO DE ELEMENTOS DE FORMULAS               */\n/* CADA POSICION REPRESENTA UN ELEMENTO DE FORMULA PERTENECIENTE A LA FORMULA CORRESPONDIENTE A LA POSICION DE LA FORMULA DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{formula: \"sum(saldo)\"}, {formula: \"asig(impuesto)\"}], []], [[{formula: \"sum(saldo)\"}], []] ]\n*/\n\nvar nivelNuevoAtributoVarios = 0;                   //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar nivelNuevoAtributoUnico = 0;                    //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar indiceSeleccionadoSegmentoReglas = -1;          //indice seleccionado del segmento al que pertenece la regla\nvar indiceSeleccionadoReglas = -1;                  //indice seleccionado de la regla dentro del segmento\nvar tipoElementoSeleccionadoRegla = '';             //tipo de seleccion de cursor de regla: esOtraRegla, arriba, abajo\nvar posicionAtributoSeleccionado = -1;              //posicion del arreglo donde se debe insertar el siguiente atributo / campo /  columna (para controlar cuando se agrega condiciones / instrucciones a un nuevo atributo)\nvar indiceSeleccionadoFormula = -1;                 //indice seleccionado formula\n\nvar nombreVariable = '';\nvar descripcionVariable = '';\nvar fechaInicioVariable = '';\nvar periodicidadVariable = '';\nvar analistaVariable = '';\n\nvar nombreCampoNuevoAtributosVario = '';\nvar atributosVario = [];\nvar reglasVariosAtributos = [];\nvar segmentoReglasVariosAtributos = [];\nvar formulasVariosAtributos = [];\nvar elementosFormulasVariosAtributos = [];\nvar atributosUnico = [];\nvar reglasUnAtributo = [];\nvar segmentoReglasUnAtributo = [];\nvar formulasUnAtributo = [];\nvar elementosFormulasUnAtributos = [];\n\nvar variablesSQL = [];\nvar instruccionSQL = '';\n\nvar banderaEsObjeto = true;                                //bandera para saber si la variable actual es objeto o no a traves de las diferentes vistas / componentes\nvar banderaEsInstruccionSQL = true;                                //bandera para saber si la variable actual es instruccion SQL o no a traves de las diferentes vistas / componentes\n\nvar contadorObjetosAGuardar = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\nvar contadorObjetosGuardados = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\n\nexport default class CrearVariablesHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'crearVariable',\n            atributos: [],\n            reglas: [],\n            formulas: [],\n            esCondicion: true,                             //bandera para estado de nueva regla / instruccion, saber si es nueva comparacion o regla / instruccion = verdadero; si es falso = es nueva formula / asignacion\n            navbar: \"\",\n            tipoNuevaVariable: tipoDeAsignacionSeleccionado,\n            camposInstruccionSQL: [],\n            comandoSQL: \"\",\n            variables: [],\n            excel: [],\n            formas: []\n        }\n        this.loadRules = this.loadRules.bind(this);\n        this.sortRules = this.sortRules.bind(this);\n        this.returnToCreateVariable = this.returnToCreateVariable.bind(this);\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCreateVariableFieldSQL = this.goCreateVariableFieldSQL.bind(this);\n        this.createVariable = this.createVariable.bind(this);\n        this.getVariableID = this.getVariableID.bind(this);\n        this.createVariableSQL = this.createVariableSQL.bind(this);\n        this.createInstructionSQL = this.createInstructionSQL.bind(this);\n        this.createVariableField = this.createVariableField.bind(this);\n        this.getVariableFieldID = this.getVariableFieldID.bind(this);\n        this.createVariableFieldRuleSegments = this.createVariableFieldRuleSegments.bind(this);\n        this.getVariableFieldRuleSegments = this.getVariableFieldRuleSegments.bind(this);\n        this.createVariableFieldRules = this.createVariableFieldRules.bind(this);\n        this.traerRegla = this.traerRegla.bind(this);\n        this.createVariableFieldFormula = this.createVariableFieldFormula.bind(this);\n        this.getVariableFieldFormulaID = this.getVariableFieldFormulaID.bind(this);\n        this.createVariableFieldFormulaElement = this.createVariableFieldFormulaElement.bind(this);\n        this.retornarCampo = this.retornarCampo.bind(this);\n        this.actualizarCondicion = this.actualizarCondicion.bind(this);\n        this.cambioDeArreglosDeAtributos = this.cambioDeArreglosDeAtributos.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.guardarVariableSQL = this.guardarVariableSQL.bind(this);\n        this.guardarVariableUnAtributo = this.guardarVariableUnAtributo.bind(this);\n        this.guardarVariableVariosAtributo = this.guardarVariableVariosAtributo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.crearVariableSQL = this.crearVariableSQL.bind(this);\n        this.crearInstruccionSQL = this.crearInstruccionSQL.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarEstadoSiEsObjeto = this.actualizarEstadoSiEsObjeto.bind(this);\n        this.actualizarEstadoSiEsInstruccionSQL = this.actualizarEstadoSiEsInstruccionSQL.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarNombreVariable = this.actualizarNombreVariable.bind(this);\n        this.actualizarDescripcionVariable = this.actualizarDescripcionVariable.bind(this);\n        this.actualizarFechaInicio = this.actualizarFechaInicio.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.actualizarNombreEncargado = this.actualizarNombreEncargado.bind(this);\n        this.actualizarNombreCampoNuevoAtributosVario = this.actualizarNombreCampoNuevoAtributosVario.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.actualizarCampoSQL = this.actualizarCampoSQL.bind(this);\n        this.eliminarCampoSQL = this.eliminarCampoSQL.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n    }\n\n    componentDidMount () {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n    }\n\n    loadRules() {\n        //FINISH\n        this.sortRules();\n    }\n\n    sortRules() {\n        var tempCopy = [...this.state.reglas];\n        for (var i = 0; i < tempCopy.length; i++) {\n            tempCopy[i]\n        };\n    }\n\n    returnToCreateVariable () {\n        this.setState({\n            componenteActual: \"crearVariable\"\n        });\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var formulas, reglas;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(banderaEsObjeto) {\n            formulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n        } else {\n            formulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormula (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar\n        });\n    }\n\n    goCreateVariableFieldSQL () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Instruccin SQL</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"variableSQL\",\n        });\n    }\n\n    createVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Variables (nombre, descripcion, esObjeto, objetoPadreID, esInstruccionSQL, guardar, periodicidad, analista, fechaInicioCalculo) values ('\"+variable.nombre+\"', '\"+variable.descripcion+\"', '\"+variable.esObjeto+\"', \"+variable.objetoPadreID+\", '\"+variable.esInstruccionSQL+\"', '\"+variable.guardar+\"', '\"+variable.periodicidad+\"', '\"+variable.analista+\"', '\"+variable.fechaInicioCalculo.getFullYear()+\"-\"+variable.fechaInicioCalculo.getMonth()+\"-\"+variable.fechaInicioCalculo.getDate()+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable creada.\");\n                        nombreVariable = '';\n                        descripcionVariable = '';\n                        $(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");\n                        contadorObjetosGuardados++;\n                        var formulas, segmentoRegla, reglas, elementosFormulas;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                            reglas = reglasVariosAtributos;\n                            elementosFormulas = elementosFormulasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                            reglas = reglasUnAtributo;\n                            elementosFormulas = elementosFormulasUnAtributos;\n                        }\n                        console.log('formulas');\n                        console.log(formulas);\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        console.log('reglas');\n                        console.log(reglas);\n                        console.log('elementosFormulas');\n                        console.log(elementosFormulas);\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableID (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Variables order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(banderaEsInstruccionSQL) {\n                                this.createVariableSQL(result.recordset[0]);\n                            } else {\n                                for (var i = 0; i < campos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableField(result.recordset[0], campos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableSQL (variable) {\n        for (let i = 0; i < variablesSQL.length; i++) {\n            let nombre = variablesSQL[i].nombre;\n            let tipo = variablesSQL[i].tipo;\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into InstruccionSQLCampos (variableID, nombre, tipo) values (\"+variable.ID+\", '\"+nombre+\"', '\"+tipo+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(i == variablesSQL.length-1)\n                                this.createInstructionSQL(variable);\n                        });\n                    }\n                });\n            }); // fin transaction\n        };\n    }\n\n    createInstructionSQL (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into InstruccionSQL (variableID, instruccionSQL) values (\"+variable.ID+\", '\"+instruccionSQL+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.limpiarArreglos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableField (variable, variableCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into VariablesCampos (variableID, nombre, tipo, nivel) values (\"+variable.ID+\", '\"+variableCampo.nombre+\"', '\"+variableCampo.tipo+\"', \"+variableCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldID(variable, variableCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldID (variable, variableCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where nombre = '\"+variableCampo.nombre+\"' and variableID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(variable, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(variable, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            console.log('HOLA 1');\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        //los campos variableID y variableCampoID se ponen luego de la creacion e importacion\n        //el campo variableIDCreacionCodigo es el variableID de segmento asignado al crear reglas\n        console.log('=============    3');\n        console.log('Crear Segmento');\n        console.log('variable');\n        console.log(variable);\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionSegmento');\n        console.log(posicionSegmento);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasVariables (conexionTablaID, variableID, variableCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasVariables where conexionTablaID = \"+segmento.conexionTablaID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and variableIDCreacionCodigo = \"+segmento.variableID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                console.log('formulas')\n                                console.log(formulas)\n                                console.log('reglas')\n                                console.log(reglas)\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        console.log('ENCONTRO')\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 2');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    createVariableFieldRules (variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('=============    4');\n        console.log('Crear Regla');\n        console.log('variable');\n        console.log(variable);\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionSegmento');\n        console.log(posicionSegmento);\n        console.log('posicionRegla');\n        console.log(posicionRegla);\n        if(regla != undefined) {\n            console.log('variable');\n            console.log(variable);\n            console.log('variableCampo');\n            console.log(variableCampo);\n            console.log('segmento');\n            console.log(segmento);\n            console.log('regla');\n            console.log(regla);\n            console.log('posicionAtributo');\n            console.log(posicionAtributo);\n            console.log('posicionSegmento');\n            console.log(posicionSegmento);\n            console.log('posicionRegla');\n            console.log(posicionRegla);\n            console.log('reglaPadreID');\n            console.log(reglaPadreID);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasVariables (segmentoReglaID, variableID, variableCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmentoEnCampo, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 3');\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            console.log('HOLA 4');\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('=============   5');\n        console.log('variable');\n        console.log(variable);\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasVariables where segmentoReglaID = \"+segmento.ID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            console.log('posicionAtributo');\n                            console.log(posicionAtributo);\n                            console.log('posicionSegmento');\n                            console.log(posicionSegmento);\n                            console.log('posicionRegla+1');\n                            console.log(posicionRegla+1);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('result.recordset');\n                            console.log(result.recordset[0]);\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                console.log('HOLA 5');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        console.log('=============   1');\n        console.log('Crear Formula');\n        console.log('variable');\n        console.log(variable);\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('formula');\n        console.log(formula);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionFormula');\n        console.log(posicionFormula);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasVariablesCampos (variableID, variableCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var elementosFormulas, segmentoRegla, formulas;\n                            if (banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(variable, variableCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 6');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (variable, variableCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        //if(elemento != undefined) {\n        console.log('=============    2');\n        console.log('Crear Elemento Formula');\n        console.log('variable');\n        console.log(variable);\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('formula');\n        console.log(formula);\n        console.log('elemento');\n        console.log(elemento);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionFormula');\n        console.log(posicionFormula);\n        console.log('posicionElemento');\n        console.log(posicionElemento);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ElementoFormulasVariablesCampos (variableID, variableCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID , excelVariableID , formaVariableID , elementoVariableID, elementoVariableCampoID, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            /*var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                                for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                    if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                        arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                        if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                            arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 7');\n                                this.limpiarArreglos();\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        /*} else {\n            console.log('HOLA 8');\n            this.limpiarArreglos();\n        }*/\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            console.log(\"BORRRO\")\n            nivelNuevoAtributoVarios = 0;\n            nivelNuevoAtributoUnico = 0;\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n            posicionAtributoSeleccionado = -1;\n            indiceSeleccionadoFormula = -1;\n\n            atributosVario = [];\n            reglasVariosAtributos = [];\n            segmentoReglasVariosAtributos = [];\n            formulasVariosAtributos = [];\n            elementosFormulasVariosAtributos = [];\n            atributosUnico = [];\n            reglasUnAtributo = [];\n            segmentoReglasUnAtributo = [];\n            formulasUnAtributo = [];\n            elementosFormulasUnAtributos = [];\n\n            tipoDeAsignacionSeleccionado = '';\n\n            variablesSQL = [];\n            instruccionSQL = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                formulas: [],\n                camposInstruccionSQL: [],\n                comandoSQL: \"\",\n                tipoNuevaVariable: \"\"\n            });\n\n            this.getVariables();\n            //this.getExcel();\n            //this.getFormas();\n        }\n    }\n\n    retornarCampo (campoNuevo) {\n        campoSeleccionado = campoNuevo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    actualizarCondicion (esCondicion) {\n        this.setState({\n            esCondicion: esCondicion\n        });\n    }\n\n    cambioDeArreglosDeAtributos () {\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        if (esObjeto) {\n            this.setState({\n                atributos: atributosVario\n            });\n        } else {\n            this.setState({\n                atributos: atributosUnico\n            });\n        }\n    }\n\n    guardarVariable() {\n        contadorObjetosGuardados = 0;\n        contadorObjetosAGuardar = 0;\n        if (banderaEsInstruccionSQL) {\n            this.guardarVariableSQL();\n        } else if (!banderaEsObjeto) {\n            this.guardarVariableUnAtributo();\n        } else {\n            this.guardarVariableVariosAtributo();\n        }\n    }\n\n    guardarVariableSQL () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var analista = $(\"#analista\").val();\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if (this.verificarNoExisteNombreVar(nombreVariable)) {\n                if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                    if(esObjeto != undefined) {\n                        if(guardarResultadosEnBaseDatos != undefined) {\n                            if(esInstruccionSQL != undefined) {\n                                if(!isNaN(objetoPadreID)) {\n                                    if(periodicidad.length > 0) {\n                                        if(this.isValidDate(fechaInicioCalculo) ) {\n                                            if(analista.length > 0) {\n                                                if(!isNaN(nuevoNivel)) {\n                                                    if(variablesSQL.length > 0) {\n                                                        if(instruccionSQL.length > 0) {\n                                                            var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, analista: analista};\n                                                            this.createVariable(nuevaVariable);\n                                                            contadorObjetosAGuardar++;\n                                                        } else {\n                                                            alert(\"Cree una instruccin SQL.\");\n                                                        }\n                                                    } else {\n                                                        alert(\"Cree una variable SQL.\");\n                                                    }\n                                                } else {\n                                                    alert(\"Seleccione un nivel para el campo.\");\n                                                }\n                                            } else {\n                                                alert(\"Ingrese un valor para el analista.\");\n                                            }\n                                        } else {\n                                            alert(\"Ingrese una fecha vlida para el inicio de clculo.\");\n                                        }\n                                    } else {\n                                        alert(\"Ingrese un valor para la periodicidad.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si guardar o no variable.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre de la variable debe ser unico.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    guardarVariableUnAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var analista = $(\"#analista\").val();\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if (this.verificarNoExisteNombreVar(nombreVariable)) {\n                if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                    if(esObjeto != undefined) {\n                        if(guardarResultadosEnBaseDatos != undefined) {\n                            if(esInstruccionSQL != undefined) {\n                                if(!isNaN(objetoPadreID)) {\n                                    if(periodicidad.length > 0) {\n                                        if(this.isValidDate(fechaInicioCalculo) ) {\n                                            if(analista.length > 0) {\n                                                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                                                    if(!isNaN(nuevoNivel)) {\n                                                        var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                                        //si la formula ya fue asignada, no agregar tipo\n                                                        /*if(atributosUnico[0].tipo == undefined) {\n                                                            nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                                        } else {\n                                                            nuevoAtributo = atributosUnico[0];\n                                                            nuevoAtributo.nombre = nombreVariable;\n                                                            nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                                            nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                                        }*/\n                                                        var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, analista: analista};\n                                                        //nivelNuevoAtributoUnico = 0;\n                                                        console.log('nuevoAtributo');\n                                                        console.log(nuevoAtributo);\n                                                        this.createVariable(nuevaVariable, [nuevoAtributo]);\n                                                        contadorObjetosAGuardar++;\n                                                    } else {\n                                                        alert(\"Seleccione un nivel para el campo.\");\n                                                    }\n                                                } else {\n                                                    alert(\"Seleccione un tipo de asignacin.\");\n                                                }\n                                            } else {\n                                                alert(\"Ingrese un valor para el analista.\");\n                                            }\n                                        } else {\n                                            alert(\"Ingrese una fecha vlida para el inicio de clculo.\");\n                                        }\n                                    } else {\n                                        alert(\"Ingrese un valor para la periodicidad.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si guardar o no variable.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre de la variable debe ser unico.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    guardarVariableVariosAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var analista = $(\"#analista\").val();\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if (this.verificarNoExisteNombreVar(nombreVariable)) {\n                if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                    if(esObjeto != undefined) {\n                        if(guardarResultadosEnBaseDatos != undefined) {\n                            if(esInstruccionSQL != undefined) {\n                                if(!isNaN(objetoPadreID)) {\n                                    if(periodicidad.length > 0) {\n                                        if(this.isValidDate(fechaInicioCalculo) ) {\n                                            if(analista.length > 0) {\n                                                if(!isNaN(nuevoNivel)) {\n                                                    //var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                                    //si la formula ya fue asignada, no agregar tipo\n                                                    /*if(atributosUnico[0].tipo == undefined) {\n                                                        nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                                    } else {\n                                                        nuevoAtributo = atributosUnico[0];\n                                                        nuevoAtributo.nombre = nombreVariable;\n                                                        nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                                        nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                                    }*/\n                                                    var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, analista: analista};\n                                                    this.createVariable(nuevaVariable, atributosVario);\n                                                    //nivelNuevoAtributoVarios = 0;\n                                                    contadorObjetosAGuardar++;\n                                                } else {\n                                                    alert(\"Seleccione un nivel para el campo.\");\n                                                }\n                                            } else {\n                                                alert(\"Ingrese un valor para el analista.\");\n                                            }\n                                        } else {\n                                            alert(\"Ingrese una fecha vlida para el inicio de clculo.\");\n                                        }\n                                    } else {\n                                        alert(\"Ingrese un valor para la periodicidad.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si guardar o no variable.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre de la variable debe ser unico.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                    //seleccionar arreglo a insertar, si de varios atributos o unico\n                    var arreglo, nivel;\n                    if(banderaEsObjeto) {\n                        arreglo = atributosVario;\n                        nivel = nivelNuevoAtributoVarios;\n                    } else {\n                        arreglo = atributosUnico;\n                        nivel = nivelNuevoAtributoUnico;\n                    }\n                    var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                    //si la formula ya fue asignada, no agregar tipo\n                    /*if(this.state.atributos[this.state.posicionNuevoAtributo].nombre == undefined) {\n                        nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, campoEsArreglo: campoEsArreglo};\n                    } else {\n                        nuevoAtributo = this.state.atributos[this.state.posicionNuevoAtributo];\n                        nuevoAtributo.nombre = nombreAtributo;\n                        nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                    }*/\n                    arreglo.push(nuevoAtributo);\n                    this.setState({\n                        atributos: arreglo,\n                        tipoNuevaVariable: \"\"\n                    });\n                    nivelNuevoAtributoVarios = 0;\n                    if(banderaEsObjeto) {\n                        atributosVario = arreglo;\n                    } else {\n                        atributosUnico = arreglo;\n                    }\n                    nombreCampoNuevoAtributosVario = '';\n                    $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                    alert(\"Campo creado.\");\n                } else {\n                    alert(\"Seleccione un tipo de asignacin.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    crearVariableSQL () {\n        var nombreCampo = $(\"#nuevoCampo\").val();\n        var tipo = $(\"#tipo\").val();\n        if(nombreCampo.length > 0 && nombreCampo.length < 101) {\n            if(this.verificarNoExisteNombreCampo(nombreCampo)) {\n                if(tipo.length < 101) {\n                    var nuevaVar = {nombre: nombreCampo, tipo: tipo};\n                    variablesSQL.push(nuevaVar);\n                    console.log('variablesSQL')\n                    console.log(variablesSQL)\n                    this.setState({\n                        camposInstruccionSQL: variablesSQL\n                    });\n                    $(\"#nuevoCampo\").val(\"\");\n                    $(\"#tipo\").val(\"varchar\");\n                } else {\n                    alert(\"El tipo del campo debe tener una longitud menor a 31 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    crearInstruccionSQL () {\n        var instruccionSQLN = $(\"#comandoSQL\").val();\n        if(instruccionSQL.length < 101) {\n            instruccionSQL = instruccionSQLN;\n            this.setState({\n                comandoSQL: instruccionSQL\n            });\n            alert('Instruccin Guardada')\n        } else {\n            alert(\"El nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        console.log('formulaSeleccionada');\n        console.log(formulaSeleccionada);\n        console.log('indiceSeleccionadoSegmentoReglas');\n        console.log(indiceSeleccionadoSegmentoReglas);\n        console.log('indiceSeleccionadoReglas');\n        console.log(indiceSeleccionadoReglas);\n        console.log('tipoElementoSeleccionadoRegla');\n        console.log(tipoElementoSeleccionadoRegla);\n        console.log('posicionFormulaSeleccionada');\n        console.log(posicionFormulaSeleccionada);\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        console.log('reglas');\n        console.log(reglas);\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    console.log('segmentoRegla');\n                    console.log(segmentoRegla);\n                    console.log('campoSeleccionado');\n                    console.log(campoSeleccionado);\n                    console.log('formulaSeleccionada');\n                    console.log(formulaSeleccionada);\n                    console.log('formulasVariosAtributos');\n                    console.log(formulasVariosAtributos);\n                    console.log('posicionAtributo');\n                    console.log(posicionAtributo);\n                    console.log('indiceSeleccionadoSegmentoReglas');\n                    console.log(indiceSeleccionadoSegmentoReglas);\n                    console.log('segmentoRegla');\n                    console.log(segmentoRegla);\n                    if(!esFormula) {\n                        console.log('1');\n                        if(campoSeleccionado.tablaID != undefined) {\n                            console.log('1.1');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                console.log('1.1.1');\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            console.log('1.2');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                console.log('1.2.2');\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        console.log('2');\n                        console.log(formulaSeleccionada);\n                        if(formulaSeleccionada.tablaID != undefined) {\n                            console.log('2.1');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                console.log('2.1.1');\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined) {\n                            console.log('2.2');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                console.log('2.2.2');\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        if(campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta aadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta aadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = 0;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            console.log('1')\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            console.log('2')\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                console.log('2.1')\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                console.log('2.2')\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                console.log('2.2')\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                console.log('2.2')\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        //reglas[posicionSel].push(nuevaRegla);\n                        console.log('reglas');\n                        console.log(reglas);\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        console.log('posicionInsertarReglaAtributo');\n                        console.log(posicionInsertarReglaAtributo);\n                        console.log('posicionInsertarReglaSegmento');\n                        console.log(posicionInsertarReglaSegmento);\n                        console.log('indiceSeleccionadoReglas');\n                        console.log(indiceSeleccionadoReglas);\n                        console.log('campoSeleccionado')\n                        console.log(campoSeleccionado)\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        //tipoDeAsignacionSeleccionado\n                        if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                            console.log(\"INICIO AGREGAR FORMULA\");\n                            var nuevoNivel = 0;\n                            var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            if(formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                console.log('1')\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                console.log('2')\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    console.log('2.1')\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    console.log('2.2')\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    console.log('2.2')\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    console.log('2.2')\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            }, console.log(this.state.reglas) );\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('segmentoRegla');\n                            console.log(segmentoRegla);\n                            console.log('posicionInsertarReglaAtributo');\n                            console.log(posicionInsertarReglaAtributo);\n                            console.log('posicionInsertarReglaSegmento');\n                            console.log(posicionInsertarReglaSegmento);\n                            console.log('indiceSeleccionadoReglas');\n                            console.log(indiceSeleccionadoReglas);\n                            console.log('formulaSeleccionada')\n                            console.log(formulaSeleccionada)\n                            formulaSeleccionada = null;\n                            var self = this;\n                            setTimeout(function(){\n                                console.log(self.state.reglas)\n                            }, 2000);\n                            if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                });\n                            }\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            //tipoDeAsignacionSeleccionado = '';\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparacin';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            else\n                alert(\"La comparacin ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        console.log('formula');\n        console.log(formula);\n        console.log('formulaArreglo');\n        console.log(formulaArreglo);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            console.log(\"111\");\n            console.log(\"i = \"+i);\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                console.log(\"YEAH\");\n                console.log(\"i = \"+i);\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n                console.log(\"YEAH 2\");\n                console.log('elementosFormulas[posicionSel][posicionFormulaEnCampo]');\n                console.log(elementosFormulas[posicionSel][posicionFormulaEnCampo]);\n            }\n        };*/\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n        console.log('elementosFormulas');\n        console.log(elementosFormulas);\n        console.log('copiaAntiguaFormulas[posicionSel]');\n        console.log(copiaAntiguaFormulas[posicionSel]);\n        console.log('copiaAntiguaFormulas');\n        console.log(copiaAntiguaFormulas);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        console.log('posicionFormulaEnCampo');\n        console.log(posicionFormulaEnCampo);\n        var self = this;\n        setTimeout(function(){\n            console.log(self.state.formulas)\n        }, 2000);\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: formulaArreglo[i].tipoOriginal,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            console.log('reglas');\n            console.log(reglas);\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        console.log('campoSeleccionado');\n                        console.log(campoSeleccionado);\n                        console.log('formulaSeleccionada');\n                        console.log(formulaSeleccionada);\n                        console.log('formulasVariosAtributos');\n                        console.log(formulasVariosAtributos);\n                        console.log('posicionAtributo');\n                        console.log(posicionAtributo);\n                        console.log('indiceSeleccionadoSegmentoReglas');\n                        console.log(indiceSeleccionadoSegmentoReglas);\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        if(!esFormula) {\n                            console.log('1');\n                            if(campoSeleccionado.tablaID != undefined) {\n                                console.log('1.1');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    console.log('1.1.1');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                console.log('1.2');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    console.log('1.2.2');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            console.log('2');\n                            console.log(formulaSeleccionada);\n                            if(formulaSeleccionada.tablaID != undefined) {\n                                console.log('2.1');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    console.log('2.1.1');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.variableID != undefined) {\n                                console.log('2.2');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    console.log('2.2.2');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                                formulaID: -1,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                tipoCampoObjetivo: campoSeleccionado.tipo,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                operacion: operacionSeleccionada.operacion,\n                                                operacionTexto: operacionSeleccionada.operacionTexto,\n                                                valor: valor,\n                                                texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            //reglas[posicionSel].push(nuevaRegla);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('segmentoRegla');\n                            console.log(segmentoRegla);\n                            console.log('posicionInsertarReglaAtributo');\n                            console.log(posicionInsertarReglaAtributo);\n                            console.log('posicionInsertarReglaSegmento');\n                            console.log(posicionInsertarReglaSegmento);\n                            console.log('indiceSeleccionadoReglas');\n                            console.log(indiceSeleccionadoReglas);\n                            console.log('campoSeleccionado')\n                            console.log(campoSeleccionado)\n                            campoSeleccionado = null;\n                            valorSeleccionado = '';\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                                console.log(\"INICIO AGREGAR FORMULA\");\n                                var nuevoNivel = 0;\n                                if(banderaEsObjeto) {\n                                    nuevoNivel = nivelNuevoAtributoVarios;\n                                } else {\n                                    nuevoNivel = nivelNuevoAtributoUnico;\n                                }\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta aadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta aadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(campoSeleccionado.tablaID != undefined) {\n                                    conexionTablaID = campoSeleccionado.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = campoSeleccionado.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                }, console.log(this.state.reglas) );\n                                console.log('reglas');\n                                console.log(reglas);\n                                console.log('segmentoRegla');\n                                console.log(segmentoRegla);\n                                console.log('posicionInsertarReglaAtributo');\n                                console.log(posicionInsertarReglaAtributo);\n                                console.log('posicionInsertarReglaSegmento');\n                                console.log(posicionInsertarReglaSegmento);\n                                console.log('indiceSeleccionadoReglas');\n                                console.log(indiceSeleccionadoReglas);\n                                console.log('formulaSeleccionada')\n                                console.log(formulaSeleccionada)\n                                formulaSeleccionada = null;\n                                var self = this;\n                                setTimeout(function(){\n                                    console.log(self.state.reglas)\n                                }, 2000);\n                                if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                    });\n                                }\n                                //tipoDeAsignacionSeleccionado = '';\n                                if (banderaEsObjeto) {\n                                    reglasVariosAtributos = reglas;\n                                    segmentoReglasVariosAtributos = segmentoRegla;\n                                } else {\n                                    reglasUnAtributo = reglas;\n                                    segmentoReglasUnAtributo = segmentoRegla;\n                                }\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparacin';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparacin ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    eliminarRegla () {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            console.log('reglas');\n            console.log(reglas);\n            console.log('segmentoRegla');\n            console.log(segmentoRegla);\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            if (banderaEsObjeto) {\n                reglasVariosAtributos = reglas;\n                segmentoReglasVariosAtributos = segmentoRegla;\n            } else {\n                reglasUnAtributo = reglas;\n                segmentoReglasUnAtributo = segmentoRegla;\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        tipoDeAsignacionSeleccionado = tipoVariable;\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        //indice = indice de regla dentro de arreglo de reglas\n        //tipoElemento = si la seleccion en el contenedor de reglas es cursor arriba, cursor abajo, y otra regla o otra formula\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarEstadoSiEsObjeto (esObjeto) {\n        banderaEsObjeto = esObjeto;\n    }\n\n    actualizarEstadoSiEsInstruccionSQL (esObjeto) {\n        banderaEsInstruccionSQL = esObjeto;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(banderaEsObjeto) {\n            if(nivelNuevoAtributoVarios < nivel)\n                nivelNuevoAtributoVarios = nivel;\n        } else {\n            if(nivelNuevoAtributoUnico < nivel)\n                nivelNuevoAtributoUnico = nivel;\n        }\n    }\n\n    actualizarNombreVariable () {\n        var nombreVariableN = $(\"#nombreFuenteDato\").val();\n        nombreVariable = nombreVariableN;\n    }\n\n    actualizarDescripcionVariable () {\n        var descripcionVariableN = $(\"#descripcionFuenteDato\").val();\n        descripcionVariable = descripcionVariableN;\n    }\n\n    actualizarNombreCampoNuevoAtributosVario () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributosVario = nombreCampo;\n    }\n\n    actualizarFechaInicio (fecha) {\n        fechaInicioVariable = fecha;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        periodicidadVariable = periodicidad;\n    }\n\n    actualizarNombreEncargado () {\n        var analista = $(\"#analista\").val();\n        analistaVariable = analista;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            variables: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            excel: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            formas: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (nombre) {\n        var noExiste = true;\n        for (var i = 0; i < this.state.variables.length; i++) {\n            if (this.state.variables[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                noExiste = false;\n                break;\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < this.state.excel.length; i++) {\n                if (this.state.excel[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < this.state.formas.length; i++) {\n                if (this.state.formas[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < variablesSQL.length; i++) {\n                if (variablesSQL[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        } else {\n            for (var i = 0; i < atributosVario.length; i++) {\n                if (atributosVario[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarCampoSQL (index, nombreN, tipoN) {\n        var tempCopy = [...variablesSQL];\n        console.log('tempCopy[index] antes');\n        console.log(tempCopy[index]);\n        tempCopy[index].nombre = nombreN;\n        tempCopy[index].tipo = tipoN;\n        variablesSQL[index].nombre = nombreN;\n        variablesSQL[index].tipo = tipoN;\n        console.log('tempCopy[index] despues');\n        console.log(tempCopy[index]);\n        this.setState({\n            camposInstruccionSQL: tempCopy\n        }, console.log(this.state.camposInstruccionSQL) );\n    }\n\n    eliminarCampoSQL (index) {\n        var tempCopy = [...variablesSQL];\n        tempCopy.splice(index, 1);\n        variablesSQL.splice(index, 1);\n        this.setState({\n            camposInstruccionSQL: tempCopy\n        });\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n    \n    render() {\n        if(this.state.componenteActual.localeCompare(\"crearVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <CrearVariable pool={this.props.pool}\n                                                terminoCrearCampo={this.props.terminoCrearCampo}\n                                                columnas={this.props.columnas}\n                                                atributos={this.state.atributos}\n                                                cambioDeArreglosDeAtributos={this.cambioDeArreglosDeAtributos}\n                                                nombreVariable={nombreVariable}\n                                                tipoNuevaVariable={this.state.tipoNuevaVariable}\n                                                actualizarNombreVariable={this.actualizarNombreVariable}\n                                                descripcionVariable={descripcionVariable}\n                                                actualizarDescripcionVariable={this.actualizarDescripcionVariable}\n                                                nombreCampoNuevoAtributosVario={nombreCampoNuevoAtributosVario}\n                                                actualizarNombreCampoNuevoAtributosVario={this.actualizarNombreCampoNuevoAtributosVario}\n                                                actualizarEstadoSiEsObjeto={this.actualizarEstadoSiEsObjeto}\n                                                actualizarEstadoSiEsInstruccionSQL={this.actualizarEstadoSiEsInstruccionSQL}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                goToCreateConditions={this.goToCreateConditions}\n                                                goCreateVariableFieldSQL={this.goCreateVariableFieldSQL}\n                                                guardarVariable={this.guardarVariable}\n                                                crearAtributoVariable={this.crearAtributoVariable}\n                                                actualizarFechaInicio={this.actualizarFechaInicio}\n                                                actualizarPeriodicidad={this.actualizarPeriodicidad}\n                                                actualizarNombreEncargado={this.actualizarNombreEncargado}\n                                                fechaInicioVariable={fechaInicioVariable}\n                                                periodicidadVariable={periodicidadVariable}\n                                                analistaVariable={analistaVariable}>\n                    </CrearVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormula}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            anadirFormula={this.anadirFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableSQL\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionSQL pool={this.props.pool}\n                                            variableID={this.state.variableID}\n                                            nombreVariable={this.state.nombreVariable}\n                                            camposInstruccionSQL={this.state.camposInstruccionSQL}\n                                            comandoSQL={this.state.comandoSQL}\n                                            agregarCampo={this.crearVariableSQL}\n                                            agregarInstruccionSQL={this.crearInstruccionSQL}\n                                            actualizarCampo={this.actualizarCampoSQL}\n                                            eliminarCampo={this.eliminarCampoSQL}\n                                            navbar={this.state.navbar}>\n                    </InstruccionSQL>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CrearVariablesHome.js"}