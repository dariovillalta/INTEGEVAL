{"version":3,"sources":["components/Variables/Variables/CrearVariables/CrearVariablesHome.js"],"names":["campoSeleccionado","operacionSeleccionada","objetoConexionSeleccionada","tipoDeAsignacionSeleccionado","nivelNuevoAtributoVarios","nivelNuevoAtributoUnico","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","posicionAtributoSeleccionado","indiceSeleccionadoFormula","nombreVariable","descripcionVariable","nombreCampoNuevoAtributosVario","atributosVario","reglasVariosAtributos","segmentoReglasVariosAtributos","formulasVariosAtributos","elementosFormulasVariosAtributos","atributosUnico","reglasUnAtributo","segmentoReglasUnAtributo","formulasUnAtributo","elementosFormulasUnAtributos","banderaEsObjeto","contadorObjetosAGuardar","contadorObjetosGuardados","CrearFuenteDatosHome","props","state","componenteActual","atributos","reglas","formulas","esCondicion","navbar","loadRules","bind","sortRules","returnToCreateVariable","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormula","goCreateVariableFieldSQL","createVariable","getVariableID","createVariableField","getVariableFieldID","createVariableFieldRuleSegments","getVariableFieldRuleSegments","createVariableFieldRules","createVariableFieldFormula","getVariableFieldFormulaID","createVariableFieldFormulaElement","retornarCampo","actualizarCondicion","cambioDeArreglosDeAtributos","guardarVariable","guardarVariableUnAtributo","guardarVariableVariosAtributo","crearAtributoVariable","anadirRegla","anadirFormula","retornoCampo","retornoOperacion","retornoTipoDeAsignacion","actualizarIndiceSeleccionadoReglas","actualizarNivelNuevaRegla","actualizarNombreVariable","actualizarDescripcionVariable","actualizarNombreCampoNuevoAtributosVario","retornarCodigoOperacion","tempCopy","i","length","setState","indice","configuracionHome","goOptions","retornoSeleccionVariables","posicionSel","console","log","undefined","variable","campos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","nombre","descripcion","esObjeto","objetoPadreID","guardar","result","rollback","commit","alert","recordset","variableCampo","posicionAtributo","ID","tipo","nivel","$","is","segmentoRegla","j","posicionFormulaEnCampo","posicionSegmentoEnCampo","limpiarArreglos","segmento","posicionSegmento","formula","conexionTablaID","esConexionTabla","nivelMax","k","segmentoReglaID","formulaID","regla","reglaPadreID","nombreColumnaEnTabla","operacion","operacionTexto","valor","texto","posicionFormula","elementosFormulas","elemento","idConexionTabla","esFuenteDeDato","elementoVariableID","elementoVariableCampoID","tipoColumnaEnTabla","campoNuevo","val","guardarResultadosEnBaseDatos","nuevoNivel","isNaN","nuevoAtributo","nuevaVariable","nombreAtributo","arreglo","push","esFormula","formulaSeleccionada","entrarACrearRegla","posicionSelTemp","tablaID","variableID","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","localeCompare","segmentoReglaIndex","nuevaRegla","variableCampoID","splice","tempNewCopy","self","setTimeout","formulaArreglo","copiaAntiguaFormulas","numeroDeFormulaDeVariable","esFuenteDato","campo","tipoVariable","objetoConexion","tipoDeAsignacion","tipoElemento","nombreVariableN","descripcionVariableN","nombreCampo","codigo","width","height","terminoCrearCampo","columnas","actualizarEstadoSiEsObjeto","nombreTablaSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport CrearVariable from './CrearVariable.js';\nimport InstruccionVariable from '../../../InstruccionVariable.js';\nimport Formula from '../../../Formula.js';\nimport InstruccionSQL from '../../../InstruccionSQL.js';\n\nvar campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada;\nvar tipoDeAsignacionSeleccionado;   //para saber el tipo de asignacion que se debera hacer al atributo / campo\n\n/*COMPONENTE PARA MANEJRA CAMBIO DE VISTA ENTRE CREAR VARIABLE Y VISTA DE CONDICIONES / INSTRUCIONES*/\n/*MANEJA TODA LA LOGICA CREAR FUENTE DATO VARIABLE (OBJETO)*/\n\n/*              ARREGLO DE ATRIBUTOS               */\n/* CADA POSICION REPRESENTA UN CAMPO / ATRIBUTO / COLUMNA */\n/*\n    [ {nombre: \"IDCLIENTE\"}, {nombre: \"NOMBRECLIENTE\"} ]\n*/\n\n/*              ARREGLO DE SEGMENTO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA CONDICION IF PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}], [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}] ]\n*/\n\n/*              ARREGLO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA REGLA PERTENECIENTE AL SEGMENTO DE REGLAS CORRESPONDIENTE A LA POSICION DEL SEGMENTO DE REGLAS DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{esCondicion: FALSE}], [{esCondicion: TRUE, esCondicion: FALSE}]], [[{esCondicion: FALSE}], [{esCondicion: FALSE}]] ]\n*/\n\n/*              ARREGLO DE FORMULAS               */\n/* CADA POSICION REPRESENTA UNA FORMULA PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{formula: \"x + y\"}, {formula: \"2x + 2y\"}], [{formula: \"3x + 3y\"}] ]\n*/\n\n/*              ARREGLO DE ELEMENTOS DE FORMULAS               */\n/* CADA POSICION REPRESENTA UN ELEMENTO DE FORMULA PERTENECIENTE A LA FORMULA CORRESPONDIENTE A LA POSICION DE LA FORMULA DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{formula: \"sum(saldo)\"}, {formula: \"asig(impuesto)\"}], []], [[{formula: \"sum(saldo)\"}], []] ]\n*/\n\nvar nivelNuevoAtributoVarios = 0;                   //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar nivelNuevoAtributoUnico = 0;                    //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar indiceSeleccionadoReglas = -1;                  //indice seleccionado regla\nvar tipoElementoSeleccionadoRegla = '';             //tipo de seleccion de cursor de regla: esOtraRegla, arriba, abajo\nvar posicionAtributoSeleccionado = -1;              //posicion del arreglo donde se debe insertar el siguiente atributo / campo /  columna (para controlar cuando se agrega condiciones / instrucciones a un nuevo atributo)\nvar indiceSeleccionadoFormula = -1;                 //indice seleccionado formula\n\nvar nombreVariable = '';\nvar descripcionVariable = '';\n\nvar nombreCampoNuevoAtributosVario = '';\nvar atributosVario = [];\nvar reglasVariosAtributos = [];\nvar segmentoReglasVariosAtributos = [];\nvar formulasVariosAtributos = [];\nvar elementosFormulasVariosAtributos = [];\nvar atributosUnico = [];\nvar reglasUnAtributo = [];\nvar segmentoReglasUnAtributo = [];\nvar formulasUnAtributo = [];\nvar elementosFormulasUnAtributos = [];\n\nvar banderaEsObjeto = true;                                //bandera para saber si la variable actual es objeto o no a traves de las diferentes vistas / componentes\n\nvar contadorObjetosAGuardar = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\nvar contadorObjetosGuardados = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\n\nexport default class CrearFuenteDatosHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'crearVariable',\n            atributos: [],\n            reglas: [],\n            formulas: [],\n            esCondicion: true,                             //bandera para estado de nueva regla / instruccion, saber si es nueva comparacion o regla / instruccion = verdadero; si es falso = es nueva formula / asignacion\n            navbar: \"\"\n        }\n        this.loadRules = this.loadRules.bind(this);\n        this.sortRules = this.sortRules.bind(this);\n        this.returnToCreateVariable = this.returnToCreateVariable.bind(this);\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCreateVariableFieldSQL = this.goCreateVariableFieldSQL.bind(this);\n        this.createVariable = this.createVariable.bind(this);\n        this.getVariableID = this.getVariableID.bind(this);\n        this.createVariableField = this.createVariableField.bind(this);\n        this.getVariableFieldID = this.getVariableFieldID.bind(this);\n        this.createVariableFieldRuleSegments = this.createVariableFieldRuleSegments.bind(this);\n        this.getVariableFieldRuleSegments = this.getVariableFieldRuleSegments.bind(this);\n        this.createVariableFieldRules = this.createVariableFieldRules.bind(this);\n        this.createVariableFieldFormula = this.createVariableFieldFormula.bind(this);\n        this.getVariableFieldFormulaID = this.getVariableFieldFormulaID.bind(this);\n        this.createVariableFieldFormulaElement = this.createVariableFieldFormulaElement.bind(this);\n        this.retornarCampo = this.retornarCampo.bind(this);\n        this.actualizarCondicion = this.actualizarCondicion(this);\n        this.cambioDeArreglosDeAtributos = this.cambioDeArreglosDeAtributos.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.guardarVariableUnAtributo = this.guardarVariableUnAtributo.bind(this);\n        this.guardarVariableVariosAtributo = this.guardarVariableVariosAtributo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.retornoCampo = this.retornoCampo.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.retornoTipoDeAsignacion = this.retornoTipoDeAsignacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarNombreVariable = this.actualizarNombreVariable.bind(this);\n        this.actualizarDescripcionVariable = this.actualizarDescripcionVariable.bind(this);\n        this.actualizarNombreCampoNuevoAtributosVario = this.actualizarNombreCampoNuevoAtributosVario.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n    }\n\n    componentDidMount () {\n    }\n\n    loadRules() {\n        //FINISH\n        this.sortRules();\n    }\n\n    sortRules() {\n        var tempCopy = [...this.state.reglas];\n        for (var i = 0; i < tempCopy.length; i++) {\n            tempCopy[i]\n        };\n    }\n\n    returnToCreateVariable () {\n        this.setState({\n            componenteActual: \"crearVariable\"\n        });\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var formulas, reglas;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(banderaEsObjeto) {\n            formulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n        } else {\n            formulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n        }\n        console.log('posicionSel');\n        console.log(posicionSel);\n        console.log('formulas[posicionSel]');\n        console.log(formulas[posicionSel]);\n        console.log('reglas[posicionSel]');\n        console.log(reglas[posicionSel]);\n        console.log('formulas');\n        console.log(formulas);\n        console.log('reglas');\n        console.log(reglas);\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormula (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar\n        });\n    }\n\n    goCreateVariableFieldSQL () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Instrucción SQL</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"variableSQL\"\n        });\n    }\n\n    createVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Variables (nombre, descripcion, esObjeto, objetoPadreID, guardar) values ('\"+variable.nombre+\"', '\"+variable.descripcion+\"', '\"+variable.esObjeto+\"', \"+variable.objetoPadreID+\", '\"+variable.guardar+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable creada.\");\n                        contadorObjetosGuardados++;\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableID (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where nombre = '\"+variable.nombre+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            for (var i = 0; i < campos.length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableField(result.recordset[0], campos[i], i);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableField (variable, variableCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into VariablesCampos (variableID, nombre, tipo, nivel, esInstruccionSQL) values (\"+variable.ID+\", '\"+variableCampo.nombre+\"', '\"+variableCampo.tipo+\"', \"+variableCampo.nivel+\", 'false')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldID(variable, variableCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldID (variable, variableCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where nombre = '\"+variableCampo.nombre+\"' and variableID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //si fue llamado de crear atributo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        var esObjeto;\n                        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n                            esObjeto = true;\n                        else\n                            esObjeto = false;\n                        var formulas, segmentoRegla;\n                        if (esObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(variable, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(variable, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, formula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglas (conexionTablaID, variableID, variableCampoID, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+variable.ID+\", \"+variableCampo.ID+\", '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(variable, variableCampo, segmento, posicionAtributo, posicionSegmento, formula);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, formula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglas where conexionTablaID = \"+segmento.conexionTablaID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            var reglas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                            }\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                reglas[posicionAtributo][posicionSegmento][k].segmentoReglaID = result.recordset[0].ID;\n                                //crear reglas que sean de comparacion (esCondicion = verdadero)\n                                if(reglas[posicionAtributo][posicionSegmento][k].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][k]);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][k].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    reglas[posicionAtributo][posicionSegmento][k].formulaID = formula.ID;\n                                    this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][k]);\n                                }\n                            };\n                            if(reglas[posicionAtributo][posicionSegmento].length == 0) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRules (variable, variableCampo, segmento, regla) {\n        if(regla != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into Reglas (segmentoReglaID, variableID, variableCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, esCondicion, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+regla.formulaID+\", \"+regla.reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.esCondicion+\"', '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        if (!rolledBack) {\n                            console.log(err);\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            this.limpiarArreglos();\n        }\n    }\n\n    createVariableFieldFormula (variable, variableCampo, formula, posicionAtributo, posicionFormula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasVariablesCampos (variableID, variableCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(variable, variableCampo, formula, posicionAtributo, posicionFormula);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (variable, variableCampo, formula, posicionAtributo, posicionFormula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var elementosFormulas, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(variable, variableCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i]);\n                            };\n                            //validar que solo sea llamado la primera vez por cada atributo\n                            if(posicionFormula == 0) {\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, result.recordset[0]);\n                                };\n                            }\n                            if(elementosFormulas[posicionAtributo][posicionFormula].length == 0 || (posicionFormula == 0 && segmentoRegla[posicionAtributo].length) ) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (variable, variableCampo, formula, elemento) {\n        if(elemento != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ElementoFormulasVariablesCampos (variableID, variableCampoID, formulaID, conexionTablaID, esFuenteDeDato, elementoVariableID, elementoVariableCampoID, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+formula.ID+\", \"+elemento.idConexionTabla+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                    if (err) {\n                        if (!rolledBack) {\n                            console.log(err);\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            this.limpiarArreglos();\n        }\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            nivelNuevoAtributoVarios = 0;\n            nivelNuevoAtributoUnico = 0;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n            posicionAtributoSeleccionado = -1;\n            indiceSeleccionadoFormula = -1;\n\n            atributosVario = [];\n            reglasVariosAtributos = [];\n            segmentoReglasVariosAtributos = [];\n            formulasVariosAtributos = [];\n            elementosFormulasVariosAtributos = [];\n            atributosUnico = [];\n            reglasUnAtributo = [];\n            segmentoReglasUnAtributo = [];\n            formulasUnAtributo = [];\n            elementosFormulasUnAtributos = [];\n        }\n    }\n\n    retornarCampo (campoNuevo) {\n        campoSeleccionado = campoNuevo;\n    }\n\n    actualizarCondicion (esCondicion) {\n        this.setState({\n            esCondicion: esCondicion\n        });\n    }\n\n    cambioDeArreglosDeAtributos () {\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        if (esObjeto) {\n            this.setState({\n                atributos: atributosVario\n            });\n        } else {\n            this.setState({\n                atributos: atributosUnico\n            });\n        }\n    }\n\n    guardarVariable() {\n        contadorObjetosGuardados = 0;\n        contadorObjetosAGuardar = 0;\n        if (!banderaEsObjeto) {\n            this.guardarVariableUnAtributo();\n        } else {\n            this.guardarVariableVariosAtributo();\n        }\n    }\n\n    guardarVariableUnAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                if(esObjeto != undefined) {\n                    if(guardarResultadosEnBaseDatos != undefined) {\n                        if(!isNaN(objetoPadreID)) {\n                            if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                                if(!isNaN(nuevoNivel)) {\n                                    var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                    //si la formula ya fue asignada, no agregar tipo\n                                    /*if(atributosUnico[0].tipo == undefined) {\n                                        nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                    } else {\n                                        nuevoAtributo = atributosUnico[0];\n                                        nuevoAtributo.nombre = nombreVariable;\n                                        nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                        nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                    }*/\n                                    var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, guardar: guardarResultadosEnBaseDatos};\n                                    this.createVariable(nuevaVariable, [nuevoAtributo]);\n                                    contadorObjetosAGuardar++;\n                                } else {\n                                    alert(\"Seleccione un nivel para el campo.\");\n                                }\n                            } else {\n                                alert(\"Seleccione un tipo de asignación.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar un valor para objeto padre.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si guardar o no variable.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                }\n            } else {\n                alert(\"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    guardarVariableVariosAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                if(esObjeto != undefined) {\n                    if(guardarResultadosEnBaseDatos != undefined) {\n                        if(!isNaN(objetoPadreID)) {\n                            if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                                if(!isNaN(nuevoNivel)) {\n                                    var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                    //si la formula ya fue asignada, no agregar tipo\n                                    /*if(atributosUnico[0].tipo == undefined) {\n                                        nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                    } else {\n                                        nuevoAtributo = atributosUnico[0];\n                                        nuevoAtributo.nombre = nombreVariable;\n                                        nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                        nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                    }*/\n                                    var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, guardar: guardarResultadosEnBaseDatos};\n                                    this.createVariable(nuevaVariable, atributosVario);\n                                    contadorObjetosAGuardar++;\n                                } else {\n                                    alert(\"Seleccione un nivel para el campo.\");\n                                }\n                            } else {\n                                alert(\"Seleccione un tipo de asignación.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar un valor para objeto padre.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si guardar o no variable.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                }\n            } else {\n                alert(\"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                //seleccionar arreglo a insertar, si de varios atributos o unico\n                var arreglo, nivel;\n                if(banderaEsObjeto) {\n                    arreglo = atributosVario;\n                    nivel = nivelNuevoAtributoVarios\n                } else {\n                    arreglo = atributosUnico;\n                    nivel = nivelNuevoAtributoUnico\n                }\n                var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                //si la formula ya fue asignada, no agregar tipo\n                /*if(this.state.atributos[this.state.posicionNuevoAtributo].nombre == undefined) {\n                    nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, campoEsArreglo: campoEsArreglo};\n                } else {\n                    nuevoAtributo = this.state.atributos[this.state.posicionNuevoAtributo];\n                    nuevoAtributo.nombre = nombreAtributo;\n                    nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                }*/\n                arreglo.push(nuevoAtributo);\n                this.setState({\n                    atributos: arreglo\n                });\n                if(banderaEsObjeto) {\n                    atributosVario = arreglo;\n                } else {\n                    atributosUnico = arreglo;\n                }\n                nombreCampoNuevoAtributosVario = '';\n                $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                alert(\"Campo creado.\");\n            } else {\n                alert(\"Seleccione un tipo de asignación.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        console.log('indiceSeleccionadoReglas');\n        console.log(indiceSeleccionadoReglas);\n        console.log('tipoElementoSeleccionadoRegla');\n        console.log(tipoElementoSeleccionadoRegla);\n        var reglas;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n        }\n        console.log('reglas');\n        console.log(reglas);\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n            var entrarACrearRegla = false;\n            if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0) {\n                //validando nueva regla tenga la misma variable del mismo segmento\n                var posicionSelTemp = posicionAtributoSeleccionado;\n                if(posicionAtributoSeleccionado == -1) {\n                    posicionSelTemp = this.state.atributos.length;\n                }\n                if(campoSeleccionado.tablaID != undefined) {\n                    if (segmentoRegla[posicionSel][reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID].conexionTablaID == campoSeleccionado.tablaID) {\n                        entrarACrearRegla = true;\n                    }\n                } else {\n                    if (segmentoRegla[posicionSel][reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID].variableID == campoSeleccionado.variableID) {\n                        entrarACrearRegla = true;\n                    }\n                }\n            } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                entrarACrearRegla = true;\n            }\n            if(entrarACrearRegla) {\n                if(!esFormula) {\n                    var valor = $(\"#valor\").val();\n                    var posicionSel = posicionAtributoSeleccionado;\n                    //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                    //cuando se presiona NavBar indice es igual indice anterior\n                    //cuando se selecciona un campo existente indice = posicion campo\n                    if(posicionAtributoSeleccionado == -1) {\n                        posicionSel = this.state.atributos.length;\n                    }\n                    if(reglas[posicionSel] == undefined) {\n                        [];\n                    }\n                    var nuevoNivel = 0;\n                    var segmentoRegla;\n                    if(banderaEsObjeto) {\n                        nuevoNivel = nivelNuevoAtributoVarios;\n                        segmentoRegla = segmentoReglasVariosAtributos;\n                    } else {\n                        nuevoNivel = nivelNuevoAtributoUnico;\n                        segmentoRegla = segmentoReglasUnAtributo;\n                    }\n                    if(segmentoRegla.length == undefined)\n                        segmentoRegla = [];\n                    if(segmentoRegla[posicionSel] == undefined)\n                        segmentoRegla[posicionSel] = [];\n                    var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                    if(campoSeleccionado.tablaID != undefined) {\n                        conexionTablaID = campoSeleccionado.tablaID;\n                        esConexionTabla = true;\n                        nombreColumnaEnTabla = campoSeleccionado.valor;\n                    } else {\n                        variableID = campoSeleccionado.variableID;\n                    }\n                    var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                    if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0)) {\n                        var segmentoReglaIndex = 0;\n                        if(segmentoRegla[posicionSel].length > 0) {\n                            segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                        }\n                        segmentoRegla[posicionSel].push({conexionTablaID: conexionTablaID, variableID: variableID, esConexionTabla: esConexionTabla, nivelMax: nivelMax, segmentoReglaIndex: segmentoReglaIndex});\n                        posicionInsertarReglaAtributo = posicionSel;\n                        posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                    } else {\n                        segmentoRegla[posicionSel][reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID].nivelMax++;\n                        posicionInsertarReglaAtributo = posicionSel;\n                        posicionInsertarReglaSegmento = reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID;\n                    }\n                    if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                        reglas[posicionInsertarReglaAtributo] = [];\n                    }\n                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                    }\n                    var esCondicion = !esFormula;\n                    var segmentoReglaIndex = 0;\n                    if(indiceSeleccionadoReglas != -1 && reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].segmentoReglaIndex != undefined)\n                        segmentoReglaIndex = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].segmentoReglaIndex;\n                    /*if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                        //regla debe ser ingresada como hija de otra regla\n                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas]\n                    }*/\n                    var nuevaRegla = {\n                                        segmentoReglaID: segmentoReglaIndex,\n                                        conexionTablaID: conexionTablaID,\n                                        nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                        formulaID: -1,\n                                        variableID: -1,\n                                        variableCampoID: -1,\n                                        reglaPadreID: indiceSeleccionadoReglas,\n                                        esCondicion: esCondicion,\n                                        esConexionTabla: esConexionTabla,\n                                        operacion: operacionSeleccionada.operacion,\n                                        operacionTexto: operacionSeleccionada.operacionTexto,\n                                        valor: valor,\n                                        texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                        nivel: nuevoNivel,\n                                        posicionSegmentoEnCampo: segmentoReglaIndex\n                                    };\n                    //if(indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) {\n                    if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                        console.log('1')\n                        //cuando no existe regla creada para el campo\n                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                    } else {\n                        console.log('2')\n                        //el campo ya tiene una regla o mas creada\n\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                            console.log('2.1')\n                            //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                            //se pone de regla padre a la regla seleccionada\n                            nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                        } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                            console.log('2.2')\n                            //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                            //se pone de regla padre a la regla padre de la regla seleccionada\n                            nuevaRegla.reglaPadreID = reglas[indiceSeleccionadoReglas].reglaPadreID;\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                        } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            console.log('2.2')\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                        }\n                        //la condicion es anidada, o sea dentro de la condicion padre\n                    }\n                    if (banderaEsObjeto) {\n                        reglasVariosAtributos = reglas;\n                        segmentoReglasVariosAtributos = segmentoRegla;\n                    } else {\n                        reglasUnAtributo = reglas;\n                        segmentoReglasUnAtributo = segmentoRegla;\n                    }\n                    this.setState({\n                        reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                    });\n                    //reglas[posicionSel].push(nuevaRegla);\n                    console.log('reglas');\n                    console.log(reglas);\n                    console.log('segmentoRegla');\n                    console.log(segmentoRegla);\n                } else {\n                    var posicionSel = posicionAtributoSeleccionado;\n                    //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                    //cuando se presiona NavBar indice es igual indice anterior\n                    //cuando se selecciona un campo existente indice = posicion campo\n                    if(posicionAtributoSeleccionado == -1) {\n                        posicionSel = this.state.atributos.length;\n                    }\n                    var nuevoNivel = 0;\n                    var segmentoRegla;\n                    if(banderaEsObjeto) {\n                        nuevoNivel = nivelNuevoAtributoVarios;\n                        segmentoRegla = segmentoReglasVariosAtributos;\n                    } else {\n                        nuevoNivel = nivelNuevoAtributoUnico;\n                        segmentoRegla = segmentoReglasUnAtributo;\n                    }\n                    if(segmentoRegla.length == undefined)\n                        segmentoRegla = [];\n                    if(segmentoRegla[posicionSel] == undefined)\n                        segmentoRegla[posicionSel] = [];\n                    var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                    var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                    var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                    if(campoSeleccionado.idConexionTabla != undefined) {\n                        conexionTablaID = campoSeleccionado.idConexionTabla;\n                        esConexionTabla = true;\n                    } else {\n                        variableID = campoSeleccionado.variableID;\n                    }\n                    if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0)) {\n                        var segmentoReglaIndex = 0;\n                        if(segmentoRegla[posicionSel].length > 0) {\n                            segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                        }\n                        segmentoRegla[posicionSel].push({conexionTablaID: conexionTablaID, variableID: variableID, esConexionTabla: esConexionTabla, nivelMax: nivelMax, segmentoReglaIndex: segmentoReglaIndex});\n                        posicionInsertarReglaAtributo = posicionSel;\n                        posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                    } else {\n                        segmentoRegla[posicionSel][reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID].nivelMax++;\n                        posicionInsertarReglaAtributo = posicionSel;\n                        posicionInsertarReglaSegmento = reglas[posicionSel][indiceSeleccionadoReglas].segmentoReglaID;\n                    }\n                    if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                        reglas[posicionInsertarReglaAtributo] = [];\n                    }\n                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                    }\n                    var esCondicion = !esFormula;\n                    var segmentoReglaIndex = 0;\n                    if(indiceSeleccionadoReglas != -1 && reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].segmentoReglaIndex != undefined)\n                        segmentoReglaIndex = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].segmentoReglaIndex;\n\n                    var nuevaRegla = {\n                                        segmentoReglaID: segmentoReglaIndex,\n                                        conexionTablaID: conexionTablaID,\n                                        nombreColumnaEnTabla: '',\n                                        formulaID: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length,\n                                        variableID: -1,\n                                        variableCampoID: -1,\n                                        reglaPadreID: indiceSeleccionadoReglas,\n                                        esCondicion: esCondicion,\n                                        esConexionTabla: esConexionTabla,\n                                        operacion: formulaSeleccionada.operacion,\n                                        operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                        valor: formulaSeleccionada.operacion,\n                                        texto: formulaSeleccionada.formula,\n                                        nivel: nuevoNivel,\n                                        posicionSegmentoEnCampo: segmentoReglaIndex\n                                    };\n                    console.log('this.state.reglas');\n                    console.log(this.state.reglas);\n                    console.log(this.state.reglas.length);\n                    console.log('reglas');\n                    console.log(reglas);\n                    console.log('posicionInsertarReglaAtributo');\n                    console.log(posicionInsertarReglaAtributo);\n                    console.log('posicionInsertarReglaSegmento');\n                    console.log(posicionInsertarReglaSegmento);\n                    console.log('campoSeleccionado')\n                    console.log(campoSeleccionado)\n                    console.log('formulaSeleccionada')\n                    console.log(formulaSeleccionada)\n                    if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                        //cuando no existe regla creada para el campo\n                        console.log('1');\n                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                    } else {\n                        console.log('2');\n                        //el campo ya tiene una regla o mas creada\n\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                            //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                            //se pone de regla padre a la regla seleccionada\n                            nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                            console.log('2.1');\n                        } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                            //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                            //se pone de regla padre a la regla padre de la regla seleccionada\n                            nuevaRegla.reglaPadreID = reglas[indiceSeleccionadoReglas].reglaPadreID;\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                            console.log('2.2');\n                        } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                            console.log('2.3');\n                        }\n                        //la condicion es anidada, o sea dentro de la condicion padre\n                    }\n                    console.log('ANTES');\n                    console.log('reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]');\n                    console.log(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]);\n                    var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                    this.setState({\n                        reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                    }, console.log(this.state.reglas) );\n                    console.log('reglas');\n                    console.log(reglas);\n                    console.log('reglasVariosAtributos');\n                    console.log(reglasVariosAtributos);\n                    console.log('segmentoReglasVariosAtributos');\n                    console.log(segmentoReglasVariosAtributos);\n                    console.log('reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]');\n                    console.log(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]);\n                    var self = this;\n                    setTimeout(function(){\n                        console.log(self.state.reglas)\n                    }, 2000);\n                    if (banderaEsObjeto) {\n                        reglasVariosAtributos = reglas;\n                        segmentoReglasVariosAtributos = segmentoRegla;\n                    } else {\n                        reglasUnAtributo = reglas;\n                        segmentoReglasUnAtributo = segmentoRegla;\n                    }\n                }\n            } else {\n                var texto = 'formula';\n                if(!esFormula)\n                    texto = 'comparación';\n                alert(\"La \"+texto+\" ingresada no pertenece a la misma variable.\");\n            }\n        } else {\n            alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n        }\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        console.log('formula');\n        console.log(formula);\n        console.log('formulaArreglo');\n        console.log(formulaArreglo);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            //if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0 && formulaArreglo[i].esFuenteDato) {\n                var idConexionTabla = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    idConexionTabla = formulaArreglo[i].idConexionTabla;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].elementoVariableID != undefined)\n                    elementoVariableID = formulaArreglo[i].elementoVariableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].elementoVariableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].elementoVariableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    idConexionTabla: idConexionTabla,\n                    esFuenteDeDato: esFuenteDeDato,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            //}\n        };\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n        console.log('elementosFormulas');\n        console.log(elementosFormulas);\n        console.log('copiaAntiguaFormulas[posicionSel]');\n        console.log(copiaAntiguaFormulas[posicionSel]);\n        console.log('copiaAntiguaFormulas');\n        console.log(copiaAntiguaFormulas);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        console.log('posicionFormulaEnCampo');\n        console.log(posicionFormulaEnCampo);\n        var self = this;\n        setTimeout(function(){\n            console.log(self.state.formulas)\n        }, 2000);\n    }\n\n    retornoCampo (campo, tipoVariable, objetoConexion) {\n        campoSeleccionado = campo;\n        //tipoDeAsignacionSeleccionado = tipoVariable;\n        objetoConexionSeleccionada = objetoConexion;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    retornoTipoDeAsignacion (tipoDeAsignacion) {\n        tipoDeAsignacionSeleccionado = tipoDeAsignacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indice, tipoElemento) {\n        //indice = indice de regla dentro de arreglo de reglas\n        //tipoElemento = si la seleccion en el contenedor de reglas es cursor arriba, cursor abajo, y otra regla o otra formula\n        indiceSeleccionadoReglas = indice;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarEstadoSiEsObjeto (esObjeto) {\n        banderaEsObjeto = esObjeto;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(banderaEsObjeto) {\n            nivelNuevoAtributoVarios = nivel;\n        } else {\n            nivelNuevoAtributoUnico = nivel;\n        }\n    }\n\n    actualizarNombreVariable () {\n        var nombreVariableN = $(\"#nombreFuenteDato\").val();\n        nombreVariable = nombreVariableN;\n    }\n\n    actualizarDescripcionVariable () {\n        var descripcionVariableN = $(\"#descripcionFuenteDato\").val();\n        descripcionVariable = descripcionVariableN;\n    }\n\n    actualizarNombreCampoNuevoAtributosVario () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributosVario = nombreCampo;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MÁXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MÍNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n    \n    render() {\n        if(this.state.componenteActual.localeCompare(\"crearVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <CrearVariable pool={this.props.pool}\n                                                terminoCrearCampo={this.props.terminoCrearCampo}\n                                                columnas={this.props.columnas}\n                                                atributos={this.state.atributos}\n                                                cambioDeArreglosDeAtributos={this.cambioDeArreglosDeAtributos}\n                                                nombreVariable={nombreVariable}\n                                                actualizarNombreVariable={this.actualizarNombreVariable}\n                                                descripcionVariable={descripcionVariable}\n                                                actualizarDescripcionVariable={this.actualizarDescripcionVariable}\n                                                nombreCampoNuevoAtributosVario={nombreCampoNuevoAtributosVario}\n                                                actualizarNombreCampoNuevoAtributosVario={this.actualizarNombreCampoNuevoAtributosVario}\n                                                actualizarEstadoSiEsObjeto={this.actualizarEstadoSiEsObjeto}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                retornoTipoDeAsignacion={this.retornoTipoDeAsignacion}\n                                                goToCreateConditions={this.goToCreateConditions}\n                                                goCreateVariableFieldSQL={this.goCreateVariableFieldSQL}\n                                                guardarVariable={this.guardarVariable}\n                                                crearAtributoVariable={this.crearAtributoVariable}>\n                    </CrearVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampo}\n                                                retornoOperacion={this.retornoOperacion}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormula}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            anadirFormula={this.anadirFormula}\n                                            retornoCampo={this.retornoCampo}\n                                            retornoOperacion={this.retornoOperacion}\n                                            retornoTipoDeAsignacion={this.retornoTipoDeAsignacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableSQL\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionSQL pool={this.props.pool}\n                                            navbar={this.state.navbar}>\n                    </InstruccionSQL>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CrearVariablesHome.js"}