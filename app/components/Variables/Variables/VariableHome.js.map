{"version":3,"sources":["components/Variables/Variables/VariableHome.js"],"names":["isMounted","VariableHome","props","state","componenteActual","idVariable","tipoVariable","esObjetoVariable","esInstruccionSQLVariable","crearVariables","bind","retornoSeleccionVariables","editarVariables","terminoCrearVariablesPasarAEdit","setState","nombreFuenteDatos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","undefined","length","editarFuenteDatos","ID","nombre","descripcion","esObjeto","objetoPadreID","guardar","localeCompare","configuracionHome","goOptions","showCondicionVar","terminoCrearFuenteDatosPasarAEdit","idTablaSeleccionada","columnas","nombreTablaSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarVariables from './SeleccionarVariables.js';\nimport CrearVariablesHome from './CrearVariables/CrearVariablesHome.js';\nimport EditarVariablesHome from './EditarVariable/EditarVariablesHome.js';\n\nvar isMounted = false;\n\nexport default class VariableHome extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: \"selVariables\",\n            idVariable: -1,\n            tipoVariable: \"\",\n            esObjetoVariable: \"\",\n            esInstruccionSQLVariable: \"\"\n        }\n        this.crearVariables = this.crearVariables.bind(this);\n        this.retornoSeleccionVariables = this.retornoSeleccionVariables.bind(this);\n        this.editarVariables = this.editarVariables.bind(this);\n        this.terminoCrearVariablesPasarAEdit = this.terminoCrearVariablesPasarAEdit.bind(this);\n    }\n\n    componentDidMount () {\n        //\n    }\n\n    crearVariables () {\n        this.setState({\n            componenteActual: \"crearVariables\"\n        });\n    }\n\n    retornoSeleccionVariables () {\n        this.setState({\n            componenteActual: \"selVariables\",\n            idVariable: -1,\n            tipoVariable: \"\",\n            esObjetoVariable: \"\",\n            esInstruccionSQLVariable: \"\"\n        });\n    }\n\n    editarVariables (idVariable, esObjetoVariable, esInstruccionSQLVariable, tipoVariable) {\n        this.setState({\n            idVariable: idVariable,\n            componenteActual: \"editarVariables\",\n            tipoVariable: tipoVariable,\n            esObjetoVariable: esObjetoVariable,\n            esInstruccionSQLVariable: esInstruccionSQLVariable\n        });\n    }\n\n    terminoCrearVariablesPasarAEdit (nombreFuenteDatos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Campos where nombre = '\"+nombreFuenteDatos+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset != undefined) {\n                            if(result.recordset.length) {\n                                this.editarFuenteDatos(result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].descripcion, result.recordset[0].esObjeto, result.recordset[0].objetoPadreID, result.recordset[0].guardar);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"selVariables\") == 0) {\n            return (\n                <div>\n                    <SeleccionarVariables pool={this.props.pool}\n                                            configuracionHome={this.props.configuracionHome}\n                                            crearVariables={this.crearVariables}\n                                            goOptions={this.props.goOptions}\n                                            editarVariable={this.editarVariables}>\n                    </SeleccionarVariables>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearVariables\") == 0) {\n            return (\n                <div>\n                    <CrearVariablesHome pool={this.props.pool}\n                                            showCondicionVar={this.props.showCondicionVar}\n                                            terminoCrearCampo={this.terminoCrearFuenteDatosPasarAEdit}\n                                            idTablaSeleccionada={this.props.idTablaSeleccionada}\n                                            columnas={this.state.columnas}\n                                            nombreTablaSeleccionada={this.props.nombreTablaSeleccionada}\n                                            goOptions={this.props.goOptions}\n                                            retornoSeleccionVariables={this.retornoSeleccionVariables}\n                                            configuracionHome={this.props.configuracionHome}>\n                    </CrearVariablesHome>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"editarVariables\") == 0) {\n            return (\n                <div>\n                    <EditarVariablesHome pool={this.props.pool}\n                                    idVariable={this.state.idVariable}\n                                    tipoVariable={this.state.tipoVariable}\n                                    esObjetoVariable={this.state.esObjetoVariable}\n                                    esInstruccionSQLVariable={this.state.esInstruccionSQLVariable}\n                                    retornoSeleccionVariables={this.retornoSeleccionVariables}\n                                    configuracionHome={this.props.configuracionHome}>\n                    </EditarVariablesHome>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"VariableHome.js"}