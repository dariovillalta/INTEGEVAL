{"version":3,"sources":["components/Variables/Variables/VariableHome.js"],"names":["isMounted","VariableHome","props","state","componenteActual","idFuenteDatos","nombreFuenteDatos","descripcionFuenteDatos","esObjetoFuenteDatos","objetoPadreIDFuenteDatos","guardarFuenteDatos","crearVariables","bind","retornoSeleccionVariables","editarVariables","terminoCrearVariablesPasarAEdit","setState","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","undefined","length","editarFuenteDatos","ID","nombre","descripcion","esObjeto","objetoPadreID","guardar","localeCompare","configuracionHome","goOptions","showCondicionVar","terminoCrearFuenteDatosPasarAEdit","idTablaSeleccionada","columnas","nombreTablaSeleccionada","showFormula","showRiesgos","retornoSeleccionTabla","retornoSeleccionRiesgoSameComponent","retornoSeleccionRiesgoDiffComponent","updateNavBar","showUmbralHome","updateFormula","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarVariables from './SeleccionarVariables.js';\nimport CrearVariablesHome from './CrearVariables/CrearVariablesHome.js';\nimport EditarVariable from './EditarVariable.js';\n\nvar isMounted = false;\n\nexport default class VariableHome extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: \"selVariables\",\n            idFuenteDatos: -1,\n            nombreFuenteDatos: \"\",\n            descripcionFuenteDatos: \"\",\n            esObjetoFuenteDatos: \"\",\n            objetoPadreIDFuenteDatos: -1,\n            guardarFuenteDatos: \"\"\n        }\n        this.crearVariables = this.crearVariables.bind(this);\n        this.retornoSeleccionVariables = this.retornoSeleccionVariables.bind(this);\n        this.editarVariables = this.editarVariables.bind(this);\n        this.terminoCrearVariablesPasarAEdit = this.terminoCrearVariablesPasarAEdit.bind(this);\n    }\n\n    componentDidMount () {\n        //\n    }\n\n    crearVariables () {\n        this.setState({\n            componenteActual: \"crearVariables\"\n        });\n    }\n\n    retornoSeleccionVariables () {\n        this.setState({\n            componenteActual: \"selVariables\",\n            idFuenteDatos: -1,\n            nombreFuenteDatos: \"\",\n            descripcionFuenteDatos: \"\",\n            esObjetoFuenteDatos: \"\",\n            objetoPadreIDFuenteDatos: -1,\n            guardarFuenteDatos: \"\"\n        });\n    }\n\n    editarVariables (idFuenteDatos, nombreFuenteDatos, descripcionFuenteDatos, esObjetoFuenteDatos, objetoPadreIDFuenteDatos, guardarFuenteDatos) {\n        this.setState({\n            idFuenteDatos: idFuenteDatos,\n            componenteActual: \"editarVariables\",\n            nombreFuenteDatos: nombreFuenteDatos,\n            descripcionFuenteDatos: descripcionFuenteDatos,\n            esObjetoFuenteDatos: esObjetoFuenteDatos,\n            objetoPadreIDFuenteDatos: objetoPadreIDFuenteDatos,\n            guardarFuenteDatos: guardarFuenteDatos\n        });\n    }\n\n    terminoCrearVariablesPasarAEdit (nombreFuenteDatos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Campos where nombre = '\"+nombreFuenteDatos+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset != undefined) {\n                            if(result.recordset.length) {\n                                this.editarFuenteDatos(result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].descripcion, result.recordset[0].esObjeto, result.recordset[0].objetoPadreID, result.recordset[0].guardar);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"selVariables\") == 0) {\n            return (\n                <div>\n                    <SeleccionarVariables pool={this.props.pool}\n                                            configuracionHome={this.props.configuracionHome}\n                                            crearVariables={this.crearVariables}\n                                            goOptions={this.props.goOptions}\n                                            editarFuenteDatos={this.editarFuenteDatos}>\n                    </SeleccionarVariables>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearVariables\") == 0) {\n            return (\n                <div>\n                    <CrearVariablesHome pool={this.props.pool}\n                                            showCondicionVar={this.props.showCondicionVar}\n                                            terminoCrearCampo={this.terminoCrearFuenteDatosPasarAEdit}\n                                            idTablaSeleccionada={this.props.idTablaSeleccionada}\n                                            columnas={this.state.columnas}\n                                            nombreTablaSeleccionada={this.props.nombreTablaSeleccionada}\n                                            goOptions={this.props.goOptions}\n                                            retornoSeleccionVariables={this.retornoSeleccionVariables}\n                                            configuracionHome={this.props.configuracionHome}>\n                    </CrearVariablesHome>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"editarVariables\") == 0) {\n            return (\n                <div>\n                    <EditarVariablesHome pool={this.props.pool}\n                                    showFormula={this.props.showFormula}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    showRiesgos={this.props.showRiesgos}\n                                    goOptions={this.props.goOptions}\n                                    retornoSeleccionTabla={this.props.retornoSeleccionTabla}\n                                    retornoSeleccionVariables={this.retornoSeleccionVariables}\n                                    retornoSeleccionRiesgo={this.retornoSeleccionRiesgoSameComponent}\n                                    retornoSeleccionRiesgoUmbral={this.retornoSeleccionRiesgoDiffComponent}\n                                    configuracionHome={this.props.configuracionHome}\n                                    updateNavBar={this.props.updateNavBar}\n                                    showUmbralHome={this.props.showUmbralHome}\n                                    idFuenteDatos={this.state.idFuenteDatos}\n                                    nombreFuenteDatos={this.state.nombreFuenteDatos}\n                                    descripcionFuenteDatos={this.state.descripcionFuenteDatos}\n                                    esObjetoFuenteDatos={this.state.esObjetoFuenteDatos}\n                                    objetoPadreIDFuenteDatos={this.state.objetoPadreIDFuenteDatos}\n                                    guardarFuenteDatos={this.state.guardarFuenteDatos}\n                                    updateFormula={this.props.updateFormula}>\n                    </EditarVariablesHome>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"VariableHome.js"}