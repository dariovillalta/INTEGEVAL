{"version":3,"sources":["components/Variables/Variables/SeleccionarVariables.js"],"names":["colores","SeleccionarVariable","props","state","variables","excel","formas","getVariables","bind","getExcel","getFormas","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","arreglo","i","recordset","length","copyVar","jQuery","extend","tipo","push","setState","configuracionHome","goOptions","color","crearVariables","map","variable","editarVariable","ID","esObjeto","esInstruccionSQL","nombre","width","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,OAAO,GAAG,CAAC,WAAD,EAAc,SAAd,EAAyB,SAAzB,EAAoC,OAApC,CAAhB;;IAEqBC,mB;;;;;AACjB,+BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,6FAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,EADF;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,MAAM,EAAE;AAHC,KAAb;AAKA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AACA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcD,IAAd,+BAAhB;AACA,UAAKE,SAAL,GAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB;AATe;AAUlB;;;;wCAEmB;AAChB,WAAKD,YAAL;AACA,WAAKE,QAAL;AACA,WAAKC,SAAL;AACH;;;mCAEc;AAAA;;AACX,UAAMC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKX,KAAL,CAAWY,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyC,UAACN,GAAD,EAAMO,MAAN,EAAiB;AACtD,cAAIP,GAAJ,EAAS;AACLQ,YAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAIY,OAAO,GAAG,EAAd;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,MAAM,CAACO,SAAP,CAAiBC,MAArC,EAA6CF,CAAC,EAA9C,EAAkD;AAC9C,oBAAIG,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoB,EAApB,EAAwBX,MAAM,CAACO,SAAP,CAAiBD,CAAjB,CAAxB,CAAd;AACAG,gBAAAA,OAAO,CAACG,IAAR,GAAe,UAAf;AACAP,gBAAAA,OAAO,CAACQ,IAAR,CAAaJ,OAAb;AACH;;AAAA;;AACD,cAAA,MAAI,CAACK,QAAL,CAAc;AACVjC,gBAAAA,SAAS,EAAEwB;AADD,eAAd;AAGH,aAVD;AAWH;AACJ,SApBD;AAqBH,OA3BD,EAFW,CA6BP;AACP;;;+BAEU;AAAA;;AACP,UAAMjB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKX,KAAL,CAAWY,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,6BAAd,EAA6C,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC1D,cAAIP,GAAJ,EAAS;AACLQ,YAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAIY,OAAO,GAAG,EAAd;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,MAAM,CAACO,SAAP,CAAiBC,MAArC,EAA6CF,CAAC,EAA9C,EAAkD;AAC9C,oBAAIG,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoB,EAApB,EAAwBX,MAAM,CAACO,SAAP,CAAiBD,CAAjB,CAAxB,CAAd;AACAG,gBAAAA,OAAO,CAACG,IAAR,GAAe,OAAf;AACAP,gBAAAA,OAAO,CAACQ,IAAR,CAAaJ,OAAb;AACH;;AAAA;;AACD,cAAA,MAAI,CAACK,QAAL,CAAc;AACVhC,gBAAAA,KAAK,EAAEuB;AADG,eAAd;AAGH,aAVD;AAWH;AACJ,SApBD;AAqBH,OA3BD,EAFO,CA6BH;AACP;;;gCAEW;AAAA;;AACR,UAAMjB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKX,KAAL,CAAWY,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,+BAAd,EAA+C,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC5D,cAAIP,GAAJ,EAAS;AACLQ,YAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAIY,OAAO,GAAG,EAAd;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,MAAM,CAACO,SAAP,CAAiBC,MAArC,EAA6CF,CAAC,EAA9C,EAAkD;AAC9C,oBAAIG,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoB,EAApB,EAAwBX,MAAM,CAACO,SAAP,CAAiBD,CAAjB,CAAxB,CAAd;AACAG,gBAAAA,OAAO,CAACG,IAAR,GAAe,OAAf;AACAP,gBAAAA,OAAO,CAACQ,IAAR,CAAaJ,OAAb;AACH;;AAAA;;AACD,cAAA,MAAI,CAACK,QAAL,CAAc;AACV/B,gBAAAA,MAAM,EAAEsB;AADE,eAAd;AAGH,aAVD;AAWH;AACJ,SApBD;AAqBH,OA3BD,EAFQ,CA6BJ;AACP;;;6BAEQ;AAAA;;AACL,aACI,6CACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,gCADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWoC;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKpC,KAAL,CAAWqC;AAAlF,SAA6F;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,oCAA7F,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,qBAHJ,CADJ,CADJ,CAFJ,CADJ,CADJ,CADJ,EAiBI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAG,QAAA,SAAS,EAAE,gEAAd;AAAgF,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAvF;AAA2G,QAAA,OAAO,EAAE,KAAKtC,KAAL,CAAWuC;AAA/H,0BADJ,CAjBJ,EAoBI,2CApBJ,EAqBI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACK,KAAKtC,KAAL,CAAWC,SAAX,CAAqBsC,GAArB,CAAyB,UAACC,QAAD,EAAWd,CAAX;AAAA,eACtB;AAAG,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC3B,KAAL,CAAW0C,cAAX,CAA0BD,QAAQ,CAACE,EAAnC,EAAuCF,QAAQ,CAACG,QAAhD,EAA0DH,QAAQ,CAACI,gBAAnE,EAAqFJ,QAAQ,CAACR,IAA9F,CAAN;AAAA,WAAZ;AAAuH,UAAA,KAAK,EAAE;AAACK,YAAAA,KAAK,EAAE;AAAR,WAA9H;AAAkJ,UAAA,SAAS,EAAE,cAAcX,CAAC,IAAI7B,OAAO,CAAC+B,MAAR,GAAe,CAApB,GAAwB/B,OAAO,CAAC6B,CAAD,CAA/B,GAAqC7B,OAAO,CAAC6B,CAAC,GAAC7B,OAAO,CAAC+B,MAAX,CAA1D,IAAgF,iDAA7O;AAAgS,UAAA,GAAG,EAAEY,QAAQ,CAACE;AAA9S,WAAmTF,QAAQ,CAACK,MAA5T,CADsB;AAAA,OAAzB,CADL,EAIK,KAAK7C,KAAL,CAAWE,KAAX,CAAiBqC,GAAjB,CAAqB,UAACC,QAAD,EAAWd,CAAX;AAAA,eAClB;AAAG,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC3B,KAAL,CAAW0C,cAAX,CAA0BD,QAAQ,CAACE,EAAnC,EAAuCF,QAAQ,CAACG,QAAhD,EAA0DH,QAAQ,CAACI,gBAAnE,EAAqFJ,QAAQ,CAACR,IAA9F,CAAN;AAAA,WAAZ;AAAuH,UAAA,KAAK,EAAE;AAACK,YAAAA,KAAK,EAAE;AAAR,WAA9H;AAAkJ,UAAA,SAAS,EAAE,cAAcX,CAAC,IAAI7B,OAAO,CAAC+B,MAAR,GAAe,CAApB,GAAwB/B,OAAO,CAAC6B,CAAD,CAA/B,GAAqC7B,OAAO,CAAC6B,CAAC,GAAC7B,OAAO,CAAC+B,MAAX,CAA1D,IAAgF,iDAA7O;AAAgS,UAAA,GAAG,EAAEY,QAAQ,CAACE;AAA9S,WAAmTF,QAAQ,CAACK,MAA5T,CADkB;AAAA,OAArB,CAJL,EAOK,KAAK7C,KAAL,CAAWG,MAAX,CAAkBoC,GAAlB,CAAsB,UAACC,QAAD,EAAWd,CAAX;AAAA,eACnB;AAAG,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC3B,KAAL,CAAW0C,cAAX,CAA0BD,QAAQ,CAACE,EAAnC,EAAuCF,QAAQ,CAACG,QAAhD,EAA0DH,QAAQ,CAACI,gBAAnE,EAAqFJ,QAAQ,CAACR,IAA9F,CAAN;AAAA,WAAZ;AAAuH,UAAA,KAAK,EAAE;AAACK,YAAAA,KAAK,EAAE;AAAR,WAA9H;AAAkJ,UAAA,SAAS,EAAE,cAAcX,CAAC,IAAI7B,OAAO,CAAC+B,MAAR,GAAe,CAApB,GAAwB/B,OAAO,CAAC6B,CAAD,CAA/B,GAAqC7B,OAAO,CAAC6B,CAAC,GAAC7B,OAAO,CAAC+B,MAAX,CAA1D,IAAgF,iDAA7O;AAAgS,UAAA,GAAG,EAAEY,QAAQ,CAACE;AAA9S,WAAmTF,QAAQ,CAACK,MAA5T,CADmB;AAAA,OAAtB,CAPL,EAWQ,KAAK7C,KAAL,CAAWC,SAAX,CAAqB2B,MAArB,IAA+B,CAA/B,IAAoC,KAAK5B,KAAL,CAAWE,KAAX,CAAiB0B,MAAjB,IAA2B,CAA/D,IAAoE,KAAK5B,KAAL,CAAWG,MAAX,CAAkByB,MAAlB,IAA4B,CAAhG,GACE;AAAK,QAAA,SAAS,EAAC,2DAAf;AAA2E,QAAA,KAAK,EAAE;AAACkB,UAAAA,KAAK,EAAE;AAAR;AAAlF,wCADF,GAEE,IAbV,CADJ,CADJ,CADJ,CADJ,CArBJ,CADJ;AAgDH;;;;EApK4CC,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nconst colores = [\"secondary\", \"success\", \"primary\", \"brand\"];\n\nexport default class SeleccionarVariable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            variables: [],\n            excel: [],\n            formas: []\n        }\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n    }\n\n    componentDidMount() {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var arreglo = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            var copyVar = jQuery.extend(true, {}, result.recordset[i]);\n                            copyVar.tipo = 'variable';\n                            arreglo.push(copyVar);\n                        };\n                        this.setState({\n                            variables: arreglo\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelArchivos\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var arreglo = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            var copyVar = jQuery.extend(true, {}, result.recordset[i]);\n                            copyVar.tipo = 'excel';\n                            arreglo.push(copyVar);\n                        };\n                        this.setState({\n                            excel: arreglo\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var arreglo = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            var copyVar = jQuery.extend(true, {}, result.recordset[i]);\n                            copyVar.tipo = 'forma';\n                            arreglo.push(copyVar);\n                        };\n                        this.setState({\n                            formas: arreglo\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        return (\n            <div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"page-header\"}>\n                            <h2 className={\"pageheader-title\"}>Seleccionar Variable</h2>\n                            <div className={\"page-breadcrumb\"}>\n                                <nav aria-label=\"breadcrumb\">\n                                    <ol className={\"breadcrumb\"}>\n                                        <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                        <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                        <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Variables</li>\n                                    </ol>\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={\"row\"}>\n                    <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.crearVariables}>Crear Variable</a>\n                </div>\n                <br/>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"card influencer-profile-data\"}>\n                            <div className={\"card-body\"}>\n                                <div className={\"row border-top border-bottom addPaddingToConfig\"}>\n                                    {this.state.variables.map((variable, i) =>\n                                        <a onClick={() => this.props.editarVariable(variable.ID, variable.esObjeto, variable.esInstruccionSQL, variable.tipo)} style={{color: \"#fafafa\"}} className={\"btn btn-\" + (i <= colores.length-1 ? colores[i] : colores[i%colores.length]) + ' btn-block btnWhiteColorHover font-bold font-20'} key={variable.ID}>{variable.nombre}</a>\n                                    )}\n                                    {this.state.excel.map((variable, i) =>\n                                        <a onClick={() => this.props.editarVariable(variable.ID, variable.esObjeto, variable.esInstruccionSQL, variable.tipo)} style={{color: \"#fafafa\"}} className={\"btn btn-\" + (i <= colores.length-1 ? colores[i] : colores[i%colores.length]) + ' btn-block btnWhiteColorHover font-bold font-20'} key={variable.ID}>{variable.nombre}</a>\n                                    )}\n                                    {this.state.formas.map((variable, i) =>\n                                        <a onClick={() => this.props.editarVariable(variable.ID, variable.esObjeto, variable.esInstruccionSQL, variable.tipo)} style={{color: \"#fafafa\"}} className={\"btn btn-\" + (i <= colores.length-1 ? colores[i] : colores[i%colores.length]) + ' btn-block btnWhiteColorHover font-bold font-20'} key={variable.ID}>{variable.nombre}</a>\n                                    )}\n                                    {\n                                        this.state.variables.length == 0 && this.state.excel.length == 0 && this.state.formas.length == 0\n                                        ? <div className=\"p-3 mb-2 bg-dark text-white font-bold font-20 text-center\" style={{width: \"100%\"}}>No existen variables creadas</div>\n                                        : null\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n"],"file":"SeleccionarVariables.js"}