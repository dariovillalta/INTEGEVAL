{"version":3,"sources":["components/Variables/Variables/EditarVariable/FuenteDatoForma.js"],"names":["variables","excel","formas","periodicidad","nombre","window","arregloDeErroresFormas","arregloHTMLFormas","FuenteDatoForma","props","state","tipo","guardar","valorPeriodicidad","forma","showModalForma","tituloVariableForma","htmlForma","usuarios","saveBitacora","bind","crearVariable","traerForma","eliminarVarExcel","eliminarVariable","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","actualizarPeriodicidad","cargarDatePicker","isValidDate","verificarSiExisteExcelEnResultadosHistoricosModificar","crearTablaDeResultadoNombreModificar","crearResultadoNombreModificar","modificarResultadosNombre","verificarPeriodicidadGuardarModificar","updatePeriodicidadModificar","verificarPeriodicidad","addDays","addMonths","addYears","traerPeriodicidadVariable","formaCrearVariable","iniciarMostrarFormas","updateForm","loadFechas","closeModalForma","verificarSiExisteFormaEnResultadosHistoricos","crearTablaDeResultadoNombreForma","crearResultadoNombreForma","guardarResultadosNombreForma","guardarForma","borrarForma","verificarPeriodicidadGuardar","updatePeriodicidad","guardarPeriodicidad","tieneEspaciosEnBlanco","getUsuarios","goToTimeline","tipoVariableOriginal","localeCompare","fecha","descripcion","tipoVariable","idVariable","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","userID","userName","getFullYear","getMonth","getDate","result","console","log","showMessage","rollback","commit","recordset","length","setState","$","val","prop","responsable","fechaInicioCalculo","datepicker","nombreVariable","guardarVariable","is","Date","categoriaVariable","alert","actualizarIDVariableModificada","transaction1","request1","transaction2","request2","limpiarArreglos","transaction3","request3","transaction4","request4","transaction5","request5","transaction6","request6","transaction7","request7","transaction8","request8","contadorObjetosGuardados","noExiste","i","toLowerCase","ID","format","todayHighlight","viewMode","minViewMode","language","Object","prototype","toString","call","isNaN","getTime","variable","inicioVigencia","hoy","textoCreacionTabla","getHours","getMinutes","getSeconds","mes","dia","resultado","tabla","copiedObject","jQuery","extend","days","date","setDate","months","setMonth","years","setYear","getYear","verificarFinPeriodicidad","fechaUltimoCalculo","tieneUltimoCalculo","realizarCalculo","ultimoCalculoVigente","fechaSiguienteCalculo","tocaNuevoCalculo","indexJ","id","nombreSiguiente","indexSiguiente","tipoSiguiente","inputSiguiente","parseFloat","message","push","HTMLFormas","width","display","alignItems","justifyContent","margin","titulo","idInput","setTimeout","fechaNombreTabla","textoInsertPrincipio","instruccionSQLBorrar","instruccionSQLFinal","self","instruccionSQL","s","test","esExcel","idVariableExcel","esColeccion","changeStateFirstTimeToTrue","periodicidadVariable","map","responsableVariable","actualizarNombreEncargado","usuario","marginLeft","eliminarVarForma","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport Modal from '../../../Modal/Modal.js';\n\nvar variables = [];\nvar excel = [];\nvar formas = [];\n\nconst periodicidad = [ {nombre: \"diario\"}, {nombre: \"semanal\"}, {nombre: \"mensual\"}, {nombre: \"trimestral\"}, {nombre: \"bi-anual\"}, {nombre: \"anual\"} ];\n\n\n\n\n/*\n    **************************************\n    **************************************\n                VARIABLES CALCULO \n    **************************************\n    **************************************\n*/\n\nwindow.arregloDeErroresFormas = [];\nwindow.arregloHTMLFormas = [];                          //Arreglo que contiene el codigo html de las formas\n\n/*\n    **************************************\n    **************************************\n            VARIABLES CALCULO FIN\n    **************************************\n    **************************************\n*/\n\nexport default class FuenteDatoForma extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            nombre: \"\",\n            tipo: \"\",\n            guardar: \"\",\n            valorPeriodicidad: '-1',\n            forma: null,\n            showModalForma: false,\n            tituloVariableForma: \"\",\n            htmlForma: '',\n            usuarios: []\n        }\n        this.saveBitacora = this.saveBitacora.bind(this);\n\n        this.crearVariable = this.crearVariable.bind(this);\n        this.traerForma = this.traerForma.bind(this);\n        this.eliminarVarExcel = this.eliminarVarExcel.bind(this);\n        this.eliminarVariable = this.eliminarVariable.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.cargarDatePicker = this.cargarDatePicker.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n        this.verificarSiExisteExcelEnResultadosHistoricosModificar = this.verificarSiExisteExcelEnResultadosHistoricosModificar.bind(this);\n        this.crearTablaDeResultadoNombreModificar = this.crearTablaDeResultadoNombreModificar.bind(this);\n        this.crearResultadoNombreModificar = this.crearResultadoNombreModificar.bind(this);\n        this.modificarResultadosNombre = this.modificarResultadosNombre.bind(this);\n        this.verificarPeriodicidadGuardarModificar = this.verificarPeriodicidadGuardarModificar.bind(this);\n        this.updatePeriodicidadModificar = this.updatePeriodicidadModificar.bind(this);\n\n        this.verificarPeriodicidad = this.verificarPeriodicidad.bind(this);\n        this.addDays = this.addDays.bind(this);\n        this.addMonths = this.addMonths.bind(this);\n        this.addYears = this.addYears.bind(this);\n        this.traerPeriodicidadVariable = this.traerPeriodicidadVariable.bind(this);\n        this.formaCrearVariable = this.formaCrearVariable.bind(this);\n        this.iniciarMostrarFormas = this.iniciarMostrarFormas.bind(this);\n        this.updateForm = this.updateForm.bind(this);\n        this.loadFechas = this.loadFechas.bind(this);\n        this.closeModalForma = this.closeModalForma.bind(this);\n        this.verificarSiExisteFormaEnResultadosHistoricos = this.verificarSiExisteFormaEnResultadosHistoricos.bind(this);\n        this.crearTablaDeResultadoNombreForma = this.crearTablaDeResultadoNombreForma.bind(this);\n        this.crearResultadoNombreForma = this.crearResultadoNombreForma.bind(this);\n        this.guardarResultadosNombreForma = this.guardarResultadosNombreForma.bind(this);\n        this.guardarForma = this.guardarForma.bind(this);\n        this.borrarForma = this.borrarForma.bind(this);\n        this.verificarPeriodicidadGuardar = this.verificarPeriodicidadGuardar.bind(this);\n        this.updatePeriodicidad = this.updatePeriodicidad.bind(this);\n        this.guardarPeriodicidad = this.guardarPeriodicidad.bind(this);\n\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n\n        this.getUsuarios = this.getUsuarios.bind(this);\n        this.goToTimeline = this.goToTimeline.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0) {\n            this.traerForma();\n        }\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n        this.getUsuarios();\n    }\n\n    saveBitacora (fecha, descripcion, tipoVariable, idVariable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Bitacora (usuarioID, nombreUsuario, fecha, descripcion, tipoVariable, idVariable) values (\"+this.props.userID+\", '\"+this.props.userName+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+descripcion+\"', '\"+tipoVariable+\"', \"+idVariable+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.props.showMessage(\"Error\", 'No se pudo guardar información de bitacora.', true, false, {});\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerForma() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.setState({\n                                nombre: result.recordset[0].nombre,\n                                tipo: result.recordset[0].tipo,\n                                guardar: result.recordset[0].guardar,\n                                valorPeriodicidad: result.recordset[0].periodicidad,\n                                forma: result.recordset[0]\n                            });\n                            $(\"#nombreVariable\").val(result.recordset[0].nombre);\n                            $(\"#tipo\").val(result.recordset[0].tipo);\n                            if (result.recordset[0].guardar)\n                                $(\"#guardarVariable\").prop('checked', true);\n                            else\n                                $(\"#guardarVariable\").prop('checked', false);\n                            $(\"#periodicidad\").val(result.recordset[0].periodicidad);\n                            $(\"#responsable\").val(result.recordset[0].responsable);\n                            if(result.recordset[0].fechaInicioCalculo.getFullYear() == 1964 && result.recordset[0].fechaInicioCalculo.getMonth() == 4 && result.recordset[0].fechaInicioCalculo.getDate() == 28){\n                                //\n                            } else {\n                                $(\"#fecha\").datepicker(\"setDate\", result.recordset[0].fechaInicioCalculo);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearVariable () {\n        var nombreVariable = $(\"#nombreVariable\").val();\n        var tipo = $(\"#tipo\").val();\n        var guardarVariable;\n        if ($(\"#guardarVariable\").is(':checked'))\n            guardarVariable = true;\n        else\n            guardarVariable = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fecha;\n        if(periodicidad.localeCompare(\"-1\") == 0)\n            fecha = new Date(1964, 4, 28);\n        else\n            fecha = $(\"#fecha\").datepicker('getDate');\n        var responsable = $(\"#responsable\").val();\n        var categoriaVariable = $(\"#categoriaVariable\").val();\n        if(nombreVariable.length > 0 && nombreVariable.length < 1001) {\n            if(!this.tieneEspaciosEnBlanco(nombreVariable)) {\n                if(this.verificarNoExisteNombreVar(nombreVariable)) {\n                    if(tipo.length > 0 && tipo.length < 1001) {\n                        if(periodicidad.length > 0 && periodicidad.length < 51) {\n                            if(this.isValidDate(fecha)) {\n                                if(responsable.length > 0 && responsable.length < 101) {\n                                    if(categoriaVariable.length > 0 && responsable.length < 101) {\n                                        if (this.props.tipoVariableOriginal.localeCompare(\"excel\") == 0) {\n                                            this.eliminarVarExcel();\n                                        }\n                                        if (this.props.tipoVariableOriginal.localeCompare(\"variable\") == 0) {\n                                            this.eliminarVariable();\n                                        }\n                                        if (this.props.tipoVariableOriginal.localeCompare(\"forma\") != 0) {\n                                            const transaction = new sql.Transaction( this.props.pool );\n                                            transaction.begin(err => {\n                                                var rolledBack = false;\n                                                transaction.on('rollback', aborted => {\n                                                    rolledBack = true;\n                                                });\n                                                const request = new sql.Request(transaction);\n                                                request.query(\"insert into FormasVariables (nombre, tipo, periodicidad, fechaInicioCalculo, responsable, categoriaVariable, guardar) values ('\"+nombreVariable+\"', '\"+tipo+\"', '\"+periodicidad+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+responsable+\"', '\"+categoriaVariable+\"', '\"+guardarVariable+\"')\", (err, result) => {\n                                                    if (err) {\n                                                        console.log(err);\n                                                        if (!rolledBack) {\n                                                            transaction.rollback(err => {\n                                                            });\n                                                        }\n                                                    } else {\n                                                        transaction.commit(err => {\n                                                            alert(\"Variable Modificada\");\n                                                            this.getFormas();\n                                                            this.props.actualizarIDVariableModificada(\"forma\");\n                                                            var forma = {\n                                                                nombreVariable: nombreVariable,\n                                                                tipo: tipo,\n                                                                guardarVariable: guardarVariable,\n                                                                periodicidad: periodicidad,\n                                                                fecha: fecha,\n                                                                responsable: responsable\n                                                            }\n                                                            this.verificarSiExisteExcelEnResultadosHistoricosModificar(forma);\n                                                            this.props.getFormas();\n                                                        });\n                                                    }\n                                                });\n                                            }); // fin transaction\n                                        } else {\n                                            const transaction = new sql.Transaction( this.props.pool );\n                                            transaction.begin(err => {\n                                                var rolledBack = false;\n                                                transaction.on('rollback', aborted => {\n                                                    rolledBack = true;\n                                                });\n                                                const request = new sql.Request(transaction);\n                                                request.query(\"update FormasVariables set nombre = '\"+nombreVariable+\"', tipo = '\"+tipo+\"', periodicidad = '\"+periodicidad+\"', guardar = '\"+guardarVariable+\"', fechaInicioCalculo = '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', responsable = '\"+responsable+\"', categoriaVariable = '\"+categoriaVariable+\"' where ID = \"+this.props.idVariable, (err, result) => {\n                                                    if (err) {\n                                                        console.log(err);\n                                                        if (!rolledBack) {\n                                                            transaction.rollback(err => {\n                                                            });\n                                                        }\n                                                    } else {\n                                                        transaction.commit(err => {\n                                                            alert(\"Variable Modificada\");\n                                                            this.getFormas();\n                                                            var forma = {\n                                                                nombreVariable: nombreVariable,\n                                                                tipo: tipo,\n                                                                guardarVariable: guardarVariable,\n                                                                periodicidad: periodicidad,\n                                                                fecha: fecha,\n                                                                responsable: responsable\n                                                            }\n                                                            this.verificarSiExisteExcelEnResultadosHistoricosModificar(forma);\n                                                            this.props.getFormas();\n                                                        });\n                                                    }\n                                                });\n                                            }); // fin transaction\n                                        }\n                                    } else {\n                                        alert('Ingrese un valor para la categoria de variable que debe ser menor a 101 caracteres');\n                                    }\n                                } else {\n                                    alert('Ingrese un valor para el responsable que debe ser menor a 101 caracteres');\n                                }\n                            } else {\n                                alert('Ingrese un valor para la fecha');\n                            }\n                        } else {\n                            alert('Ingrese un valor para el valor de periodicidad que debe ser menor a 51 caracteres');\n                        }\n                    } else {\n                        alert('Ingrese un valor para el tipo de la variable que debe ser menor a 31 caracteres');\n                    }\n                } else {\n                    alert('El nombre de la variable debe ser único.');\n                }\n            } else {\n                alert('El nombre de la variable no debe contener espacios en blanco');\n            }\n        } else {\n            alert('Ingrese un valor para el nombre de la variable que debe ser menor a 101 caracteres');\n        }\n    }\n\n    eliminarVarExcel () {\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request1 = new sql.Request(transaction1);\n            request1.query(\"DELETE FROM ExcelArchivos WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction1\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM ExcelVariables WHERE excelArchivoID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n    }\n\n    eliminarVariable () {\n        this.props.limpiarArreglos();\n        $(\"#nombreFuenteDato\").val(\"\");\n        $(\"#descripcionFuenteDato\").val(\"\");\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request1 = new sql.Request(transaction1);\n            request1.query(\"DELETE FROM Variables WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction1\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM VariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n        const transaction3 = new sql.Transaction( this.props.pool );\n        transaction3.begin(err => {\n            var rolledBack = false;\n            transaction3.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request3 = new sql.Request(transaction3);\n            request3.query(\"DELETE FROM FormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction3.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction3.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction3\n        const transaction4 = new sql.Transaction( this.props.pool );\n        transaction4.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request4 = new sql.Request(transaction4);\n            request4.query(\"DELETE FROM ElementoFormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction4.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction4.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction4\n        const transaction5 = new sql.Transaction( this.props.pool );\n        transaction5.begin(err => {\n            var rolledBack = false;\n            transaction5.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request5 = new sql.Request(transaction5);\n            request5.query(\"DELETE FROM SegmentoReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction5.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction5.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction5\n        const transaction6 = new sql.Transaction( this.props.pool );\n        transaction6.begin(err => {\n            var rolledBack = false;\n            transaction6.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request6 = new sql.Request(transaction6);\n            request6.query(\"DELETE FROM ReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction6.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction6.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction6\n        const transaction7 = new sql.Transaction( this.props.pool );\n        transaction7.begin(err => {\n            var rolledBack = false;\n            transaction7.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request7 = new sql.Request(transaction7);\n            request7.query(\"delete from InstruccionSQL WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction7.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction7.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction7\n        const transaction8 = new sql.Transaction( this.props.pool );\n        transaction8.begin(err => {\n            var rolledBack = false;\n            transaction8.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request8 = new sql.Request(transaction8);\n            request8.query(\"delete from InstruccionSQLCampos where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction8.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction8.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                    });\n                }\n            });\n        }); // fin transaction8\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        variables = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        excel = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        formas = result.recordset;\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (nombre) {\n        var noExiste = true;\n        for (var i = 0; i < variables.length; i++) {\n            if (variables[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                noExiste = false;\n                break;\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < excel.length; i++) {\n                if (excel[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < formas.length; i++) {\n                if (this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0) {\n                    if (formas[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0 && formas[i].ID != this.props.idVariable) {\n                        noExiste = false;\n                        break;\n                    }\n                } else {\n                    if (formas[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                        noExiste = false;\n                        break;\n                    }\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        this.setState({\n            valorPeriodicidad: periodicidad\n        }, this.cargarDatePicker );\n    }\n\n    cargarDatePicker () {\n        $('#fecha').datepicker({\n            format: \"dd-mm-yyyy\",\n            todayHighlight: true,\n            viewMode: \"days\", \n            minViewMode: \"days\",\n            language: 'es'\n        });\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n\n    verificarSiExisteExcelEnResultadosHistoricosModificar (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ResultadosNombreVariables where nombreVariable = '\"+variable.nombre+\"' and finVigencia = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length == 0) {\n                            //this.crearTablaDeResultadoNombreModificar(variable);\n                        } else {\n                            console.log(\"ENCONTRO\")\n                            console.log(result.recordset[0])\n                            this.modificarResultadosNombre(variable, result.recordset[0].inicioVigencia);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearTablaDeResultadoNombreModificar (variable) {\n        //NOMBRE TABLA: NOMBREVARIABLE_AÑOVIGENCIA_MESVIGENCIA_DIAVIGENCIA_HORAVIGENCIA_MINUTOSVIGENCIA_SEGUNDOSVIGENCIA\n        //VIGENCIA: DIA CREACION\n        let hoy = new Date();\n        var textoCreacionTabla = 'CREATE TABLE '+variable.nombre+'_'+hoy.getFullYear()+'_'+(hoy.getMonth()+1)+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+' ( ID int IDENTITY(1,1) PRIMARY KEY, ';\n        for (var i = 0; i < variable.variables.length; i++) {\n            if(i != 0)\n                textoCreacionTabla += ', ';\n            if(variable.variables[i].tipo.localeCompare(\"numero\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' decimal(22,4)';\n            } else if(variable.variables[i].tipo.localeCompare(\"varchar\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' varchar(1000)';\n            } else if(variable.variables[i].tipo.localeCompare(\"bit\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' bit';\n            } else if(variable.variables[i].tipo.localeCompare(\"date\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' date';\n            }\n        };\n        textoCreacionTabla += ', f3ch4Gu4rd4do date )';\n        console.log('textoCreacionTabla')\n        console.log(textoCreacionTabla)\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(textoCreacionTabla, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //console.log(\"Tabla \"+variable.nombre+'_'+hoy.getFullYear()+'_'+hoy.getMonth()+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+\" creada.\");\n                        console.log('CREO TABLA');\n                        this.crearResultadoNombreModificar(variable, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearResultadoNombreModificar (variable, hoy) {\n        console.log('INICAR CREAR RESULTADO');\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ResultadosNombreVariables (nombreVariable, inicioVigencia, finVigencia) values ('\"+variable.nombre+\"', '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\":\"+hoy.getMinutes()+\":\"+hoy.getSeconds()+\"', '1964-05-28')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('GUARDO RESULTADO');\n                        this.verificarPeriodicidadGuardarModificar(variable, \"excel\", hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    modificarResultadosNombre (resultado, variable, hoy)  {\n        console.log('MODIFICAR CREAR RESULTADO');\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update ResultadosNombreVariables set finVigencia = '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\"' where ID = \"+resultado.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('GUARDO RESULTADO');\n                        this.crearTablaDeResultadoNombreModificar(variable);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarPeriodicidadGuardarModificar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.updatePeriodicidadModificar(variable, tabla, hoy);\n                        }/* else {\n                            this.guardarPeriodicidad(variable, tabla, hoy);\n                        }*/\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updatePeriodicidadModificar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"' set fechaUltimoCalculo = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    /*\n        **************************************\n        **************************************\n                    CALCULO CODIGO\n        **************************************\n        **************************************\n    */\n\n    verificarPeriodicidad () {\n        var copiedObject = jQuery.extend(true, {}, this.state.forma);\n        this.traerPeriodicidadVariable(copiedObject, \"forma\");\n    }\n\n    addDays (fecha, days) {\n        var date = new Date(fecha);\n        date.setDate(date.getDate() + days);\n        return date;\n    }\n\n    addMonths (fecha, months) {\n        var date = new Date(fecha);\n        date.setMonth(date.getMonth() + months);\n        return date;\n    }\n\n    addYears (fecha, years) {\n        var date = new Date(fecha);\n        date.setYear(date.getYear() + years);\n        return date;\n    }\n\n    traerPeriodicidadVariable (variable, tabla) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.verificarFinPeriodicidad();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var fechaInicioCalculo = variable.fechaInicioCalculo;\n                            var fechaUltimoCalculo = result.recordset[0].fechaUltimoCalculo;\n                            var tieneUltimoCalculo = false;\n                            //si la fecha es null, realizar calculo (28, 4, 1964) POPS BIRTHDAY\n                            if(fechaUltimoCalculo.getFullYear() != 1964 && fechaUltimoCalculo.getMonth() != 4 && fechaUltimoCalculo.getDate() != 28) {\n                                tieneUltimoCalculo = true;\n                            }\n                            if(!tieneUltimoCalculo) {\n                                variable.realizarCalculo = true;\n                            } else {\n                                var ultimoCalculoVigente = false;\n                                var periodicidad = variable.periodicidad;\n                                var fechaSiguienteCalculo = new Date(fechaInicioCalculo);\n                                while(fechaSiguienteCalculo.getFullYear() <= fechaUltimoCalculo.getFullYear() && fechaSiguienteCalculo.getMonth() <= fechaUltimoCalculo.getMonth() && fechaSiguienteCalculo.getDate() <= fechaUltimoCalculo.getDate()) {\n                                    if(periodicidad.localeCompare(\"diario\") == 0) {\n                                        fechaSiguienteCalculo = this.addDays(fechaSiguienteCalculo, 1);\n                                    } else if(periodicidad.localeCompare(\"semanal\") == 0) {\n                                        fechaSiguienteCalculo = this.addDays(fechaSiguienteCalculo, 7);\n                                    } else if(periodicidad.localeCompare(\"mensual\") == 0) {\n                                        fechaSiguienteCalculo = this.addMonths(fechaSiguienteCalculo, 1);\n                                    } else if(periodicidad.localeCompare(\"trimestral\") == 0) {\n                                        fechaSiguienteCalculo = this.addMonths(fechaSiguienteCalculo, 3);\n                                    } else if(periodicidad.localeCompare(\"bi-anual\") == 0) {\n                                        fechaSiguienteCalculo = this.addMonths(fechaSiguienteCalculo, 6);\n                                    } else if(periodicidad.localeCompare(\"anual\") == 0) {\n                                        fechaSiguienteCalculo = this.addYears(fechaSiguienteCalculo, 1);\n                                    }\n                                }\n                                var tocaNuevoCalculo = false;\n                                if(periodicidad.localeCompare(\"diario\") == 0) {\n                                    if(fechaSiguienteCalculo.getDate() >= fechaUltimoCalculo.getDate()+1) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                } else if(periodicidad.localeCompare(\"semanal\") == 0) {\n                                    if(fechaSiguienteCalculo.getDate() >= fechaUltimoCalculo.getDate()+7) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                } else if(periodicidad.localeCompare(\"mensual\") == 0) {\n                                    if(fechaSiguienteCalculo.getMonth() >= fechaUltimoCalculo.getMonth()+1) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                } else if(periodicidad.localeCompare(\"trimestral\") == 0) {\n                                    if(fechaSiguienteCalculo.getMonth() >= fechaUltimoCalculo.getMonth()+3) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                } else if(periodicidad.localeCompare(\"bi-anual\") == 0) {\n                                    if(fechaSiguienteCalculo.getMonth() >= fechaUltimoCalculo.getMonth()+6) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                } else if(periodicidad.localeCompare(\"anual\") == 0) {\n                                    if(fechaSiguienteCalculo.getFullYear() >= fechaUltimoCalculo.getFullYear()+1) {\n                                        tocaNuevoCalculo = true;\n                                    }\n                                }\n                                if(tocaNuevoCalculo) {\n                                    variable.realizarCalculo = true;\n                                } else {\n                                    variable.realizarCalculo = false;\n                                }\n                            }\n                        } else {\n                            if(indexJ != null)\n                                variable.realizarCalculo = true;\n                            else\n                                variable.realizarCalculo = true;\n                        }\n                        this.formaCrearVariable(variable);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    formaCrearVariable (id, nombreVariable, tipoVariable, nombreSiguiente, indexSiguiente, tipoSiguiente, inputSiguiente) {\n        //variableForma\n        if(tipoVariable.localeCompare(\"numero\") == 0) {\n            try {\n                var variable = parseFloat($(\"#variableForma\"+id).val());\n                window[nombreVariable] = variable;\n            }  catch(err) {\n                console.log(err.message);\n                arregloDeErroresFormas.push({nombre: nombreVariable, ID: id});\n            }\n        } else if(tipoVariable.localeCompare(\"bit\") == 0) {\n            try {\n                if ($(\"#variableForma\"+id).is(':checked')) {\n                    window[nombreVariable] = true;\n                } else {\n                    window[nombreVariable] = false;\n                }\n            }  catch(err) {\n                console.log(err.message);\n                arregloDeErroresFormas.push({nombre: nombreVariable, ID: id});\n            }\n        } else if(tipoVariable.localeCompare(\"varchar\") == 0) {\n            try {\n                var variable = $(\"#variableForma\"+id).val();\n                window[nombreVariable] = variable;\n            }  catch(err) {\n                console.log(err.message);\n                arregloDeErroresFormas.push({nombre: nombreVariable, ID: id});\n            }\n        } else if(tipoVariable.localeCompare(\"date\") == 0) {\n            try {\n                var variable = $(\"#variableForma\"+id).datepicker('getDate');\n                window[nombreVariable] = variable;\n            }  catch(err) {\n                console.log(err.message);\n                arregloDeErroresFormas.push({nombre: nombreVariable, ID: id});\n            }\n        }\n        this.verificarSiExisteFormaEnResultadosHistoricos(variable);\n    }\n\n    iniciarMostrarFormas (variable) {\n        var HTMLFormas = '';\n        if(variable.tipo.localeCompare(\"numero\") == 0) {\n            let nombre = variable.nombre;\n            let id = variable.ID;\n            let tipo = variable.tipo;\n            HTMLFormas =  <div style={{width: \"100%\"}}>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor={\"variableForma\"} className=\"col-form-label\">Valor:</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                <input id={\"variableForma\"} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                            <a href=\"#\" className=\"btn btn-brand active\" onClick={() => this.formaCrearVariable(id, nombre, tipo, variable)}>Guardar</a>\n                                        </div>\n                                        <br/>\n                                    </div>;\n        } else if(variable.tipo.localeCompare(\"bit\") == 0) {\n            let nombre = variable.nombre;\n            let id = variable.ID;\n            let tipo = variable.tipo;\n            HTMLFormas =  <div style={{width: \"100%\"}}>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor={\"variableForma\"} className=\"col-form-label\">Valor:</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <br/>\n                                                <div className={\"switch-button switch-button-bool\"} style={{margin:\"0 auto\", display:\"block\"}}>\n                                                    <input type=\"checkbox\" defaultChecked name={\"guardarFuenteDato\"} id={\"variableForma\"}/><span>\n                                                    <label htmlFor={\"guardarFuenteDato\"}></label></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                            <a href=\"#\" className=\"btn btn-brand active\" onClick={() => this.formaCrearVariable(id, nombre, tipo, variable)}>Guardar</a>\n                                        </div>\n                                        <br/>\n                                    </div>;\n        } else if(variable.tipo.localeCompare(\"varchar\") == 0) {\n            let nombre = variable.nombre;\n            let id = variable.ID;\n            let tipo = variable.tipo;\n            HTMLFormas =  <div style={{width: \"100%\"}}>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor={\"variableForma\"} className=\"col-form-label\">Valor:</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                <input id={\"variableForma\"} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                            <a href=\"#\" className=\"btn btn-brand active\" onClick={() => this.formaCrearVariable(id, nombre, tipo, variable)}>Guardar</a>\n                                        </div>\n                                        <br/>\n                                    </div>;\n        } else if(variable.tipo.localeCompare(\"date\") == 0) {\n            let nombre = variable.nombre;\n            let id = variable.ID;\n            let tipo = variable.tipo;\n            HTMLFormas =  <div style={{width: \"100%\"}}>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor={\"variableForma\"} className=\"col-form-label\">Valor:</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                <div className=\"row\" style={{display: \"flex\", justifyContent: \"center\"}}>\n                                                    <div id={\"variableForma\"} className=\"center-block\"></div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                            <a href=\"#\" className=\"btn btn-brand active\" onClick={() => this.formaCrearVariable(id, nombre, tipo, variable)}>Guardar</a>\n                                        </div>\n                                        <br/>\n                                    </div>;\n        }\n        this.updateForm(variable.nombre, HTMLFormas, variable.tipo, \"variableForma\");\n    }\n\n    updateForm (titulo, HTMLFormas, tipo, idInput) {\n        this.setState({\n            showModalForma: true,\n            tituloVariableForma: \"Variable: \"+titulo,\n            htmlForma: HTMLFormas\n        }, this.loadFechas(tipo, idInput));\n    }\n\n    loadFechas (tipo, idInput) {\n        if(tipo.localeCompare(\"date\") == 0) {\n            setTimeout(function(){\n                $('#'+idInput).datepicker({\n                    format: \"dd-mm-yyyy\",\n                    todayHighlight: true,\n                    viewMode: \"days\", \n                    minViewMode: \"days\",\n                    language: 'es'\n                });\n            }, 250);\n        }\n    }\n\n    closeModalForma () {\n        this.setState({\n            showModalForma: false\n        });\n    }\n\n\n    verificarSiExisteFormaEnResultadosHistoricos (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ResultadosNombreVariables where nombreVariable = '\"+variable.nombre+\"' and finVigencia = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length == 0) {\n                            this.crearTablaDeResultadoNombreForma(variable);\n                        } else {\n                            console.log(\"ENCONTRO\")\n                            console.log(result.recordset[0])\n                            this.guardarResultadosNombreForma(variable, result.recordset[0].inicioVigencia);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearTablaDeResultadoNombreForma (variable) {\n        //NOMBRE TABLA: NOMBREVARIABLE_AÑOVIGENCIA_MESVIGENCIA_DIAVIGENCIA_HORAVIGENCIA_MINUTOSVIGENCIA_SEGUNDOSVIGENCIA\n        //VIGENCIA: DIA CREACION\n        let hoy = new Date();\n        var textoCreacionTabla = 'CREATE TABLE '+variable.nombre+'_'+hoy.getFullYear()+'_'+(hoy.getMonth()+1)+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+' ( ID int IDENTITY(1,1) PRIMARY KEY, ';\n        if(variable.tipo.localeCompare(\"numero\") == 0) {\n            textoCreacionTabla += variable.nombre+' decimal(22,4)';\n        } else if(variable.tipo.localeCompare(\"varchar\") == 0) {\n            textoCreacionTabla += variable.nombre+' varchar(1000)';\n        } else if(variable.tipo.localeCompare(\"bit\") == 0) {\n            textoCreacionTabla += variable.nombre+' bit';\n        } else if(variable.tipo.localeCompare(\"date\") == 0) {\n            textoCreacionTabla += variable.nombre+' date';\n        }\n        textoCreacionTabla += ', f3ch4Gu4rd4do date )';\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(textoCreacionTabla, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.crearResultadoNombreForma(variable, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearResultadoNombreForma (variable, hoy) {\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ResultadosNombreVariables (nombreVariable, inicioVigencia, finVigencia) values ('\"+variable.nombre+\"', '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\":\"+hoy.getMinutes()+\":\"+hoy.getSeconds()+\"', '1964-05-28')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.guardarResultadosNombreForma(variable, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    guardarResultadosNombreForma (variable, fechaNombreTabla) {\n        console.log('INICAR GUARDAR RESULTADO');\n        console.log('fechaNombreTabla');\n        console.log(fechaNombreTabla);\n        console.log('fechaNombreTabla.getFullYear()');\n        console.log(fechaNombreTabla.getFullYear());\n        console.log('fechaNombreTabla.getMonth()');\n        console.log(fechaNombreTabla.getMonth());\n        console.log('fechaNombreTabla.getDate()');\n        console.log(fechaNombreTabla.getDate());\n        console.log('fechaNombreTabla.getHours()');\n        console.log(fechaNombreTabla.getHours());\n        console.log('fechaNombreTabla.getMinutes()');\n        console.log(fechaNombreTabla.getMinutes());\n        console.log('fechaNombreTabla.getSeconds()');\n        console.log(fechaNombreTabla.getSeconds());\n\n        let hoy = new Date();\n        var textoInsertPrincipio = 'INSERT INTO '+variable.nombre+'_'+fechaNombreTabla.getFullYear()+'_'+(fechaNombreTabla.getMonth()+1)+'_'+fechaNombreTabla.getDate()+'_'+fechaNombreTabla.getHours()+'_'+fechaNombreTabla.getMinutes()+'_'+fechaNombreTabla.getSeconds()+' ( ';\n        /*for (var i = 0; i < variable.variables.length; i++) {\n            if(i != 0)\n                textoInsertPrincipio += ', ';\n            textoInsertPrincipio += variable.variables[i].nombre;\n        };*/\n        textoInsertPrincipio += ', f3ch4Gu4rd4do ) values ( ';\n        var instruccionSQLBorrar = \"DELETE FROM \"+variable.nombre+\"_\"+fechaNombreTabla.getFullYear()+\"_\"+(fechaNombreTabla.getMonth()+1)+\"_\"+fechaNombreTabla.getDate()+\"_\"+fechaNombreTabla.getHours()+\"_\"+fechaNombreTabla.getMinutes()+\"_\"+fechaNombreTabla.getSeconds()+ \" WHERE f3ch4Gu4rd4do = '\"+hoy.getFullYear()+\"-\"+(hoy.getMonth()+1)+\"-\"+hoy.getDate()+\"' \";\n        this.borrarForma(instruccionSQLBorrar);\n\n        var instruccionSQLFinal = textoInsertPrincipio;\n        if(variable.tipo.localeCompare(\"numero\") == 0) {\n            instruccionSQLFinal += window[variable.nombre];\n        } else if(variable.tipo.localeCompare(\"varchar\") == 0) {\n            instruccionSQLFinal += \"'\"+window[variable.nombre]+\"'\";\n        } else if(variable.tipo.localeCompare(\"bit\") == 0) {\n            instruccionSQLFinal += \"'\"+window[variable.nombre]+\"'\";\n        } else if(variable.tipo.localeCompare(\"date\") == 0) {\n            instruccionSQLFinal += \"'\"+window[variable.nombre].getFullYear()+\"-\"+(window[variable.nombre].getMonth()+1)+\"-\"+window[variable.nombre].getDate()+\"'\";\n        }\n        instruccionSQLFinal += \", '\"+hoy.getFullYear()+\"-\"+(hoy.getMonth()+1)+\"-\"+hoy.getDate()+\"' )\";\n        var self = this;\n        setTimeout(function () {\n            self.guardarForma(instruccionSQLFinal, variable, 'forma', hoy);\n        }, 600);\n\n        this.saveBitacora(hoy, \"Usuario: \"+this.props.userName+\" realizo el cálculo para la variable tipo forma: \"+variable.nombre, 'variable', variable.ID);\n    }\n\n    guardarForma (instruccionSQL, variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(instruccionSQL, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(variable.periodicidad.localeCompare(\"-1\") != 0)\n                            this.verificarPeriodicidadGuardar(variable, tabla, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    borrarForma (instruccionSQL) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(instruccionSQL, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarPeriodicidadGuardar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.updatePeriodicidad(variable, tabla, hoy);\n                        } else {\n                            this.guardarPeriodicidad(variable, tabla, hoy);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updatePeriodicidad (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update PeriodicidadCalculo set fechaUltimoCalculo = '\"+hoy.getFullYear()+\"-\"+(hoy.getMonth()+1)+\"-\"+hoy.getDate()+\"' where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    guardarPeriodicidad (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into PeriodicidadCalculo (variableID, tablaVariable, fechaInicio, fechaUltimoCalculo) values (\"+variable.ID+\", '\"+tabla+\"', '\"+hoy.getFullYear()+\"-\"+(hoy.getMonth()+1)+\"-\"+hoy.getDate()+\"', '\"+hoy.getFullYear()+\"-\"+(hoy.getMonth()+1)+\"-\"+hoy.getDate()+\"') \", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    /*\n        **************************************\n        **************************************\n                FIN CALCULO CODIGO\n        **************************************\n        **************************************\n    */\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    getUsuarios () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Usuarios\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            usuarios: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    goToTimeline (esExcel, idVariableExcel, nombreVariable, esColeccion) {\n        this.props.changeStateFirstTimeToTrue();\n        this.props.goToTimeline(esExcel, idVariableExcel, nombreVariable, esColeccion);\n    }\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"nombreVariable\" className=\"col-form-label\">Nombre de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <input id=\"nombreVariable\" defaultValue={this.state.nombre} type=\"text\" className=\"form-control form-control-sm\"/>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"tipo\" className=\"col-form-label\">Tipo de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <select id=\"tipo\" defaultValue={this.state.tipo} className=\"form-control\">\n                            <option value=\"numero\">Número</option>\n                            <option value=\"varchar\">Cadena</option>\n                            <option value=\"date\">Fecha</option>\n                            <option value=\"bit\">Booleano</option>\n                        </select>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"periodicidad\" className=\"col-form-label\">Periodicidad</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <select id=\"periodicidad\" defaultValue={this.props.periodicidadVariable} onChange={this.actualizarPeriodicidad} className=\"form-control\">\n                            <option value=\"-1\">Ninguno</option>\n                            {periodicidad.map((periodicidad, i) =>\n                                <option value={periodicidad.nombre} key={periodicidad.nombre}>{periodicidad.nombre}</option>\n                            )}\n                        </select>\n                    </div>\n                </div>\n                {\n                    this.state.valorPeriodicidad.localeCompare(\"-1\") != 0\n                    ?\n                        <div className={\"row\"} style={{width: \"100%\"}}>\n                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                <label htmlFor=\"fecha\" className=\"col-form-label\">Fecha de Inicio de Cálculo:</label>\n                            </div>\n                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                <input type=\"text\" className=\"form-control\" id=\"fecha\"/>\n                            </div>\n                        </div>\n                    : null\n                }\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"responsable\" className=\"col-form-label\">Nombre Encargado</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <select id=\"responsable\" defaultValue={this.props.responsableVariable} onChange={this.props.actualizarNombreEncargado} className=\"form-control\">\n                            <option value=\"-1\">Ninguno</option>\n                            {this.state.usuarios.map((usuario, i) =>\n                                <option value={usuario.ID} key={usuario.ID}>{usuario.usuario}</option>\n                            )}\n                        </select>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"guardarVariable\" className=\"col-form-label\">Guardar Valores Obtenidos en Base de Datos</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <br/>\n                        <div className={\"switch-button switch-button-yesno\"} style={{margin:\"0 auto\", display:\"block\"}}>\n                            <input type=\"checkbox\" defaultChecked={this.state.guardar} name={\"guardarVariable\"} id={\"guardarVariable\"}/><span>\n                            <label htmlFor={\"guardarVariable\"}></label></span>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                    <a href=\"#\" className=\"btn btn-brand active\" onClick={this.crearVariable}>Modificar Variable</a>\n                    {\n                        this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0\n                        ? <a href=\"#\" className=\"btn btn-secondary active\" style={{marginLeft: \"10px\"}}  onClick={() => this.props.eliminarVarForma(true)}>Eliminar Variable</a>\n                        : null\n                    }\n                    {\n                        this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0\n                        ? <a href=\"#\" className=\"btn btn-primary active\" style={{marginLeft: \"10px\"}} onClick={this.verificarPeriodicidad}>Realizar Cálculo</a>\n                        : null\n                    }\n                    {\n                        this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0\n                        ? <a href=\"#\" className=\"btn btn-info active\" style={{marginLeft: \"10px\"}} onClick={() => this.goToTimeline(false)}>Historial de Variable</a>\n                        : null\n                    }\n                </div>\n                <br/>\n                <Modal show={this.state.showModalForma}\n                    titulo={this.state.tituloVariableForma}\n                    onClose={() => this.closeModalForma}>\n                        {this.state.htmlForma}\n                </Modal>\n            </div>\n        );\n    }\n}\n"],"file":"FuenteDatoForma.js"}