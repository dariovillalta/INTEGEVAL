{"version":3,"sources":["components/Variables/Variables/EditarVariable/FuenteDatoForma.js"],"names":["FuenteDatoForma","props","state","nombre","tipo","guardar","crearVariable","bind","traerForma","tipoVariableOriginal","localeCompare","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","idVariable","result","console","log","rollback","commit","recordset","length","setState","$","val","prop","nombreVariable","guardarVariable","is","alert","width","display","alignItems","justifyContent","margin","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nexport default class FuenteDatoForma extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            nombre: \"\",\n            tipo: \"\",\n            guardar: \"\"\n        }\n        this.crearVariable = this.crearVariable.bind(this);\n        this.traerForma = this.traerForma.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.tipoVariableOriginal.localeCompare(\"forma\") == 0) {\n            this.traerForma();\n        }\n    }\n\n    traerForma() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.setState({\n                                nombre: result.recordset[0].nombre,\n                                tipo: result.recordset[0].tipo,\n                                guardar: result.recordset[0].guardar\n                            });\n                            $(\"#nombreVariable\").val(result.recordset[0].nombre);\n                            $(\"#tipo\").val(result.recordset[0].tipo);\n                            if (result.recordset[0].guardar)\n                                $(\"#guardarVariable\").prop('checked', true);\n                            else\n                                $(\"#guardarVariable\").prop('checked', false);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearVariable () {\n        var nombreVariable = $(\"#nombreVariable\").val();\n        var tipo = $(\"#tipo\").val();\n        var guardarVariable;\n        if ($(\"#guardarVariable\").is(':checked'))\n            guardarVariable = true;\n        else\n            guardarVariable = false;\n        if(nombreVariable.length > 0 && nombreVariable.length < 1001) {\n            if(tipo.length > 0 && tipo.length < 1001) {\n                const transaction = new sql.Transaction( this.props.pool );\n                transaction.begin(err => {\n                    var rolledBack = false;\n                    transaction.on('rollback', aborted => {\n                        rolledBack = true;\n                    });\n                    const request = new sql.Request(transaction);\n                    request.query(\"update FormasVariables set nombre = '\"+nombreVariable+\"', tipo = '\"+tipo+\"', guardar = '\"+guardarVariable+\"' where ID = \"+this.props.idVariable, (err, result) => {\n                        if (err) {\n                            console.log(err);\n                            if (!rolledBack) {\n                                transaction.rollback(err => {\n                                });\n                            }\n                        } else {\n                            transaction.commit(err => {\n                                alert(\"Variable Modificada\");\n                            });\n                        }\n                    });\n                }); // fin transaction\n            } else {\n                alert('Ingrese un valor para el tipo de la variable que debe ser menor a 31 caracteres');\n            }\n        } else {\n            alert('Ingrese un valor para el nombre de la variable que debe ser menor a 101 caracteres');\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"nombreVariable\" className=\"col-form-label\">Nombre de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <input id=\"nombreVariable\" defaultValue={this.state.nombre} type=\"text\" className=\"form-control form-control-sm\"/>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"tipo\" className=\"col-form-label\">Tipo de Variable:</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                        <select id=\"tipo\" defaultValue={this.state.tipo} className=\"form-control\">\n                            <option value=\"numero\">Número</option>\n                            <option value=\"varchar\">Cadena</option>\n                            <option value=\"date\">Fecha</option>\n                            <option value=\"bit\">Booleano</option>\n                        </select>\n                    </div>\n                </div>\n                <div className={\"row\"} style={{width: \"100%\"}}>\n                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                        <label htmlFor=\"guardarVariable\" className=\"col-form-label\">Guardar Valores Obtenidos en Base de Datos</label>\n                    </div>\n                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                        <br/>\n                        <div className={\"switch-button switch-button-yesno\"} style={{margin:\"0 auto\", display:\"block\"}}>\n                            <input type=\"checkbox\" defaultChecked={this.state.guardar} name={\"guardarVariable\"} id={\"guardarVariable\"}/><span>\n                            <label htmlFor={\"guardarVariable\"}></label></span>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                    <a href=\"#\" className=\"btn btn-brand active\" onClick={this.crearVariable}>Modificar Variable</a>\n                </div>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"FuenteDatoForma.js"}