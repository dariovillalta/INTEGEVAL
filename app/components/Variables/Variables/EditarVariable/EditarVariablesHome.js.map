{"version":3,"sources":["components/Variables/Variables/EditarVariable/EditarVariablesHome.js"],"names":["campoSeleccionado","valorSeleccionado","valorSeleccionadoTexto","operacionSeleccionada","objetoConexionSeleccionada","tipoDeAsignacionSeleccionado","tipoDeAsignacionSeleccionadoVarios","tipoDeAsignacionSeleccionadoUnico","indiceFormulaSeleccionadaEdit","nivelNuevoAtributoVarios","nivelNuevoAtributoUnico","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","posicionAtributoSeleccionado","indiceSeleccionadoFormula","idFormula","nombreVariable","descripcionVariable","fechaInicioVariable","periodicidadVariable","responsableVariable","categoriaVariable","nombreCampoNuevoAtributosVario","atributosVario","reglasVariosAtributos","segmentoReglasVariosAtributos","formulasVariosAtributos","elementosFormulasVariosAtributos","atributosUnico","reglasUnAtributo","segmentoReglasUnAtributo","formulasUnAtributo","elementosFormulasUnAtributos","variablesSQL","instruccionSQL","banderaEsObjeto","banderaEsInstruccionSQL","contadorObjetosAGuardar","contadorObjetosGuardados","EditarVariablesHome","props","console","log","idVariable","esObjetoVariable","esInstruccionSQLVariable","state","componenteActual","atributos","reglas","formulas","esCondicion","navbar","tipoNuevaVariable","camposInstruccionSQL","comandoSQL","variables","excel","formas","objetoPadreIDVariable","guardarVariable","esEditarVar","esOperacionSQL","operacionSQL","formulaSeleccionadaEdit","condicionFormula","condicionElemento","esColeccion","estadoVistaVariable","mostrarFuenteDatoVariable","mostrarFuenteDatoForma","mostrarFuenteDatoExcel","loadAgain","bind","traerInstruccionSQLVariable","traerInstruccionSQL","traerVariable","traerSegmentosDeCampo","traerReglasDeCampo","traerFormulasDeCampo","traerElementosDeCampo","loadRules","sortRules","returnToCreateVariable","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormula","goCreateVariableFieldSQL","goToTimeline","createVariable","getVariableID","updateVariable","createVariableSQL","createInstructionSQL","createVariableField","getVariableFieldID","createVariableFieldRuleSegments","getVariableFieldRuleSegments","createVariableFieldRules","traerRegla","createVariableFieldFormula","getVariableFieldFormulaID","createVariableFieldFormulaElement","limpiarArreglos","verificarSiExisteExcelEnResultadosHistoricosModificar","crearTablaDeResultadoNombreModificar","crearResultadoNombreModificar","modificarResultadosNombre","verificarPeriodicidadGuardarModificar","updatePeriodicidadModificar","retornarCampo","retornarValor","actualizarCondicion","cambioDeArreglosDeAtributos","guardarVariableSQL","guardarVariableUnAtributo","guardarVariableVariosAtributo","crearAtributoVariable","eliminarAtributoVariable","modificarNombreVariable","crearVariableSQL","crearInstruccionSQL","anadirRegla","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","modificarFormula","eliminarFormula","retornoCampoFormula","retornoCampoCondicion","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarEstadoSiEsObjeto","actualizarEstadoSiEsInstruccionSQL","actualizarNivelNuevaRegla","actualizarSeleccionFormula","actualizarIdFormula","actualizarNombreVariable","actualizarDescripcionVariable","actualizarFechaInicio","actualizarPeriodicidad","actualizarNombreEncargado","actualizarNombreCampoNuevoAtributosVario","retornarCodigoOperacion","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","verificarNoExisteNombreCampo","actualizarCampoSQL","eliminarCampoSQL","eliminarVarForma","eliminarVarExcel","eliminarVariable","tieneEspaciosEnBlanco","isValidDate","cambiarEstadoVistaVariable","saveBitacora","tipoVariable","localeCompare","$","val","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","rollback","commit","recordset","length","nombre","descripcion","prop","guardar","fechaInicioCalculo","periodicidad","responsable","datepicker","getFullYear","getMonth","getDate","setState","objetoPadreID","transaction1","esObjeto","tipo","i","campo","posicionAtributo","ID","segmento","posicionSegmento","tempCopy","sort","a","b","reglaPadreID","formula","posicionFormula","indice","configuracionHome","goOptions","retornoSeleccionVariables","posicionSel","undefined","esEditarVarN","operacion","esExcel","idVariableExcel","variable","campos","esInstruccionSQL","alert","variableCampo","nivel","segmentoRegla","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","push","posicionFormulaEnCampo","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","conexionTablaID","variableID","excelArchivoID","excelVariableID","formaVariableID","esConexionTabla","esValorManual","nivelMax","splice","k","segmentoReglaID","formulaID","regla","posicionRegla","nombreColumnaEnTabla","tipoCampoObjetivo","operacionTexto","valor","texto","elementosFormulas","existenSegmentos","elemento","posicionElemento","esFuenteDeDato","elementoVariableID","elementoVariableCampoID","tipoColumnaEnTabla","actualizarIDVariableModificada","is","guardarResultadosEnBaseDatos","nuevosValores","hoy","userName","inicioVigencia","Date","textoCreacionTabla","getHours","getMinutes","getSeconds","decimal","mes","toString","dia","tabla","campoNuevo","campoNuevoTexto","nuevoNivel","categoria","isNaN","nuevaVariable","showMessage","nuevoAtributo","nombreAtributo","arreglo","index","copiaAntiguaFormulas","copyAtributos","nombreCampo","nuevaVar","instruccionSQLN","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","nivelABuscar","reglaEsValida","indexOf","entrarACrearRegla","tablaID","variableSel","filter","object","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevaRegla","variableCampoID","posicionAInsertar","tipoNuevaAsig","tempNewCopy","texto2","formulaArreglo","numeroDeFormulaDeVariable","arregloDeElementos","array","Array","isArray","esFuenteDato","tipoOriginal","existeSoloUnaFormula","contadorFormulas","ForReglas","indiceSegmento","indiceRegla","tipoElemento","idFormulaN","nombreVariableN","descripcionVariableN","fecha","codigo","noExiste","toLowerCase","nombreN","tipoN","mostrar","request1","transaction2","request2","transaction3","request3","transaction4","request4","transaction5","request5","transaction6","request6","transaction7","request7","transaction8","request8","s","test","Object","prototype","call","getTime","userID","width","height","terminoCrearCampo","columnas","changeStateFirstTimeToFalse","changeStateFirstTimeToTrue","esPrimeraVez","actualizarCategoriaVariable","permision","nombreTablaSeleccionada","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,iBAAJ,EAAuBC,iBAAvB,EAA0CC,sBAA1C,EAAkEC,qBAAlE,EAAyFC,0BAAzF;AACA,IAAIC,4BAA4B,GAAG,EAAnC,C,CAAyC;;AACzC,IAAIC,kCAAkC,GAAG,EAAzC,C,CAA+C;;AAC/C,IAAIC,iCAAiC,GAAG,EAAxC,C,CAA8C;;AAC9C,IAAIC,6BAA6B,GAAG,CAAC,CAArC;AAEA;;AACA;;AAEA;;AACA;;AACA;;;;AAIA;;AACA;;AACA;;;;AAIA;;AACA;;AACA;;;;AAIA;;AACA;;AACA;;;;AAIA;;AACA;;AACA;;;;AAIA,IAAIC,wBAAwB,GAAG,CAA/B,C,CAAoD;;AACpD,IAAIC,uBAAuB,GAAG,CAA9B,C,CAAoD;;AACpD,IAAIC,gCAAgC,GAAG,CAAC,CAAxC,C,CAAoD;;AACpD,IAAIC,wBAAwB,GAAG,CAAC,CAAhC,C,CAAoD;;AACpD,IAAIC,6BAA6B,GAAG,EAApC,C,CAAoD;;AACpD,IAAIC,4BAA4B,GAAG,CAAC,CAApC,C,CAAoD;;AACpD,IAAIC,yBAAyB,GAAG,CAAC,CAAjC,C,CAAoD;;AAEpD,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,cAAc,GAAG,EAArB;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,oBAAoB,GAAG,EAA3B;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AAEA,IAAIC,8BAA8B,GAAG,EAArC;AACA,IAAIC,cAAc,GAAG,EAArB;AACA,IAAIC,qBAAqB,GAAG,EAA5B;AACA,IAAIC,6BAA6B,GAAG,EAApC;AACA,IAAIC,uBAAuB,GAAG,EAA9B;AACA,IAAIC,gCAAgC,GAAG,EAAvC;AACA,IAAIC,cAAc,GAAG,EAArB;AACA,IAAIC,gBAAgB,GAAG,EAAvB;AACA,IAAIC,wBAAwB,GAAG,EAA/B;AACA,IAAIC,kBAAkB,GAAG,EAAzB;AACA,IAAIC,4BAA4B,GAAG,EAAnC;AAEA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,cAAc,GAAG,EAArB;AAEA,IAAIC,eAAe,GAAG,IAAtB,C,CAA2D;;AAC3D,IAAIC,uBAAuB,GAAG,IAA9B,C,CAAmE;;AAEnE,IAAIC,uBAAuB,GAAG,CAA9B,C,CAA4D;;AAC5D,IAAIC,wBAAwB,GAAG,CAA/B,C,CAA6D;;IAExCC,mB;;;;;AACjB,+BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,6FAAMA,KAAN;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAKF,KAAL,CAAWG,UAAvB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAKF,KAAL,CAAWI,gBAAvB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAKF,KAAL,CAAWK,wBAAvB;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,gBAAgB,EAAE,gBADT;AAETC,MAAAA,SAAS,EAAE,EAFF;AAGTC,MAAAA,MAAM,EAAE,EAHC;AAITC,MAAAA,QAAQ,EAAE,EAJD;AAKTC,MAAAA,WAAW,EAAE,IALJ;AAKsC;AAC/CC,MAAAA,MAAM,EAAE,EANC;AAOTC,MAAAA,iBAAiB,EAAE,EAPV;AAQTC,MAAAA,oBAAoB,EAAE,EARb;AASTC,MAAAA,UAAU,EAAE,EATH;AAUTC,MAAAA,SAAS,EAAE,EAVF;AAWTC,MAAAA,KAAK,EAAE,EAXE;AAYTC,MAAAA,MAAM,EAAE,EAZC;AAaT1C,MAAAA,cAAc,EAAE,EAbP;AAcTC,MAAAA,mBAAmB,EAAE,EAdZ;AAeT0C,MAAAA,qBAAqB,EAAE,CAAC,CAff;AAgBTC,MAAAA,eAAe,EAAE,EAhBR;AAiBTC,MAAAA,WAAW,EAAE,KAjBJ;AAkBTC,MAAAA,cAAc,EAAE,KAlBP;AAmBTC,MAAAA,YAAY,EAAE,EAnBL;AAoBTC,MAAAA,uBAAuB,EAAE,IApBhB;AAqBTC,MAAAA,gBAAgB,EAAE,EArBT;AAsBTC,MAAAA,iBAAiB,EAAE,EAtBV;AAuBTC,MAAAA,WAAW,EAAE,KAvBJ;AAwBT;AACAxB,MAAAA,UAAU,EAAE,MAAKH,KAAL,CAAWG,UAzBd;AA0BTC,MAAAA,gBAAgB,EAAE,MAAKJ,KAAL,CAAWI,gBA1BpB;AA2BTC,MAAAA,wBAAwB,EAAE,MAAKL,KAAL,CAAWK,wBA3B5B;AA4BTuB,MAAAA,mBAAmB,EAAE;AACjBC,QAAAA,yBAAyB,EAAE,KADV;AAEjBC,QAAAA,sBAAsB,EAAE,KAFP;AAGjBC,QAAAA,sBAAsB,EAAE;AAHP;AA5BZ,KAAb;AAkCA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB;AACA,UAAKC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCD,IAAjC,+BAAnC;AACA,UAAKE,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBF,IAAzB,+BAA3B;AACA,UAAKG,aAAL,GAAqB,MAAKA,aAAL,CAAmBH,IAAnB,+BAArB;AACA,UAAKI,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BJ,IAA3B,+BAA7B;AACA,UAAKK,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBL,IAAxB,+BAA1B;AACA,UAAKM,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BN,IAA1B,+BAA5B;AACA,UAAKO,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BP,IAA3B,+BAA7B;AACA,UAAKQ,SAAL,GAAiB,MAAKA,SAAL,CAAeR,IAAf,+BAAjB;AACA,UAAKS,SAAL,GAAiB,MAAKA,SAAL,CAAeT,IAAf,+BAAjB;AACA,UAAKU,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BV,IAA5B,+BAA9B;AACA,UAAKW,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BX,IAA1B,+BAA5B;AACA,UAAKY,sCAAL,GAA8C,MAAKA,sCAAL,CAA4CZ,IAA5C,+BAA9C;AACA,UAAKa,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBb,IAAvB,+BAAzB;AACA,UAAKc,wBAAL,GAAgC,MAAKA,wBAAL,CAA8Bd,IAA9B,+BAAhC;AACA,UAAKe,YAAL,GAAoB,MAAKA,YAAL,CAAkBf,IAAlB,+BAApB;AACA,UAAKgB,cAAL,GAAsB,MAAKA,cAAL,CAAoBhB,IAApB,+BAAtB;AACA,UAAKiB,aAAL,GAAqB,MAAKA,aAAL,CAAmBjB,IAAnB,+BAArB;AACA,UAAKkB,cAAL,GAAsB,MAAKA,cAAL,CAAoBlB,IAApB,+BAAtB;AACA,UAAKmB,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBnB,IAAvB,+BAAzB;AACA,UAAKoB,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BpB,IAA1B,+BAA5B;AACA,UAAKqB,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBrB,IAAzB,+BAA3B;AACA,UAAKsB,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBtB,IAAxB,+BAA1B;AACA,UAAKuB,+BAAL,GAAuC,MAAKA,+BAAL,CAAqCvB,IAArC,+BAAvC;AACA,UAAKwB,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCxB,IAAlC,+BAApC;AACA,UAAKyB,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BzB,IAA9B,+BAAhC;AACA,UAAK0B,UAAL,GAAkB,MAAKA,UAAL,CAAgB1B,IAAhB,+BAAlB;AACA,UAAK2B,0BAAL,GAAkC,MAAKA,0BAAL,CAAgC3B,IAAhC,+BAAlC;AACA,UAAK4B,yBAAL,GAAiC,MAAKA,yBAAL,CAA+B5B,IAA/B,+BAAjC;AACA,UAAK6B,iCAAL,GAAyC,MAAKA,iCAAL,CAAuC7B,IAAvC,+BAAzC;AACA,UAAK8B,eAAL,GAAuB,MAAKA,eAAL,CAAqB9B,IAArB,+BAAvB;AACA,UAAK+B,qDAAL,GAA6D,MAAKA,qDAAL,CAA2D/B,IAA3D,+BAA7D;AACA,UAAKgC,oCAAL,GAA4C,MAAKA,oCAAL,CAA0ChC,IAA1C,+BAA5C;AACA,UAAKiC,6BAAL,GAAqC,MAAKA,6BAAL,CAAmCjC,IAAnC,+BAArC;AACA,UAAKkC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BlC,IAA/B,+BAAjC;AACA,UAAKmC,qCAAL,GAA6C,MAAKA,qCAAL,CAA2CnC,IAA3C,+BAA7C;AACA,UAAKoC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCpC,IAAjC,+BAAnC;AACA,UAAKqC,aAAL,GAAqB,MAAKA,aAAL,CAAmBrC,IAAnB,+BAArB;AACA,UAAKsC,aAAL,GAAqB,MAAKA,aAAL,CAAmBtC,IAAnB,+BAArB;AACA,UAAKuC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBvC,IAAzB,+BAA3B;AACA,UAAKwC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCxC,IAAjC,+BAAnC;AACA,UAAKb,eAAL,GAAuB,MAAKA,eAAL,CAAqBa,IAArB,+BAAvB;AACA,UAAKyC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBzC,IAAxB,+BAA1B;AACA,UAAK0C,yBAAL,GAAiC,MAAKA,yBAAL,CAA+B1C,IAA/B,+BAAjC;AACA,UAAK2C,6BAAL,GAAqC,MAAKA,6BAAL,CAAmC3C,IAAnC,+BAArC;AACA,UAAK4C,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B5C,IAA3B,+BAA7B;AACA,UAAK6C,wBAAL,GAAgC,MAAKA,wBAAL,CAA8B7C,IAA9B,+BAAhC;AACA,UAAK8C,uBAAL,GAA+B,MAAKA,uBAAL,CAA6B9C,IAA7B,+BAA/B;AACA,UAAK+C,gBAAL,GAAwB,MAAKA,gBAAL,CAAsB/C,IAAtB,+BAAxB;AACA,UAAKgD,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBhD,IAAzB,+BAA3B;AACA,UAAKiD,WAAL,GAAmB,MAAKA,WAAL,CAAiBjD,IAAjB,+BAAnB;AACA,UAAKkD,aAAL,GAAqB,MAAKA,aAAL,CAAmBlD,IAAnB,+BAArB;AACA,UAAKmD,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BnD,IAA5B,+BAA9B;AACA,UAAKoD,cAAL,GAAsB,MAAKA,cAAL,CAAoBpD,IAApB,+BAAtB;AACA,UAAKqD,aAAL,GAAqB,MAAKA,aAAL,CAAmBrD,IAAnB,+BAArB;AACA,UAAKsD,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBtD,IAAtB,+BAAxB;AACA,UAAKuD,eAAL,GAAuB,MAAKA,eAAL,CAAqBvD,IAArB,+BAAvB;AACA,UAAKwD,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBxD,IAAzB,+BAA3B;AACA,UAAKyD,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BzD,IAA3B,+BAA7B;AACA,UAAK0D,gBAAL,GAAwB,MAAKA,gBAAL,CAAsB1D,IAAtB,+BAAxB;AACA,UAAK2D,kCAAL,GAA0C,MAAKA,kCAAL,CAAwC3D,IAAxC,+BAA1C;AACA,UAAK4D,0BAAL,GAAkC,MAAKA,0BAAL,CAAgC5D,IAAhC,+BAAlC;AACA,UAAK6D,kCAAL,GAA0C,MAAKA,kCAAL,CAAwC7D,IAAxC,+BAA1C;AACA,UAAK8D,yBAAL,GAAiC,MAAKA,yBAAL,CAA+B9D,IAA/B,+BAAjC;AACA,UAAK+D,0BAAL,GAAkC,MAAKA,0BAAL,CAAgC/D,IAAhC,+BAAlC;AACA,UAAKgE,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBhE,IAAzB,+BAA3B;AACA,UAAKiE,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BjE,IAA9B,+BAAhC;AACA,UAAKkE,6BAAL,GAAqC,MAAKA,6BAAL,CAAmClE,IAAnC,+BAArC;AACA,UAAKmE,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BnE,IAA3B,+BAA7B;AACA,UAAKoE,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BpE,IAA5B,+BAA9B;AACA,UAAKqE,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BrE,IAA/B,+BAAjC;AACA,UAAKsE,wCAAL,GAAgD,MAAKA,wCAAL,CAA8CtE,IAA9C,+BAAhD;AACA,UAAKuE,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BvE,IAA7B,+BAA/B;AACA,UAAKwE,YAAL,GAAoB,MAAKA,YAAL,CAAkBxE,IAAlB,+BAApB;AACA,UAAKyE,QAAL,GAAgB,MAAKA,QAAL,CAAczE,IAAd,+BAAhB;AACA,UAAK0E,SAAL,GAAiB,MAAKA,SAAL,CAAe1E,IAAf,+BAAjB;AACA,UAAK2E,0BAAL,GAAkC,MAAKA,0BAAL,CAAgC3E,IAAhC,+BAAlC;AACA,UAAK4E,4BAAL,GAAoC,MAAKA,4BAAL,CAAkC5E,IAAlC,+BAApC;AACA,UAAK6E,kBAAL,GAA0B,MAAKA,kBAAL,CAAwB7E,IAAxB,+BAA1B;AACA,UAAK8E,gBAAL,GAAwB,MAAKA,gBAAL,CAAsB9E,IAAtB,+BAAxB;AACA,UAAK+E,gBAAL,GAAwB,MAAKA,gBAAL,CAAsB/E,IAAtB,+BAAxB;AACA,UAAKgF,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBhF,IAAtB,+BAAxB;AACA,UAAKiF,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBjF,IAAtB,+BAAxB;AACA,UAAKkF,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BlF,IAA3B,+BAA7B;AACA,UAAKmF,WAAL,GAAmB,MAAKA,WAAL,CAAiBnF,IAAjB,+BAAnB;AACA,UAAKoF,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCpF,IAAhC,+BAAlC;AAEA,UAAKqF,YAAL,GAAoB,MAAKA,YAAL,CAAkBrF,IAAlB,+BAApB;AA9He;AA+HlB;;;;wCAEoB;AACjB,WAAKwE,YAAL;AACA,WAAKC,QAAL;AACA,WAAKC,SAAL;;AACA,UAAG,KAAK3G,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,YAAG,KAAKxH,KAAL,CAAWK,wBAAd,EAAwC;AACpCJ,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,eAAKgC,2BAAL;AACH,SAHD,MAGO,IAAG,KAAKlC,KAAL,CAAWI,gBAAd,EAAgC;AACnCH,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,eAAKkC,aAAL,CAAmB,IAAnB;AACAzC,UAAAA,eAAe,GAAG,IAAlB;AACH,SAJM,MAIA;AACHM,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,eAAKkC,aAAL,CAAmB,KAAnB;AACAzC,UAAAA,eAAe,GAAG,KAAlB;AACH;AACJ;AACJ;;;2CAEsB;AACnB;AACA3B,MAAAA,wBAAwB,GAAG,CAA3B;AACAC,MAAAA,uBAAuB,GAAG,CAA1B;AACAC,MAAAA,gCAAgC,GAAG,CAAC,CAApC;AACAC,MAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACAC,MAAAA,6BAA6B,GAAG,EAAhC;AACAC,MAAAA,4BAA4B,GAAG,CAAC,CAAhC;AACAC,MAAAA,yBAAyB,GAAG,CAAC,CAA7B;AAEAS,MAAAA,cAAc,GAAG,EAAjB;AACAC,MAAAA,qBAAqB,GAAG,EAAxB;AACAC,MAAAA,6BAA6B,GAAG,EAAhC;AACAC,MAAAA,uBAAuB,GAAG,EAA1B;AACAC,MAAAA,gCAAgC,GAAG,EAAnC;AACAC,MAAAA,cAAc,GAAG,EAAjB;AACAC,MAAAA,gBAAgB,GAAG,EAAnB;AACAC,MAAAA,wBAAwB,GAAG,EAA3B;AACAC,MAAAA,kBAAkB,GAAG,EAArB;AACAC,MAAAA,4BAA4B,GAAG,EAA/B;AAEA5B,MAAAA,4BAA4B,GAAG,EAA/B;AACAC,MAAAA,kCAAkC,GAAG,EAArC;AACAC,MAAAA,iCAAiC,GAAG,EAApC;AAEA2B,MAAAA,YAAY,GAAG,EAAf;AACAC,MAAAA,cAAc,GAAG,EAAjB;AACA+H,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,CAA2B,EAA3B;AACAD,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,CAAgC,EAAhC;AACH;;;gCAEY;AACT,UAAG,KAAK1H,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,YAAG,KAAKxH,KAAL,CAAWK,wBAAd,EAAwC;AACpC,eAAK6B,2BAAL;AACH,SAFD,MAEO,IAAG,KAAKlC,KAAL,CAAWI,gBAAd,EAAgC;AACnC,eAAKgC,aAAL,CAAmB,IAAnB;AACAzC,UAAAA,eAAe,GAAG,IAAlB;AACH,SAHM,MAGA;AACH,eAAKyC,aAAL,CAAmB,KAAnB;AACAzC,UAAAA,eAAe,GAAG,KAAlB;AACH;AACJ;AACJ;;;kDAE8B;AAAA;;AAC3B,UAAMgI,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,wCAAsC,MAAI,CAACtI,KAAL,CAAWG,UAA/D,EAA2E,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACxF,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BpK,gBAAAA,SAAS,GAAGgK,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBnK,SAAhC;AACAC,gBAAAA,cAAc,GAAG+J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAArC;AACAnK,gBAAAA,mBAAmB,GAAG8J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAA1C;AACApB,gBAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,CAAoBa,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBnK,SAAxC;AACAkJ,gBAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,CAA2Ba,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAA/C;AACAnB,gBAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,CAAgCa,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAApD;AACA,oBAAG,MAAI,CAAC7I,KAAL,CAAWK,wBAAd,EACIoH,CAAC,CAAC,mBAAD,CAAD,CAAuBqB,IAAvB,CAA4B,SAA5B,EAAuC,IAAvC,EADJ,KAGIrB,CAAC,CAAC,mBAAD,CAAD,CAAuBqB,IAAvB,CAA4B,SAA5B,EAAuC,KAAvC;AACJ,oBAAG,MAAI,CAAC9I,KAAL,CAAWI,gBAAd,EACIqH,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB,CAA8B,SAA9B,EAAyC,IAAzC,EADJ,KAGIrB,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB,CAA8B,SAA9B,EAAyC,KAAzC;AACJ,oBAAGP,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBK,OAAvB,EACItB,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,IAAxB,CAA6B,SAA7B,EAAwC,IAAxC,EADJ,KAGIrB,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,IAAxB,CAA6B,SAA7B,EAAwC,KAAxC;AACJ,oBAAGP,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB/G,WAAvB,EACI8F,CAAC,CAAC,cAAD,CAAD,CAAkBqB,IAAlB,CAAuB,SAAvB,EAAkC,IAAlC,EADJ,KAGIrB,CAAC,CAAC,cAAD,CAAD,CAAkBqB,IAAlB,CAAuB,SAAvB,EAAkC,KAAlC;AACJlJ,gBAAAA,uBAAuB,GAAG,MAAI,CAACI,KAAL,CAAWK,wBAArC;AACAV,gBAAAA,eAAe,GAAG,MAAI,CAACK,KAAL,CAAWI,gBAA7B;AACA1B,gBAAAA,mBAAmB,GAAG6J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBM,kBAA1C;AACArK,gBAAAA,oBAAoB,GAAG4J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBO,YAA3C;AACArK,gBAAAA,mBAAmB,GAAG2J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBQ,WAA1C;AACArK,gBAAAA,iBAAiB,GAAG0J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB7J,iBAAxC;AACA4I,gBAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,CAAuB/I,oBAAvB;AACA8I,gBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,CAAsB9I,mBAAtB;AACA6I,gBAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,CAA4B7I,iBAA5B;AACA4I,gBAAAA,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,EAAkCzK,mBAAlC;;AACA,oBAAGA,mBAAmB,CAAC0K,WAApB,MAAqC,IAArC,IAA6C1K,mBAAmB,CAAC2K,QAApB,MAAkC,CAA/E,IAAoF3K,mBAAmB,CAAC4K,OAApB,MAAiC,EAAxH,EAA2H,CACvH;AACH,iBAFD,MAEO;AACH7B,kBAAAA,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,EAAkCzK,mBAAlC;AACH;;AACD,gBAAA,MAAI,CAAC6K,QAAL,CAAc;AACV/K,kBAAAA,cAAc,EAAE+J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAD1B;AAEVnK,kBAAAA,mBAAmB,EAAE8J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAF/B;AAGV1H,kBAAAA,qBAAqB,EAAEoH,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBc,aAHjC;AAIVpI,kBAAAA,eAAe,EAAEmH,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBK,OAJ3B;AAKVpH,kBAAAA,WAAW,EAAE4G,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB/G;AALvB,iBAAd;;AAOA,gBAAA,MAAI,CAACQ,mBAAL;AACH;AACJ,aAhDD;AAiDH;AACJ,SA3DD;AA4DH,OAlED,EAF2B,CAoEvB;AACP;;;0CAEsB;AAAA;;AACnB,UAAMwF,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2DAAyD,MAAI,CAACtI,KAAL,CAAWG,UAAlF,EAA8F,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC3G,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BlJ,gBAAAA,YAAY,GAAG8I,MAAM,CAACG,SAAtB;;AACA,gBAAA,MAAI,CAACa,QAAL,CAAc;AACVzI,kBAAAA,oBAAoB,EAAEyH,MAAM,CAACG;AADnB,iBAAd;AAGH;AACJ,aAPD;AAQH;AACJ,SAlBD;AAmBH,OAzBD,EAFmB,CA2Bf;;AAEJ,UAAMe,YAAY,GAAG,IAAI7B,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA2B,MAAAA,YAAY,CAAC1B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAwB,QAAAA,YAAY,CAACvB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBoB,YAAhB,CAAhB;AACArB,QAAAA,OAAO,CAACE,KAAR,CAAc,qDAAmD,MAAI,CAACtI,KAAL,CAAWG,UAA5E,EAAwF,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACrG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB2J,cAAAA,YAAY,CAACjB,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAPD,MAOO;AACHyB,YAAAA,YAAY,CAAChB,MAAb,CAAoB,UAAAT,GAAG,EAAI;AACvB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BjJ,gBAAAA,cAAc,GAAG6I,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBhJ,cAArC;;AACA,gBAAA,MAAI,CAAC6J,QAAL,CAAc;AACVxI,kBAAAA,UAAU,EAAEwH,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBhJ;AADtB,iBAAd;AAGH;AACJ,aAPD;AAQH;AACJ,SAlBD;AAmBH,OAzBD,EA9BmB,CAuDf;AACP;;;kCAEcgK,Q,EAAU;AAAA;;AACrB,UAAM/B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,wCAAsC,MAAI,CAACtI,KAAL,CAAWG,UAA/D,EAA2E,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACxF,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BpK,gBAAAA,SAAS,GAAGgK,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBnK,SAAhC;AACAC,gBAAAA,cAAc,GAAG+J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAArC;AACAnK,gBAAAA,mBAAmB,GAAG8J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAA1C;AACApB,gBAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,CAAoBa,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBnK,SAAxC;AACAkJ,gBAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,CAA2Ba,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAA/C;AACAnB,gBAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,CAAgCa,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAApD;AACA,oBAAG,MAAI,CAAC7I,KAAL,CAAWK,wBAAd,EACIoH,CAAC,CAAC,mBAAD,CAAD,CAAuBqB,IAAvB,CAA4B,SAA5B,EAAuC,IAAvC,EADJ,KAGIrB,CAAC,CAAC,mBAAD,CAAD,CAAuBqB,IAAvB,CAA4B,SAA5B,EAAuC,KAAvC;AACJ,oBAAG,MAAI,CAAC9I,KAAL,CAAWI,gBAAd,EACIqH,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB,CAA8B,SAA9B,EAAyC,IAAzC,EADJ,KAGIrB,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB,CAA8B,SAA9B,EAAyC,KAAzC;AACJ,oBAAGP,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBK,OAAvB,EACItB,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,IAAxB,CAA6B,SAA7B,EAAwC,IAAxC,EADJ,KAGIrB,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,IAAxB,CAA6B,SAA7B,EAAwC,KAAxC;AACJ,oBAAGP,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB/G,WAAvB,EACI8F,CAAC,CAAC,cAAD,CAAD,CAAkBqB,IAAlB,CAAuB,SAAvB,EAAkC,IAAlC,EADJ,KAGIrB,CAAC,CAAC,cAAD,CAAD,CAAkBqB,IAAlB,CAAuB,SAAvB,EAAkC,KAAlC;AACJlJ,gBAAAA,uBAAuB,GAAG,MAAI,CAACI,KAAL,CAAWK,wBAArC;AACAV,gBAAAA,eAAe,GAAG,MAAI,CAACK,KAAL,CAAWI,gBAA7B;AACA1B,gBAAAA,mBAAmB,GAAG6J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBM,kBAA1C;AACArK,gBAAAA,oBAAoB,GAAG4J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBO,YAA3C;AACArK,gBAAAA,mBAAmB,GAAG2J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBQ,WAA1C;AACArK,gBAAAA,iBAAiB,GAAG0J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB7J,iBAAxC;AACA4I,gBAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,CAAuB/I,oBAAvB;AACA8I,gBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,CAAsB9I,mBAAtB;AACA6I,gBAAAA,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,EAAkCzK,mBAAlC;AACA+I,gBAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,CAA4B7I,iBAA5B;;AACA,oBAAGH,mBAAmB,CAAC0K,WAApB,MAAqC,IAArC,IAA6C1K,mBAAmB,CAAC2K,QAApB,MAAkC,CAA/E,IAAoF3K,mBAAmB,CAAC4K,OAApB,MAAiC,EAAxH,EAA2H,CACvH;AACH,iBAFD,MAEO;AACH7B,kBAAAA,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,EAAkCzK,mBAAlC;AACH;;AACD,gBAAA,MAAI,CAAC6K,QAAL,CAAc;AACV/K,kBAAAA,cAAc,EAAE+J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBE,MAD1B;AAEVnK,kBAAAA,mBAAmB,EAAE8J,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBG,WAF/B;AAGV1H,kBAAAA,qBAAqB,EAAEoH,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBc,aAHjC;AAIVpI,kBAAAA,eAAe,EAAEmH,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBK,OAJ3B;AAKVpH,kBAAAA,WAAW,EAAE4G,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoB/G;AALvB,iBAAd;AAOH;AACJ,aA/CD;AAgDH;AACJ,SA1DD;AA2DH,OAjED,EAFqB,CAmEjB;;AACJ,UAAM8H,YAAY,GAAG,IAAI7B,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA2B,MAAAA,YAAY,CAAC1B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAwB,QAAAA,YAAY,CAACvB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBoB,YAAhB,CAAhB;AACArB,QAAAA,OAAO,CAACE,KAAR,CAAc,sDAAoD,MAAI,CAACtI,KAAL,CAAWG,UAA7E,EAAyF,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACtG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB2J,cAAAA,YAAY,CAACjB,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAPD,MAOO;AACHyB,YAAAA,YAAY,CAAChB,MAAb,CAAoB,UAAAT,GAAG,EAAI;AACvB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAGe,QAAH,EAAa;AACT3K,kBAAAA,cAAc,GAAGwJ,MAAM,CAACG,SAAxB;AACH,iBAFD,MAEO;AACHtJ,kBAAAA,cAAc,GAAGmJ,MAAM,CAACG,SAAxB;AACA9K,kBAAAA,4BAA4B,GAAG2K,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBiB,IAAnD;;AACA,kBAAA,MAAI,CAACJ,QAAL,CAAc;AACV1I,oBAAAA,iBAAiB,EAAE0H,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBiB;AAD7B,mBAAd;AAGH;;AACD,gBAAA,MAAI,CAACJ,QAAL,CAAc;AACV/I,kBAAAA,SAAS,EAAE+H,MAAM,CAACG;AADR,iBAAd;;AAGA,qBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrB,MAAM,CAACG,SAAP,CAAiBC,MAArC,EAA6CiB,CAAC,EAA9C,EAAkD;AAC9C,kBAAA,MAAI,CAACvH,qBAAL,CAA2BkG,MAAM,CAACG,SAAP,CAAiBkB,CAAjB,CAA3B,EAAgDA,CAAhD,EAAmDF,QAAnD;;AACA,kBAAA,MAAI,CAACnH,oBAAL,CAA0BgG,MAAM,CAACG,SAAP,CAAiBkB,CAAjB,CAA1B,EAA+CA,CAA/C,EAAkDF,QAAlD;AACH;;AAAA;AACJ;AACJ,aAnBD;AAoBH;AACJ,SA9BD;AA+BH,OArCD,EArEqB,CA0GjB;AACP;;;0CAEsBG,K,EAAOC,gB,EAAkBJ,Q,EAAU;AAAA;;AACtD,UAAM/B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8DAA4D,MAAI,CAACtI,KAAL,CAAWG,UAAvE,GAAkF,yBAAlF,GAA4G0J,KAAK,CAACE,EAAhI,EAAoI,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AACjJ,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B1I,gBAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAnB;;AACA,oBAAGgB,QAAH,EAAa;AACT,sBAAGzK,6BAA6B,CAAC6K,gBAAD,CAA7B,IAAoD,IAAvD,EACI7K,6BAA6B,CAAC6K,gBAAD,CAA7B,GAAkD,EAAlD;AACJ7K,kBAAAA,6BAA6B,CAAC6K,gBAAD,CAA7B,GAAkDvB,MAAM,CAACG,SAAzD;;AACA,uBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3K,6BAA6B,CAAC6K,gBAAD,CAA7B,CAAgDnB,MAApE,EAA4EiB,CAAC,EAA7E,EAAiF;AAC7E,oBAAA,MAAI,CAACtH,kBAAL,CAAwBuH,KAAxB,EAA+B5K,6BAA6B,CAAC6K,gBAAD,CAA7B,CAAgDF,CAAhD,CAA/B,EAAmFE,gBAAnF,EAAqGF,CAArG,EAAwGF,QAAxG;AACH;;AAAA;AACDzJ,kBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYjB,6BAAZ;AACH,iBATD,MASO;AACH,sBAAGK,wBAAwB,CAACwK,gBAAD,CAAxB,IAA+C,IAAlD,EACIxK,wBAAwB,CAACwK,gBAAD,CAAxB,GAA6C,EAA7C;AACJxK,kBAAAA,wBAAwB,CAACwK,gBAAD,CAAxB,GAA6CvB,MAAM,CAACG,SAApD;;AACA,uBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtK,wBAAwB,CAACwK,gBAAD,CAAxB,CAA2CnB,MAA/D,EAAuEiB,CAAC,EAAxE,EAA4E;AACxE,oBAAA,MAAI,CAACtH,kBAAL,CAAwBuH,KAAxB,EAA+BvK,wBAAwB,CAACwK,gBAAD,CAAxB,CAA2CF,CAA3C,CAA/B,EAA8EE,gBAA9E,EAAgGF,CAAhG,EAAmGF,QAAnG;AACH;;AAAA;AACDzJ,kBAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYZ,wBAAZ;AACH;AACJ;AACJ,aAzBD;AA0BH;AACJ,SApCD;AAqCH,OA3CD,EAFsD,CA6ClD;AACP;;;uCAEmBuK,K,EAAOG,Q,EAAUF,gB,EAAkBG,gB,EAAkBP,Q,EAAU;AAAA;;AAC/E,UAAM/B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,sDAAoD,MAAI,CAACtI,KAAL,CAAWG,UAA/D,GAA0E,yBAA1E,GAAoG0J,KAAK,CAACE,EAA1G,GAA6G,yBAA7G,GAAuIC,QAAQ,CAACD,EAA9J,EAAkK,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AAC/K,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B1I,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAnB;AACA,oBAAIwB,QAAQ,GAAG3B,MAAM,CAACG,SAAtB;AACAwB,gBAAAA,QAAQ,CAACC,IAAT,CAAc,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACxB,yBAAOD,CAAC,CAACE,YAAF,GAAeD,CAAC,CAACC,YAAxB;AAAqC,iBADzC;;AAGA,oBAAGZ,QAAH,EAAa;AACT,sBAAG1K,qBAAqB,CAAC8K,gBAAD,CAArB,IAA2C,IAA9C,EACI9K,qBAAqB,CAAC8K,gBAAD,CAArB,GAA0C,EAA1C;AACJ,sBAAG9K,qBAAqB,CAAC8K,gBAAD,CAArB,CAAwCG,gBAAxC,KAA6D,IAAhE,EACIjL,qBAAqB,CAAC8K,gBAAD,CAArB,CAAwCG,gBAAxC,IAA4D,EAA5D;AACJjL,kBAAAA,qBAAqB,CAAC8K,gBAAD,CAArB,CAAwCG,gBAAxC,IAA4DC,QAA5D;AACAjK,kBAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYlB,qBAAZ;AACH,iBARD,MAQO;AACH,sBAAGK,gBAAgB,CAACyK,gBAAD,CAAhB,IAAsC,IAAzC,EACIzK,gBAAgB,CAACyK,gBAAD,CAAhB,GAAqC,EAArC;AACJ,sBAAGzK,gBAAgB,CAACyK,gBAAD,CAAhB,CAAmCG,gBAAnC,KAAwD,IAA3D,EACI5K,gBAAgB,CAACyK,gBAAD,CAAhB,CAAmCG,gBAAnC,IAAuD,EAAvD;AACJ5K,kBAAAA,gBAAgB,CAACyK,gBAAD,CAAhB,CAAmCG,gBAAnC,IAAuDC,QAAvD;AACAjK,kBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYb,gBAAZ;AACH;AACJ;AACJ,aA3BD;AA4BH;AACJ,SAtCD;AAuCH,OA7CD,EAF+E,CA+C3E;AACP;;;yCAEqBwK,K,EAAOC,gB,EAAkBJ,Q,EAAU;AAAA;;AACrD,UAAM/B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8DAA4D,MAAI,CAACtI,KAAL,CAAWG,UAAvE,GAAkF,yBAAlF,GAA4G0J,KAAK,CAACE,EAAhI,EAAoI,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AACjJ,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B1I,gBAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAnB;;AACA,oBAAGgB,QAAH,EAAa;AACT,sBAAGxK,uBAAuB,CAAC4K,gBAAD,CAAvB,IAA6C,IAAhD,EACI5K,uBAAuB,CAAC4K,gBAAD,CAAvB,GAA4C,EAA5C;AACJ5K,kBAAAA,uBAAuB,CAAC4K,gBAAD,CAAvB,GAA4CvB,MAAM,CAACG,SAAnD;;AACA,uBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1K,uBAAuB,CAAC4K,gBAAD,CAAvB,CAA0CnB,MAA9D,EAAsEiB,CAAC,EAAvE,EAA2E;AACvE,oBAAA,MAAI,CAACpH,qBAAL,CAA2BqH,KAA3B,EAAkC3K,uBAAuB,CAAC4K,gBAAD,CAAvB,CAA0CF,CAA1C,CAAlC,EAAgFE,gBAAhF,EAAkGF,CAAlG,EAAqGF,QAArG;AACH;;AAAA;AACJ,iBAPD,MAOO;AACH,sBAAGnK,kBAAkB,CAACuK,gBAAD,CAAlB,IAAwC,IAA3C,EACIvK,kBAAkB,CAACuK,gBAAD,CAAlB,GAAuC,EAAvC;AACJvK,kBAAAA,kBAAkB,CAACuK,gBAAD,CAAlB,GAAuCvB,MAAM,CAACG,SAA9C;;AACA,uBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrK,kBAAkB,CAACuK,gBAAD,CAAlB,CAAqCnB,MAAzD,EAAiEiB,CAAC,EAAlE,EAAsE;AAClE,oBAAA,MAAI,CAACpH,qBAAL,CAA2BqH,KAA3B,EAAkCtK,kBAAkB,CAACuK,gBAAD,CAAlB,CAAqCF,CAArC,CAAlC,EAA2EE,gBAA3E,EAA6FF,CAA7F,EAAgGF,QAAhG;AACH;;AAAA;AACDzJ,kBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYX,kBAAZ;AACH;AACJ;AACJ,aAvBD;AAwBH;AACJ,SAlCD;AAmCH,OAzCD,EAFqD,CA2CjD;AACP;;;0CAEsBsK,K,EAAOU,O,EAAST,gB,EAAkBU,e,EAAiBd,Q,EAAU;AAAA;;AAChF,UAAM/B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,sEAAoE,MAAI,CAACtI,KAAL,CAAWG,UAA/E,GAA0F,yBAA1F,GAAoH0J,KAAK,CAACE,EAA1H,GAA6H,mBAA7H,GAAiJQ,OAAO,CAACR,EAAvK,EAA2K,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AACxL,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B1I,gBAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAnB;;AACA,oBAAGgB,QAAH,EAAa;AACT,sBAAGvK,gCAAgC,CAAC2K,gBAAD,CAAhC,IAAsD,IAAzD,EACI3K,gCAAgC,CAAC2K,gBAAD,CAAhC,GAAqD,EAArD;AACJ,sBAAG3K,gCAAgC,CAAC2K,gBAAD,CAAhC,CAAmDU,eAAnD,KAAuE,IAA1E,EACIrL,gCAAgC,CAAC2K,gBAAD,CAAhC,CAAmDU,eAAnD,IAAsE,EAAtE;AACJrL,kBAAAA,gCAAgC,CAAC2K,gBAAD,CAAhC,CAAmDU,eAAnD,IAAsEjC,MAAM,CAACG,SAA7E;AACAzI,kBAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYf,gCAAZ;AACH,iBARD,MAQO;AACH,sBAAGK,4BAA4B,CAACsK,gBAAD,CAA5B,IAAkD,IAArD,EACItK,4BAA4B,CAACsK,gBAAD,CAA5B,GAAiD,EAAjD;AACJ,sBAAGtK,4BAA4B,CAACsK,gBAAD,CAA5B,CAA+CU,eAA/C,KAAmE,IAAtE,EACIhL,4BAA4B,CAACsK,gBAAD,CAA5B,CAA+CU,eAA/C,IAAkE,EAAlE;AACJhL,kBAAAA,4BAA4B,CAACsK,gBAAD,CAA5B,CAA+CU,eAA/C,IAAkEjC,MAAM,CAACG,SAAzE;AACAzI,kBAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYV,4BAAZ;AACH;AACJ;AACJ,aAvBD;AAwBH;AACJ,SAlCD;AAmCH,OAzCD,EAFgF,CA2C5E;AACP;;;gCAEW;AACR,WAAKkD,SAAL;AACH;;;gCAEW;AACR,UAAIwH,QAAQ,sBAAO,KAAK5J,KAAL,CAAWG,MAAlB,CAAZ;;AACA,WAAK,IAAImJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,QAAQ,CAACvB,MAA7B,EAAqCiB,CAAC,EAAtC,EAA0C;AACtCM,QAAAA,QAAQ,CAACN,CAAD,CAAR;AACH;;AAAA;AACJ;;;6CAEyB;AACtB,WAAK5H,SAAL;AACA,WAAKuH,QAAL,CAAc;AACVhJ,QAAAA,gBAAgB,EAAE;AADR,OAAd;AAGH;;;yCAEqBkK,M,EAAQ;AAC1B,UAAI7J,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,uBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKZ,KAAL,CAAW0K;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK1K,KAAL,CAAW2K;AAAlF,SAA6F;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,oCAA7F,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK3K,KAAL,CAAW4K;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,qBAA7G,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjI;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,8BAApG,CAJJ,EAKI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,uBALJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAkBAtE,MAAAA,4BAA4B,GAAGoM,MAA/B,CAnB0B,CAoB1B;;AACA,UAAI/J,QAAJ,EAAcD,MAAd;AACA,UAAIoK,WAAW,GAAGxM,4BAAlB,CAtB0B,CAuB1B;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,QAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,UAAGhJ,eAAH,EAAoB;AAChBe,QAAAA,QAAQ,GAAGxB,uBAAX;AACAuB,QAAAA,MAAM,GAAGzB,qBAAT;AACH,OAHD,MAGO;AACH0B,QAAAA,QAAQ,GAAGnB,kBAAX;AACAkB,QAAAA,MAAM,GAAGpB,gBAAT;AACH;;AACD,UAAGqB,QAAQ,CAACmK,WAAD,CAAR,IAAyBC,SAA5B,EACIpK,QAAQ,CAACmK,WAAD,CAAR,GAAwB,EAAxB;AACJ,UAAGpK,MAAM,CAACoK,WAAD,CAAN,IAAuBC,SAA1B,EACIrK,MAAM,CAACoK,WAAD,CAAN,GAAsB,EAAtB;AACJ,WAAKtB,QAAL,CAAc;AACVhJ,QAAAA,gBAAgB,EAAE,qBADR;AAEVK,QAAAA,MAAM,EAAEA,MAFE;AAGVF,QAAAA,QAAQ,EAAEA,QAAQ,CAACmK,WAAD,CAHR;AAIVpK,QAAAA,MAAM,EAAEA,MAAM,CAACoK,WAAD;AAJJ,OAAd;AAMH;;;6DAEyC;AACtC,WAAKjI,oBAAL,CAA0BvE,4BAA1B;AACH;;;sCAEkBoM,M,EAAQM,Y,EAAc;AACrC,UAAInK,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,uBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKZ,KAAL,CAAW0K;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK1K,KAAL,CAAW2K;AAAlF,SAA6F;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,oCAA7F,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK3K,KAAL,CAAW4K;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,qBAA7G,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjI;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,8BAApG,CAJJ,EAKI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKE;AAA5E,SAAoH;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,uBAApH,CALJ,EAMI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,4BANJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAoBA,UAAIvB,cAAJ,EAAoBC,YAApB;;AACA,UAAGlD,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCiD,QAAAA,cAAc,GAAG,KAAjB;AACAC,QAAAA,YAAY,GAAG,EAAf;AACH;;AACD,UAAI,KAAKjB,KAAL,CAAWkB,uBAAX,IAAsC,IAA1C,EAAgD;AAC5C,YAAG,KAAKlB,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,MAA3D,KAAsE,CAAtE,IACC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,OAA3D,KAAuE,CADxE,IAEC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,MAA3D,KAAsE,CAFvE,IAGC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,KAA3D,KAAqE,CAHtE,IAIC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,KAA3D,KAAqE,CAJtE,IAKC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,KAA3D,KAAqE,CALtE,IAMC,KAAKlH,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAnC,CAA6CxD,aAA7C,CAA2D,SAA3D,KAAyE,CAN7E,EAMiF;AAE7ElG,UAAAA,cAAc,GAAG,IAAjB;AACAC,UAAAA,YAAY,GAAG,KAAKjB,KAAL,CAAWkB,uBAAX,CAAmCwJ,SAAlD;AACH,SAVD,MAUO;AACH1J,UAAAA,cAAc,GAAG,KAAjB;AACAC,UAAAA,YAAY,GAAG,EAAf;AACH;AACJ,OAzCoC,CA2CrC;;;AACApD,MAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACAG,MAAAA,yBAAyB,GAAGmM,MAA5B;AACA,WAAKlB,QAAL,CAAc;AACVhJ,QAAAA,gBAAgB,EAAE,iBADR;AAEVK,QAAAA,MAAM,EAAEA,MAFE;AAGVS,QAAAA,WAAW,EAAE0J,YAHH;AAIVzJ,QAAAA,cAAc,EAAEA,cAJN;AAKVC,QAAAA,YAAY,EAAEA;AALJ,OAAd;AAOH;;;+CAE2B;AACxB,UAAIX,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,uBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKZ,KAAL,CAAW0K;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK1K,KAAL,CAAW2K;AAAlF,SAA6F;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,oCAA7F,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK3K,KAAL,CAAW4K;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,qBAA7G,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjI;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,8BAApG,CAJJ,EAKI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,8BALJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAkBA,WAAK4G,QAAL,CAAc;AACV3I,QAAAA,MAAM,EAAEA,MADE;AAEVL,QAAAA,gBAAgB,EAAE;AAFR,OAAd;AAIH;;;iCAEa0K,O,EAASC,e,EAAiB1M,c,EAAgBmD,W,EAAa;AACjE,UAAIf,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,2BADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKZ,KAAL,CAAW0K;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK1K,KAAL,CAAW2K;AAAlF,SAA6F;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,oCAA7F,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAK3K,KAAL,CAAW4K;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,qBAA7G,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjI;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,8BAApG,CAJJ,EAKI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,2BALJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAmBA,UAAGsI,OAAO,IAAIC,eAAe,IAAIJ,SAAjC,EAA4C;AACxC,aAAKvB,QAAL,CAAc;AACVpJ,UAAAA,UAAU,EAAE+K,eADF;AAEV9K,UAAAA,gBAAgB,EAAE,KAFR;AAGVC,UAAAA,wBAAwB,EAAE,KAHhB;AAIV7B,UAAAA,cAAc,EAAEA,cAJN;AAKVmD,UAAAA,WAAW,EAAEA,WALH;AAMVf,UAAAA,MAAM,EAAEA,MANE;AAOVL,UAAAA,gBAAgB,EAAE;AAPR,SAAd,EAQGN,OAAO,CAACC,GAAR,CAAY,KAAKI,KAAjB,CARH;AASH,OAVD,MAUO;AACH,aAAKiJ,QAAL,CAAc;AACVpJ,UAAAA,UAAU,EAAE,KAAKH,KAAL,CAAWG,UADb;AAEVC,UAAAA,gBAAgB,EAAE,KAAKJ,KAAL,CAAWI,gBAFnB;AAGVC,UAAAA,wBAAwB,EAAE,KAAKL,KAAL,CAAWK,wBAH3B;AAIVsB,UAAAA,WAAW,EAAE,KAAKrB,KAAL,CAAWqB,WAJd;AAKVf,UAAAA,MAAM,EAAEA,MALE;AAMVL,UAAAA,gBAAgB,EAAE;AANR,SAAd;AAQH;AACJ;;;mCAEe4K,Q,EAAUC,M,EAAQ;AAAA;;AAC9B;AACA,UAAMzD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yMAAuM6C,QAAQ,CAAC5M,SAAhN,GAA0N,MAA1N,GAAiO4M,QAAQ,CAACvC,MAA1O,GAAiP,MAAjP,GAAwPuC,QAAQ,CAACtC,WAAjQ,GAA6Q,MAA7Q,GAAoRsC,QAAQ,CAACzB,QAA7R,GAAsS,MAAtS,GAA6SyB,QAAQ,CAACxJ,WAAtT,GAAkU,KAAlU,GAAwUwJ,QAAQ,CAAC3B,aAAjV,GAA+V,KAA/V,GAAqW2B,QAAQ,CAACE,gBAA9W,GAA+X,MAA/X,GAAsYF,QAAQ,CAAClC,YAA/Y,GAA4Z,MAA5Z,GAAmakC,QAAQ,CAACnC,kBAAT,CAA4BI,WAA5B,EAAna,GAA6c,GAA7c,IAAkd+B,QAAQ,CAACnC,kBAAT,CAA4BK,QAA5B,KAAuC,CAAzf,IAA4f,GAA5f,GAAggB8B,QAAQ,CAACnC,kBAAT,CAA4BM,OAA5B,EAAhgB,GAAsiB,MAAtiB,GAA6iB6B,QAAQ,CAACjC,WAAtjB,GAAkkB,MAAlkB,GAAykBiC,QAAQ,CAACpC,OAAllB,GAA0lB,MAA1lB,GAAimBoC,QAAQ,CAACtM,iBAA1mB,GAA4nB,IAA1oB,EAAgpB,UAACmJ,GAAD,EAAMO,MAAN,EAAiB;AAC7pB,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbhI,cAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;AACAlI,cAAAA,wBAAwB;;AACxB,cAAA,MAAI,CAACiE,eAAL;;AACA4D,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBsD,cAAAA,KAAK,CAAC,sBAAD,CAAL;AACA;;;AAEAxL,cAAAA,wBAAwB;;AACxB,cAAA,MAAI,CAACoD,aAAL,CAAmBiI,QAAnB,EAA6BC,MAA7B;AACH,aAND;AAOH;AACJ,SAlBD;AAmBH,OAzBD,EAH8B,CA4B1B;AACP;;;kCAEcD,Q,EAAUC,M,EAAQ;AAAA;;AAC7B;AACA,UAAMzD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,gDAAd,EAAgE,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC7E,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAG/I,uBAAH,EAA4B;AACxB,kBAAA,OAAI,CAACwD,iBAAL,CAAuBmF,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAvB;AACH,iBAFD,MAEO;AACH,uBAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,MAAM,CAACzC,MAA3B,EAAmCiB,CAAC,EAApC,EAAwC;AACpC/J,oBAAAA,uBAAuB;;AACvB,oBAAA,OAAI,CAACyD,mBAAL,CAAyBiF,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAzB,EAA8C0C,MAAM,CAACxB,CAAD,CAApD,EAAyDA,CAAzD;AACH;;AAAA;AACJ;AACJ;AACJ,aAXD;AAYH;AACJ,SAtBD;AAuBH,OA7BD,EAH6B,CAgCzB;AACP;;;mCAEeuB,Q,EAAUC,M,EAAQ;AAAA;;AAC9B;AACA,UAAMzD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,uCAAqC6C,QAAQ,CAAC5M,SAA9C,GAAwD,cAAxD,GAAuE4M,QAAQ,CAACvC,MAAhF,GAAuF,oBAAvF,GAA4GuC,QAAQ,CAACtC,WAArH,GAAiI,iBAAjI,GAAmJsC,QAAQ,CAACzB,QAA5J,GAAqK,qBAArK,GAA2LyB,QAAQ,CAAC3B,aAApM,GAAkN,wBAAlN,GAA2O2B,QAAQ,CAACE,gBAApP,GAAqQ,qBAArQ,GAA2RF,QAAQ,CAAClC,YAApS,GAAiT,2BAAjT,GAA6UkC,QAAQ,CAACnC,kBAAT,CAA4BI,WAA5B,EAA7U,GAAuX,GAAvX,IAA4X+B,QAAQ,CAACnC,kBAAT,CAA4BK,QAA5B,KAAuC,CAAna,IAAsa,GAAta,GAA0a8B,QAAQ,CAACnC,kBAAT,CAA4BM,OAA5B,EAA1a,GAAgd,oBAAhd,GAAqe6B,QAAQ,CAACjC,WAA9e,GAA0f,gBAA1f,GAA2gBiC,QAAQ,CAACpC,OAAphB,GAA4hB,0BAA5hB,GAAujBoC,QAAQ,CAACtM,iBAAhkB,GAAklB,eAAllB,GAAkmB,OAAI,CAACmB,KAAL,CAAWG,UAA3nB,EAAuoB,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACppB,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbhI,cAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;AACAlI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACiE,eAAL;;AACA4D,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBsD,cAAAA,KAAK,CAAC,sBAAD,CAAL;AACA;;AAEA;;AACAH,cAAAA,QAAQ,CAACpB,EAAT,GAAc,OAAI,CAAC/J,KAAL,CAAWG,UAAzB;AAEAL,cAAAA,wBAAwB;;AACxB,kBAAGF,uBAAH,EAA4B;AACxB,gBAAA,OAAI,CAACwD,iBAAL,CAAuB+H,QAAvB;AACH,eAFD,MAEO;AACH,qBAAK,IAAIvB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,MAAM,CAACzC,MAA3B,EAAmCiB,CAAC,EAApC,EAAwC;AACpC/J,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAACyD,mBAAL,CAAyB6H,QAAzB,EAAmCC,MAAM,CAACxB,CAAD,CAAzC,EAA8CA,CAA9C;AACH;;AAAA;AACJ;AACJ,aAhBD;AAiBH;AACJ,SA5BD;AA6BH,OAnCD,EAH8B,CAsC1B;AACP;;;sCAEkBuB,Q,EAAU;AAAA;;AAAA,iCAChBvB,CADgB;AAErB,YAAIhB,MAAM,GAAGnJ,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAA7B;AACA,YAAIe,IAAI,GAAGlK,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAA3B;AACA,YAAMhC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,OAAI,CAAC7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,QAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,cAAIC,UAAU,GAAG,KAAjB;AACAN,UAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,YAAAA,UAAU,GAAG,IAAb;AACH,WAFD;AAGA,cAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,UAAAA,OAAO,CAACE,KAAR,CAAc,yEAAuE6C,QAAQ,CAACpB,EAAhF,GAAmF,KAAnF,GAAyFnB,MAAzF,GAAgG,MAAhG,GAAuGe,IAAvG,GAA4G,IAA1H,EAAgI,UAAC3B,GAAD,EAAMO,MAAN,EAAiB;AAC7I,gBAAIP,GAAJ,EAAS;AACL/H,cAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,cAAA,OAAI,CAACjE,eAAL;;AACA,kBAAI,CAACkE,UAAL,EAAiB;AACbN,gBAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,aAPD,MAOO;AACHL,cAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,oBAAG4B,CAAC,IAAInK,YAAY,CAACkJ,MAAb,GAAoB,CAA5B,EACI,OAAI,CAACtF,oBAAL,CAA0B8H,QAA1B;AACP,eAHD;AAIH;AACJ,WAdD;AAeH,SArBD,EALqB,CA0BjB;AA1BiB;;AACzB,WAAK,IAAIvB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnK,YAAY,CAACkJ,MAAjC,EAAyCiB,CAAC,EAA1C,EAA8C;AAAA,cAArCA,CAAqC;AA0B7C;;AAAA;AACJ;;;yCAEqBuB,Q,EAAU;AAAA;;AAC5B,UAAMxD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qEAAmE6C,QAAQ,CAACpB,EAA5E,GAA+E,KAA/E,GAAqFrK,cAArF,GAAoG,IAAlH,EAAwH,UAACsI,GAAD,EAAMO,MAAN,EAAiB;AACrI,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB;AACA,cAAA,OAAI,CAAChE,qDAAL,CAA2DmH,QAA3D;AACH,aAHD;AAIH;AACJ,SAdD;AAeH,OArBD,EAF4B,CAuBxB;AACP;;;wCAEoBA,Q,EAAUI,a,EAAezB,gB,EAAkB;AAAA;;AAC5D,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2EAAyE6C,QAAQ,CAACpB,EAAlF,GAAqF,KAArF,GAA2FwB,aAAa,CAAC3C,MAAzG,GAAgH,MAAhH,GAAuH2C,aAAa,CAAC5B,IAArI,GAA0I,KAA1I,GAAgJ4B,aAAa,CAACC,KAA9J,GAAoK,GAAlL,EAAuL,UAACxD,GAAD,EAAMO,MAAN,EAAiB;AACpM,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB;AACAlI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACyD,kBAAL,CAAwB4H,QAAxB,EAAkCI,aAAlC,EAAiDzB,gBAAjD;AACH,aAJD;AAKH;AACJ,SAhBD;AAiBH,OAvBD,EAF4D,CAyBxD;AACP;;;uCAEmBqB,Q,EAAUI,a,EAAezB,gB,EAAkB;AAAA;;AAC3D;AACA,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mDAAiDiD,aAAa,CAAC3C,MAA/D,GAAsE,qBAAtE,GAA4FuC,QAAQ,CAACpB,EAAnH,EAAuH,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AACpI,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAI6C,WAAW,GAAGxM,4BAAlB,CADsB,CAEtB;;AACA,kBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,gBAAAA,WAAW,GAAG,OAAI,CAACvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,kBAAIjI,QAAJ,EAAc+K,aAAd;;AACA,kBAAI9L,eAAJ,EAAqB;AACjBe,gBAAAA,QAAQ,GAAGxB,uBAAX;AACAuM,gBAAAA,aAAa,GAAGxM,6BAAhB;AACH,eAHD,MAGO;AACHyB,gBAAAA,QAAQ,GAAGnB,kBAAX;AACAkM,gBAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,kBAAIoM,wBAAwB,GAAG,EAA/B;AAAA,kBAAmCC,iCAAiC,GAAG,EAAvE;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlL,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BnB,MAA/C,EAAuDiD,CAAC,EAAxD,EAA4D;AACxD,oBAAGF,wBAAwB,CAAC5B,gBAAD,CAAxB,IAA8CgB,SAAjD,EACIY,wBAAwB,CAAC5B,gBAAD,CAAxB,GAA6C,EAA7C;AACJ4B,gBAAAA,wBAAwB,CAAC5B,gBAAD,CAAxB,CAA2C+B,IAA3C,CAAgDD,CAAhD;AACA,oBAAGD,iCAAiC,CAAC7B,gBAAD,CAAjC,IAAuDgB,SAA1D,EACIa,iCAAiC,CAAC7B,gBAAD,CAAjC,GAAsD,EAAtD;AACJpJ,gBAAAA,QAAQ,CAACoJ,gBAAD,CAAR,CAA2B8B,CAA3B,EAA8BE,sBAA9B,GAAuDF,CAAvD;AACA/L,gBAAAA,uBAAuB;;AACvB,gBAAA,OAAI,CAAC+D,0BAAL,CAAgCuH,QAAhC,EAA0C5C,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAA1C,EAA+DhI,QAAQ,CAACoJ,gBAAD,CAAR,CAA2B8B,CAA3B,CAA/D,EAA8F9B,gBAA9F,EAAgH8B,CAAhH,EAAmHF,wBAAnH,EAA6IC,iCAA7I;AACH;;AAAA;;AACD,kBAAGjL,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BnB,MAA3B,IAAqC,CAAxC,EAA2C;AACvC,oBAAIoD,yBAAyB,GAAG,EAAhC;AAAA,oBAAoCC,+BAA+B,GAAG,EAAtE;;AACA,qBAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,aAAa,CAAC3B,gBAAD,CAAb,CAAgCnB,MAApD,EAA4DiD,CAAC,EAA7D,EAAiE;AAC7D,sBAAGG,yBAAyB,CAACjC,gBAAD,CAAzB,IAA+CgB,SAAlD,EACIiB,yBAAyB,CAACjC,gBAAD,CAAzB,GAA8C,EAA9C;AACJiC,kBAAAA,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4C+B,IAA5C,CAAiDD,CAAjD;AACA,sBAAGI,+BAA+B,CAAClC,gBAAD,CAA/B,IAAqDgB,SAAxD,EACIkB,+BAA+B,CAAClC,gBAAD,CAA/B,GAAoD,EAApD;AACJ2B,kBAAAA,aAAa,CAAC3B,gBAAD,CAAb,CAAgC8B,CAAhC,EAAmCK,uBAAnC,GAA6DL,CAA7D;AACA/L,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAAC2D,+BAAL,CAAqC2H,QAArC,EAA+C5C,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAA/C,EAAoE+C,aAAa,CAAC3B,gBAAD,CAAb,CAAgC8B,CAAhC,CAApE,EAAwG9B,gBAAxG,EAA0H8B,CAA1H,EAA6HG,yBAA7H,EAAwJC,+BAAxJ;AACH;;AAAA;AACJ;;AACD,kBAAGtL,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BnB,MAA3B,IAAqC,CAArC,IAA0C8C,aAAa,CAAC3B,gBAAD,CAAb,CAAgCnB,MAAhC,IAA0C,CAAvF,EAA0F;AACtF1I,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EADsF,CAEtF;;AACA,gBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ,aA3CD;AA4CH;AACJ,SAtDD;AAuDH,OA7DD,EAH2D,CAgEvD;AACP;;;oDAEgCA,Q,EAAUI,a,EAAevB,Q,EAAUF,gB,EAAkBG,gB,EAAkB8B,yB,EAA2BC,+B,EAAiC;AAAA;;AAChK/L,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYqL,aAAZ;AACAtL,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY8J,QAAZ;AACA/J,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY4J,gBAAZ;AACA7J,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY+J,gBAAZ;AACA,UAAMtC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,+OAA6O0B,QAAQ,CAACkC,eAAtP,GAAsQ,IAAtQ,GAA2Qf,QAAQ,CAACpB,EAApR,GAAuR,IAAvR,GAA4RwB,aAAa,CAACxB,EAA1S,GAA6S,IAA7S,GAAkTC,QAAQ,CAACmC,UAA3T,GAAsU,IAAtU,GAA2UnC,QAAQ,CAACoC,cAApV,GAAmW,IAAnW,GAAwWpC,QAAQ,CAACqC,eAAjX,GAAiY,IAAjY,GAAsYrC,QAAQ,CAACsC,eAA/Y,GAA+Z,KAA/Z,GAAqatC,QAAQ,CAACuC,eAA9a,GAA8b,MAA9b,GAAqcvC,QAAQ,CAACwC,aAA9c,GAA4d,KAA5d,GAAkevC,gBAAle,GAAmf,IAAnf,GAAwfD,QAAQ,CAACyC,QAAjgB,GAA0gB,GAAxhB,EAA6hB,UAACzE,GAAD,EAAMO,MAAN,EAAiB;AAC1iB,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBlI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAAC2D,4BAAL,CAAkC0H,QAAlC,EAA4CI,aAA5C,EAA2DvB,QAA3D,EAAqEF,gBAArE,EAAuFG,gBAAvF,EAAyG8B,yBAAzG,EAAoIC,+BAApI;AACH,aAHD;AAIH;AACJ,SAfD;AAgBH,OAtBD,EAVgK,CAgC5J;AACP;;;iDAE6Bb,Q,EAAUI,a,EAAevB,Q,EAAUF,gB,EAAkBG,gB,EAAkB8B,yB,EAA2BC,+B,EAAiC;AAAA;;AAC7J,UAAMrE,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mEAAiE0B,QAAQ,CAACkC,eAA1E,GAA0F,oBAA1F,GAA+Gf,QAAQ,CAACpB,EAAxH,GAA2H,yBAA3H,GAAqJwB,aAAa,CAACxB,EAAnK,GAAsK,0BAAtK,GAAiMC,QAAQ,CAACuC,eAA1M,GAA0N,kCAA1N,GAA6PtC,gBAA7P,GAA8Q,kBAA9Q,GAAiSD,QAAQ,CAACyC,QAAxT,EAAkU,UAACzE,GAAD,EAAMO,MAAN,EAAiB;AAC/U,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB/H,cAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAnB;;AACA,kBAAIH,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B,oBAAIlI,MAAJ,EAAYC,QAAZ,EAAsBsJ,QAAtB,EAAgCyB,aAAhC;;AACA,oBAAI9L,eAAJ,EAAqB;AACjBc,kBAAAA,MAAM,GAAGzB,qBAAT;AACA0B,kBAAAA,QAAQ,GAAGxB,uBAAX;AACAuM,kBAAAA,aAAa,GAAGxM,6BAAhB;AACH,iBAJD,MAIO;AACHwB,kBAAAA,MAAM,GAAGpB,gBAAT;AACAqB,kBAAAA,QAAQ,GAAGnB,kBAAX;AACAkM,kBAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,qBAAK,IAAIsK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmC,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4CnB,MAAhE,EAAwEiB,CAAC,EAAzE,EAA6E;AACzE,sBAAImC,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4CF,CAA5C,KAAkDK,gBAAtD,EAAwE;AACpE8B,oBAAAA,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4C4C,MAA5C,CAAmD9C,CAAnD,EAAsD,CAAtD;AACA,wBAAGmC,yBAAyB,CAACjC,gBAAD,CAAzB,IAA+CgB,SAA/C,IAA4DiB,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4CnB,MAA5C,IAAsD,CAArH,EACIoD,yBAAyB,CAACW,MAA1B,CAAiC5C,gBAAjC,EAAmD,CAAnD;AACJ;AACH;AACJ;;AAAA;;AACD,qBAAK,IAAI6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlM,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CtB,MAA/D,EAAuEgE,CAAC,EAAxE,EAA4E;AACxE,sBAAGX,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,KAAuEa,SAA1E,EACIkB,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,IAAsE,EAAtE;AACJ+B,kBAAAA,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoE4B,IAApE,CAAyEc,CAAzE;AACH;;AAAA;AACD;;;;;;;;;;;;;;AAcA;;AACAlM,gBAAAA,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C2C,eAA9C,GAAgErE,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBqB,EAApF,CAvC6B,CAwC7B;;AACA,oBAAGtJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8CtJ,WAAjD,EAA8D;AAC1Dd,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAAC6D,wBAAL,CAA8ByH,QAA9B,EAAwCI,aAAxC,EAAuDhD,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAvD,EAA4EjI,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,CAA5E,EAA2HH,gBAA3H,EAA6IG,gBAA7I,EAA+J,CAA/J,EAAkK+B,+BAAlK,EAAmM,CAAC,CAApM;AACH,iBAHD,MAGO,IAAG,CAACvL,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8CtJ,WAAlD,EAA+D;AAClEd,kBAAAA,uBAAuB,GAD2C,CAElE;;AACAI,kBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACAT,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;;AACA,uBAAK,IAAImJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlJ,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BnB,MAA/C,EAAuDiB,CAAC,EAAxD,EAA4D;AACxD,wBAAGA,CAAC,IAAInJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C4C,SAAtD,EAAiE;AAC7D5M,sBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAO,sBAAAA,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C4C,SAA9C,GAA0DnM,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BF,CAA3B,EAA8BG,EAAxF;AACA;AACH;AACJ;;AAAA;;AACD,kBAAA,OAAI,CAACrG,wBAAL,CAA8ByH,QAA9B,EAAwCI,aAAxC,EAAuDhD,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAvD,EAA4EjI,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,CAA5E,EAA2HH,gBAA3H,EAA6IG,gBAA7I,EAA+J,CAA/J,EAAkK+B,+BAAlK,EAAmM,CAAC,CAApM;AACH;;AACD,oBAAID,yBAAyB,CAACpD,MAA1B,IAAoC,CAApC,IAAyCqD,+BAA+B,CAACrD,MAAhC,IAA0C,CAAvF,EAA0F;AACtF1I,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EADsF,CAEtF;;AACA,kBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ;AACJ,aArED;AAsEH;AACJ,SAhFD;AAiFH,OAvFD,EAF6J,CAyFzJ;AACP;;;6CACyBA,Q,EAAUI,a,EAAevB,Q,EAAU8C,K,EAAOhD,gB,EAAkBG,gB,EAAkB8C,a,EAAef,+B,EAAiC1B,Y,EAAc;AAAA;;AAClK,UAAGwC,KAAK,IAAIhC,SAAZ,EAAuB;AACnB7K,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYqL,aAAZ;AACAtL,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY8J,QAAZ;AACA/J,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY4M,KAAZ;AACA7M,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY4J,gBAAZ;AACA7J,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY+J,gBAAZ;AACAhK,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY6M,aAAZ;AACA9M,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYoK,YAAZ;AACA,YAAM3C,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,QAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,cAAIC,UAAU,GAAG,KAAjB;AACAN,UAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,YAAAA,UAAU,GAAG,IAAb;AACH,WAFD;AAGA,cAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,UAAAA,OAAO,CAACE,KAAR,CAAc,kRAAgR0B,QAAQ,CAACD,EAAzR,GAA4R,IAA5R,GAAiSoB,QAAQ,CAACpB,EAA1S,GAA6S,IAA7S,GAAkTwB,aAAa,CAACxB,EAAhU,GAAmU,IAAnU,GAAwU+C,KAAK,CAACD,SAA9U,GAAwV,IAAxV,GAA6VvC,YAA7V,GAA0W,IAA1W,GAA+WwC,KAAK,CAACZ,eAArX,GAAqY,KAArY,GAA2YY,KAAK,CAACE,oBAAjZ,GAAsa,MAAta,GAA6aF,KAAK,CAACG,iBAAnb,GAAqc,MAArc,GAA4cH,KAAK,CAACnM,WAAld,GAA8d,MAA9d,GAAqemM,KAAK,CAACP,eAA3e,GAA2f,KAA3f,GAAigBtC,gBAAjgB,GAAkhB,KAAlhB,GAAwhB6C,KAAK,CAAC9B,SAA9hB,GAAwiB,MAAxiB,GAA+iB8B,KAAK,CAACI,cAArjB,GAAokB,MAApkB,GAA2kBJ,KAAK,CAACK,KAAjlB,GAAulB,MAAvlB,GAA8lBL,KAAK,CAACM,KAApmB,GAA0mB,KAA1mB,GAAgnBN,KAAK,CAACtB,KAAtnB,GAA4nB,GAA1oB,EAA+oB,UAACxD,GAAD,EAAMO,MAAN,EAAiB;AAC5pB,gBAAIP,GAAJ,EAAS;AACL/H,cAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,cAAA,OAAI,CAACjE,eAAL;;AACA,kBAAI,CAACkE,UAAL,EAAiB;AACbnI,gBAAAA,wBAAwB;;AACxB,gBAAA,OAAI,CAACiE,eAAL;;AACA4D,gBAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,aATD,MASO;AACHL,cAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBlI,gBAAAA,wBAAwB;AACxB,oBAAI2L,aAAJ;;AACA,oBAAI9L,eAAJ,EAAqB;AACjB8L,kBAAAA,aAAa,GAAGxM,6BAAhB;AACH,iBAFD,MAEO;AACHwM,kBAAAA,aAAa,GAAGnM,wBAAhB;AACH;AACD;;;;;;;;;;;;;;;;AAcA,oBAAG0M,+BAA+B,CAAClC,gBAAD,CAA/B,IAAqDgB,SAArD,IAAkEkB,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,KAAuEa,SAA5I,EAAuJ;AACnJ,uBAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoC,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEtB,MAAxF,EAAgGiB,CAAC,EAAjG,EAAqG;AACjG,wBAAIoC,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEL,CAApE,KAA0EmD,aAA9E,EAA6F;AACzFf,sBAAAA,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEyC,MAApE,CAA2E9C,CAA3E,EAA8E,CAA9E;;AACA,0BAAGoC,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEtB,MAApE,IAA8E,CAAjF,EAAoF;AAChFqD,wBAAAA,+BAA+B,CAAClC,gBAAD,CAA/B,CAAkD4C,MAAlD,CAAyDzC,gBAAzD,EAA2E,CAA3E;AACH;;AACD;AACH;AACJ;;AAAA;AACJ;;AACD,oBAAI+B,+BAA+B,CAACrD,MAAhC,IAA0C,CAA9C,EAAiD;AAC7C1I,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAD6C,CAE7C;;AACA,kBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH,iBAJD,MAIO;AACH,kBAAA,OAAI,CAACxH,UAAL,CAAgBwH,QAAhB,EAA0BI,aAA1B,EAAyCvB,QAAzC,EAAmD8C,KAAnD,EAA0DhD,gBAA1D,EAA4EG,gBAA5E,EAA8F8C,aAA9F,EAA6Gf,+BAA7G,EAA8I1B,YAA9I;AACH;AACJ,eAxCD;AAyCH;AACJ,WArDD;AAsDH,SA5DD,EAhBmB,CA4Ef;AACP,OA7ED,MA6EO;AACHrK,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EADG,CAEH;;AACA,aAAK8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ;;;+BAEUA,Q,EAAUI,a,EAAevB,Q,EAAU8C,K,EAAOhD,gB,EAAkBG,gB,EAAkB8C,a,EAAef,+B,EAAiC1B,Y,EAAc;AAAA;;AACnJrK,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYqL,aAAZ;AACAtL,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY8J,QAAZ;AACA/J,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY4M,KAAZ;AACA,UAAMnF,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2DAAyD0B,QAAQ,CAACD,EAAlE,GAAqE,oBAArE,GAA0FoB,QAAQ,CAACpB,EAAnG,GAAsG,yBAAtG,GAAgIwB,aAAa,CAACxB,EAA9I,GAAiJ,mBAAjJ,GAAqK+C,KAAK,CAACD,SAA3K,GAAqL,uBAArL,GAA6MvC,YAA7M,GAA0N,yBAA1N,GAAoPwC,KAAK,CAACZ,eAA1P,GAA0Q,+BAA1Q,GAA0SY,KAAK,CAACE,oBAAhT,GAAqU,6BAArU,GAAmWF,KAAK,CAACG,iBAAzW,GAA2X,uBAA3X,GAAmZH,KAAK,CAACnM,WAAzZ,GAAqa,2BAAra,GAAicmM,KAAK,CAACP,eAAvc,GAAud,kCAAvd,GAA0ftC,gBAA1f,GAA2gB,oBAA3gB,GAAgiB6C,KAAK,CAAC9B,SAAtiB,GAAgjB,0BAAhjB,GAA2kB8B,KAAK,CAACI,cAAjlB,GAAgmB,iBAAhmB,GAAknBJ,KAAK,CAACK,KAAxnB,GAA8nB,iBAA9nB,GAAgpBL,KAAK,CAACM,KAAtpB,GAA4pB,gBAA5pB,GAA6qBN,KAAK,CAACtB,KAAjsB,EAAwsB,UAACxD,GAAD,EAAMO,MAAN,EAAiB;AACrtB,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACiE,eAAL;;AACA4D,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WATD,MASO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAIO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA9B,EAAkC;AAC9B,oBAAIlI,MAAJ,EAAYC,QAAZ;;AACA,oBAAIf,eAAJ,EAAqB;AACjBc,kBAAAA,MAAM,GAAGzB,qBAAT;AACA0B,kBAAAA,QAAQ,GAAGxB,uBAAX;AACH,iBAHD,MAGO;AACHuB,kBAAAA,MAAM,GAAGpB,gBAAT;AACAqB,kBAAAA,QAAQ,GAAGnB,kBAAX;AACH;;AACDU,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY4J,gBAAZ;AACA7J,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY+J,gBAAZ;AACAhK,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY6M,aAAa,GAAC,CAA1B;AACA9M,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACAR,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAZ;;AACA,oBAAGjI,MAAM,CAACqJ,gBAAD,CAAN,IAA4BgB,SAA5B,IAAyCrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,KAA8Ca,SAAvF,IAAoGrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,KAA+DjC,SAAtK,EAAiL;AAC7K,sBAAGrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,EAA4DpM,WAA/D,EAA4E;AACxEd,oBAAAA,uBAAuB;;AACvB,oBAAA,OAAI,CAAC6D,wBAAL,CAA8ByH,QAA9B,EAAwCI,aAAxC,EAAuDvB,QAAvD,EAAiEvJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,CAAjE,EAA8HjD,gBAA9H,EAAgJG,gBAAhJ,EAAkK8C,aAAa,GAAC,CAAhL,EAAmLf,+BAAnL,EAAoNzD,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBqB,EAAxO;AACH,mBAHD,MAGO,IAAG,CAACtJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,EAA4DpM,WAAhE,EAA6E;AAChFd,oBAAAA,uBAAuB,GADyD,CAEhF;;AACA,yBAAK,IAAI+J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlJ,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BnB,MAA/C,EAAuDiB,CAAC,EAAxD,EAA4D;AACxD,0BAAGA,CAAC,IAAInJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,EAA4DF,SAApE,EAA+E;AAC3EpM,wBAAAA,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,EAA4DF,SAA5D,GAAwEnM,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BF,CAA3B,EAA8BG,EAAtG;AACA;AACH;AACJ;;AAAA;;AACD,oBAAA,OAAI,CAACrG,wBAAL,CAA8ByH,QAA9B,EAAwCI,aAAxC,EAAuDvB,QAAvD,EAAiEvJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C8C,aAAa,GAAC,CAAzD,CAAjE,EAA8HjD,gBAA9H,EAAgJG,gBAAhJ,EAAkK8C,aAAa,GAAC,CAAhL,EAAmLf,+BAAnL,EAAoNzD,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBqB,EAAxO;AACH;AACJ;AAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAfF,qBA6CS;AACL9J,oBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EADK,CAEL;;AACA,oBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ;AACJ,aAvED;AAwEH;AACJ,SApFD;AAqFH,OA3FD,EARmJ,CAmG/I;AACP;;;+CAE2BA,Q,EAAUI,a,EAAehB,O,EAAST,gB,EAAkBU,e,EAAiBkB,wB,EAA0BC,iC,EAAmC;AAAA;;AAC1J,UAAMhE,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2HAAyH6C,QAAQ,CAACpB,EAAlI,GAAqI,IAArI,GAA0IwB,aAAa,CAACxB,EAAxJ,GAA2J,IAA3J,GAAgKS,eAAhK,GAAgL,KAAhL,GAAsLD,OAAO,CAACA,OAA9L,GAAsM,MAAtM,GAA6MA,OAAO,CAACS,SAArN,GAA+N,IAA7O,EAAmP,UAAChD,GAAD,EAAMO,MAAN,EAAiB;AAChQ,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB6H,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBlI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAAC+D,yBAAL,CAA+BsH,QAA/B,EAAyCI,aAAzC,EAAwDhB,OAAxD,EAAiET,gBAAjE,EAAmFU,eAAnF,EAAoGkB,wBAApG,EAA8HC,iCAA9H;AACH,aAHD;AAIH;AACJ,SAfD;AAgBH,OAtBD,EAF0J,CAwBtJ;AACP;;;8CAE0BR,Q,EAAUI,a,EAAehB,O,EAAST,gB,EAAkBU,e,EAAiBkB,wB,EAA0BC,iC,EAAmC;AAAA;;AACzJ,UAAMhE,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8DAA4D6C,QAAQ,CAACpB,EAArE,GAAwE,yBAAxE,GAAkGwB,aAAa,CAACxB,EAAhH,GAAmH,gCAAnH,GAAoJS,eAAlK,EAAmL,UAACxC,GAAD,EAAMO,MAAN,EAAiB;AAChM,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAACjE,eAAL;;AACA,gBAAI,CAACkE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAI0E,iBAAJ,EAAuB5B,aAAvB,EAAsC/K,QAAtC;;AACA,oBAAIf,eAAJ,EAAqB;AACjB0N,kBAAAA,iBAAiB,GAAGlO,gCAApB;AACAsM,kBAAAA,aAAa,GAAGxM,6BAAhB;AACAyB,kBAAAA,QAAQ,GAAGxB,uBAAX;AACH,iBAJD,MAIO;AACHmO,kBAAAA,iBAAiB,GAAG7N,4BAApB;AACAiM,kBAAAA,aAAa,GAAGnM,wBAAhB;AACAoB,kBAAAA,QAAQ,GAAGnB,kBAAX;AACH;;AACD,oBAAI+N,gBAAgB,GAAG,KAAvB;;AACA,qBAAK,IAAI1D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6B,aAAa,CAAC9C,MAAlC,EAA0CiB,CAAC,EAA3C,EAA+C;AAC3C,sBAAI6B,aAAa,CAAC7B,CAAD,CAAb,CAAiBjB,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B2E,oBAAAA,gBAAgB,GAAG,IAAnB;AACH;AACJ;;AAAA;;AACD,qBAAK,IAAI1D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,iBAAiB,CAACvD,gBAAD,CAAjB,CAAoCU,eAApC,EAAqD7B,MAAzE,EAAiFiB,CAAC,EAAlF,EAAsF;AAClF,sBAAG+B,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,KAAwEM,SAA3E,EACIa,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,IAAuE,EAAvE;AACJmB,kBAAAA,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,EAAqEqB,IAArE,CAA0EjC,CAA1E;AACA/J,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAACiE,iCAAL,CAAuCqH,QAAvC,EAAiDI,aAAjD,EAAgEhD,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAhE,EAAqF2E,iBAAiB,CAACvD,gBAAD,CAAjB,CAAoCU,eAApC,EAAqDZ,CAArD,CAArF,EAA8IE,gBAA9I,EAAgKU,eAAhK,EAAiLZ,CAAjL,EAAoL+B,iCAApL,EAAuN2B,gBAAvN;AACH;;AAAA;AACD5M,gBAAAA,QAAQ,CAACoJ,gBAAD,CAAR,CAA2BU,eAA3B,EAA4CT,EAA5C,GAAiDxB,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBqB,EAArE;;AACA,oBAAIpK,eAAJ,EAAqB;AACjBT,kBAAAA,uBAAuB,GAAGwB,QAA1B;AACH,iBAFD,MAEO;AACHnB,kBAAAA,kBAAkB,GAAGmB,QAArB;AACH;;AACD,qBAAK,IAAIkJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,wBAAwB,CAAC5B,gBAAD,CAAxB,CAA2CnB,MAA/D,EAAuEiB,CAAC,EAAxE,EAA4E;AACxE,sBAAI8B,wBAAwB,CAAC5B,gBAAD,CAAxB,CAA2CF,CAA3C,KAAiDY,eAArD,EAAsE;AAClEkB,oBAAAA,wBAAwB,CAAC5B,gBAAD,CAAxB,CAA2C4C,MAA3C,CAAkD9C,CAAlD,EAAqD,CAArD;AACA,wBAAG8B,wBAAwB,CAAC5B,gBAAD,CAAxB,CAA2CnB,MAA3C,IAAqD,CAAxD,EACI+C,wBAAwB,CAACgB,MAAzB,CAAgC5C,gBAAhC,EAAkD,CAAlD;AACJ;AACH;AACJ;;AAAA,iBArC2B,CAsC5B;AACA;;AACA,oBAAGU,eAAe,IAAI,CAAtB,EAAyB;AACrB,sBAAIuB,yBAAyB,GAAG,EAAhC;AAAA,sBAAoCC,+BAA+B,GAAG,EAAtE;;AACA,uBAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,aAAa,CAAC3B,gBAAD,CAAb,CAAgCnB,MAApD,EAA4DiD,CAAC,EAA7D,EAAiE;AAC7D,wBAAGG,yBAAyB,CAACjC,gBAAD,CAAzB,IAA+CgB,SAAlD,EACIiB,yBAAyB,CAACjC,gBAAD,CAAzB,GAA8C,EAA9C;AACJiC,oBAAAA,yBAAyB,CAACjC,gBAAD,CAAzB,CAA4C+B,IAA5C,CAAiDD,CAAjD;AACA,wBAAGI,+BAA+B,CAAClC,gBAAD,CAA/B,IAAqDgB,SAAxD,EACIkB,+BAA+B,CAAClC,gBAAD,CAA/B,GAAoD,EAApD;AACJjK,oBAAAA,uBAAuB;AACvB4L,oBAAAA,aAAa,CAAC3B,gBAAD,CAAb,CAAgC8B,CAAhC,EAAmCK,uBAAnC,GAA6DL,CAA7D;;AACA,oBAAA,OAAI,CAACpI,+BAAL,CAAqC2H,QAArC,EAA+CI,aAA/C,EAA8DE,aAAa,CAAC3B,gBAAD,CAAb,CAAgC8B,CAAhC,CAA9D,EAAkG9B,gBAAlG,EAAoH8B,CAApH,EAAuHG,yBAAvH,EAAkJC,+BAAlJ;AACH;;AAAA;AACD;;;;;;;;;;;;AAYH;;AACD,oBAAIN,wBAAwB,CAAC/C,MAAzB,IAAmC,CAAnC,IAAwC,CAAC2E,gBAA7C,EAAgE;AAC5DrN,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAD4D,CAE5D;;AACA,kBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ;AACJ,aAxED;AAyEH;AACJ,SAnFD;AAoFH,OA1FD,EAFyJ,CA4FrJ;AACP;;;sDAEkCA,Q,EAAUI,a,EAAehB,O,EAASgD,Q,EAAUzD,gB,EAAkBU,e,EAAiBgD,gB,EAAkB7B,iC,EAAmC2B,gB,EAAkB;AAAA;;AACrL;AACIrN,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYqL,aAAZ;AACAtL,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYqK,OAAZ;AACAtK,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYqN,QAAZ;AACA,UAAM5F,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,sUAAoU6C,QAAQ,CAACpB,EAA7U,GAAgV,IAAhV,GAAqVwB,aAAa,CAACxB,EAAnW,GAAsW,IAAtW,GAA2WQ,OAAO,CAACR,EAAnX,GAAsX,IAAtX,GAA2XwD,QAAQ,CAACrB,eAApY,GAAoZ,KAApZ,GAA0ZqB,QAAQ,CAACE,cAAna,GAAkb,KAAlb,GAAwbF,QAAQ,CAACnB,cAAjc,GAAgd,IAAhd,GAAqdmB,QAAQ,CAAClB,eAA9d,GAA8e,IAA9e,GAAmfkB,QAAQ,CAACjB,eAA5f,GAA4gB,IAA5gB,GAAihBiB,QAAQ,CAACG,kBAA1hB,GAA6iB,IAA7iB,GAAkjBH,QAAQ,CAACI,uBAA3jB,GAAmlB,KAAnlB,GAAylBJ,QAAQ,CAACf,aAAlmB,GAAgnB,MAAhnB,GAAunBe,QAAQ,CAACP,oBAAhoB,GAAqpB,MAArpB,GAA4pBO,QAAQ,CAACK,kBAArqB,GAAwrB,MAAxrB,GAA+rBL,QAAQ,CAAC/O,cAAxsB,GAAutB,MAAvtB,GAA8tB+O,QAAQ,CAAC1E,WAAvuB,GAAmvB,MAAnvB,GAA0vB0E,QAAQ,CAACvC,SAAnwB,GAA6wB,IAA3xB,EAAiyB,UAAChD,GAAD,EAAMO,MAAN,EAAiB;AAC9yB,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACiE,eAAL;;AACA4D,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtBlI,cAAAA,wBAAwB;AACxB,kBAAI2L,aAAJ;;AACA,kBAAI9L,eAAJ,EAAqB;AACjB8L,gBAAAA,aAAa,GAAGxM,6BAAhB;AACH,eAFD,MAEO;AACHwM,gBAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,kBAAGqM,iCAAiC,CAAC7B,gBAAD,CAAjC,IAAuDgB,SAAvD,IAAoEa,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,KAAwEM,SAA/I,EAA0J;AACtJ,qBAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+B,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,EAAqE7B,MAAzF,EAAiGiB,CAAC,EAAlG,EAAsG;AAClG,sBAAI+B,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,EAAqEZ,CAArE,KAA2E4D,gBAA/E,EAAiG;AAC7F7B,oBAAAA,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,EAAqEkC,MAArE,CAA4E9C,CAA5E,EAA+E,CAA/E;AACA,wBAAG+B,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoDU,eAApD,EAAqE7B,MAArE,IAA+E,CAAlF,EACIgD,iCAAiC,CAAC7B,gBAAD,CAAjC,CAAoD4C,MAApD,CAA2DlC,eAA3D,EAA4E,CAA5E;AACJ;AACH;AACJ;;AAAA;AACJ;;AACD,kBAAImB,iCAAiC,CAAChD,MAAlC,IAA4C,CAA5C,IAAiD,CAAC2E,gBAAtD,EAAyE;AACrErN,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EADqE,CAErE;;AACA,gBAAA,OAAI,CAAC8D,qDAAL,CAA2DmH,QAA3D;AACH;AACJ,aAvBD;AAwBH;AACJ,SAnCD;AAoCH,OA1CD,EATiL,CAmD7K;;AACR;;;;AAIH;;;sCAEiB;AACd,UAAGrL,wBAAwB,IAAID,uBAA/B,EAAwD;AACpDI,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA;;;;;;;;;;;;;;;;;;;;;;;AA2BA,aAAKqJ,QAAL,CAAc;AACV/I,UAAAA,SAAS,EAAE,EADD;AAEVC,UAAAA,MAAM,EAAE,EAFE;AAGVC,UAAAA,QAAQ,EAAE,EAHA;AAIVI,UAAAA,oBAAoB,EAAE,EAJZ;AAKVC,UAAAA,UAAU,EAAE,EALF;AAMVF,UAAAA,iBAAiB,EAAE;AANT,SAAd;AASA,aAAK4F,YAAL;;AACA,YAAI,KAAKzG,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAzD,EAA4D;AACxD,eAAKxH,KAAL,CAAW6N,8BAAX,CAA0C,UAA1C;AACH;;AACD,YAAInE,QAAJ;AACA,YAAIjC,CAAC,CAAC,qBAAD,CAAD,CAAyBqG,EAAzB,CAA4B,UAA5B,CAAJ,EACIpE,QAAQ,GAAG,IAAX,CADJ,KAGIA,QAAQ,GAAG,KAAX;AACJ,YAAI/H,WAAJ;AACA,YAAI8F,CAAC,CAAC,cAAD,CAAD,CAAkBqG,EAAlB,CAAqB,UAArB,CAAJ,EACInM,WAAW,GAAG,IAAd,CADJ,KAGIA,WAAW,GAAG,KAAd;AACJ,YAAIoM,4BAAJ;AACA,YAAItG,CAAC,CAAC,oBAAD,CAAD,CAAwBqG,EAAxB,CAA2B,UAA3B,CAAJ,EACIC,4BAA4B,GAAG,IAA/B,CADJ,KAGIA,4BAA4B,GAAG,KAA/B;AACJ,YAAI1C,gBAAJ;AACA,YAAI5D,CAAC,CAAC,mBAAD,CAAD,CAAuBqG,EAAvB,CAA0B,UAA1B,CAAJ,EACIzC,gBAAgB,GAAG,IAAnB,CADJ,KAGIA,gBAAgB,GAAG,KAAnB;AACJ,YAAI2C,aAAa,GAAG,aAAWxP,cAAX,GAA0B,IAA1B,GACA,eADA,GACgBC,mBADhB,GACoC,IADpC,GAEA,YAFA,GAEaiL,QAFb,GAEsB,IAFtB,GAGA,eAHA,GAGgB/H,WAHhB,GAG4B,IAH5B,GAIA,oBAJA,GAIqB0J,gBAJrB,GAIsC,IAJtC,GAKA,WALA,GAKY0C,4BALZ,GAKyC,IALzC,GAMA,gBANA,GAMiBpP,oBANjB,GAMsC,IANtC,GAOA,eAPA,GAOgBC,mBAPhB,GAOoC,IAPpC,GAQA,qBARA,GAQsBC,iBARtB,GAQwC,IARxC,GASA,sBATA,GASuBH,mBATvB,GAS2C,IAT/D;;AAUA,YAAIgL,QAAQ,IAAI3K,cAAc,CAAC4J,MAAf,GAAwB,CAAxC,EAA2C;AACvCqF,UAAAA,aAAa,IAAI,aAAjB;;AACA,eAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7K,cAAc,CAAC4J,MAAnC,EAA2CiB,CAAC,EAA5C,EAAgD;AAC5CoE,YAAAA,aAAa,IAAI,aAAWjP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAA7B,GAAoC,UAApC,GAA+C7J,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAjE,GAAsE,IAAvF;AACH;;AAAA;AACJ;;AACD,aAAKrC,YAAL,CAAkB2G,GAAlB,EAAuB,cAAY,KAAKjO,KAAL,CAAWkO,QAAvB,GAAgC,yBAAhC,GAA0D1P,cAA1D,GAAyE,sBAAzE,GAAgGwP,aAAvH,EAAsI,UAAtI,EAAkJ,KAAKhO,KAAL,CAAWG,UAA7J;AACH;AACJ;;;0EAEsDgL,Q,EAAU;AAAA;;AAC7D,UAAMxD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qEAAmE6C,QAAQ,CAACvC,MAA5E,GAAmF,kCAAjG,EAAqI,UAACZ,GAAD,EAAMO,MAAN,EAAiB;AAClJ,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAIO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,IAA2B,CAA/B,EAAkC;AAC9B;AACA,gBAAA,OAAI,CAAC5E,eAAL;AACH,eAHD,MAGO;AACH9D,gBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAAZ;AACAzI,gBAAAA,OAAO,CAACC,GAAR,CAAYqI,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoByF,cAAhC;;AACA,gBAAA,OAAI,CAAChK,yBAAL,CAA+BgH,QAA/B,EAAyC5C,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoByF,cAA7D;AACH;AACJ,aAVD;AAWH;AACJ,SApBD;AAqBH,OA3BD,EAF6D,CA6BzD;AACP;;;yDAEqChD,Q,EAAU;AAAA;;AAC5C;AACA;AACA,UAAI8C,GAAG,GAAG,IAAIG,IAAJ,EAAV;AACA,UAAIC,kBAAkB,GAAG,kBAAgBlD,QAAQ,CAACvC,MAAzB,GAAgC,GAAhC,GAAoCqF,GAAG,CAAC7E,WAAJ,EAApC,GAAsD,GAAtD,IAA2D6E,GAAG,CAAC5E,QAAJ,KAAe,CAA1E,IAA6E,GAA7E,GAAiF4E,GAAG,CAAC3E,OAAJ,EAAjF,GAA+F,GAA/F,GAAmG2E,GAAG,CAACK,QAAJ,EAAnG,GAAkH,GAAlH,GAAsHL,GAAG,CAACM,UAAJ,EAAtH,GAAuI,GAAvI,GAA2IN,GAAG,CAACO,UAAJ,EAA3I,GAA4J,uCAArL;;AACA,UAAI5O,uBAAJ,EAA6B;AACzB,aAAK,IAAIgK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnK,YAAY,CAACkJ,MAAjC,EAAyCiB,CAAC,EAA1C,EAA8C;AAC1C,cAAGA,CAAC,IAAI,CAAR,EACIyE,kBAAkB,IAAI,IAAtB;;AACJ,cAAG5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAAhB,CAAqBnC,aAArB,CAAmC,SAAnC,KAAiD,CAApD,EAAuD;AACnD6G,YAAAA,kBAAkB,IAAI5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,GAAuB,gBAA7C;AACH,WAFD,MAEO,IAAGnJ,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAAhB,CAAqBnC,aAArB,CAAmC,KAAnC,KAA6C,CAAhD,EAAmD;AACtD6G,YAAAA,kBAAkB,IAAI5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,GAAuB,MAA7C;AACH,WAFM,MAEA,IAAGnJ,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAAhB,CAAqBnC,aAArB,CAAmC,SAAnC,KAAiD,CAApD,EAAuD;AAC1D6G,YAAAA,kBAAkB,IAAI5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,GAAuB,gBAA7C;AACH,WAFM,MAEA,IAAGnJ,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAAhB,CAAqBnC,aAArB,CAAmC,KAAnC,KAA6C,CAAhD,EAAmD;AACtD6G,YAAAA,kBAAkB,IAAI5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,GAAuB,MAA7C;AACH,WAFM,MAEA,IAAGnJ,YAAY,CAACmK,CAAD,CAAZ,CAAgBD,IAAhB,CAAqBnC,aAArB,CAAmC,MAAnC,KAA8C,CAAjD,EAAoD;AACvD6G,YAAAA,kBAAkB,IAAI5O,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,GAAuB,OAA7C;AACH;AACJ;;AAAA;AACJ,OAhBD,MAgBO,IAAI,CAACjJ,eAAL,EAAsB;AACzB,aAAK,IAAIiK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxK,cAAc,CAACuJ,MAAnC,EAA2CiB,CAAC,EAA5C,EAAgD;AAC5C,cAAGA,CAAC,IAAI,CAAR,EACIyE,kBAAkB,IAAI,IAAtB;;AACJ,cAAGjP,cAAc,CAACwK,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AACrD6G,YAAAA,kBAAkB,IAAIjP,cAAc,CAACwK,CAAD,CAAd,CAAkB6E,OAAlB,GAA0B,gBAAhD;AACH,WAFD,MAEO,IAAGrP,cAAc,CAACwK,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAAlD,EAAqD;AACxD6G,YAAAA,kBAAkB,IAAIjP,cAAc,CAACwK,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,MAA/C;AACH,WAFM,MAEA,IAAGxJ,cAAc,CAACwK,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D6G,YAAAA,kBAAkB,IAAIjP,cAAc,CAACwK,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,gBAA/C;AACH,WAFM,MAEA,IAAGxJ,cAAc,CAACwK,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAAlD,EAAqD;AACxD6G,YAAAA,kBAAkB,IAAIjP,cAAc,CAACwK,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,MAA/C;AACH,WAFM,MAEA,IAAGxJ,cAAc,CAACwK,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD6G,YAAAA,kBAAkB,IAAIjP,cAAc,CAACwK,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,OAA/C;AACH;AACJ;;AAAA;AACJ,OAhBM,MAgBA;AACH,aAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7K,cAAc,CAAC4J,MAAnC,EAA2CiB,CAAC,EAA5C,EAAgD;AAC5C,cAAGA,CAAC,IAAI,CAAR,EACIyE,kBAAkB,IAAI,IAAtB;;AACJ,cAAGtP,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AACrD6G,YAAAA,kBAAkB,IAAItP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,gBAA/C;AACH,WAFD,MAEO,IAAG7J,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAAlD,EAAqD;AACxD6G,YAAAA,kBAAkB,IAAItP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,MAA/C;AACH,WAFM,MAEA,IAAG7J,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D6G,YAAAA,kBAAkB,IAAItP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,gBAA/C;AACH,WAFM,MAEA,IAAG7J,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAAlD,EAAqD;AACxD6G,YAAAA,kBAAkB,IAAItP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,MAA/C;AACH,WAFM,MAEA,IAAG7J,cAAc,CAAC6K,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD6G,YAAAA,kBAAkB,IAAItP,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,GAAyB,OAA/C;AACH;AACJ;;AAAA;AACJ;;AACDyF,MAAAA,kBAAkB,IAAI,wBAAtB;AACApO,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYmO,kBAAZ;AACA,UAAM1G,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc+F,kBAAd,EAAkC,UAACrG,GAAD,EAAMO,MAAN,EAAiB;AAC/C,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB;AACA/H,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,cAAA,OAAI,CAACgE,6BAAL,CAAmCiH,QAAnC,EAA6C8C,GAA7C;AACH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EA1D4C,CA+ExC;AACP;;;kDAE8B9C,Q,EAAU8C,G,EAAK;AAAA;;AAC1ChO,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,UAAIwO,GAAG,GAAGT,GAAG,CAAC5E,QAAJ,KAAe,CAAzB;AACA,UAAGqF,GAAG,CAACC,QAAJ,GAAehG,MAAf,IAAyB,CAA5B,EACI+F,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAIE,GAAG,GAAGX,GAAG,CAAC3E,OAAJ,EAAV;AACA,UAAGsF,GAAG,CAACD,QAAJ,GAAehG,MAAf,IAAyB,CAA5B,EACIiG,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAMjH,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,kGAAgG6C,QAAQ,CAACvC,MAAzG,GAAgH,MAAhH,GAAuHqF,GAAG,CAAC7E,WAAJ,EAAvH,GAAyI,GAAzI,GAA6IsF,GAA7I,GAAiJ,GAAjJ,GAAqJE,GAArJ,GAAyJ,GAAzJ,GAA6JX,GAAG,CAACK,QAAJ,EAA7J,GAA4K,GAA5K,GAAgLL,GAAG,CAACM,UAAJ,EAAhL,GAAiM,GAAjM,GAAqMN,GAAG,CAACO,UAAJ,EAArM,GAAsN,kBAApO,EAAwP,UAACxG,GAAD,EAAMO,MAAN,EAAiB;AACrQ,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB/H,cAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;;AACA,cAAA,OAAI,CAACkE,qCAAL,CAA2C+G,QAA3C,EAAqD,UAArD,EAAiE8C,GAAjE;AACH,aAHD;AAIH;AACJ,SAbD;AAcH,OApBD,EAT0C,CA6BtC;AACP;;;8CAE0B9C,Q,EAAU8C,G,EAAM;AAAA;;AACvChO,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY+N,GAAZ;AACA,UAAIS,GAAG,GAAGT,GAAG,CAAC5E,QAAJ,KAAe,CAAzB;AACA,UAAGqF,GAAG,CAACC,QAAJ,GAAehG,MAAf,IAAyB,CAA5B,EACI+F,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAIE,GAAG,GAAGX,GAAG,CAAC3E,OAAJ,EAAV;AACA,UAAGsF,GAAG,CAACD,QAAJ,GAAehG,MAAf,IAAyB,CAA5B,EACIiG,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAMjH,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yDAAuD2F,GAAG,CAAC7E,WAAJ,EAAvD,GAAyE,GAAzE,GAA6EsF,GAA7E,GAAiF,GAAjF,GAAqFE,GAArF,GAAyF,GAAzF,GAA6FX,GAAG,CAACK,QAAJ,EAA7F,GAA4G,eAA5G,GAA4HnD,QAAQ,CAACpB,EAAnJ,EAAuJ,UAAC/B,GAAD,EAAMO,MAAN,EAAiB;AACpK,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB/H,cAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;;AACA,cAAA,OAAI,CAACkE,qCAAL,CAA2C+G,QAA3C,EAAqD,UAArD,EAAiE8C,GAAjE;AACH,aAHD;AAIH;AACJ,SAbD;AAcH,OApBD,EAXuC,CA+BnC;AACP;;;0DAEsC9C,Q,EAAU0D,K,EAAOZ,G,EAAK;AAAA;;AACzD,WAAKlK,eAAL;AACA,UAAM4D,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,0DAAwD6C,QAAQ,CAACpB,EAAjE,GAAoE,wBAApE,GAA6F8E,KAA7F,GAAmG,GAAjH,EAAsH,UAAC7G,GAAD,EAAMO,MAAN,EAAiB;AACnI,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACG,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,gBAAA,OAAI,CAACtE,2BAAL,CAAiC8G,QAAjC,EAA2C0D,KAA3C,EAAkDZ,GAAlD;AACH;AAAA;;;;AAGJ,aAND;AAOH;AACJ,SAhBD;AAiBH,OAvBD,EAHyD,CA0BrD;AACP;;;gDAE4B9C,Q,EAAU0D,K,EAAOZ,G,EAAK;AAC/C,UAAMtG,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mDAAiD6C,QAAQ,CAACpB,EAA1D,GAA6D,wBAA7D,GAAsF8E,KAAtF,GAA4F,yCAA1G,EAAqJ,UAAC7G,GAAD,EAAMO,MAAN,EAAiB;AAClK,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI,CACzB,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAF+C,CAoB3C;AACP;;;kCAEc8G,U,EAAY;AACvBvR,MAAAA,iBAAiB,GAAGuR,UAApB;AACH;;;kCAEcA,U,EAAYC,e,EAAiB;AACxCvR,MAAAA,iBAAiB,GAAGsR,UAApB;AACArR,MAAAA,sBAAsB,GAAGsR,eAAzB;AACH;;;wCAEoBpO,W,EAAa;AAC9B,WAAK4I,QAAL,CAAc;AACV5I,QAAAA,WAAW,EAAEA;AADH,OAAd;AAGH;;;kDAE8B;AAC3B,UAAI+I,QAAJ;AACA,UAAIjC,CAAC,CAAC,qBAAD,CAAD,CAAyBqG,EAAzB,CAA4B,UAA5B,CAAJ,EACIpE,QAAQ,GAAG,IAAX,CADJ,KAGIA,QAAQ,GAAG,KAAX;;AACJ,UAAIA,QAAJ,EAAc;AACV,aAAKH,QAAL,CAAc;AACV/I,UAAAA,SAAS,EAAEzB;AADD,SAAd;AAGH,OAJD,MAIO;AACH,aAAKwK,QAAL,CAAc;AACV/I,UAAAA,SAAS,EAAEpB;AADD,SAAd;AAGH;AACJ;;;sCAEiB;AACdU,MAAAA,wBAAwB,GAAG,CAA3B;AACAD,MAAAA,uBAAuB,GAAG,CAA1B;;AACA,UAAID,uBAAJ,EAA6B;AACzB,aAAK8E,kBAAL;AACH,OAFD,MAEO,IAAI,CAAC/E,eAAL,EAAsB;AACzB,aAAKgF,yBAAL;AACH,OAFM,MAEA;AACH,aAAKC,6BAAL;AACH;AACJ;;;yCAEqB;AAClB,UAAIrG,SAAS,GAAGkJ,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,EAAhB;AACA,UAAIlJ,cAAc,GAAGiJ,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,EAArB;AACA,UAAIjJ,mBAAmB,GAAGgJ,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,EAA1B;AACA,UAAIgC,QAAJ;AACA,UAAIjC,CAAC,CAAC,qBAAD,CAAD,CAAyBqG,EAAzB,CAA4B,UAA5B,CAAJ,EACIpE,QAAQ,GAAG,IAAX,CADJ,KAGIA,QAAQ,GAAG,KAAX;AACJ,UAAIqE,4BAAJ;AACA,UAAItG,CAAC,CAAC,oBAAD,CAAD,CAAwBqG,EAAxB,CAA2B,UAA3B,CAAJ,EACIC,4BAA4B,GAAG,IAA/B,CADJ,KAGIA,4BAA4B,GAAG,KAA/B;AACJ,UAAIvE,aAAa,GAAG,CAAC,CAArB;AACA;;;AAEA,UAAIwF,UAAU,GAAG,CAAjB;;AACA,UAAGrP,eAAH,EAAoB;AAChBqP,QAAAA,UAAU,GAAGhR,wBAAb;AACH,OAFD,MAEO;AACHgR,QAAAA,UAAU,GAAG/Q,uBAAb;AACH;;AACD,UAAIoN,gBAAJ;AACA,UAAI5D,CAAC,CAAC,mBAAD,CAAD,CAAuBqG,EAAvB,CAA0B,UAA1B,CAAJ,EACIzC,gBAAgB,GAAG,IAAnB,CADJ,KAGIA,gBAAgB,GAAG,KAAnB;AACJ,UAAIpC,YAAY,GAAGxB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,UAAIsB,kBAAJ;;AACA,UAAGC,YAAY,CAACzB,aAAb,CAA2B,IAA3B,KAAoC,CAAvC,EAA0C;AACtCwB,QAAAA,kBAAkB,GAAG,IAAIoF,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,EAAlB,CAArB;AACH,OAFD,MAEO;AACHpF,QAAAA,kBAAkB,GAAGvB,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,CAArB;AACH;;AACD,UAAID,WAAW,GAAGzB,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;AACA,UAAIuH,SAAS,GAAGxH,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,EAAhB;;AACA,UAAGnJ,SAAS,CAACoK,MAAV,GAAmB,GAAnB,IAA0BpK,SAAS,CAACoK,MAAV,GAAmB,CAAhD,EAAmD;AAC/C,YAAGnK,cAAc,CAACmK,MAAf,GAAwB,GAAxB,IAA+BnK,cAAc,CAACmK,MAAf,GAAwB,CAA1D,EAA6D;AACzD,cAAG,CAAC,KAAKxB,qBAAL,CAA2B5I,SAA3B,CAAJ,EAA2C;AACvC,gBAAI,KAAKqI,0BAAL,CAAgCrI,SAAhC,CAAJ,EAAgD;AAC5C,kBAAGE,mBAAmB,CAACkK,MAApB,GAA6B,GAAhC,EAAqC;AAAO;AACxC,oBAAGe,QAAQ,IAAIoB,SAAf,EAA0B;AACtB,sBAAGiD,4BAA4B,IAAIjD,SAAnC,EAA8C;AAC1C,wBAAGO,gBAAgB,IAAIP,SAAvB,EAAkC;AAC9B,0BAAG,CAACoE,KAAK,CAAC1F,aAAD,CAAT,EAA0B;AACtB,4BAAGP,YAAY,CAACN,MAAb,GAAsB,CAAzB,EAA4B;AACxB,8BAAG,KAAKvB,WAAL,CAAiB4B,kBAAjB,CAAH,EAA0C;AACtC,gCAAGE,WAAW,CAACP,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,kCAAGsG,SAAS,CAACtG,MAAV,GAAmB,GAAtB,EAA2B;AACvB,oCAAG,CAACuG,KAAK,CAACF,UAAD,CAAT,EAAuB;AACnB,sCAAGvP,YAAY,CAACkJ,MAAb,GAAsB,CAAzB,EAA4B;AACxB,wCAAGjJ,cAAc,CAACiJ,MAAf,GAAwB,CAA3B,EAA8B;AAC1B,0CAAI,KAAK3I,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,6CAAKP,gBAAL,CAAsB,KAAtB;AACH;;AACD,0CAAI,KAAKjH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAzD,EAA4D;AACxD,6CAAKN,gBAAL,CAAsB,KAAtB;AACH;;AACD,0CAAI,KAAKlH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,6CAAKR,gBAAL,CAAsB,KAAtB;AACH;;AACD,0CAAImI,aAAa,GAAG;AAAC5Q,wCAAAA,SAAS,EAAEA,SAAZ;AAAuBqK,wCAAAA,MAAM,EAAEpK,cAA/B;AAA+CqK,wCAAAA,WAAW,EAAEpK,mBAA5D;AAAiFiL,wCAAAA,QAAQ,EAAEA,QAA3F;AAAqG/H,wCAAAA,WAAW,EAAE,KAAlH;AAAyH6H,wCAAAA,aAAa,EAAEA,aAAxI;AAAuJ6B,wCAAAA,gBAAgB,EAAEA,gBAAzK;AAA2LtC,wCAAAA,OAAO,EAAEgF,4BAApM;AAAkO9E,wCAAAA,YAAY,EAAEA,YAAhP;AAA8PD,wCAAAA,kBAAkB,EAAEA,kBAAlR;AAAsSE,wCAAAA,WAAW,EAAEA,WAAnT;AAAgUrK,wCAAAA,iBAAiB,EAAEoQ;AAAnV,uCAApB;;AACA,0CAAG,KAAKjP,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,6CAAKrE,cAAL,CAAoBgM,aAApB;AACH,uCAFD,MAEO;AACH,6CAAKlM,cAAL,CAAoBkM,aAApB;AACH;;AACDtP,sCAAAA,uBAAuB;AAC1B,qCAjBD,MAiBO;AACHyL,sCAAAA,KAAK,CAAC,2BAAD,CAAL;AACH;AACJ,mCArBD,MAqBO;AACHA,oCAAAA,KAAK,CAAC,wBAAD,CAAL;AACH;AACJ,iCAzBD,MAyBO;AACHA,kCAAAA,KAAK,CAAC,oCAAD,CAAL;AACH;AACJ,+BA7BD,MA6BO;AACHA,gCAAAA,KAAK,CAAC,2DAAD,CAAL;AACH;AACJ,6BAjCD,MAiCO;AACHA,8BAAAA,KAAK,CAAC,uCAAD,CAAL;AACH;AACJ,2BArCD,MAqCO;AACHA,4BAAAA,KAAK,CAAC,qDAAD,CAAL;AACH;AACJ,yBAzCD,MAyCO;AACHA,0BAAAA,KAAK,CAAC,wCAAD,CAAL;AACH;AACJ,uBA7CD,MA6CO;AACHA,wBAAAA,KAAK,CAAC,gDAAD,CAAL;AACH;AACJ,qBAjDD,MAiDO;AACHA,sBAAAA,KAAK,CAAC,oEAAD,CAAL;AACH;AACJ,mBArDD,MAqDO;AACHA,oBAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,iBAzDD,MAyDO;AACHA,kBAAAA,KAAK,CAAC,+DAAD,CAAL;AACH;AACJ,eA7DD,MA6DO;AACHA,gBAAAA,KAAK,CAAC,2EAAD,CAAL;AACH;AACJ,aAjED,MAiEO;AACH,mBAAKtL,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,4DAAhC,EAA8F,IAA9F,EAAoG,KAApG,EAA2G,EAA3G;AACH;AACJ,WArED,MAqEO;AACH,iBAAKpP,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,iFAAhC,EAAmH,IAAnH,EAAyH,KAAzH,EAAgI,EAAhI;AACH;AACJ,SAzED,MAyEO;AACH9D,UAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,OA7ED,MA6EO;AACHA,QAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;;;gDAE4B;AACzB,UAAI/M,SAAS,GAAGkJ,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,EAAhB;AACA,UAAIlJ,cAAc,GAAGiJ,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,EAArB;AACA,UAAIjJ,mBAAmB,GAAGgJ,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,EAA1B;AACA,UAAIgC,QAAJ;AACA,UAAIjC,CAAC,CAAC,qBAAD,CAAD,CAAyBqG,EAAzB,CAA4B,UAA5B,CAAJ,EACIpE,QAAQ,GAAG,IAAX,CADJ,KAGIA,QAAQ,GAAG,KAAX;AACJ,UAAI/H,WAAJ;AACA,UAAI8F,CAAC,CAAC,cAAD,CAAD,CAAkBqG,EAAlB,CAAqB,UAArB,CAAJ,EACInM,WAAW,GAAG,IAAd,CADJ,KAGIA,WAAW,GAAG,KAAd;AACJ,UAAIoM,4BAAJ;AACA,UAAItG,CAAC,CAAC,oBAAD,CAAD,CAAwBqG,EAAxB,CAA2B,UAA3B,CAAJ,EACIC,4BAA4B,GAAG,IAA/B,CADJ,KAGIA,4BAA4B,GAAG,KAA/B;AACJ,UAAIvE,aAAa,GAAG,CAAC,CAArB;AACA;;;AAEA,UAAIwF,UAAU,GAAG,CAAjB;;AACA,UAAGrP,eAAH,EAAoB;AAChBqP,QAAAA,UAAU,GAAGhR,wBAAb;AACH,OAFD,MAEO;AACHgR,QAAAA,UAAU,GAAG/Q,uBAAb;AACH;;AACD,UAAIoN,gBAAJ;AACA,UAAI5D,CAAC,CAAC,mBAAD,CAAD,CAAuBqG,EAAvB,CAA0B,UAA1B,CAAJ,EACIzC,gBAAgB,GAAG,IAAnB,CADJ,KAGIA,gBAAgB,GAAG,KAAnB;AACJ,UAAIpC,YAAY,GAAGxB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,UAAIsB,kBAAJ;;AACA,UAAGC,YAAY,CAACzB,aAAb,CAA2B,IAA3B,KAAoC,CAAvC,EAA0C;AACtCwB,QAAAA,kBAAkB,GAAG,IAAIoF,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,EAAlB,CAArB;AACH,OAFD,MAEO;AACHpF,QAAAA,kBAAkB,GAAGvB,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,CAArB;AACH;;AACD,UAAID,WAAW,GAAGzB,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;AACA,UAAIuH,SAAS,GAAGxH,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,EAAhB;;AACA,UAAGnJ,SAAS,CAACoK,MAAV,GAAmB,GAAnB,IAA0BpK,SAAS,CAACoK,MAAV,GAAmB,CAAhD,EAAmD;AAC/C,YAAGnK,cAAc,CAACmK,MAAf,GAAwB,GAAxB,IAA+BnK,cAAc,CAACmK,MAAf,GAAwB,CAA1D,EAA6D;AACzD,cAAG,CAAC,KAAKxB,qBAAL,CAA2B5I,SAA3B,CAAJ,EAA2C;AACvC,gBAAI,KAAKqI,0BAAL,CAAgCrI,SAAhC,CAAJ,EAAgD;AAC5C,kBAAGE,mBAAmB,CAACkK,MAApB,GAA6B,GAAhC,EAAqC;AAAO;AACxC,oBAAGe,QAAQ,IAAIoB,SAAf,EAA0B;AACtB,sBAAGnJ,WAAW,IAAImJ,SAAlB,EAA6B;AACzB,wBAAGiD,4BAA4B,IAAIjD,SAAnC,EAA8C;AAC1C,0BAAGO,gBAAgB,IAAIP,SAAvB,EAAkC;AAC9B,4BAAG,CAACoE,KAAK,CAAC1F,aAAD,CAAT,EAA0B;AACtB,8BAAGP,YAAY,CAACN,MAAb,GAAsB,CAAzB,EAA4B;AACxB,gCAAG,KAAKvB,WAAL,CAAiB4B,kBAAjB,CAAH,EAA0C;AACtC,kCAAGiG,SAAS,CAACtG,MAAV,GAAmB,GAAtB,EAA2B;AACvB,oCAAGO,WAAW,CAACP,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sCAAG,CAACuG,KAAK,CAACF,UAAD,CAAT,EAAuB;AACnB,wCAAI,KAAKhP,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,2CAAKP,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAI,KAAKjH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAzD,EAA4D;AACxD,2CAAKN,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAI,KAAKlH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,2CAAKR,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAIqI,aAAa,GAAG;AAACzG,sCAAAA,MAAM,EAAEpK,cAAT;AAAyBmL,sCAAAA,IAAI,EAAE/L,4BAA/B;AAA6D4N,sCAAAA,KAAK,EAAEwD;AAApE,qCAApB;AACA,wCAAIG,aAAa,GAAG;AAAC5Q,sCAAAA,SAAS,EAAEA,SAAZ;AAAuBqK,sCAAAA,MAAM,EAAEpK,cAA/B;AAA+CqK,sCAAAA,WAAW,EAAEpK,mBAA5D;AAAiFiL,sCAAAA,QAAQ,EAAEA,QAA3F;AAAqG/H,sCAAAA,WAAW,EAAEA,WAAlH;AAA+H6H,sCAAAA,aAAa,EAAEA,aAA9I;AAA6J6B,sCAAAA,gBAAgB,EAAEA,gBAA/K;AAAiMtC,sCAAAA,OAAO,EAAEgF,4BAA1M;AAAwO9E,sCAAAA,YAAY,EAAEA,YAAtP;AAAoQD,sCAAAA,kBAAkB,EAAEA,kBAAxR;AAA4SE,sCAAAA,WAAW,EAAEA,WAAzT;AAAsUrK,sCAAAA,iBAAiB,EAAEoQ;AAAzV,qCAApB;;AACA,wCAAG,KAAKjP,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,2CAAKrE,cAAL,CAAoBgM,aAApB,EAAmC,CAACE,aAAD,CAAnC;AACH,qCAFD,MAEO;AACH,2CAAKpM,cAAL,CAAoBkM,aAApB,EAAmC,CAACE,aAAD,CAAnC;AACH;;AACDxP,oCAAAA,uBAAuB;AAC1B,mCAlBD,MAkBO;AACHyL,oCAAAA,KAAK,CAAC,oCAAD,CAAL;AACH;AACJ,iCAtBD,MAsBO;AACHA,kCAAAA,KAAK,CAAC,uCAAD,CAAL;AACH;AACJ,+BA1BD,MA0BO;AACHA,gCAAAA,KAAK,CAAC,2DAAD,CAAL;AACH;AACJ,6BA9BD,MA8BO;AACHA,8BAAAA,KAAK,CAAC,qDAAD,CAAL;AACH;AACJ,2BAlCD,MAkCO;AACHA,4BAAAA,KAAK,CAAC,wCAAD,CAAL;AACH;AACJ,yBAtCD,MAsCO;AACHA,0BAAAA,KAAK,CAAC,gDAAD,CAAL;AACH;AACJ,uBA1CD,MA0CO;AACHA,wBAAAA,KAAK,CAAC,oEAAD,CAAL;AACH;AACJ,qBA9CD,MA8CO;AACHA,sBAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,mBAlDD,MAkDO;AACHA,oBAAAA,KAAK,CAAC,sDAAD,CAAL;AACH;AACJ,iBAtDD,MAsDO;AACHA,kBAAAA,KAAK,CAAC,+DAAD,CAAL;AACH;AACJ,eA1DD,MA0DO;AACHA,gBAAAA,KAAK,CAAC,2EAAD,CAAL;AACH;AACJ,aA9DD,MA8DO;AACH,mBAAKtL,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,4DAAhC,EAA8F,IAA9F,EAAoG,KAApG,EAA2G,EAA3G;AACH;AACJ,WAlED,MAkEO;AACH,iBAAKpP,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,iFAAhC,EAAmH,IAAnH,EAAyH,KAAzH,EAAgI,EAAhI;AACH;AACJ,SAtED,MAsEO;AACH9D,UAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,OA1ED,MA0EO;AACHA,QAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;;;oDAEgC;AAC7B,UAAI/M,SAAS,GAAGkJ,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,EAAhB;AACA,UAAIlJ,cAAc,GAAGiJ,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,EAArB;AACA,UAAIjJ,mBAAmB,GAAGgJ,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,EAA1B;AACA,UAAIgC,QAAJ;AACA,UAAIjC,CAAC,CAAC,qBAAD,CAAD,CAAyBqG,EAAzB,CAA4B,UAA5B,CAAJ,EACIpE,QAAQ,GAAG,IAAX,CADJ,KAGIA,QAAQ,GAAG,KAAX;AACJ,UAAI/H,WAAJ;AACA,UAAI8F,CAAC,CAAC,cAAD,CAAD,CAAkBqG,EAAlB,CAAqB,UAArB,CAAJ,EACInM,WAAW,GAAG,IAAd,CADJ,KAGIA,WAAW,GAAG,KAAd;AACJ,UAAIoM,4BAAJ;AACA,UAAItG,CAAC,CAAC,oBAAD,CAAD,CAAwBqG,EAAxB,CAA2B,UAA3B,CAAJ,EACIC,4BAA4B,GAAG,IAA/B,CADJ,KAGIA,4BAA4B,GAAG,KAA/B;AACJ,UAAIvE,aAAa,GAAG,CAAC,CAArB;AACA;;;AAEA,UAAIwF,UAAU,GAAG,CAAjB;;AACA,UAAGrP,eAAH,EAAoB;AAChBqP,QAAAA,UAAU,GAAGhR,wBAAb;AACH,OAFD,MAEO;AACHgR,QAAAA,UAAU,GAAG/Q,uBAAb;AACH;;AACD,UAAIoN,gBAAJ;AACA,UAAI5D,CAAC,CAAC,mBAAD,CAAD,CAAuBqG,EAAvB,CAA0B,UAA1B,CAAJ,EACIzC,gBAAgB,GAAG,IAAnB,CADJ,KAGIA,gBAAgB,GAAG,KAAnB;AACJ,UAAIpC,YAAY,GAAGxB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,UAAIsB,kBAAJ;;AACA,UAAGC,YAAY,CAACzB,aAAb,CAA2B,IAA3B,KAAoC,CAAvC,EAA0C;AACtCwB,QAAAA,kBAAkB,GAAG,IAAIoF,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,EAAlB,CAArB;AACH,OAFD,MAEO;AACHpF,QAAAA,kBAAkB,GAAGvB,CAAC,CAAC,QAAD,CAAD,CAAY0B,UAAZ,CAAuB,SAAvB,CAArB;AACH;;AACD,UAAID,WAAW,GAAGzB,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;AACA,UAAIuH,SAAS,GAAGxH,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,EAAhB;;AACA,UAAGnJ,SAAS,CAACoK,MAAV,GAAmB,GAAnB,IAA0BpK,SAAS,CAACoK,MAAV,GAAmB,CAAhD,EAAmD;AAC/C,YAAGnK,cAAc,CAACmK,MAAf,GAAwB,GAAxB,IAA+BnK,cAAc,CAACmK,MAAf,GAAwB,CAA1D,EAA6D;AACzD,cAAG,CAAC,KAAKxB,qBAAL,CAA2B5I,SAA3B,CAAJ,EAA2C;AACvC,gBAAI,KAAKqI,0BAAL,CAAgCrI,SAAhC,CAAJ,EAAgD;AAC5C,kBAAGE,mBAAmB,CAACkK,MAApB,GAA6B,GAAhC,EAAqC;AAAO;AACxC,oBAAGe,QAAQ,IAAIoB,SAAf,EAA0B;AACtB,sBAAGnJ,WAAW,IAAImJ,SAAlB,EAA6B;AACzB,wBAAGiD,4BAA4B,IAAIjD,SAAnC,EAA8C;AAC1C,0BAAGO,gBAAgB,IAAIP,SAAvB,EAAkC;AAC9B,4BAAG,CAACoE,KAAK,CAAC1F,aAAD,CAAT,EAA0B;AACtB,8BAAGP,YAAY,CAACN,MAAb,GAAsB,CAAzB,EAA4B;AACxB,gCAAG,KAAKvB,WAAL,CAAiB4B,kBAAjB,CAAH,EAA0C;AACtC,kCAAGiG,SAAS,CAACtG,MAAV,GAAmB,GAAtB,EAA2B;AACvB,oCAAGO,WAAW,CAACP,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sCAAG,CAACuG,KAAK,CAACF,UAAD,CAAT,EAAuB;AACnB,wCAAI,KAAKhP,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,2CAAKP,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAI,KAAKjH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAzD,EAA4D;AACxD,2CAAKN,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAI,KAAKlH,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,OAAtC,KAAkD,CAAtD,EAAyD;AACrD,2CAAKR,gBAAL,CAAsB,KAAtB;AACH;;AACD,wCAAImI,aAAa,GAAG;AAAC5Q,sCAAAA,SAAS,EAAEA,SAAZ;AAAuBqK,sCAAAA,MAAM,EAAEpK,cAA/B;AAA+CqK,sCAAAA,WAAW,EAAEpK,mBAA5D;AAAiFiL,sCAAAA,QAAQ,EAAEA,QAA3F;AAAqG/H,sCAAAA,WAAW,EAAEA,WAAlH;AAA+H6H,sCAAAA,aAAa,EAAEA,aAA9I;AAA6J6B,sCAAAA,gBAAgB,EAAEA,gBAA/K;AAAiMtC,sCAAAA,OAAO,EAAEgF,4BAA1M;AAAwO9E,sCAAAA,YAAY,EAAEA,YAAtP;AAAoQD,sCAAAA,kBAAkB,EAAEA,kBAAxR;AAA4SE,sCAAAA,WAAW,EAAEA,WAAzT;AAAsUrK,sCAAAA,iBAAiB,EAAEoQ;AAAzV,qCAApB;;AACA,wCAAG,KAAKjP,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,2CAAKrE,cAAL,CAAoBgM,aAApB,EAAmCpQ,cAAnC;AACH,qCAFD,MAEO;AACH,2CAAKkE,cAAL,CAAoBkM,aAApB,EAAmCpQ,cAAnC;AACH;;AACDc,oCAAAA,uBAAuB;AAC1B,mCAjBD,MAiBO;AACHyL,oCAAAA,KAAK,CAAC,oCAAD,CAAL;AACH;AACJ,iCArBD,MAqBO;AACHA,kCAAAA,KAAK,CAAC,uCAAD,CAAL;AACH;AACJ,+BAzBD,MAyBO;AACHA,gCAAAA,KAAK,CAAC,2DAAD,CAAL;AACH;AACJ,6BA7BD,MA6BO;AACHA,8BAAAA,KAAK,CAAC,qDAAD,CAAL;AACH;AACJ,2BAjCD,MAiCO;AACHA,4BAAAA,KAAK,CAAC,wCAAD,CAAL;AACH;AACJ,yBArCD,MAqCO;AACHA,0BAAAA,KAAK,CAAC,gDAAD,CAAL;AACH;AACJ,uBAzCD,MAyCO;AACHA,wBAAAA,KAAK,CAAC,oEAAD,CAAL;AACH;AACJ,qBA7CD,MA6CO;AACHA,sBAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,mBAjDD,MAiDO;AACHA,oBAAAA,KAAK,CAAC,sDAAD,CAAL;AACH;AACJ,iBArDD,MAqDO;AACHA,kBAAAA,KAAK,CAAC,+DAAD,CAAL;AACH;AACJ,eAzDD,MAyDO;AACHA,gBAAAA,KAAK,CAAC,2EAAD,CAAL;AACH;AACJ,aA7DD,MA6DO;AACH,mBAAKtL,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,4DAAhC,EAA8F,IAA9F,EAAoG,KAApG,EAA2G,EAA3G;AACH;AACJ,WAjED,MAiEO;AACH,iBAAKpP,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,iFAAhC,EAAmH,IAAnH,EAAyH,KAAzH,EAAgI,EAAhI;AACH;AACJ,SArED,MAqEO;AACH9D,UAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ,OAzED,MAyEO;AACHA,QAAAA,KAAK,CAAC,8CAAD,CAAL;AACH;AACJ;;;4CAEwB;AAAe;AACpC,UAAIgE,cAAc,GAAG7H,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,EAArB;;AACA,UAAG4H,cAAc,CAAC3G,MAAf,GAAwB,CAA3B,EAA8B;AAC1B,YAAG,CAAC,KAAKxB,qBAAL,CAA2BmI,cAA3B,CAAJ,EAAgD;AAC5C,cAAG,KAAKzI,4BAAL,CAAkCyI,cAAlC,CAAH,EAAsD;AAClD,gBAAG1R,4BAA4B,IAAIkN,SAAhC,IAA6ClN,4BAA4B,CAAC+K,MAA7B,GAAsC,CAAtF,EAAyF;AACrF;AACA,kBAAI4G,OAAJ,EAAa/D,KAAb;;AACA,kBAAG7L,eAAH,EAAoB;AAChB4P,gBAAAA,OAAO,GAAGxQ,cAAV;AACAyM,gBAAAA,KAAK,GAAGxN,wBAAR;AACH,eAHD,MAGO;AACHuR,gBAAAA,OAAO,GAAGnQ,cAAV;AACAoM,gBAAAA,KAAK,GAAGvN,uBAAR;AACH;;AACD,kBAAIoR,aAAa,GAAG;AAACzG,gBAAAA,MAAM,EAAE0G,cAAT;AAAyB3F,gBAAAA,IAAI,EAAE/L,4BAA/B;AAA6D4N,gBAAAA,KAAK,EAAEA;AAApE,eAApB,CAVqF,CAWrF;;AACA;;;;;;;;AAOA+D,cAAAA,OAAO,CAAC1D,IAAR,CAAawD,aAAb;AACA,mBAAK9F,QAAL,CAAc;AACV/I,gBAAAA,SAAS,EAAE+O,OADD;AAEV1O,gBAAAA,iBAAiB,EAAE;AAFT,eAAd;AAIA7C,cAAAA,wBAAwB,GAAG,CAA3B;;AACA,kBAAG2B,eAAH,EAAoB;AAChBZ,gBAAAA,cAAc,GAAGwQ,OAAjB;AACH,eAFD,MAEO;AACHnQ,gBAAAA,cAAc,GAAGmQ,OAAjB;AACH;;AACDzQ,cAAAA,8BAA8B,GAAG,EAAjC;AACA2I,cAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,CAAmC,EAAnC;AACA4D,cAAAA,KAAK,CAAC,eAAD,CAAL;AACH,aAjCD,MAiCO;AACHA,cAAAA,KAAK,CAAC,mCAAD,CAAL;AACH;AACJ,WArCD,MAqCO;AACHA,YAAAA,KAAK,CAAC,qCAAD,CAAL;AACH;AACJ,SAzCD,MAyCO;AACHA,UAAAA,KAAK,CAAC,4DAAD,CAAL;AACH;AACJ,OA7CD,MA6CO;AACHA,QAAAA,KAAK,CAAC,+CAAD,CAAL;AACH;AACJ;;;6CAEwBkE,K,EAAO;AAC5B,UAAInC,iBAAJ,EAAuBoC,oBAAvB,EAA6ChP,MAA7C,EAAqDgL,aAArD,EAAoEjL,SAApE;;AACA,UAAGb,eAAH,EAAoB;AAChB0N,QAAAA,iBAAiB,GAAGlO,gCAApB;AACAsQ,QAAAA,oBAAoB,GAAGvQ,uBAAvB;AACAuB,QAAAA,MAAM,GAAGzB,qBAAT;AACAyM,QAAAA,aAAa,GAAGxM,6BAAhB;AACAuB,QAAAA,SAAS,GAAGzB,cAAZ;AACH,OAND,MAMO;AACHsO,QAAAA,iBAAiB,GAAG7N,4BAApB;AACAiQ,QAAAA,oBAAoB,GAAGlQ,kBAAvB;AACAkB,QAAAA,MAAM,GAAGpB,gBAAT;AACAoM,QAAAA,aAAa,GAAGnM,wBAAhB;AACAkB,QAAAA,SAAS,GAAGpB,cAAZ;AACH;;AACDiO,MAAAA,iBAAiB,CAACX,MAAlB,CAAyB8C,KAAzB,EAAgC,CAAhC;AACAC,MAAAA,oBAAoB,CAAC/C,MAArB,CAA4B8C,KAA5B,EAAmC,CAAnC;AACA/O,MAAAA,MAAM,CAACiM,MAAP,CAAc8C,KAAd,EAAqB,CAArB;AACA/D,MAAAA,aAAa,CAACiB,MAAd,CAAqB8C,KAArB,EAA4B,CAA5B;AACAhP,MAAAA,SAAS,CAACkM,MAAV,CAAiB8C,KAAjB,EAAwB,CAAxB;AACA,WAAKjG,QAAL,CAAc;AACV/I,QAAAA,SAAS,EAAEA;AADD,OAAd;AAGH;;;4CAEuBgP,K,EAAO;AAC3B,UAAIE,aAAa,sBAAO,KAAKpP,KAAL,CAAWE,SAAlB,CAAjB;;AACAkP,MAAAA,aAAa,CAACF,KAAD,CAAb,CAAqB5G,MAArB,GAA8BnB,CAAC,CAAC,oBAAkB+H,KAAnB,CAAD,CAA2B9H,GAA3B,EAA9B;;AACA,UAAG,CAAC,KAAKP,qBAAL,CAA2BuI,aAAa,CAACF,KAAD,CAAb,CAAqB5G,MAAhD,CAAJ,EAA6D;AACzD,aAAKW,QAAL,CAAc;AACV/I,UAAAA,SAAS,EAAEkP;AADD,SAAd;AAGH,OAJD,MAIO;AACHpE,QAAAA,KAAK,CAAC,4DAAD,CAAL;AACH;AACJ;;;uCAEmB;AAChB,UAAIqE,WAAW,GAAGlI,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAlB;AACA,UAAIiC,IAAI,GAAGlC,CAAC,CAAC,OAAD,CAAD,CAAWC,GAAX,EAAX;;AACA,UAAGiI,WAAW,CAAChH,MAAZ,GAAqB,GAAxB,EAA6B;AACzB,YAAG,CAAC,KAAKxB,qBAAL,CAA2BwI,WAA3B,CAAJ,EAA6C;AACzC,cAAG,KAAK9I,4BAAL,CAAkC8I,WAAlC,CAAH,EAAmD;AAC/C,gBAAGhG,IAAI,CAAChB,MAAL,GAAc,GAAjB,EAAsB;AAClB,kBAAIiH,QAAQ,GAAG;AAAChH,gBAAAA,MAAM,EAAE+G,WAAT;AAAsBhG,gBAAAA,IAAI,EAAEA;AAA5B,eAAf;AACAlK,cAAAA,YAAY,CAACoM,IAAb,CAAkB+D,QAAlB;AACA,mBAAKrG,QAAL,CAAc;AACVzI,gBAAAA,oBAAoB,EAAErB;AADZ,eAAd;AAGH,aAND,MAMO;AACH6L,cAAAA,KAAK,CAAC,kEAAD,CAAL;AACH;AACJ,WAVD,MAUO;AACHA,YAAAA,KAAK,CAAC,qCAAD,CAAL;AACH;AACJ,SAdD,MAcO;AACHA,UAAAA,KAAK,CAAC,yDAAD,CAAL;AACH;AACJ,OAlBD,MAkBO;AACHA,QAAAA,KAAK,CAAC,qEAAD,CAAL;AACH;AACJ;;;0CAEsB;AACnB,UAAIuE,eAAe,GAAGpI,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAtB;;AACA,UAAGmI,eAAe,CAAClH,MAAhB,GAAyB,GAA5B,EAAiC;AAC7BjJ,QAAAA,cAAc,GAAGmQ,eAAjB;AACA,aAAKtG,QAAL,CAAc;AACVxI,UAAAA,UAAU,EAAErB;AADF,SAAd;AAGA4L,QAAAA,KAAK,CAAC,sBAAD,CAAL;AACH,OAND,MAMO;AACHA,QAAAA,KAAK,CAAC,qEAAD,CAAL;AACH;AACJ;;;gCAEYwE,S,EAAWC,mB,EAAqBC,2B,EAA6B;AACtE;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,UAAIvP,MAAJ,EAAYgL,aAAZ;;AACA,UAAI9L,eAAJ,EAAqB;AACjBc,QAAAA,MAAM,GAAGzB,qBAAT;AACAyM,QAAAA,aAAa,GAAGxM,6BAAhB;AACH,OAHD,MAGO;AACHwB,QAAAA,MAAM,GAAGpB,gBAAT;AACAoM,QAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,UAAIwK,gBAAgB,GAAGzL,4BAAvB,CAjBsE,CAkBtE;AACA;AACA;;AACA,UAAGyL,gBAAgB,IAAI,CAAC,CAAxB,EAA2B;AACvBA,QAAAA,gBAAgB,GAAG,KAAKxJ,KAAL,CAAWE,SAAX,CAAqBmI,MAAxC;AACH,OAvBqE,CAwBtE;AACA;;;AACA,UAAIsH,sBAAsB,GAAG,IAA7B;;AACA,UAAG7R,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACsI,SAApE,IAAiFrI,CAAC,CAAC,YAAD,CAAD,CAAgBqG,EAAhB,CAAmB,UAAnB,CAApF,EAAoH;AAChH,YAAIoC,YAAY,GAAGzP,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DC,wBAA3D,EAAqFqN,KAAxG;;AACA,YAAGrN,wBAAwB,GAAC,CAAzB,GAA6BsC,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DyK,MAA3F,EAAmG;AAC/F,eAAK,IAAIiB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DyK,MAAxG,EAAgHiB,CAAC,EAAjH,EAAqH;AACjH,gBAAIsG,YAAY,IAAIzP,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2D0L,CAA3D,EAA8D4B,KAA9E,IAAuF/K,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2D0L,CAA3D,EAA8DoB,SAA9D,CAAwExD,aAAxE,CAAsF,MAAtF,KAAiG,CAA5L,EAA+L;AAC3LyI,cAAAA,sBAAsB,GAAG,KAAzB;AACH;AACJ;;AAAA;AACJ;AACJ;;AACD,UAAIE,aAAa,GAAG,IAApB;;AACA,UAAG,CAACL,SAAJ,EAAe;AACX,YAAGvS,iBAAiB,IAAIuN,SAArB,IAAkCvN,iBAAiB,CAAC4P,KAAlB,IAA2BrC,SAAhE,EAA2E;AACvEqF,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAG3S,iBAAiB,CAACmL,MAAlB,IAA4B,CAA/B,EAAkC;AAC9BwH,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAGzS,qBAAqB,CAACsN,SAAtB,IAAmCF,SAAtC,EAAiD;AAC7CqF,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAG5S,iBAAiB,CAACoM,IAAlB,IAA0BmB,SAA7B,EAAwC;AACpC,cAAGvN,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAA/C,IAAoDjK,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAA1G,EAA6G;AACzG,gBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,QAA1B,KAAuC,CAAC,CAAxC,IAA6C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzF,EAA4F;AACxFD,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJD,MAIO,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,gBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAtC,IAA2C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAvF,EAA0F;AACtFD,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJM,MAIA,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,gBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,OAA1B,KAAsC,CAAC,CAAvC,IAA4C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAlF,IAAuF5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAnI,EAAsI;AAClID,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJM,MAIA,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D,gBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzC,IAA8C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAA1F,EAA6F;AACzFD,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ;AACJ;AACJ,OA7BD,MA6BO;AACH,YAAGJ,mBAAmB,CAACxF,OAApB,IAA+BO,SAAlC,EAA6C;AACzCqF,UAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,OAvEqE,CAwEtE;;;AACA,UAAGF,sBAAsB,IAAIE,aAA7B,EAA4C;AACxC,YAAGhS,wBAAwB,IAAI,CAAC,CAA7B,IAAoCA,wBAAwB,IAAI,CAAC,CAA7B,KAAmCsC,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAuBlI,MAAM,CAACqJ,gBAAD,CAAN,IAA4BgB,SAA5B,IAAyCrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBnB,MAAzB,IAAmC,CAAtI,CAAvC,EAAqL;AACjL,cAAI0H,iBAAiB,GAAG,KAAxB;;AACA,cAAGlS,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACuK,MAA9B,GAAuC,CAAzE,IAA8EvK,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAtI,IAA2IiE,aAAa,CAAC3B,gBAAD,CAAb,IAAmCgB,SAAjL,EAA4L;AACxL;AACA,gBAAG,CAACgF,SAAJ,EAAe;AACX,kBAAGvS,iBAAiB,CAAC+S,OAAlB,IAA6BxF,SAAhC,EAA2C;AACvC,oBAAIW,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEgO,eAAlE,IAAqF3O,iBAAiB,CAAC+S,OAA3G,EAAoH;AAChHD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAJD,MAIO,IAAG9S,iBAAiB,CAAC4O,UAAlB,IAAgCrB,SAAnC,EAA8C;AACjD,oBAAIW,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEiO,UAAlE,IAAgF5O,iBAAiB,CAAC4O,UAAtG,EAAkH;AAC9GkE,kBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,oBAAIE,WAAW,GAAG,KAAKjQ,KAAL,CAAWU,SAAX,CAAqBwP,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,yBAAOA,MAAM,CAAC1G,EAAP,IAAaxM,iBAAiB,CAAC4O,UAAtC;AACH,iBAFiB,CAAlB;;AAGA,oBAAGoE,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAe7G,QAAnB,EACI2G,iBAAiB,GAAG,IAApB;AACP;AACJ,eAXM,MAWA,IAAG9S,iBAAiB,CAAC6O,cAAlB,IAAoCtB,SAAvC,EAAkD;AACrDuF,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAG9S,iBAAiB,CAAC+O,eAAlB,IAAqCxB,SAAxC,EAAmD;AACtDuF,gBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,aArBD,MAqBO;AACH,kBAAGN,mBAAmB,CAACO,OAApB,IAA+BxF,SAA/B,IAA4C,CAACiF,mBAAmB,CAACvD,aAApE,EAAmF;AAC/E,oBAAIf,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEgO,eAAlE,IAAqF6D,mBAAmB,CAACO,OAA7G,EAAsH;AAClHD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAJD,MAIO,IAAGN,mBAAmB,CAAC5D,UAApB,IAAkCrB,SAAlC,IAA+C,CAACiF,mBAAmB,CAACvD,aAAvE,EAAsF;AACzF,oBAAIf,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEiO,UAAlE,IAAgF4D,mBAAmB,CAAC5D,UAAxG,EAAoH;AAChHkE,kBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,oBAAIE,WAAW,GAAG,KAAKjQ,KAAL,CAAWU,SAAX,CAAqBwP,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,yBAAOA,MAAM,CAAC1G,EAAP,IAAagG,mBAAmB,CAAC5D,UAAxC;AACH,iBAFiB,CAAlB;;AAGA,oBAAGoE,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAe7G,QAAnB,EACI2G,iBAAiB,GAAG,IAApB;AACP;AACJ,eAXM,MAWA,IAAGN,mBAAmB,CAAC3D,cAApB,IAAsCtB,SAAtC,IAAmD,CAACiF,mBAAmB,CAACvD,aAA3E,EAA0F;AAC7F6D,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAGN,mBAAmB,CAACzD,eAApB,IAAuCxB,SAAvC,IAAoD,CAACiF,mBAAmB,CAACvD,aAA5E,EAA2F;AAC9F6D,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAGN,mBAAmB,CAACvD,aAAvB,EAAsC;AACzC6D,gBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,WA/CD,MA+CO,IAAMlS,wBAAwB,IAAI,CAAC,CAA7B,KAAmCsC,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAuBlI,MAAM,CAACqJ,gBAAD,CAAN,IAA4BgB,SAA5B,IAAyCrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBnB,MAAzB,IAAmC,CAAtI,CAAF,IAAiJvK,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAzM,IAA+MiE,aAAa,CAAC3B,gBAAD,CAAb,IAAmCgB,SAAtP,EAAiQ;AACpQuF,YAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,cAAGA,iBAAH,EAAsB;AAClB,gBAAG,CAACP,SAAJ,EAAe;AACX,kBAAI3C,KAAK,GAAG1F,CAAC,CAAC,QAAD,CAAD,CAAYC,GAAZ,EAAZ;AACA,kBAAImD,WAAW,GAAGxM,4BAAlB,CAFW,CAGX;AACA;AACA;;AACA,kBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,gBAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,kBAAGlI,MAAM,CAACoK,WAAD,CAAN,IAAuBC,SAA1B,EAAqC;AACjC;AACH;;AACD,kBAAGW,aAAa,CAAC9C,MAAd,IAAwBmC,SAA3B,EACIW,aAAa,GAAG,EAAhB;AACJ,kBAAGA,aAAa,CAACZ,WAAD,CAAb,IAA8BC,SAAjC,EACIW,aAAa,CAACZ,WAAD,CAAb,GAA6B,EAA7B;AACJ,kBAAIqB,eAAe,GAAG,CAAC,CAAvB;AAAA,kBAA0BC,UAAU,GAAG,CAAC,CAAxC;AAAA,kBAA2CI,eAAe,GAAG,KAA7D;AAAA,kBAAoEE,QAAQ,GAAG,CAA/E;AAAA,kBAAkFO,oBAAoB,GAAG,EAAzG;AACA,kBAAIZ,cAAc,GAAG,CAAC,CAAtB;AAAA,kBAAyBC,eAAe,GAAG,CAAC,CAA5C;AAAA,kBAA+CC,eAAe,GAAG,CAAC,CAAlE;;AACA,kBAAG/O,iBAAiB,CAAC+S,OAAlB,IAA6B,CAAC,CAAjC,EAAoC;AAChCpE,gBAAAA,eAAe,GAAG3O,iBAAiB,CAAC+S,OAApC;AACA/D,gBAAAA,eAAe,GAAG,IAAlB;AACAS,gBAAAA,oBAAoB,GAAGzP,iBAAiB,CAAC4P,KAAzC;AACH,eAJD,MAIO,IAAG5P,iBAAiB,CAAC4O,UAAlB,IAAgC,CAAC,CAApC,EAAuC;AAC1CA,gBAAAA,UAAU,GAAG5O,iBAAiB,CAAC4O,UAA/B;AACH,eAFM,MAEA,IAAG5O,iBAAiB,CAAC6O,cAAlB,IAAoC,CAAC,CAAxC,EAA2C;AAC9CA,gBAAAA,cAAc,GAAG7O,iBAAiB,CAAC6O,cAAnC;AACAC,gBAAAA,eAAe,GAAG9O,iBAAiB,CAAC8O,eAApC;AACH,eAHM,MAGA,IAAG9O,iBAAiB,CAAC+O,eAAlB,IAAqC,CAAC,CAAzC,EAA4C;AAC/CA,gBAAAA,eAAe,GAAG/O,iBAAiB,CAAC+O,eAApC;AACH;;AACD,kBAAIoE,6BAA6B,GAAG,CAApC;AAAA,kBAAuCC,6BAA6B,GAAG,CAAvE;;AACA,kBAAGvS,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAxD,IAA8DrJ,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACuK,MAA9B,IAAwC,CAAxI,IAA8I8C,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,IAAqC,CAAtL,EAAyL;AACrL,oBAAIiI,kBAAkB,GAAG,CAAzB;;AACA,oBAAGnF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,GAAoC,CAAvC,EAA0C;AACtCiI,kBAAAA,kBAAkB,GAAGnF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAAhD;AACH;;AACD8C,gBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2BgB,IAA3B,CAAgC;AAC5BK,kBAAAA,eAAe,EAAEA,eADW;AAE5BC,kBAAAA,UAAU,EAAEA,UAFgB;AAG5BI,kBAAAA,eAAe,EAAEA,eAHW;AAI5BE,kBAAAA,QAAQ,EAAEA,QAJkB;AAK5BmE,kBAAAA,kBAAkB,EAAEA,kBALQ;AAM5BxE,kBAAAA,cAAc,EAAEA,cANY;AAO5BC,kBAAAA,eAAe,EAAEA,eAPW;AAQ5BC,kBAAAA,eAAe,EAAEA;AARW,iBAAhC;AAUAoE,gBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,gBAAAA,6BAA6B,GAAGlF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,GAAkC,CAAlE;AACH,eAjBD,MAiBO;AACH8C,gBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DuO,QAA7D;;AACA,oBAAGhB,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DkO,cAA7D,IAA+E,CAAC,CAAhF,IAAqFA,cAAc,IAAI,CAAC,CAA3G,EAA8G;AAC1GX,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DkO,cAA7D,GAA8EA,cAA9E;AACAX,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DmO,eAA7D,GAA+EA,eAA/E;AACH;;AACD,oBAAGZ,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DoO,eAA7D,IAAgF,CAAC,CAAjF,IAAsFA,eAAe,IAAI,CAAC,CAA7G,EAAgH;AAC5Gb,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DoO,eAA7D,GAA+EA,eAA/E;AACH;;AACD,oBAAGb,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DiO,UAA7D,IAA2E,CAAC,CAA5E,IAAiFA,UAAU,IAAI,CAAC,CAAnG,EAAsG;AAClGV,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DiO,UAA7D,GAA0EA,UAA1E;AACH;;AACDuE,gBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,gBAAAA,6BAA6B,GAAGzS,gCAAhC;AACH;;AACD,kBAAGuC,MAAM,CAACiQ,6BAAD,CAAN,IAAyC5F,SAA5C,EAAuD;AACnDrK,gBAAAA,MAAM,CAACiQ,6BAAD,CAAN,GAAwC,EAAxC;AACH;;AACD,kBAAGjQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE7F,SAA3E,EAAsF;AAClFrK,gBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,IAAuE,EAAvE;AACH;;AACD,kBAAIhQ,WAAW,GAAG,CAACmP,SAAnB;AACA,kBAAIc,kBAAkB,GAAG,CAAzB;;AACA,kBAAG1S,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAoJ,gBAAAA,kBAAkB,GAAG1S,gCAArB;AACH,eAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAoJ,gBAAAA,kBAAkB,GAAG1S,gCAAgC,GAAC,CAAtD;AACH;;AACD,kBAAI8Q,UAAU,GAAG,CAAjB;AACA,kBAAI6B,UAAU,GAAG;AACGjE,gBAAAA,eAAe,EAAEgE,kBADpB;AAEG1E,gBAAAA,eAAe,EAAEA,eAFpB;AAGGc,gBAAAA,oBAAoB,EAAEA,oBAHzB;AAIGH,gBAAAA,SAAS,EAAE,CAAC,CAJf;AAKGV,gBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2E,gBAAAA,eAAe,EAAE,CAAC,CANrB;AAOGxG,gBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG2C,gBAAAA,iBAAiB,EAAE1P,iBAAiB,CAACoM,IARxC;AASGhJ,gBAAAA,WAAW,EAAEA,WAThB;AAUG4L,gBAAAA,eAAe,EAAEA,eAVpB;AAWGvB,gBAAAA,SAAS,EAAEtN,qBAAqB,CAACsN,SAXpC;AAYGkC,gBAAAA,cAAc,EAAExP,qBAAqB,CAACwP,cAZzC;AAaGC,gBAAAA,KAAK,EAAE3P,iBAbV;AAcG4P,gBAAAA,KAAK,EAAE7P,iBAAiB,CAAC4P,KAAlB,GAAwB,GAAxB,GAA4BzP,qBAAqB,CAACwP,cAAlD,GAAiE,GAAjE,GAAqEzP,sBAd/E;AAeG+N,gBAAAA,KAAK,EAAEwD,UAfV;AAgBG/C,gBAAAA,uBAAuB,EAAE2E;AAhB5B,eAAjB;;AAkBA,kBAAGnQ,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAsBlI,MAAM,CAACiQ,6BAAD,CAAN,CAAsC/H,MAAtC,IAAgD,CAAtE,IAA2ElI,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAArE,IAA+E,CAA7J,EAAgK;AAC5J;AACAlI,gBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH,eAHD,MAGO;AACH;AAEA,oBAAGzS,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEC,CAAC,CAAC,UAAD,CAAD,CAAcqG,EAAd,CAAiB,UAAjB,CAAtE,EAAqG;AACjG;AACA;AACA+C,kBAAAA,UAAU,CAACvG,YAAX,GAA0BnM,wBAA1B;AACA0S,kBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAA/F,GAAqG,CAAxH;AACA/K,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAAwB,GAAC,CAArG,EAAwG,CAAxG,EAA2G0S,UAA3G;;AACA,sBAAGpQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,yBAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,0BAAGiH,UAAU,CAACrF,KAAX,IAAoB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA/F,EAAsG;AAClG/K,wBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAnJ,wBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,iBAdD,MAcO,IAAGpN,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEC,CAAC,CAAC,YAAD,CAAD,CAAgBqG,EAAhB,CAAmB,UAAnB,CAAtE,EAAuG;AAC1G,sBAAIiD,iBAAiB,GAAG,CAAC,CAAzB;AACAF,kBAAAA,UAAU,CAACvG,YAAX,GAA0B7J,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FmM,YAAzH;AACAuG,kBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAAlH;;AACA,sBAAG/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,yBAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,0BAAGiH,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA9F,EAAoG;AAChGuF,wBAAAA,iBAAiB,GAAGnH,CAApB;AACH;AACJ;;AAAA;AACJ;;AACD,sBAAGmH,iBAAiB,IAAI,CAAC,CAAzB,EAA4B;AACxBtQ,oBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EqE,iBAA5E,EAA+F,CAA/F,EAAkGF,UAAlG;AACH,mBAFD,MAEO;AACH;AACApQ,oBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH;AACJ,iBAjBM,MAiBA,IAAGzS,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAA3D,EAA8D;AACjEqJ,kBAAAA,UAAU,CAACvG,YAAX,GAA0B,CAAC,CAA3B;AACAuG,kBAAAA,UAAU,CAACrF,KAAX,GAAmB,CAAC,CAApB;AACA/K,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH,iBAJM,MAIA,IAAGzS,6BAA6B,CAACoJ,aAA9B,CAA4C,QAA5C,KAAyD,CAA5D,EAA+D;AAClEqJ,kBAAAA,UAAU,CAACvG,YAAX,GAA0B7J,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FmM,YAAzH;AACAuG,kBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAAlH;AACA/K,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAA5E,EAAsG,CAAtG,EAAyG0S,UAAzG;;AACA,sBAAGpQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,yBAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,0BAAGiH,UAAU,CAACrF,KAAX,IAAoB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA/F,EAAsG;AAClG/K,wBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAnJ,wBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,iBAlDE,CAmDH;;AACH,eAxJU,CAyJX;;;AACArN,cAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,kBAAIwB,eAAJ,EAAqB;AACjBX,gBAAAA,qBAAqB,GAAGyB,MAAxB;AACAxB,gBAAAA,6BAA6B,GAAGwM,aAAhC;AACH,eAHD,MAGO;AACHpM,gBAAAA,gBAAgB,GAAGoB,MAAnB;AACAnB,gBAAAA,wBAAwB,GAAGmM,aAA3B;AACH;;AACD,mBAAKlC,QAAL,CAAc;AACV9I,gBAAAA,MAAM,EAAEA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,eAAd;AAGApT,cAAAA,iBAAiB,GAAG,IAApB;AACAC,cAAAA,iBAAiB,GAAG,EAApB;AACH,aAvKD,MAuKO;AACH;AACA,kBAAIqN,WAAW,GAAGxM,4BAAlB,CAFG,CAGH;AACA;AACA;;AACA,kBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,gBAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,kBAAI0E,iBAAJ;;AACA,kBAAG1N,eAAH,EAAoB;AAChB0N,gBAAAA,iBAAiB,GAAGlO,gCAApB;AACH,eAFD,MAEO;AACHkO,gBAAAA,iBAAiB,GAAG7N,4BAApB;AACH;;AACD,kBAAIwR,aAAa,GAAGpT,4BAApB;;AACA,mBAAK,IAAIgM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D4K,MAAlF,EAA0FiB,CAAC,EAA3F,EAA+F;AAC3F,oBAAGyD,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,MAAzF,KAAoG,CAAvG,EACIwJ,aAAa,GAAG3D,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEgE,kBAAjF,CADJ,KAEK,IAAGP,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAAnG,IAAwG6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAA9M,EACDwJ,aAAa,GAAG3D,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEgE,kBAAjF,CADC,KAEA,IAAGP,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,SAAzF,KAAuG,CAAvG,IAA4G6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAA/M,IAAoN6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,OAAzF,KAAqG,CAA5T,EACDwJ,aAAa,GAAG,KAAhB,CADC,KAGDA,aAAa,GAAG,SAAhB;AACJ;AACH;;AAAA,eA1BE,CA2BH;AACA;AACA;;AACA,kBAAK3S,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAKiC,KAAL,CAAWO,iBAAX,CAA6B2G,aAA7B,CAA2CwJ,aAA3C,KAA6D,CAA7D,IAAkE,KAAK1Q,KAAL,CAAWO,iBAAX,CAA6B8H,MAA7B,IAAuC,CAAhJ,CAAD,IAAyJtK,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAKiC,KAAL,CAAWE,SAAX,CAAqBqK,WAArB,EAAkClB,IAAlC,CAAuCnC,aAAvC,CAAqDwJ,aAArD,KAAuE,CAAvE,IAA4E,KAAK1Q,KAAL,CAAWE,SAAX,CAAqBqK,WAArB,EAAkClB,IAAlC,CAAuChB,MAAvC,IAAiD,CAApK,CAA7J,EAAuU;AACnU,oBAAIqG,UAAU,GAAG,CAAjB;AACA,oBAAIvD,aAAJ;;AACA,oBAAG9L,eAAH,EAAoB;AAChBqP,kBAAAA,UAAU,GAAGhR,wBAAb;AACAyN,kBAAAA,aAAa,GAAGxM,6BAAhB;AACH,iBAHD,MAGO;AACH+P,kBAAAA,UAAU,GAAG/Q,uBAAb;AACAwN,kBAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,oBAAGmM,aAAa,CAAC9C,MAAd,IAAwBmC,SAA3B,EACIW,aAAa,GAAG,EAAhB;AACJ,oBAAGA,aAAa,CAACZ,WAAD,CAAb,IAA8BC,SAAjC,EACIW,aAAa,CAACZ,WAAD,CAAb,GAA6B,EAA7B;AACJ,oBAAIqB,eAAe,GAAG,CAAC,CAAvB;AAAA,oBAA0BC,UAAU,GAAG,CAAC,CAAxC;AAAA,oBAA2CI,eAAe,GAAG,KAA7D;AAAA,oBAAoEE,QAAQ,GAAG,CAA/E;AACA,oBAAIiE,6BAA6B,GAAG,CAApC;AAAA,oBAAuCC,6BAA6B,GAAG,CAAvE;AACA,oBAAI1E,uBAAuB,GAAG,CAAC,CAA/B,CAhBmU,CAgBjS;;AAClC,oBAAIG,cAAc,GAAG,CAAC,CAAtB;AAAA,oBAAyBC,eAAe,GAAG,CAAC,CAA5C;AAAA,oBAA+CC,eAAe,GAAG,CAAC,CAAlE;AACA,oBAAIE,aAAa,GAAG,KAApB;;AACA,oBAAGuD,mBAAmB,CAACO,OAApB,IAA+B,CAAC,CAAnC,EAAsC;AAClCpE,kBAAAA,eAAe,GAAG6D,mBAAmB,CAACO,OAAtC;AACA/D,kBAAAA,eAAe,GAAG,IAAlB;AACH,iBAHD,MAGO,IAAGwD,mBAAmB,CAAC5D,UAApB,IAAkC,CAAC,CAAtC,EAAyC;AAC5CA,kBAAAA,UAAU,GAAG4D,mBAAmB,CAAC5D,UAAjC;AACH,iBAFM,MAEA,IAAG4D,mBAAmB,CAAC3D,cAApB,IAAsC,CAAC,CAA1C,EAA6C;AAChDA,kBAAAA,cAAc,GAAG2D,mBAAmB,CAAC3D,cAArC;AACAC,kBAAAA,eAAe,GAAG0D,mBAAmB,CAAC1D,eAAtC;AACH,iBAHM,MAGA,IAAG0D,mBAAmB,CAACzD,eAApB,IAAuC,CAAC,CAA3C,EAA8C;AACjDA,kBAAAA,eAAe,GAAGyD,mBAAmB,CAACzD,eAAtC;AACH,iBAFM,MAEA,IAAGyD,mBAAmB,CAACvD,aAApB,IAAqC1B,SAAxC,EAAmD;AACtD0B,kBAAAA,aAAa,GAAGuD,mBAAmB,CAACvD,aAApC;AACH;;AACD,oBAAGpO,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAxD,IAA8DrJ,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACuK,MAA9B,IAAwC,CAAxI,IAA8I8C,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,IAAqC,CAAtL,EAAyL;AACrL,sBAAIiI,kBAAkB,GAAG,CAAzB;;AACA,sBAAGnF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,GAAoC,CAAvC,EAA0C;AACtCiI,oBAAAA,kBAAkB,GAAGnF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAAhD;AACH;;AACD8C,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2BgB,IAA3B,CAAgC;AAC5BK,oBAAAA,eAAe,EAAEA,eADW;AAE5BC,oBAAAA,UAAU,EAAEA,UAFgB;AAG5BI,oBAAAA,eAAe,EAAEA,eAHW;AAI5BE,oBAAAA,QAAQ,EAAEA,QAJkB;AAK5BmE,oBAAAA,kBAAkB,EAAEA,kBALQ;AAM5BxE,oBAAAA,cAAc,EAAEA,cANY;AAO5BC,oBAAAA,eAAe,EAAEA,eAPW;AAQ5BC,oBAAAA,eAAe,EAAEA,eARW;AAS5BE,oBAAAA,aAAa,EAAEA;AATa,mBAAhC;AAWAkE,kBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,kBAAAA,6BAA6B,GAAGlF,aAAa,CAACZ,WAAD,CAAb,CAA2BlC,MAA3B,GAAkC,CAAlE;AACH,iBAlBD,MAkBO;AACH8C,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DuO,QAA7D;;AACA,sBAAGhB,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DkO,cAA7D,IAA+E,CAAC,CAAhF,IAAqFA,cAAc,IAAI,CAAC,CAA3G,EAA8G;AAC1GX,oBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DkO,cAA7D,GAA8EA,cAA9E;AACAX,oBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DmO,eAA7D,GAA+EA,eAA/E;AACH;;AACD,sBAAGZ,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DoO,eAA7D,IAAgF,CAAC,CAAjF,IAAsFA,eAAe,IAAI,CAAC,CAA7G,EAAgH;AAC5Gb,oBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DoO,eAA7D,GAA+EA,eAA/E;AACH;;AACD,sBAAGb,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DiO,UAA7D,IAA2E,CAAC,CAA5E,IAAiFA,UAAU,IAAI,CAAC,CAAnG,EAAsG;AAClGV,oBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DiO,UAA7D,GAA0EA,UAA1E;AACH;;AACDuE,kBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,kBAAAA,6BAA6B,GAAGzS,gCAAhC;AACH;;AACD,oBAAGuC,MAAM,CAACiQ,6BAAD,CAAN,IAAyC5F,SAA5C,EAAuD;AACnDrK,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,GAAwC,EAAxC;AACH;;AACD,oBAAGjQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE7F,SAA3E,EAAsF;AAClFrK,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,IAAuE,EAAvE;AACH;;AACD,oBAAIhQ,WAAW,GAAG,CAACmP,SAAnB;AACA,oBAAIc,kBAAkB,GAAG,CAAzB;;AACA,oBAAG1S,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAoJ,kBAAAA,kBAAkB,GAAG1S,gCAArB;AACH,iBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAoJ,kBAAAA,kBAAkB,GAAG1S,gCAAgC,GAAC,CAAtD;AACH;;AAED,oBAAI2S,UAAU,GAAG;AACGjE,kBAAAA,eAAe,EAAEgE,kBADpB;AAEG1E,kBAAAA,eAAe,EAAEA,eAFpB;AAGGc,kBAAAA,oBAAoB,EAAE,EAHzB;AAIGH,kBAAAA,SAAS,EAAEmD,2BAJd;AAKG7D,kBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2E,kBAAAA,eAAe,EAAE,CAAC,CANrB;AAOGxG,kBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG3J,kBAAAA,WAAW,EAAEA,WARhB;AASG4L,kBAAAA,eAAe,EAAEA,eATpB;AAUGU,kBAAAA,iBAAiB,EAAErP,4BAVtB;AAWGoN,kBAAAA,SAAS,EAAE+E,mBAAmB,CAAC/E,SAXlC;AAYGkC,kBAAAA,cAAc,EAAE,KAAK1G,uBAAL,CAA6BuJ,mBAAmB,CAAC/E,SAAjD,CAZnB;AAaGmC,kBAAAA,KAAK,EAAE4C,mBAAmB,CAAC/E,SAb9B;AAcGoC,kBAAAA,KAAK,EAAE2C,mBAAmB,CAACxF,OAd9B;AAeGiB,kBAAAA,KAAK,EAAEwD,UAfV;AAgBG/C,kBAAAA,uBAAuB,EAAE2E;AAhB5B,iBAAjB;;AAkBA,oBAAGnQ,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAsBlI,MAAM,CAACiQ,6BAAD,CAAN,CAAsC/H,MAAtC,IAAgD,CAAtE,IAA2ElI,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAArE,IAA+E,CAA7J,EAAgK;AAC5J;AACAlI,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH,iBAHD,MAGO;AACH;AAEA,sBAAKzS,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEC,CAAC,CAAC,UAAD,CAAD,CAAcqG,EAAd,CAAiB,UAAjB,CAApE,IAAsG1P,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACC,CAAC,CAAC,UAAD,CAAD,CAAcqG,EAAd,CAAiB,UAAjB,CAApE,IAAoG,CAACrG,CAAC,CAAC,YAAD,CAAD,CAAgBqG,EAAhB,CAAmB,UAAnB,CAA/M,EAAiP;AAC7O;AACA;AACA+C,oBAAAA,UAAU,CAACvG,YAAX,GAA0BnM,wBAA1B;AACA0S,oBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAA/F,GAAqG,CAAxH;AACA/K,oBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAAwB,GAAC,CAArG,EAAwG,CAAxG,EAA2G0S,UAA3G;;AACA,wBAAGpQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,2BAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,4BAAGiH,UAAU,CAACrF,KAAX,IAAoB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA/F,EAAsG;AAClG/K,0BAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAnJ,0BAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,mBAdD,MAcO,IAAGpN,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEC,CAAC,CAAC,YAAD,CAAD,CAAgBqG,EAAhB,CAAmB,UAAnB,CAAtE,EAAuG;AAC1G,wBAAIiD,iBAAiB,GAAG,CAAC,CAAzB;AACAF,oBAAAA,UAAU,CAACvG,YAAX,GAA0B7J,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FmM,YAAzH;AACAuG,oBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAAlH;;AACA,wBAAG/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,2BAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,4BAAGiH,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA9F,EAAoG;AAChGuF,0BAAAA,iBAAiB,GAAGnH,CAApB;AACH;AACJ;;AAAA;AACJ;;AACD,wBAAGmH,iBAAiB,IAAI,CAAC,CAAzB,EAA4B;AACxBtQ,sBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EqE,iBAA5E,EAA+F,CAA/F,EAAkGF,UAAlG;AACH,qBAFD,MAEO;AACH;AACApQ,sBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH;AACJ,mBAjBM,MAiBA,IAAGzS,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAA3D,EAA8D;AACjEqJ,oBAAAA,UAAU,CAACvG,YAAX,GAA0B,CAAC,CAA3B;AACAuG,oBAAAA,UAAU,CAACrF,KAAX,GAAmB,CAAC,CAApB;AACA/K,oBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9E,IAArE,CAA0EgF,UAA1E;AACH,mBAJM,MAIA,IAAGzS,6BAA6B,CAACoJ,aAA9B,CAA4C,QAA5C,KAAyD,CAA5D,EAA+D;AAClEqJ,oBAAAA,UAAU,CAACvG,YAAX,GAA0B7J,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FmM,YAAzH;AACAuG,oBAAAA,UAAU,CAACrF,KAAX,GAAmB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAArE,EAA+FqN,KAAlH;AACA/K,oBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAA5E,EAAsG,CAAtG,EAAyG0S,UAAzG;;AACA,wBAAGpQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqExS,wBAAwB,GAAC,CAA9F,KAAoG2M,SAAvG,EAAkH;AAC9G,2BAAK,IAAIlB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAAlH,EAA0HiB,CAAC,EAA3H,EAA+H;AAC3H,4BAAGiH,UAAU,CAACrF,KAAX,IAAoB/K,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAA/F,EAAsG;AAClG/K,0BAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAnJ,0BAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE/G,CAArE,EAAwE4B,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,mBAlDE,CAmDH;;AACH,iBA1JkU,CA2JnU;;;AACArN,gBAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,oBAAI8S,WAAW,sBAAOxQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,CAAP,CAAf;;AACA,qBAAKpH,QAAL,CAAc;AACV9I,kBAAAA,MAAM,EAAEA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,iBAAd;AAGAZ,gBAAAA,mBAAmB,GAAG,IAAtB,CAjKmU,CAkKnU;;AACI,qBAAKxG,QAAL,CAAc;AACV1I,kBAAAA,iBAAiB,EAAEmQ;AADT,iBAAd,EAnK+T,CAsKnU;;AACA,oBAAIrR,eAAJ,EAAqB;AACjBX,kBAAAA,qBAAqB,GAAGyB,MAAxB;AACAxB,kBAAAA,6BAA6B,GAAGwM,aAAhC;AACH,iBAHD,MAGO;AACHpM,kBAAAA,gBAAgB,GAAGoB,MAAnB;AACAnB,kBAAAA,wBAAwB,GAAGmM,aAA3B;AACH;AACJ,eA9KD,MA8KO;AACH,oBAAG,KAAKnL,KAAL,CAAWO,iBAAX,CAA6B2G,aAA7B,CAA2C5J,4BAA3C,KAA4E,CAA/E,EAAkF;AAC9E0N,kBAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;AACJ;AACJ,WA1XD,MA0XO;AACH,gBAAI4F,MAAM,GAAG,UAAb;AACA,gBAAG3T,iBAAiB,IAAI,IAArB,IAA6BA,iBAAiB,CAAC+S,OAAlB,IAA6BxF,SAA7D,EACIoG,MAAM,GAAG,OAAT;AACJ,gBAAI9D,KAAK,GAAG,SAAZ;AACA,gBAAG,CAAC0C,SAAJ,EACI1C,KAAK,GAAG,aAAR;AACJ9B,YAAAA,KAAK,CAAC,QAAM8B,KAAN,GAAY,qCAAZ,GAAkD8D,MAAlD,GAAyD,GAA1D,CAAL;AACH;AACJ,SAvbD,MAubO;AACH5F,UAAAA,KAAK,CAAC,wDAAD,CAAL;AACH;AACJ,OA3bD,MA2bO;AACH,YAAG,CAAC6E,aAAD,IAAkB,CAACL,SAAtB,EACIxE,KAAK,CAAC,wDAAD,CAAL,CADJ,KAEK,IAAG,CAAC6E,aAAD,IAAkBL,SAArB,EACDxE,KAAK,CAAC,yBAAD,CAAL,CADC,KAGDA,KAAK,CAAC,6CAAD,CAAL;AACP;AACJ;;;kCAEaf,O,EAAS4G,c,EAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAItG,WAAW,GAAGxM,4BAAlB,CAVmC,CAWnC;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,QAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH,OAhBkC,CAiBnC;;;AACA,UAAI0E,iBAAJ,EAAuBoC,oBAAvB;;AACA,UAAG9P,eAAH,EAAoB;AAChB8P,QAAAA,oBAAoB,GAAGvQ,uBAAvB;AACAmO,QAAAA,iBAAiB,GAAGlO,gCAApB;AACH,OAHD,MAGO;AACHsQ,QAAAA,oBAAoB,GAAGlQ,kBAAvB;AACA8N,QAAAA,iBAAiB,GAAG7N,4BAApB;AACH;;AACD,UAAGiQ,oBAAoB,CAAC5E,WAAD,CAApB,IAAqCC,SAAxC,EACI2E,oBAAoB,CAAC5E,WAAD,CAApB,GAAoC,EAApC;AACJN,MAAAA,OAAO,CAAC6G,yBAAR,GAAoC3B,oBAAoB,CAAC5E,WAAD,CAApB,CAAkClC,MAAtE;AACA8G,MAAAA,oBAAoB,CAAC5E,WAAD,CAApB,CAAkCgB,IAAlC,CAAuCtB,OAAvC;AACA,WAAKhB,QAAL,CAAc;AACV7I,QAAAA,QAAQ,EAAE+O,oBAAoB,CAAC5E,WAAD;AADpB,OAAd;AAGA,UAAGwC,iBAAiB,CAACxC,WAAD,CAAjB,IAAkCC,SAArC,EACIuC,iBAAiB,CAACxC,WAAD,CAAjB,GAAiC,EAAjC;AACJ,UAAIiB,sBAAsB,GAAG,CAA7B;AACA,UAAI2D,oBAAoB,CAAC5E,WAAD,CAApB,CAAkClC,MAAlC,GAA2C,CAA/C,EACImD,sBAAsB,GAAG2D,oBAAoB,CAAC5E,WAAD,CAApB,CAAkClC,MAAlC,GAAyC,CAAlE,CArC+B,CAsCnC;;AACA,UAAG0E,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,KAA0DhB,SAA7D,EACIuC,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,IAAyD,EAAzD;AACJ,UAAIuF,kBAAkB,GAAG,EAAzB;AACA,WAAKjM,sBAAL,CAA4B+L,cAA5B,EAA4CE,kBAA5C;AACAhE,MAAAA,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,IAAyDuF,kBAAzD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,UAAG1R,eAAH,EAAoB;AAChBT,QAAAA,uBAAuB,GAAGuQ,oBAA1B;AACAtQ,QAAAA,gCAAgC,GAAGkO,iBAAnC;AACH,OAHD,MAGO;AACH9N,QAAAA,kBAAkB,GAAGkQ,oBAArB;AACAjQ,QAAAA,4BAA4B,GAAG6N,iBAA/B;AACH;AACJ;;;2CAEuB8D,c,EAAgBG,K,EAAO;AAC3C,WAAK,IAAI1H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuH,cAAc,CAACxI,MAAnC,EAA2CiB,CAAC,EAA5C,EAAgD;AAC5C,YAAG2H,KAAK,CAACC,OAAN,CAAcL,cAAc,CAACvH,CAAD,CAAd,CAAkBuD,KAAhC,CAAH,EAA2C;AACvC,eAAK/H,sBAAL,CAA4B+L,cAAc,CAACvH,CAAD,CAAd,CAAkBuD,KAA9C,EAAqDmE,KAArD;AACH,SAFD,MAEO,IAAGH,cAAc,CAACvH,CAAD,CAAd,CAAkBD,IAAlB,CAAuBnC,aAAvB,CAAqC,UAArC,KAAoD,CAAvD,EAA0D;AAC7D,cAAI0E,eAAe,GAAG,CAAC,CAAvB;AACA,cAAGiF,cAAc,CAACvH,CAAD,CAAd,CAAkB6H,YAAlB,IAAkC3G,SAAlC,IAA+CqG,cAAc,CAACvH,CAAD,CAAd,CAAkB6H,YAApE,EACIvF,eAAe,GAAGiF,cAAc,CAACvH,CAAD,CAAd,CAAkB0G,OAApC;AACJ,cAAI7C,cAAc,GAAG,KAArB;AACA,cAAG0D,cAAc,CAACvH,CAAD,CAAd,CAAkB6H,YAAlB,IAAkC3G,SAAlC,IAA+CqG,cAAc,CAACvH,CAAD,CAAd,CAAkB6H,YAApE,EACIhE,cAAc,GAAG,IAAjB;AACJ,cAAIrB,cAAc,GAAG,CAAC,CAAtB;AACA,cAAG+E,cAAc,CAACvH,CAAD,CAAd,CAAkBwC,cAAlB,IAAoCtB,SAAvC,EACIsB,cAAc,GAAG+E,cAAc,CAACvH,CAAD,CAAd,CAAkBwC,cAAnC;AACJ,cAAIC,eAAe,GAAG,CAAC,CAAvB;AACA,cAAG8E,cAAc,CAACvH,CAAD,CAAd,CAAkByC,eAAlB,IAAqCvB,SAAxC,EACIuB,eAAe,GAAG8E,cAAc,CAACvH,CAAD,CAAd,CAAkByC,eAApC;AACJ,cAAIC,eAAe,GAAG,CAAC,CAAvB;AACA,cAAG6E,cAAc,CAACvH,CAAD,CAAd,CAAkB0C,eAAlB,IAAqCxB,SAAxC,EACIwB,eAAe,GAAG6E,cAAc,CAACvH,CAAD,CAAd,CAAkB0C,eAApC;AACJ,cAAIoB,kBAAkB,GAAG,CAAC,CAA1B;AACA,cAAGyD,cAAc,CAACvH,CAAD,CAAd,CAAkBuC,UAAlB,IAAgCrB,SAAnC,EACI4C,kBAAkB,GAAGyD,cAAc,CAACvH,CAAD,CAAd,CAAkBuC,UAAvC;AACJ,cAAIwB,uBAAuB,GAAG,CAAC,CAA/B;AACA,cAAGwD,cAAc,CAACvH,CAAD,CAAd,CAAkBkH,eAAlB,IAAqChG,SAAxC,EACI6C,uBAAuB,GAAGwD,cAAc,CAACvH,CAAD,CAAd,CAAkBkH,eAA5C;AACJ,cAAItE,aAAa,GAAG,KAApB;AACA,cAAG2E,cAAc,CAACvH,CAAD,CAAd,CAAkB4C,aAAlB,IAAmC1B,SAAtC,EACI0B,aAAa,GAAG2E,cAAc,CAACvH,CAAD,CAAd,CAAkB4C,aAAlC;AACJ8E,UAAAA,KAAK,CAACzF,IAAN,CAAW;AACPM,YAAAA,UAAU,EAAE,CAAC,CADN;AAEP2E,YAAAA,eAAe,EAAE,CAAC,CAFX;AAGPjE,YAAAA,SAAS,EAAE,CAAC,CAHL;AAIPX,YAAAA,eAAe,EAAEA,eAJV;AAKPuB,YAAAA,cAAc,EAAEA,cALT;AAMPrB,YAAAA,cAAc,EAAEA,cANT;AAOPC,YAAAA,eAAe,EAAEA,eAPV;AAQPC,YAAAA,eAAe,EAAEA,eARV;AASPoB,YAAAA,kBAAkB,EAAEA,kBATb;AAUPC,YAAAA,uBAAuB,EAAEA,uBAVlB;AAWPnB,YAAAA,aAAa,EAAEA,aAXR;AAYPQ,YAAAA,oBAAoB,EAAEmE,cAAc,CAACvH,CAAD,CAAd,CAAkBuD,KAZjC;AAaPS,YAAAA,kBAAkB,EAAEuD,cAAc,CAACvH,CAAD,CAAd,CAAkB8H,YAb/B;AAcPlT,YAAAA,cAAc,EAAE2S,cAAc,CAACvH,CAAD,CAAd,CAAkBuD,KAd3B;AAePtE,YAAAA,WAAW,EAAE,EAfN;AAgBPmC,YAAAA,SAAS,EAAEmG,cAAc,CAACvH,CAAD,CAAd,CAAkBoB;AAhBtB,WAAX;AAkBH;AACJ;;AAAA;AACJ;;;mCAEe8E,S,EAAWC,mB,EAAqBC,2B,EAA6B;AACzE,UAAIvP,MAAJ,EAAYgL,aAAZ;;AACA,UAAI9L,eAAJ,EAAqB;AACjBc,QAAAA,MAAM,GAAGzB,qBAAT;AACAyM,QAAAA,aAAa,GAAGxM,6BAAhB;AACH,OAHD,MAGO;AACHwB,QAAAA,MAAM,GAAGpB,gBAAT;AACAoM,QAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,UAAGmB,MAAM,CAAC,CAAD,CAAN,CAAUkI,MAAV,GAAmB,CAAnB,IAAyBlI,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,KAAgBqK,SAAhB,IAA6BrK,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,EAAakI,MAAb,GAAsB,CAA/E,EAAmF;AAC/E,YAAImB,gBAAgB,GAAGzL,4BAAvB,CAD+E,CAE/E;AACA;AACA;;AACA,YAAGyL,gBAAgB,IAAI,CAAC,CAAxB,EAA2B;AACvBA,UAAAA,gBAAgB,GAAG,KAAKxJ,KAAL,CAAWE,SAAX,CAAqBmI,MAAxC;AACH,SAP8E,CAQ/E;AACA;;;AACA,YAAIsH,sBAAsB,GAAG,IAA7B;;AACA,YAAG7R,6BAA6B,CAACoJ,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACsI,SAApE,IAAiFrI,CAAC,CAAC,YAAD,CAAD,CAAgBqG,EAAhB,CAAmB,UAAnB,CAApF,EAAoH;AAChH,cAAIoC,YAAY,GAAGzP,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DC,wBAA3D,EAAqFqN,KAAxG;;AACA,cAAGrN,wBAAwB,GAAC,CAAzB,GAA6BsC,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DyK,MAA3F,EAAmG;AAC/F,iBAAK,IAAIiB,CAAC,GAAGzL,wBAAwB,GAAC,CAAtC,EAAyCyL,CAAC,GAAGnJ,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2DyK,MAAxG,EAAgHiB,CAAC,EAAjH,EAAqH;AACjH,kBAAIsG,YAAY,IAAIzP,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2D0L,CAA3D,EAA8D4B,KAA9E,IAAuF/K,MAAM,CAACqJ,gBAAD,CAAN,CAAyB5L,gCAAzB,EAA2D0L,CAA3D,EAA8DoB,SAA9D,CAAwExD,aAAxE,CAAsF,MAAtF,KAAiG,CAA5L,EAA+L;AAC3LyI,gBAAAA,sBAAsB,GAAG,KAAzB;AACH;AACJ;;AAAA;AACJ;AACJ;;AACD,YAAIE,aAAa,GAAG,IAApB;;AACA,YAAG,CAACL,SAAJ,EAAe;AACX,cAAGvS,iBAAiB,IAAIuN,SAArB,IAAkCvN,iBAAiB,CAAC4P,KAAlB,IAA2BrC,SAAhE,EAA2E;AACvEqF,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAG3S,iBAAiB,CAACmL,MAAlB,IAA4B,CAA/B,EAAkC;AAC9BwH,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAGzS,qBAAqB,CAACsN,SAAtB,IAAmCF,SAAtC,EAAiD;AAC7CqF,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAG5S,iBAAiB,CAACoM,IAAlB,IAA0BmB,SAA7B,EAAwC;AACpC,gBAAGvN,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,KAArC,KAA+C,CAA/C,IAAoDjK,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAA1G,EAA6G;AACzG,kBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,QAA1B,KAAuC,CAAC,CAAxC,IAA6C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzF,EAA4F;AACxFD,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJD,MAIO,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,kBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAtC,IAA2C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAvF,EAA0F;AACtFD,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJM,MAIA,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,kBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,OAA1B,KAAsC,CAAC,CAAvC,IAA4C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAlF,IAAuF5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAnI,EAAsI;AAClID,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJM,MAIA,IAAG5S,iBAAiB,CAACoM,IAAlB,CAAuBnC,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D,kBAAGhK,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzC,IAA8C5S,iBAAiB,CAAC4S,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAA1F,EAA6F;AACzFD,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ;AACJ;AACJ,SA7BD,MA6BO;AACH,cAAGJ,mBAAmB,CAACxF,OAApB,IAA+BO,SAAlC,EAA6C;AACzCqF,YAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,SAvD8E,CAwD/E;;;AACA,YAAGF,sBAAsB,IAAIE,aAA7B,EAA4C;AACxC,cAAGhS,wBAAwB,IAAI,CAAC,CAA7B,IAAoCA,wBAAwB,IAAI,CAAC,CAA7B,KAAmCsC,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAuBlI,MAAM,CAACqJ,gBAAD,CAAN,IAA4BgB,SAA5B,IAAyCrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBnB,MAAzB,IAAmC,CAAtI,CAAvC,EAAqL;AACjL,gBAAI0H,iBAAiB,GAAG,KAAxB;;AACA,gBAAGlS,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACuK,MAA9B,GAAuC,CAAzE,IAA8EvK,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAtI,IAA2IiE,aAAa,CAAC3B,gBAAD,CAAb,IAAmCgB,SAAjL,EAA4L;AACxL;AACA,kBAAG,CAACgF,SAAJ,EAAe;AACX,oBAAGvS,iBAAiB,CAAC+S,OAAlB,IAA6BxF,SAAhC,EAA2C;AACvC,sBAAIW,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEgO,eAAlE,IAAqF3O,iBAAiB,CAAC+S,OAA3G,EAAoH;AAChHD,oBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,iBAJD,MAIO,IAAG9S,iBAAiB,CAAC4O,UAAlB,IAAgCrB,SAAnC,EAA8C;AACjD,sBAAIW,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEiO,UAAlE,IAAgF5O,iBAAiB,CAAC4O,UAAtG,EAAkH;AAC9GkE,oBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,sBAAGnS,gCAAgC,IAAI,CAAvC,EACImS,iBAAiB,GAAG,IAApB;AACJ,sBAAIE,WAAW,GAAG,KAAKjQ,KAAL,CAAWU,SAAX,CAAqBwP,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,2BAAOA,MAAM,CAAC1G,EAAP,IAAaxM,iBAAiB,CAAC4O,UAAtC;AACH,mBAFiB,CAAlB;;AAGA,sBAAGoE,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,wBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAe7G,QAAnB,EACI2G,iBAAiB,GAAG,IAApB;AACP;AACJ,iBAbM,MAaA,IAAG9S,iBAAiB,CAAC6O,cAAlB,IAAoCtB,SAAvC,EAAkD;AACrDuF,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAFM,MAEA,IAAG9S,iBAAiB,CAAC+O,eAAlB,IAAqCxB,SAAxC,EAAmD;AACtDuF,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAvBD,MAuBO;AACH,oBAAGN,mBAAmB,CAACO,OAApB,IAA+BxF,SAA/B,IAA4C,CAACiF,mBAAmB,CAACvD,aAApE,EAAmF;AAC/E,sBAAIf,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEgO,eAAlE,IAAqF6D,mBAAmB,CAACO,OAA7G,EAAsH;AAClHD,oBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,iBAJD,MAIO,IAAGN,mBAAmB,CAAC5D,UAApB,IAAkCrB,SAAlC,IAA+C,CAACiF,mBAAmB,CAACvD,aAAvE,EAAsF;AACzF,sBAAIf,aAAa,CAAC3B,gBAAD,CAAb,CAAgC5L,gCAAhC,EAAkEiO,UAAlE,IAAgF4D,mBAAmB,CAAC5D,UAAxG,EAAoH;AAChHkE,oBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,sBAAGnS,gCAAgC,IAAI,CAAvC,EACImS,iBAAiB,GAAG,IAApB;AACJ,sBAAIE,WAAW,GAAG,KAAKjQ,KAAL,CAAWU,SAAX,CAAqBwP,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,2BAAOA,MAAM,CAAC1G,EAAP,IAAagG,mBAAmB,CAAC5D,UAAxC;AACH,mBAFiB,CAAlB;;AAGA,sBAAGoE,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,wBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAe7G,QAAnB,EACI2G,iBAAiB,GAAG,IAApB;AACP;AACJ,iBAbM,MAaA,IAAGN,mBAAmB,CAAC3D,cAApB,IAAsCtB,SAAtC,IAAmD,CAACiF,mBAAmB,CAACvD,aAA3E,EAA0F;AAC7F6D,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAFM,MAEA,IAAGN,mBAAmB,CAACzD,eAApB,IAAuCxB,SAAvC,IAAoD,CAACiF,mBAAmB,CAACvD,aAA5E,EAA2F;AAC9F6D,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAFM,MAEA,IAAGN,mBAAmB,CAACvD,aAAvB,EAAsC;AACzC6D,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,aAnDD,MAmDO,IAAMlS,wBAAwB,IAAI,CAAC,CAA7B,KAAmCsC,MAAM,CAACkI,MAAP,IAAiB,CAAjB,IAAuBlI,MAAM,CAACqJ,gBAAD,CAAN,IAA4BgB,SAA5B,IAAyCrK,MAAM,CAACqJ,gBAAD,CAAN,CAAyBnB,MAAzB,IAAmC,CAAtI,CAAF,IAAiJvK,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAAzM,IAA+MiE,aAAa,CAAC3B,gBAAD,CAAb,IAAmCgB,SAAtP,EAAiQ;AACpQuF,cAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,gBAAGA,iBAAH,EAAsB;AAClB,kBAAG,CAACP,SAAJ,EAAe;AACX,oBAAI3C,KAAK,GAAG1F,CAAC,CAAC,QAAD,CAAD,CAAYC,GAAZ,EAAZ;AACA,oBAAImD,WAAW,GAAGxM,4BAAlB,CAFW,CAGX;AACA;AACA;;AACA,oBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,kBAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,oBAAI+H,6BAA6B,GAAG,CAApC;AAAA,oBAAuCC,6BAA6B,GAAG,CAAvE;AACAlF,gBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DuO,QAA7D;AACAiE,gBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,gBAAAA,6BAA6B,GAAGzS,gCAAhC;AACA,oBAAIyC,WAAW,GAAG,CAACmP,SAAnB;AACA,oBAAIc,kBAAkB,GAAG,CAAzB;;AACA,oBAAG1S,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAoJ,kBAAAA,kBAAkB,GAAG1S,gCAArB;AACH,iBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAoJ,kBAAAA,kBAAkB,GAAG1S,gCAAgC,GAAC,CAAtD;AACH;;AACD,oBAAIgO,eAAe,GAAG,CAAC,CAAvB;AAAA,oBAA0BK,eAAe,GAAG,KAA5C;AAAA,oBAAmDS,oBAAoB,GAAG,EAA1E;;AACA,oBAAGzP,iBAAiB,CAAC+S,OAAlB,IAA6BxF,SAAhC,EAA2C;AACvCoB,kBAAAA,eAAe,GAAG3O,iBAAiB,CAAC+S,OAApC;AACA/D,kBAAAA,eAAe,GAAG,IAAlB;AACAS,kBAAAA,oBAAoB,GAAGzP,iBAAiB,CAAC4P,KAAzC;AACH;;AACD,oBAAI6B,UAAU,GAAG,CAAjB;AACA,oBAAI6B,UAAU,GAAG;AACDjE,kBAAAA,eAAe,EAAEgE,kBADhB;AAED1E,kBAAAA,eAAe,EAAEA,eAFhB;AAGDc,kBAAAA,oBAAoB,EAAEA,oBAHrB;AAIDH,kBAAAA,SAAS,EAAE,CAAC,CAJX;AAKDV,kBAAAA,UAAU,EAAE,CAAC,CALZ;AAMD2E,kBAAAA,eAAe,EAAE,CAAC,CANjB;AAODxG,kBAAAA,YAAY,EAAE,CAAC,CAPd;AAQD2C,kBAAAA,iBAAiB,EAAE1P,iBAAiB,CAACoM,IARpC;AASDhJ,kBAAAA,WAAW,EAAEA,WATZ;AAUD4L,kBAAAA,eAAe,EAAEA,eAVhB;AAWDvB,kBAAAA,SAAS,EAAEtN,qBAAqB,CAACsN,SAXhC;AAYDkC,kBAAAA,cAAc,EAAExP,qBAAqB,CAACwP,cAZrC;AAaDC,kBAAAA,KAAK,EAAE3P,iBAbN;AAcD4P,kBAAAA,KAAK,EAAE7P,iBAAiB,CAAC4P,KAAlB,GAAwB,GAAxB,GAA4BzP,qBAAqB,CAACwP,cAAlD,GAAiE,GAAjE,GAAqEzP,sBAd3E;AAeD+N,kBAAAA,KAAK,EAAEwD,UAfN;AAgBD/C,kBAAAA,uBAAuB,EAAE2E;AAhBxB,iBAAjB;AAkBAnQ,gBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAA5E,EAAsG,CAAtG,EAAyG0S,UAAzG,EA/CW,CAgDX;;AACA1S,gBAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,oBAAIwB,eAAJ,EAAqB;AACjBX,kBAAAA,qBAAqB,GAAGyB,MAAxB;AACAxB,kBAAAA,6BAA6B,GAAGwM,aAAhC;AACH,iBAHD,MAGO;AACHpM,kBAAAA,gBAAgB,GAAGoB,MAAnB;AACAnB,kBAAAA,wBAAwB,GAAGmM,aAA3B;AACH;;AACD,qBAAKlC,QAAL,CAAc;AACV9I,kBAAAA,MAAM,EAAEA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,iBAAd;AAGH,eA5DD,MA4DO;AACH;AACA,oBAAI9F,WAAW,GAAGxM,4BAAlB,CAFG,CAGH;AACA;AACA;;AACA,oBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,kBAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,oBAAI0E,iBAAJ;;AACA,oBAAG1N,eAAH,EAAoB;AAChB0N,kBAAAA,iBAAiB,GAAGlO,gCAApB;AACH,iBAFD,MAEO;AACHkO,kBAAAA,iBAAiB,GAAG7N,4BAApB;AACH;;AACD,oBAAIwR,aAAa,GAAGpT,4BAApB;;AACA,qBAAK,IAAIgM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D4K,MAAlF,EAA0FiB,CAAC,EAA3F,EAA+F;AAC3F,sBAAGyD,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,MAAzF,KAAoG,CAAvG,EACIwJ,aAAa,GAAG3D,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEgE,kBAAjF,CADJ,KAEK,IAAGP,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAAnG,IAAwG6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAA9M,EACDwJ,aAAa,GAAG3D,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEgE,kBAAjF,CADC,KAEA,IAAGP,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,SAAzF,KAAuG,CAAvG,IAA4G6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,KAAzF,KAAmG,CAA/M,IAAoN6F,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B9M,6BAA/B,EAA8D6L,CAA9D,EAAiEoB,SAAjE,CAA2ExD,aAA3E,CAAyF,OAAzF,KAAqG,CAA5T,EACDwJ,aAAa,GAAG,KAAhB,CADC,KAGDA,aAAa,GAAG,SAAhB;AACJ;AACH;;AAAA,iBA1BE,CA2BH;;AACA,oBAAIW,oBAAoB,GAAG,KAA3B;AAAA,oBAAkCC,gBAAgB,GAAG,CAArD;;AACAC,gBAAAA,SAAS,EACT,KAAK,IAAIjI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnJ,MAAM,CAACoK,WAAD,CAAN,CAAoBlC,MAAxC,EAAgDiB,CAAC,EAAjD,EAAqD;AACjD,uBAAK,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnL,MAAM,CAACoK,WAAD,CAAN,CAAoBjB,CAApB,EAAuBjB,MAA3C,EAAmDiD,CAAC,EAApD,EAAwD;AACpD,wBAAG,CAACnL,MAAM,CAACoK,WAAD,CAAN,CAAoBjB,CAApB,EAAuBgC,CAAvB,EAA0BjL,WAA9B,EAA2C;AACvCiR,sBAAAA,gBAAgB;AACnB;AACJ;;AAAA;AACJ;;AAAA;;AACD,oBAAGA,gBAAgB,IAAI,CAAvB,EAA0B;AACtBD,kBAAAA,oBAAoB,GAAG,IAAvB;AACH,iBAvCE,CAwCH;AACA;AACA;;;AACA,oBAAKtT,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAKiC,KAAL,CAAWO,iBAAX,CAA6B2G,aAA7B,CAA2CwJ,aAA3C,KAA6D,CAA7D,IAAkE,KAAK1Q,KAAL,CAAWO,iBAAX,CAA6B8H,MAA7B,IAAuC,CAAhJ,CAAD,IAAyJtK,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAKiC,KAAL,CAAWE,SAAX,CAAqBqK,WAArB,EAAkClB,IAAlC,CAAuCnC,aAAvC,CAAqDwJ,aAArD,KAAuE,CAAvE,IAA4E,KAAK1Q,KAAL,CAAWE,SAAX,CAAqBqK,WAArB,EAAkClB,IAAlC,CAAuChB,MAAvC,IAAiD,CAApK,CAAzJ,IAAoUgJ,oBAAxU,EAA+V;AAC3V,sBAAI3C,UAAU,GAAG,CAAjB;;AACA,sBAAGrP,eAAH,EAAoB;AAChBqP,oBAAAA,UAAU,GAAGhR,wBAAb;AACH,mBAFD,MAEO;AACHgR,oBAAAA,UAAU,GAAG/Q,uBAAb;AACH;;AACD,sBAAIyS,6BAA6B,GAAG,CAApC;AAAA,sBAAuCC,6BAA6B,GAAG,CAAvE;AACAlF,kBAAAA,aAAa,CAACZ,WAAD,CAAb,CAA2B3M,gCAA3B,EAA6DuO,QAA7D;AACAiE,kBAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,kBAAAA,6BAA6B,GAAGzS,gCAAhC;AACA,sBAAIyC,WAAW,GAAG,CAACmP,SAAnB;AACA,sBAAIc,kBAAkB,GAAG,CAAzB;;AACA,sBAAG1S,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAoJ,oBAAAA,kBAAkB,GAAG1S,gCAArB;AACH,mBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACoJ,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAoJ,oBAAAA,kBAAkB,GAAG1S,gCAAgC,GAAC,CAAtD;AACH;;AACD,sBAAIgO,eAAe,GAAG,CAAC,CAAvB;AAAA,sBAA0BK,eAAe,GAAG,KAA5C;AAAA,sBAAmDS,oBAAoB,GAAG,EAA1E;;AACA,sBAAG+C,mBAAmB,CAACO,OAApB,IAA+BxF,SAAlC,EAA6C;AACzCoB,oBAAAA,eAAe,GAAG6D,mBAAmB,CAACO,OAAtC;AACA/D,oBAAAA,eAAe,GAAG,IAAlB;AACAS,oBAAAA,oBAAoB,GAAG+C,mBAAmB,CAAC5C,KAA3C;AACH;;AACD,sBAAI0D,UAAU,GAAG;AACGjE,oBAAAA,eAAe,EAAEgE,kBADpB;AAEG1E,oBAAAA,eAAe,EAAEA,eAFpB;AAGGc,oBAAAA,oBAAoB,EAAE,EAHzB;AAIGH,oBAAAA,SAAS,EAAEmD,2BAJd;AAKG7D,oBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2E,oBAAAA,eAAe,EAAE,CAAC,CANrB;AAOGxG,oBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG3J,oBAAAA,WAAW,EAAEA,WARhB;AASG4L,oBAAAA,eAAe,EAAEA,eATpB;AAUGvB,oBAAAA,SAAS,EAAE+E,mBAAmB,CAAC/E,SAVlC;AAWGkC,oBAAAA,cAAc,EAAE,KAAK1G,uBAAL,CAA6BuJ,mBAAmB,CAAC/E,SAAjD,CAXnB;AAYGmC,oBAAAA,KAAK,EAAE4C,mBAAmB,CAAC/E,SAZ9B;AAaGoC,oBAAAA,KAAK,EAAE2C,mBAAmB,CAACxF,OAb9B;AAcGiB,oBAAAA,KAAK,EAAEwD,UAdV;AAeG/C,oBAAAA,uBAAuB,EAAE2E;AAf5B,mBAAjB;AAiBAnQ,kBAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAA5E,EAAsG,CAAtG,EAAyG0S,UAAzG,EA3C2V,CA4C3V;AACA;;AACA,sBAAII,WAAW,sBAAOxQ,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,CAAP,CAAf;;AACA,uBAAKpH,QAAL,CAAc;AACV9I,oBAAAA,MAAM,EAAEA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,mBAAd,EA/C2V,CAkD3V;;AACI,uBAAKpH,QAAL,CAAc;AACV1I,oBAAAA,iBAAiB,EAAEmQ;AADT,mBAAd,EAnDuV,CAsD3V;;AACA,sBAAIrR,eAAJ,EAAqB;AACjBX,oBAAAA,qBAAqB,GAAGyB,MAAxB;AACAxB,oBAAAA,6BAA6B,GAAGwM,aAAhC;AACH,mBAHD,MAGO;AACHpM,oBAAAA,gBAAgB,GAAGoB,MAAnB;AACAnB,oBAAAA,wBAAwB,GAAGmM,aAA3B;AACH;AACJ,iBA9DD,MA8DO;AACH,sBAAG,KAAKnL,KAAL,CAAWO,iBAAX,CAA6B2G,aAA7B,CAA2C5J,4BAA3C,KAA4E,CAA/E,EAAkF;AAC9E0N,oBAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;AACJ;AACJ,aA5KD,MA4KO;AACH,kBAAI4F,MAAM,GAAG,UAAb;AACA,kBAAG3T,iBAAiB,CAAC+S,OAAlB,IAA6BxF,SAAhC,EACIoG,MAAM,GAAG,OAAT;AACJ,kBAAI9D,KAAK,GAAG,SAAZ;AACA,kBAAG,CAAC0C,SAAJ,EACI1C,KAAK,GAAG,aAAR;AACJ9B,cAAAA,KAAK,CAAC,QAAM8B,KAAN,GAAY,qCAAZ,GAAkD8D,MAAlD,GAAyD,GAA1D,CAAL;AACH;AACJ,WA7OD,MA6OO;AACH5F,YAAAA,KAAK,CAAC,wDAAD,CAAL;AACH;AACJ,SAjPD,MAiPO;AACH,cAAG,CAAC6E,aAAD,IAAkB,CAACL,SAAtB,EACIxE,KAAK,CAAC,wDAAD,CAAL,CADJ,KAEK,IAAG,CAAC6E,aAAD,IAAkBL,SAArB,EACDxE,KAAK,CAAC,yBAAD,CAAL,CADC,KAGDA,KAAK,CAAC,6CAAD,CAAL;AACP;AACJ,OAlTD,MAkTO;AACHA,QAAAA,KAAK,CAAC,8BAAD,CAAL;AACH;AACJ;;;oCAEgB;AACb,UAAI7K,MAAJ,EAAYgL,aAAZ;;AACA,UAAI9L,eAAJ,EAAqB;AACjBc,QAAAA,MAAM,GAAGzB,qBAAT;AACAyM,QAAAA,aAAa,GAAGxM,6BAAhB;AACH,OAHD,MAGO;AACHwB,QAAAA,MAAM,GAAGpB,gBAAT;AACAoM,QAAAA,aAAa,GAAGnM,wBAAhB;AACH;;AACD,UAAGmB,MAAM,CAAC,CAAD,CAAN,CAAUkI,MAAV,GAAmB,CAAnB,IAAyBlI,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,KAAgBqK,SAAhB,IAA6BrK,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,EAAakI,MAAb,GAAsB,CAA/E,EAAmF;AAC/E,YAAIkC,WAAW,GAAGxM,4BAAlB,CAD+E,CAE/E;AACA;AACA;;AACA,YAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,UAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH;;AACD,YAAI+H,6BAA6B,GAAG,CAApC;AAAA,YAAuCC,6BAA6B,GAAG,CAAvE;AACAD,QAAAA,6BAA6B,GAAG7F,WAAhC;AACA8F,QAAAA,6BAA6B,GAAGzS,gCAAhC;AACAuC,QAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEjE,MAArE,CAA4EvO,wBAA5E,EAAsG,CAAtG;AACAA,QAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,YAAGsC,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAArE,IAA+E,CAAlF,EAAqF;AACjFlI,UAAAA,MAAM,CAACiQ,6BAAD,CAAN,CAAsChE,MAAtC,CAA6CiE,6BAA7C,EAA4E,CAA5E;AACAlF,UAAAA,aAAa,CAACiF,6BAAD,CAAb,CAA6ChE,MAA7C,CAAoDiE,6BAApD,EAAmF,CAAnF;AACH;;AACD,YAAGlQ,MAAM,CAACiQ,6BAAD,CAAN,IAAyC5F,SAAzC,IAAsDrK,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE7F,SAA9H,IAA2IrK,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEhI,MAArE,IAA+E,CAA7N,EAAgO;AAC5N,eAAKY,QAAL,CAAc;AACV9I,YAAAA,MAAM,EAAE;AADE,WAAd;AAGH,SAJD,MAIO;AACH,eAAK8I,QAAL,CAAc;AACV9I,YAAAA,MAAM,EAAEA,MAAM,CAACiQ,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,WAAd;AAGH;;AACD,YAAIhR,eAAJ,EAAqB;AACjBX,UAAAA,qBAAqB,GAAGyB,MAAxB;AACAxB,UAAAA,6BAA6B,GAAGwM,aAAhC;AACH,SAHD,MAGO;AACHpM,UAAAA,gBAAgB,GAAGoB,MAAnB;AACAnB,UAAAA,wBAAwB,GAAGmM,aAA3B;AACH;AACJ,OAjCD,MAiCO;AACHH,QAAAA,KAAK,CAAC,8BAAD,CAAL;AACH;AACJ;;;qCAEgBf,O,EAAS4G,c,EAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAItG,WAAW,GAAGxM,4BAAlB,CAVsC,CAWtC;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,QAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH,OAhBqC,CAiBtC;;;AACA,UAAI0E,iBAAJ,EAAuBoC,oBAAvB;;AACA,UAAG9P,eAAH,EAAoB;AAChB8P,QAAAA,oBAAoB,GAAGvQ,uBAAvB;AACAmO,QAAAA,iBAAiB,GAAGlO,gCAApB;AACH,OAHD,MAGO;AACHsQ,QAAAA,oBAAoB,GAAGlQ,kBAAvB;AACA8N,QAAAA,iBAAiB,GAAG7N,4BAApB;AACH;;AACD,UAAGiQ,oBAAoB,CAAC5E,WAAD,CAApB,IAAqCC,SAAxC,EACI2E,oBAAoB,CAAC5E,WAAD,CAApB,GAAoC,EAApC;AACJ4E,MAAAA,oBAAoB,CAAC5E,WAAD,CAApB,CAAkC9M,6BAAlC,IAAmEwM,OAAnE;AACA,WAAKhB,QAAL,CAAc;AACV7I,QAAAA,QAAQ,EAAE+O,oBAAoB,CAAC5E,WAAD;AADpB,OAAd;AAGA,UAAGwC,iBAAiB,CAACxC,WAAD,CAAjB,IAAkCC,SAArC,EACIuC,iBAAiB,CAACxC,WAAD,CAAjB,GAAiC,EAAjC;AACJ,UAAIiB,sBAAsB,GAAG/N,6BAA7B,CAlCsC,CAmCtC;;AACA,UAAGsP,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,KAA0DhB,SAA7D,EACIuC,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,IAAyD,EAAzD;AACJ,UAAIuF,kBAAkB,GAAG,EAAzB;AACA,WAAKjM,sBAAL,CAA4B+L,cAA5B,EAA4CE,kBAA5C;AACAhE,MAAAA,iBAAiB,CAACxC,WAAD,CAAjB,CAA+BiB,sBAA/B,IAAyDuF,kBAAzD;;AACA,UAAG1R,eAAH,EAAoB;AAChBT,QAAAA,uBAAuB,GAAGuQ,oBAA1B;AACAtQ,QAAAA,gCAAgC,GAAGkO,iBAAnC;AACH,OAHD,MAGO;AACH9N,QAAAA,kBAAkB,GAAGkQ,oBAArB;AACAjQ,QAAAA,4BAA4B,GAAG6N,iBAA/B;AACH;AACJ;;;sCAEiB;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIxC,WAAW,GAAGxM,4BAAlB,CAVc,CAWd;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCwM,QAAAA,WAAW,GAAG,KAAKvK,KAAL,CAAWE,SAAX,CAAqBmI,MAAnC;AACH,OAhBa,CAiBd;;;AACA,UAAI0E,iBAAJ,EAAuBoC,oBAAvB;;AACA,UAAG9P,eAAH,EAAoB;AAChB8P,QAAAA,oBAAoB,GAAGvQ,uBAAvB;AACAmO,QAAAA,iBAAiB,GAAGlO,gCAApB;AACH,OAHD,MAGO;AACHsQ,QAAAA,oBAAoB,GAAGlQ,kBAAvB;AACA8N,QAAAA,iBAAiB,GAAG7N,4BAApB;AACH;;AACD,UAAGiQ,oBAAoB,CAAC5E,WAAD,CAApB,IAAqCC,SAAxC,EACI2E,oBAAoB,CAAC5E,WAAD,CAApB,GAAoC,EAApC;AACJ4E,MAAAA,oBAAoB,CAAC5E,WAAD,CAApB,CAAkC6B,MAAlC,CAAyC3O,6BAAzC,EAAwE,CAAxE;AACA,WAAKwL,QAAL,CAAc;AACV7I,QAAAA,QAAQ,EAAE+O,oBAAoB,CAAC5E,WAAD;AADpB,OAAd;AAGA,UAAIiB,sBAAsB,GAAG/N,6BAA7B;AACAsP,MAAAA,iBAAiB,CAACxC,WAAD,CAAjB,CAA+B6B,MAA/B,CAAsCZ,sBAAtC,EAA8D,CAA9D;AACH;;;wCAEoBvE,Y,EAAc;AAC/B,UAAG5H,eAAH,EAAoB;AAChB9B,QAAAA,kCAAkC,GAAG0J,YAArC;AACA3J,QAAAA,4BAA4B,GAAG2J,YAA/B;AACH,OAHD,MAGO;AACHzJ,QAAAA,iCAAiC,GAAGyJ,YAApC;AACA3J,QAAAA,4BAA4B,GAAG2J,YAA/B;AACH;AACJ;;;0CAEsBsC,K,EAAO;AAC1BtM,MAAAA,iBAAiB,GAAGsM,KAApB;AACH;;;qCAEiBmB,S,EAAW;AACzBtN,MAAAA,qBAAqB,GAAGsN,SAAxB;AACH;;;uDAEkC8G,c,EAAgBC,W,EAAaC,Y,EAAc;AAC1E;AACA;AACA9T,MAAAA,gCAAgC,GAAG4T,cAAnC;AACA3T,MAAAA,wBAAwB,GAAG4T,WAA3B;AACA3T,MAAAA,6BAA6B,GAAG4T,YAAhC;AACH;;;+CAE2BtI,Q,EAAU;AAClC/J,MAAAA,eAAe,GAAG+J,QAAlB;;AACA,UAAG/J,eAAH,EAAoB;AAChB/B,QAAAA,4BAA4B,GAAGC,kCAA/B;AACH,OAFD,MAEO;AACHD,QAAAA,4BAA4B,GAAGE,iCAA/B;AACH;;AACD,WAAKyL,QAAL,CAAc;AACV1I,QAAAA,iBAAiB,EAAEjD;AADT,OAAd;AAGH;;;uDAEmC8L,Q,EAAU;AAC1C9J,MAAAA,uBAAuB,GAAG8J,QAA1B;AACH;;;8CAE0B8B,K,EAAO;AAC9B,UAAG7L,eAAH,EAAoB;AAChB,YAAG3B,wBAAwB,GAAGwN,KAA9B,EACIxN,wBAAwB,GAAGwN,KAA3B;AACP,OAHD,MAGO;AACH,YAAGvN,uBAAuB,GAAGuN,KAA7B,EACIvN,uBAAuB,GAAGuN,KAA1B;AACP;AACJ;;;+CAE2BjB,O,EAASE,M,EAAQ;AACzC,UAAIhJ,gBAAgB,GAAG,WAAS8I,OAAO,CAACR,EAAxC;AAAA,UAA4CrI,iBAAiB,GAAG,kBAAgB6I,OAAO,CAACR,EAAxF;AACA,WAAKR,QAAL,CAAc;AACV/H,QAAAA,uBAAuB,EAAE+I,OADf;AAEV9I,QAAAA,gBAAgB,EAAEA,gBAFR;AAGVC,QAAAA,iBAAiB,EAAEA;AAHT,OAAd;AAKA3D,MAAAA,6BAA6B,GAAI0M,MAAjC;AACH;;;0CAEsB;AACnB,UAAIwH,UAAU,GAAGxK,CAAC,CAAC,YAAD,CAAD,CAAgBC,GAAhB,EAAjB;AACAnJ,MAAAA,SAAS,GAAG0T,UAAZ;AACH;;;+CAE2B;AACxB,UAAIC,eAAe,GAAGzK,CAAC,CAAC,mBAAD,CAAD,CAAuBC,GAAvB,EAAtB;AACAlJ,MAAAA,cAAc,GAAG0T,eAAjB;AACH;;;oDAEgC;AAC7B,UAAIC,oBAAoB,GAAG1K,CAAC,CAAC,wBAAD,CAAD,CAA4BC,GAA5B,EAA3B;AACAjJ,MAAAA,mBAAmB,GAAG0T,oBAAtB;AACH;;;+DAE2C;AACxC,UAAIxC,WAAW,GAAGlI,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,EAAlB;AACA5I,MAAAA,8BAA8B,GAAG6Q,WAAjC;AACH;;;0CAEsByC,K,EAAO;AAC1B1T,MAAAA,mBAAmB,GAAG0T,KAAtB;AACH;;;6CAEyB;AACtB,UAAInJ,YAAY,GAAGxB,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA/I,MAAAA,oBAAoB,GAAGsK,YAAvB;AACH;;;gDAE4B;AACzB,UAAIC,WAAW,GAAGzB,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;AACA9I,MAAAA,mBAAmB,GAAGsK,WAAtB;AACH;;;kDAE8B;AAC3B,UAAI+F,SAAS,GAAGxH,CAAC,CAAC,oBAAD,CAAD,CAAwBC,GAAxB,EAAhB;AACA7I,MAAAA,iBAAiB,GAAGoQ,SAApB;AACH;;;4CAEwBoD,M,EAAQ;AAC7B,UAAGA,MAAM,CAAC7K,aAAP,CAAqB,MAArB,KAAgC,CAAnC,EAAsC;AAClC,eAAO,SAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,OAArB,KAAiC,CAApC,EAAuC;AACnC,eAAO,QAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,MAArB,KAAgC,CAAnC,EAAsC;AAClC,eAAO,WAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,QAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,QAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,OAAP;AACH;;AACD,UAAG6K,MAAM,CAAC7K,aAAP,CAAqB,SAArB,KAAmC,CAAtC,EAAyC;AACrC,eAAO,SAAP;AACH;AACJ;;;mCAEc;AAAA;;AACX,UAAMG,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyC,UAACN,GAAD,EAAMO,MAAN,EAAiB;AACtD,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,cAAA,OAAI,CAACuB,QAAL,CAAc;AACVvI,gBAAAA,SAAS,EAAEuH,MAAM,CAACG;AADR,eAAd;AAGH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFW,CAuBP;AACP;;;+BAEU;AAAA;;AACP,UAAMf,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8BAAd,EAA8C,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC3D,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,cAAA,OAAI,CAACuB,QAAL,CAAc;AACVtI,gBAAAA,KAAK,EAAEsH,MAAM,CAACG;AADJ,eAAd;AAGH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFO,CAuBH;AACP;;;gCAEW;AAAA;;AACR,UAAMf,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,+BAAd,EAA+C,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC5D,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,cAAA,OAAI,CAACuB,QAAL,CAAc;AACVrI,gBAAAA,MAAM,EAAEqH,MAAM,CAACG;AADL,eAAd;AAGH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFQ,CAuBJ;AACP;;;+CAE2BnK,S,EAAW;AACnC,UAAI+T,QAAQ,GAAG,IAAf;;AACA,WAAK,IAAI1I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtJ,KAAL,CAAWU,SAAX,CAAqB2H,MAAzC,EAAiDiB,CAAC,EAAlD,EAAsD;AAClD,YAAG,KAAK5J,KAAL,CAAWuH,YAAX,CAAwBC,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvD,cAAI,KAAKlH,KAAL,CAAWU,SAAX,CAAqB4I,CAArB,EAAwBrL,SAAxB,CAAkCgU,WAAlC,GAAgD/K,aAAhD,CAA8DjJ,SAAS,CAACgU,WAAV,EAA9D,KAA0F,CAA1F,IAA+F,KAAKjS,KAAL,CAAWU,SAAX,CAAqB4I,CAArB,EAAwBG,EAAxB,IAA8B,KAAK/J,KAAL,CAAWG,UAA5I,EAAwJ;AACpJmS,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ,SALD,MAKO;AACH,cAAI,KAAKhS,KAAL,CAAWU,SAAX,CAAqB4I,CAArB,EAAwBrL,SAAxB,CAAkCgU,WAAlC,GAAgD/K,aAAhD,CAA8DjJ,SAAS,CAACgU,WAAV,EAA9D,KAA0F,CAA9F,EAAiG;AAC7FD,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;AACJ;;AAAA;;AACD,UAAGA,QAAH,EAAa;AACT,aAAK,IAAI1I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtJ,KAAL,CAAWW,KAAX,CAAiB0H,MAArC,EAA6CiB,CAAC,EAA9C,EAAkD;AAC9C,cAAI,KAAKtJ,KAAL,CAAWW,KAAX,CAAiB2I,CAAjB,EAAoBrL,SAApB,CAA8BgU,WAA9B,GAA4C/K,aAA5C,CAA0DjJ,SAAS,CAACgU,WAAV,EAA1D,KAAsF,CAA1F,EAA6F;AACzFD,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ;;AACD,UAAGA,QAAH,EAAa;AACT,aAAK,IAAI1I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtJ,KAAL,CAAWY,MAAX,CAAkByH,MAAtC,EAA8CiB,CAAC,EAA/C,EAAmD;AAC/C,cAAI,KAAKtJ,KAAL,CAAWY,MAAX,CAAkB0I,CAAlB,EAAqBrL,SAArB,CAA+BgU,WAA/B,GAA6C/K,aAA7C,CAA2DjJ,SAAS,CAACgU,WAAV,EAA3D,KAAuF,CAA3F,EAA8F;AAC1FD,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ;;AACD,aAAOA,QAAP;AACH;;;iDAE6B1J,M,EAAQ;AAClC,UAAI0J,QAAQ,GAAG,IAAf;;AACA,UAAI1S,uBAAJ,EAA6B;AACzB,aAAK,IAAIgK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnK,YAAY,CAACkJ,MAAjC,EAAyCiB,CAAC,EAA1C,EAA8C;AAC1C,cAAInK,YAAY,CAACmK,CAAD,CAAZ,CAAgBhB,MAAhB,CAAuB2J,WAAvB,GAAqC/K,aAArC,CAAmDoB,MAAM,CAAC2J,WAAP,EAAnD,KAA4E,CAAhF,EAAmF;AAC/ED,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ,OAPD,MAOO;AACH,aAAK,IAAI1I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7K,cAAc,CAAC4J,MAAnC,EAA2CiB,CAAC,EAA5C,EAAgD;AAC5C,cAAI7K,cAAc,CAAC6K,CAAD,CAAd,CAAkBhB,MAAlB,CAAyB2J,WAAzB,GAAuC/K,aAAvC,CAAqDoB,MAAM,CAAC2J,WAAP,EAArD,KAA8E,CAAlF,EAAqF;AACjFD,YAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA;AACJ;;AACD,aAAOA,QAAP;AACH;;;uCAEmB9C,K,EAAOgD,O,EAASC,K,EAAO;AACvC,UAAIvI,QAAQ,sBAAOzK,YAAP,CAAZ;;AACAyK,MAAAA,QAAQ,CAACsF,KAAD,CAAR,CAAgB5G,MAAhB,GAAyB4J,OAAzB;AACAtI,MAAAA,QAAQ,CAACsF,KAAD,CAAR,CAAgB7F,IAAhB,GAAuB8I,KAAvB;;AACA,UAAG,CAAC,KAAKtL,qBAAL,CAA2B+C,QAAQ,CAACsF,KAAD,CAAR,CAAgB5G,MAA3C,CAAJ,EAAwD;AACpD,aAAKW,QAAL,CAAc;AACVzI,UAAAA,oBAAoB,EAAEoJ;AADZ,SAAd;AAGH,OAJD,MAIO;AACHoB,QAAAA,KAAK,CAAC,yDAAD,CAAL;AACH;AACJ;;;qCAEiBkE,K,EAAO;AACrB,UAAItF,QAAQ,sBAAOzK,YAAP,CAAZ;;AACAyK,MAAAA,QAAQ,CAACwC,MAAT,CAAgB8C,KAAhB,EAAuB,CAAvB;AACA/P,MAAAA,YAAY,CAACiN,MAAb,CAAoB8C,KAApB,EAA2B,CAA3B;AACA,WAAKjG,QAAL,CAAc;AACVzI,QAAAA,oBAAoB,EAAEoJ;AADZ,OAAd;AAGH;;;qCAEiBwI,O,EAAS;AAAA;;AACvB,UAAM/K,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,4CAA0C,OAAI,CAACtI,KAAL,CAAWG,UAAnE,EAA+E,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC5F,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,kBAAG0K,OAAH,EAAY;AACRpH,gBAAAA,KAAK,CAAC,qBAAD,CAAL;;AACA,gBAAA,OAAI,CAACtL,KAAL,CAAW4K,yBAAX;AACH;AACJ,aALD;AAMH;AACJ,SAfD;AAgBH,OAtBD,EAFuB,CAwBnB;AACP;;;qCAEiB8H,O,EAAS;AAAA;;AACvB,UAAMjJ,YAAY,GAAG,IAAI7B,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA2B,MAAAA,YAAY,CAAC1B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAwB,QAAAA,YAAY,CAACvB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAM0K,QAAQ,GAAG,IAAI/K,kBAAIS,OAAR,CAAgBoB,YAAhB,CAAjB;AACAkJ,QAAAA,QAAQ,CAACrK,KAAT,CAAe,0CAAwC,OAAI,CAACtI,KAAL,CAAWG,UAAlE,EAA8E,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC3F,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbwB,cAAAA,YAAY,CAACjB,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHyB,YAAAA,YAAY,CAAChB,MAAb,CAAoB,UAAAT,GAAG,EAAI;AACvB,kBAAG0K,OAAH,EAAY;AACRpH,gBAAAA,KAAK,CAAC,qBAAD,CAAL;;AACA,gBAAA,OAAI,CAACtL,KAAL,CAAW4K,yBAAX;AACH;AACJ,aALD;AAMH;AACJ,SAfD;AAgBH,OAtBD,EAFuB,CAwBnB;;AACJ,UAAMgI,YAAY,GAAG,IAAIhL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA8K,MAAAA,YAAY,CAAC7K,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA2K,QAAAA,YAAY,CAAC1K,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAM4K,QAAQ,GAAG,IAAIjL,kBAAIS,OAAR,CAAgBuK,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAACvK,KAAT,CAAe,uDAAqD,OAAI,CAACtI,KAAL,CAAWG,UAA/E,EAA2F,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACxG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb2K,cAAAA,YAAY,CAACpK,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH4K,YAAAA,YAAY,CAACnK,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA1BuB,CA4CnB;AACP;;;qCAEiB0K,O,EAAS;AAAA;;AACvB,UAAGA,OAAH,EAAY;AACR,YAAMjJ,YAAY,GAAG,IAAI7B,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA2B,QAAAA,YAAY,CAAC1B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,cAAIC,UAAU,GAAG,KAAjB;AACAwB,UAAAA,YAAY,CAACvB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,YAAAA,UAAU,GAAG,IAAb;AACH,WAFD;AAGA,cAAM4K,QAAQ,GAAG,IAAIjL,kBAAIS,OAAR,CAAgBoB,YAAhB,CAAjB;AACAoJ,UAAAA,QAAQ,CAACvK,KAAT,CAAe,sCAAoC,OAAI,CAACtI,KAAL,CAAWG,UAA9D,EAA0E,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACvF,gBAAIP,GAAJ,EAAS;AACL/H,cAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,kBAAI,CAACC,UAAL,EAAiB;AACbwB,gBAAAA,YAAY,CAACjB,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,aAND,MAMO;AACHyB,cAAAA,YAAY,CAAChB,MAAb,CAAoB,UAAAT,GAAG,EAAI;AACvBsD,gBAAAA,KAAK,CAAC,qBAAD,CAAL;;AACA,gBAAA,OAAI,CAACtL,KAAL,CAAW4K,yBAAX;AACH,eAHD;AAIH;AACJ,WAbD;AAcH,SApBD,EAFQ,CAsBJ;AACP;;AACD,UAAMgI,YAAY,GAAG,IAAIhL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA8K,MAAAA,YAAY,CAAC7K,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA2K,QAAAA,YAAY,CAAC1K,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAM4K,QAAQ,GAAG,IAAIjL,kBAAIS,OAAR,CAAgBuK,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAACvK,KAAT,CAAe,oDAAkD,OAAI,CAACtI,KAAL,CAAWG,UAA5E,EAAwF,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACrG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb2K,cAAAA,YAAY,CAACpK,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH4K,YAAAA,YAAY,CAACnK,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA1BuB,CA4CnB;;AACJ,UAAM8K,YAAY,GAAG,IAAIlL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACAgL,MAAAA,YAAY,CAAC/K,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA6K,QAAAA,YAAY,CAAC5K,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAM8K,QAAQ,GAAG,IAAInL,kBAAIS,OAAR,CAAgByK,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAACzK,KAAT,CAAe,4DAA0D,OAAI,CAACtI,KAAL,CAAWG,UAApF,EAAgG,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC7G,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb6K,cAAAA,YAAY,CAACtK,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH8K,YAAAA,YAAY,CAACrK,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA9CuB,CAgEnB;;AACJ,UAAMgL,YAAY,GAAG,IAAIpL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACAkL,MAAAA,YAAY,CAACjL,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA+K,QAAAA,YAAY,CAAC9K,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMgL,QAAQ,GAAG,IAAIrL,kBAAIS,OAAR,CAAgB2K,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAAC3K,KAAT,CAAe,oEAAkE,OAAI,CAACtI,KAAL,CAAWG,UAA5F,EAAwG,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACrH,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb+K,cAAAA,YAAY,CAACxK,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHgL,YAAAA,YAAY,CAACvK,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAlEuB,CAoFnB;;AACJ,UAAMkL,YAAY,GAAG,IAAItL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACAoL,MAAAA,YAAY,CAACnL,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAiL,QAAAA,YAAY,CAAChL,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMkL,QAAQ,GAAG,IAAIvL,kBAAIS,OAAR,CAAgB6K,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAAC7K,KAAT,CAAe,4DAA0D,OAAI,CAACtI,KAAL,CAAWG,UAApF,EAAgG,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC7G,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbiL,cAAAA,YAAY,CAAC1K,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHkL,YAAAA,YAAY,CAACzK,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAtFuB,CAwGnB;;AACJ,UAAMoL,YAAY,GAAG,IAAIxL,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACAsL,MAAAA,YAAY,CAACrL,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAmL,QAAAA,YAAY,CAAClL,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMoL,QAAQ,GAAG,IAAIzL,kBAAIS,OAAR,CAAgB+K,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAAC/K,KAAT,CAAe,oDAAkD,OAAI,CAACtI,KAAL,CAAWG,UAA5E,EAAwF,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACrG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbmL,cAAAA,YAAY,CAAC5K,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHoL,YAAAA,YAAY,CAAC3K,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA1GuB,CA4HnB;;AACJ,UAAMsL,YAAY,GAAG,IAAI1L,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACAwL,MAAAA,YAAY,CAACvL,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAqL,QAAAA,YAAY,CAACpL,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMsL,QAAQ,GAAG,IAAI3L,kBAAIS,OAAR,CAAgBiL,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAACjL,KAAT,CAAe,mDAAiD,OAAI,CAACtI,KAAL,CAAWG,UAA3E,EAAuF,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACpG,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbqL,cAAAA,YAAY,CAAC9K,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHsL,YAAAA,YAAY,CAAC7K,MAAb,CAAoB,UAAAT,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA9HuB,CAgJnB;;AACJ,UAAMwL,YAAY,GAAG,IAAI5L,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAArB;AACA0L,MAAAA,YAAY,CAACzL,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACAuL,QAAAA,YAAY,CAACtL,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMwL,QAAQ,GAAG,IAAI7L,kBAAIS,OAAR,CAAgBmL,YAAhB,CAAjB;AACAC,QAAAA,QAAQ,CAACnL,KAAT,CAAe,yDAAuD,OAAI,CAACtI,KAAL,CAAWG,UAAjF,EAA6F,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AAC1G,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbnI,cAAAA,wBAAwB;AACxB0T,cAAAA,YAAY,CAAChL,QAAb,CAAsB,UAAAR,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAPD,MAOO;AACHwL,YAAAA,YAAY,CAAC/K,MAAb,CAAoB,UAAAT,GAAG,EAAI,CACvB;AACH,aAFD;AAGH;AACJ,SAbD;AAcH,OApBD,EAlJuB,CAsKnB;AACP;;;0CAEsB0L,C,EAAG;AACtB,aAAO,MAAMC,IAAN,CAAWD,CAAX,CAAP;AACH;;;gCAEYtB,K,EAAO;AAChB,UAAIwB,MAAM,CAACC,SAAP,CAAiBlF,QAAjB,CAA0BmF,IAA1B,CAA+B1B,KAA/B,MAA0C,eAA9C,EAA+D;AAC3D,YAAIlD,KAAK,CAACkD,KAAK,CAAC2B,OAAN,EAAD,CAAT,EAA4B;AACxBzI,UAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,iBAAO,KAAP;AACH,SAHD,MAGO;AACH,iBAAO,IAAP;AACH;AACJ,OAPD,MAOO;AACHA,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,eAAO,KAAP;AACH;AACJ;;;+CAE2BzJ,yB,EAA2BC,sB,EAAwBC,sB,EAAwB;AACnG,WAAKwH,QAAL,CAAc;AACV3H,QAAAA,mBAAmB,EAAE;AACjBC,UAAAA,yBAAyB,EAAEA,yBADV;AAEjBC,UAAAA,sBAAsB,EAAEA,sBAFP;AAGjBC,UAAAA,sBAAsB,EAAEA;AAHP;AADX,OAAd;AAOH;;;iCAEaqQ,K,EAAOvJ,W,EAAatB,Y,EAAcpH,U,EAAY;AAAA;;AACxD,UAAMwH,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK7H,KAAL,CAAW8H,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2GAAyG,OAAI,CAACtI,KAAL,CAAWgU,MAApH,GAA2H,KAA3H,GAAiI,OAAI,CAAChU,KAAL,CAAWkO,QAA5I,GAAqJ,MAArJ,GAA4JkE,KAAK,CAAChJ,WAAN,EAA5J,GAAgL,GAAhL,IAAqLgJ,KAAK,CAAC/I,QAAN,KAAiB,CAAtM,IAAyM,GAAzM,GAA6M+I,KAAK,CAAC9I,OAAN,EAA7M,GAA6N,MAA7N,GAAoOT,WAApO,GAAgP,MAAhP,GAAuPtB,YAAvP,GAAoQ,KAApQ,GAA0QpH,UAA1Q,GAAqR,GAAnS,EAAwS,UAAC6H,GAAD,EAAMO,MAAN,EAAiB;AACrT,cAAIP,GAAJ,EAAS;AACL/H,YAAAA,OAAO,CAACC,GAAR,CAAY8H,GAAZ;;AACA,YAAA,OAAI,CAAChI,KAAL,CAAWoP,WAAX,CAAuB,OAAvB,EAAgC,6CAAhC,EAA+E,IAA/E,EAAqF,KAArF,EAA4F,EAA5F;;AACA,gBAAI,CAACnH,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI,CACzB,CADD;AAEH;AACJ,SAZD;AAaH,OAnBD,EAFwD,CAqBpD;AACP;;;6BAEQ;AAAA;;AACL,UAAG,KAAK1H,KAAL,CAAWC,gBAAX,CAA4BiH,aAA5B,CAA0C,gBAA1C,KAA+D,CAAlE,EAAqE;AACjE,eACI;AAAK,UAAA,KAAK,EAAE;AAACyM,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,0BAAD;AAAgB,UAAA,IAAI,EAAE,KAAKlU,KAAL,CAAW8H,IAAjC;AAC4B,UAAA,oBAAoB,EAAE,KAAK9H,KAAL,CAAWuH,YAD7D;AAE4B,UAAA,UAAU,EAAE,KAAKvH,KAAL,CAAWG,UAFnD;AAG4B,UAAA,gBAAgB,EAAE,KAAKH,KAAL,CAAWI,gBAHzD;AAI4B,UAAA,wBAAwB,EAAE,KAAKJ,KAAL,CAAWK,wBAJjE;AAK4B,UAAA,iBAAiB,EAAE,KAAKL,KAAL,CAAWmU,iBAL1D;AAM4B,UAAA,QAAQ,EAAE,KAAKnU,KAAL,CAAWoU,QANjD;AAO4B,UAAA,SAAS,EAAE,KAAK9T,KAAL,CAAWE,SAPlD;AAQ4B,UAAA,2BAA2B,EAAE,KAAKiE,2BAR9D;AAS4B,UAAA,SAAS,EAAElG,SATvC;AAU4B,UAAA,cAAc,EAAEC,cAV5C;AAW4B,UAAA,iBAAiB,EAAE,KAAK8B,KAAL,CAAWO,iBAX1D;AAY4B,UAAA,mBAAmB,EAAE,KAAKoF,mBAZtD;AAa4B,UAAA,wBAAwB,EAAE,KAAKC,wBAb3D;AAc4B,UAAA,mBAAmB,EAAEzH,mBAdjD;AAe4B,UAAA,6BAA6B,EAAE,KAAK0H,6BAfhE;AAgB4B,UAAA,8BAA8B,EAAErH,8BAhB5D;AAiB4B,UAAA,wCAAwC,EAAE,KAAKyH,wCAjB3E;AAkB4B,UAAA,0BAA0B,EAAE,KAAKV,0BAlB7D;AAmB4B,UAAA,kCAAkC,EAAE,KAAKC,kCAnBrE;AAoB4B,UAAA,iBAAiB,EAAE,KAAK9F,KAAL,CAAW0K,iBApB1D;AAqB4B,UAAA,SAAS,EAAE,KAAK1K,KAAL,CAAW2K,SArBlD;AAsB4B,UAAA,YAAY,EAAE,KAAK3H,YAtB/C;AAuB4B,UAAA,yBAAyB,EAAE,KAAKhD,KAAL,CAAW4K,yBAvBlE;AAwB4B,UAAA,oBAAoB,EAAE,KAAKhI,oBAxBvD;AAyB4B,UAAA,wBAAwB,EAAE,KAAKG,wBAzB3D;AA0B4B,UAAA,eAAe,EAAE,KAAK3B,eA1BlD;AA2B4B,UAAA,qBAAqB,EAAE,KAAKyD,qBA3BxD;AA4B4B,UAAA,wBAAwB,EAAE,KAAKC,wBA5B3D;AA6B4B,UAAA,uBAAuB,EAAE,KAAKC,uBA7B1D;AA8B4B,UAAA,8BAA8B,EAAE,KAAK/E,KAAL,CAAW6N,8BA9BvE;AA+B4B,UAAA,2BAA2B,EAAE,KAAK7N,KAAL,CAAWqU,2BA/BpE;AAgC4B,UAAA,0BAA0B,EAAE,KAAKrU,KAAL,CAAWsU,0BAhCnE;AAiC4B,UAAA,0BAA0B,EAAE,KAAKjN,0BAjC7D;AAkC4B,UAAA,mBAAmB,EAAE,KAAK/G,KAAL,CAAWsB,mBAlC5D;AAmC4B,UAAA,YAAY,EAAE,KAAK5B,KAAL,CAAWuU,YAnCrD;AAoC4B,UAAA,gBAAgB,EAAE,KAAKrN,gBApCnD;AAqC4B,UAAA,gBAAgB,EAAE,KAAKF,gBArCnD;AAsC4B,UAAA,gBAAgB,EAAE,KAAKC,gBAtCnD;AAuC4B,UAAA,qBAAqB,EAAE,KAAKb,qBAvCxD;AAwC4B,UAAA,sBAAsB,EAAE,KAAKC,sBAxCzD;AAyC4B,UAAA,yBAAyB,EAAE,KAAKC,yBAzC5D;AA0C4B,UAAA,2BAA2B,EAAE,KAAKkO,2BA1C9D;AA2C4B,UAAA,mBAAmB,EAAE9V,mBA3CjD;AA4C4B,UAAA,oBAAoB,EAAEC,oBA5ClD;AA6C4B,UAAA,mBAAmB,EAAEC,mBA7CjD;AA8C4B,UAAA,iBAAiB,EAAEC,iBA9C/C;AA+C4B,UAAA,QAAQ,EAAE,KAAK6H,QA/C3C;AAgD4B,UAAA,SAAS,EAAE,KAAKC,SAhD5C;AAiD4B,UAAA,eAAe,EAAE,KAAK5C,eAjDlD;AAkD4B,UAAA,SAAS,EAAE,KAAK/D,KAAL,CAAWyU,SAlDlD;AAmD4B,UAAA,MAAM,EAAE,KAAKzU,KAAL,CAAWgU,MAnD/C;AAoD4B,UAAA,QAAQ,EAAE,KAAKhU,KAAL,CAAWkO;AApDjD,UADJ,CADJ;AA0DH,OA3DD,MA2DO,IAAG,KAAK5N,KAAL,CAAWC,gBAAX,CAA4BiH,aAA5B,CAA0C,qBAA1C,KAAoE,CAAvE,EAA0E;AAC7E,eACI;AAAK,UAAA,KAAK,EAAE;AAACyM,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,+BAAD;AAAqB,UAAA,IAAI,EAAE,KAAKlU,KAAL,CAAW8H,IAAtC;AAA4C,UAAA,aAAa,EAAE,KAAKxD,aAAhE;AAC4B,UAAA,MAAM,EAAE,KAAKtE,KAAL,CAAWoU,QAD/C;AAE4B,UAAA,cAAc,EAAE,CAAC;AAACjH,YAAAA,KAAK,EAAE,KAAKnN,KAAL,CAAW0U;AAAnB,WAAD,CAF5C;AAG4B,UAAA,eAAe,EAAE,KAAK1U,KAAL,CAAWoU,QAHxD;AAI4B,UAAA,YAAY,EAAE,KAAK9T,KAAL,CAAWI,QAJrD;AAK4B,UAAA,kBAAkB,EAAE,KAAKwE,WALrD;AAM4B,UAAA,sBAAsB,EAAE,KAAKG,cANzD;AAO4B,UAAA,qBAAqB,EAAE,KAAKC,aAPxD;AAQ4B,UAAA,0BAA0B,EAAE,KAAKM,kCAR7D;AAS4B,UAAA,8BAA8B,EAAE,0CAAM;AAAC,YAAA,OAAI,CAACpB,mBAAL;AAAyB,WAT5F;AAU4B,UAAA,YAAY,EAAE,KAAKkB,qBAV/C;AAW4B,UAAA,aAAa,EAAE,KAAKnB,aAXhD;AAY4B,UAAA,gBAAgB,EAAE,KAAKoB,gBAZnD;AAa4B,UAAA,0BAA0B,EAAE,KAAKK,0BAb7D;AAc4B,UAAA,MAAM,EAAE,KAAK1F,KAAL,CAAWG,MAd/C;AAe4B,UAAA,MAAM,EAAE,KAAKH,KAAL,CAAWM,MAf/C;AAgB4B,UAAA,iBAAiB,EAAE,KAAKkC,iBAhBpD;AAiB4B,UAAA,iBAAiB,EAAE,KAAK9C,KAAL,CAAW0K,iBAjB1D;AAkB4B,UAAA,SAAS,EAAE,KAAK1K,KAAL,CAAW2K,SAlBlD;AAmB4B,UAAA,yBAAyB,EAAE,KAAK5E,yBAnB5D;AAoB4B,UAAA,yBAAyB,EAAE,KAAK/F,KAAL,CAAW4K,yBApBlE;AAqB4B,UAAA,eAAe,EAAE,KAAKpF,eArBlD;AAsB4B,UAAA,WAAW,EAAE,IAtBzC;AAuB4B,UAAA,mBAAmB,EAAE,yBAvBjD;AAwB4B,UAAA,oBAAoB,EAAE,iCAxBlD;AAyB4B,UAAA,gBAAgB,EAAE,KAAKlF,KAAL,CAAWmB,gBAzBzD;AA0B4B,UAAA,iBAAiB,EAAE,KAAKnB,KAAL,CAAWoB,iBA1B1D;AA2B4B,UAAA,eAAe,EAAE,KAAKqC;AA3BlD,UADJ,CADJ;AAiCH,OAlCM,MAkCA,IAAG,KAAKzD,KAAL,CAAWC,gBAAX,CAA4BiH,aAA5B,CAA0C,iBAA1C,KAAgE,CAAnE,EAAsE;AACzE,eACI;AAAK,UAAA,KAAK,EAAE;AAACyM,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,mBAAD;AAAS,UAAA,IAAI,EAAE,KAAKlU,KAAL,CAAW8H,IAA1B;AACwB,UAAA,WAAW,EAAE,KAAKxH,KAAL,CAAWe,WADhD;AAEwB,UAAA,cAAc,EAAE,KAAKf,KAAL,CAAWgB,cAFnD;AAGwB,UAAA,YAAY,EAAE,KAAKhB,KAAL,CAAWiB,YAHjD;AAIwB,UAAA,uBAAuB,EAAE,KAAKjB,KAAL,CAAWkB,uBAJ5D;AAKwB,UAAA,aAAa,EAAE,KAAK2D,aAL5C;AAMwB,UAAA,gBAAgB,EAAE,KAAKI,gBAN/C;AAOwB,UAAA,YAAY,EAAE,KAAKE,mBAP3C;AAQwB,UAAA,gBAAgB,EAAE,KAAKE,gBAR/C;AASwB,UAAA,yBAAyB,EAAE,KAAKI,yBATxD;AAUwB,UAAA,MAAM,EAAE,KAAKzF,KAAL,CAAWM;AAV3C,UADJ,CADJ;AAgBH,OAjBM,MAiBA,IAAG,KAAKN,KAAL,CAAWC,gBAAX,CAA4BiH,aAA5B,CAA0C,aAA1C,KAA4D,CAA/D,EAAkE;AACrE,eACI;AAAK,UAAA,KAAK,EAAE;AAACyM,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,0BAAD;AAAgB,UAAA,IAAI,EAAE,KAAKlU,KAAL,CAAW8H,IAAjC;AACwB,UAAA,UAAU,EAAE,KAAKxH,KAAL,CAAW6L,UAD/C;AAEwB,UAAA,cAAc,EAAE,KAAK7L,KAAL,CAAW9B,cAFnD;AAGwB,UAAA,oBAAoB,EAAE,KAAK8B,KAAL,CAAWQ,oBAHzD;AAIwB,UAAA,UAAU,EAAE,KAAKR,KAAL,CAAWS,UAJ/C;AAKwB,UAAA,YAAY,EAAE,KAAKiE,gBAL3C;AAMwB,UAAA,qBAAqB,EAAE,KAAKC,mBANpD;AAOwB,UAAA,eAAe,EAAE,KAAK6B,kBAP9C;AAQwB,UAAA,aAAa,EAAE,KAAKC,gBAR5C;AASwB,UAAA,MAAM,EAAE,KAAKzG,KAAL,CAAWM;AAT3C,UADJ,CADJ;AAeH,OAhBM,MAgBA,IAAG,KAAKN,KAAL,CAAWC,gBAAX,CAA4BiH,aAA5B,CAA0C,kBAA1C,KAAiE,CAApE,EAAuE;AAC1E,eACI;AAAK,UAAA,KAAK,EAAE;AAACyM,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,4BAAD;AAAkB,UAAA,IAAI,EAAE,KAAKlU,KAAL,CAAW8H,IAAnC;AACwB,UAAA,QAAQ,EAAE;AAACiC,YAAAA,EAAE,EAAE,KAAKzJ,KAAL,CAAWH,UAAhB;AAA4BuJ,YAAAA,QAAQ,EAAE,KAAKpJ,KAAL,CAAWF,gBAAjD;AAAmEiL,YAAAA,gBAAgB,EAAE,KAAK/K,KAAL,CAAWD,wBAAhG;AAA0HsB,YAAAA,WAAW,EAAE,KAAKrB,KAAL,CAAWqB;AAAlJ,WADlC;AAEwB,UAAA,UAAU,EAAE,IAFpC;AAGwB,UAAA,WAAW,EAAE,KAHrC;AAIwB,UAAA,gBAAgB,EAAE,uDAAqD,KAAKrB,KAAL,CAAW9B,cAAhE,GAA+E,IAJzH;AAKwB,UAAA,MAAM,EAAE,KAAK8B,KAAL,CAAWM;AAL3C,UADJ,CADJ;AAWH;AACJ;;;;EA5pI4C+T,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport EditarVariable from './EditarVariable.js';\nimport InstruccionVariable from '../../../InstruccionVariable.js';\nimport Formula from '../../../Formula.js';\nimport InstruccionSQL from './InstruccionSQL.js';\nimport TimelineVariable from '../../../TimelineVariable.js';\n\nvar campoSeleccionado, valorSeleccionado, valorSeleccionadoTexto, operacionSeleccionada, objetoConexionSeleccionada;\nvar tipoDeAsignacionSeleccionado = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar tipoDeAsignacionSeleccionadoVarios = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar tipoDeAsignacionSeleccionadoUnico = '';   //para saber el tipo de asignacion que se debera hacer al atributo / campo\nvar indiceFormulaSeleccionadaEdit = -1;\n\n/*COMPONENTE PARA MANEJRA CAMBIO DE VISTA ENTRE CREAR VARIABLE Y VISTA DE CONDICIONES / INSTRUCIONES*/\n/*MANEJA TODA LA LOGICA CREAR FUENTE DATO VARIABLE (OBJETO)*/\n\n/*              ARREGLO DE ATRIBUTOS               */\n/* CADA POSICION REPRESENTA UN CAMPO / ATRIBUTO / COLUMNA */\n/*\n    [ {nombre: \"IDCLIENTE\"}, {nombre: \"NOMBRECLIENTE\"} ]\n*/\n\n/*              ARREGLO DE SEGMENTO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA CONDICION IF PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}], [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}] ]\n*/\n\n/*              ARREGLO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA REGLA PERTENECIENTE AL SEGMENTO DE REGLAS CORRESPONDIENTE A LA POSICION DEL SEGMENTO DE REGLAS DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{esCondicion: FALSE}], [{esCondicion: TRUE, esCondicion: FALSE}]], [[{esCondicion: FALSE}], [{esCondicion: FALSE}]] ]\n*/\n\n/*              ARREGLO DE FORMULAS               */\n/* CADA POSICION REPRESENTA UNA FORMULA PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{formula: \"x + y\"}, {formula: \"2x + 2y\"}], [{formula: \"3x + 3y\"}] ]\n*/\n\n/*              ARREGLO DE ELEMENTOS DE FORMULAS               */\n/* CADA POSICION REPRESENTA UN ELEMENTO DE FORMULA PERTENECIENTE A LA FORMULA CORRESPONDIENTE A LA POSICION DE LA FORMULA DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{formula: \"sum(saldo)\"}, {formula: \"asig(impuesto)\"}], []], [[{formula: \"sum(saldo)\"}], []] ]\n*/\n\nvar nivelNuevoAtributoVarios = 0;                   //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar nivelNuevoAtributoUnico = 0;                    //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar indiceSeleccionadoSegmentoReglas = -1;          //indice seleccionado del segmento al que pertenece la regla\nvar indiceSeleccionadoReglas = -1;                  //indice seleccionado de la regla dentro del segmento\nvar tipoElementoSeleccionadoRegla = '';             //tipo de seleccion de cursor de regla: esOtraRegla, arriba, abajo\nvar posicionAtributoSeleccionado = -1;              //posicion del arreglo donde se debe insertar el siguiente atributo / campo /  columna (para controlar cuando se agrega condiciones / instrucciones a un nuevo atributo)\nvar indiceSeleccionadoFormula = -1;                 //indice seleccionado formula\n\nvar idFormula = '';\nvar nombreVariable = '';\nvar descripcionVariable = '';\nvar fechaInicioVariable = '';\nvar periodicidadVariable = '';\nvar responsableVariable = '';\nvar categoriaVariable = '';\n\nvar nombreCampoNuevoAtributosVario = '';\nvar atributosVario = [];\nvar reglasVariosAtributos = [];\nvar segmentoReglasVariosAtributos = [];\nvar formulasVariosAtributos = [];\nvar elementosFormulasVariosAtributos = [];\nvar atributosUnico = [];\nvar reglasUnAtributo = [];\nvar segmentoReglasUnAtributo = [];\nvar formulasUnAtributo = [];\nvar elementosFormulasUnAtributos = [];\n\nvar variablesSQL = [];\nvar instruccionSQL = '';\n\nvar banderaEsObjeto = true;                                //bandera para saber si la variable actual es objeto o no a traves de las diferentes vistas / componentes\nvar banderaEsInstruccionSQL = true;                                //bandera para saber si la variable actual es instruccion SQL o no a traves de las diferentes vistas / componentes\n\nvar contadorObjetosAGuardar = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\nvar contadorObjetosGuardados = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\n\nexport default class EditarVariablesHome extends React.Component {\n    constructor(props) {\n        super(props);\n        console.log(this.props.idVariable);\n        console.log(this.props.esObjetoVariable);\n        console.log(this.props.esInstruccionSQLVariable);\n        this.state = {\n            componenteActual: 'editarVariable',\n            atributos: [],\n            reglas: [],\n            formulas: [],\n            esCondicion: true,                             //bandera para estado de nueva regla / instruccion, saber si es nueva comparacion o regla / instruccion = verdadero; si es falso = es nueva formula / asignacion\n            navbar: \"\",\n            tipoNuevaVariable: \"\",\n            camposInstruccionSQL: [],\n            comandoSQL: \"\",\n            variables: [],\n            excel: [],\n            formas: [],\n            nombreVariable: \"\",\n            descripcionVariable: \"\",\n            objetoPadreIDVariable: -1,\n            guardarVariable: \"\",\n            esEditarVar: false,\n            esOperacionSQL: false,\n            operacionSQL: \"\",\n            formulaSeleccionadaEdit: null,\n            condicionFormula: \"\",\n            condicionElemento: \"\",\n            esColeccion: false,\n            ///\n            idVariable: this.props.idVariable,\n            esObjetoVariable: this.props.esObjetoVariable,\n            esInstruccionSQLVariable: this.props.esInstruccionSQLVariable,\n            estadoVistaVariable: {\n                mostrarFuenteDatoVariable: false,\n                mostrarFuenteDatoForma: false,\n                mostrarFuenteDatoExcel: false\n            }\n        }\n        this.loadAgain = this.loadAgain.bind(this);\n        this.traerInstruccionSQLVariable = this.traerInstruccionSQLVariable.bind(this);\n        this.traerInstruccionSQL = this.traerInstruccionSQL.bind(this);\n        this.traerVariable = this.traerVariable.bind(this);\n        this.traerSegmentosDeCampo = this.traerSegmentosDeCampo.bind(this);\n        this.traerReglasDeCampo = this.traerReglasDeCampo.bind(this);\n        this.traerFormulasDeCampo = this.traerFormulasDeCampo.bind(this);\n        this.traerElementosDeCampo = this.traerElementosDeCampo.bind(this);\n        this.loadRules = this.loadRules.bind(this);\n        this.sortRules = this.sortRules.bind(this);\n        this.returnToCreateVariable = this.returnToCreateVariable.bind(this);\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCreateVariableFieldSQL = this.goCreateVariableFieldSQL.bind(this);\n        this.goToTimeline = this.goToTimeline.bind(this);\n        this.createVariable = this.createVariable.bind(this);\n        this.getVariableID = this.getVariableID.bind(this);\n        this.updateVariable = this.updateVariable.bind(this);\n        this.createVariableSQL = this.createVariableSQL.bind(this);\n        this.createInstructionSQL = this.createInstructionSQL.bind(this);\n        this.createVariableField = this.createVariableField.bind(this);\n        this.getVariableFieldID = this.getVariableFieldID.bind(this);\n        this.createVariableFieldRuleSegments = this.createVariableFieldRuleSegments.bind(this);\n        this.getVariableFieldRuleSegments = this.getVariableFieldRuleSegments.bind(this);\n        this.createVariableFieldRules = this.createVariableFieldRules.bind(this);\n        this.traerRegla = this.traerRegla.bind(this);\n        this.createVariableFieldFormula = this.createVariableFieldFormula.bind(this);\n        this.getVariableFieldFormulaID = this.getVariableFieldFormulaID.bind(this);\n        this.createVariableFieldFormulaElement = this.createVariableFieldFormulaElement.bind(this);\n        this.limpiarArreglos = this.limpiarArreglos.bind(this);\n        this.verificarSiExisteExcelEnResultadosHistoricosModificar = this.verificarSiExisteExcelEnResultadosHistoricosModificar.bind(this);\n        this.crearTablaDeResultadoNombreModificar = this.crearTablaDeResultadoNombreModificar.bind(this);\n        this.crearResultadoNombreModificar = this.crearResultadoNombreModificar.bind(this);\n        this.modificarResultadosNombre = this.modificarResultadosNombre.bind(this);\n        this.verificarPeriodicidadGuardarModificar = this.verificarPeriodicidadGuardarModificar.bind(this);\n        this.updatePeriodicidadModificar = this.updatePeriodicidadModificar.bind(this);\n        this.retornarCampo = this.retornarCampo.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.actualizarCondicion = this.actualizarCondicion.bind(this);\n        this.cambioDeArreglosDeAtributos = this.cambioDeArreglosDeAtributos.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.guardarVariableSQL = this.guardarVariableSQL.bind(this);\n        this.guardarVariableUnAtributo = this.guardarVariableUnAtributo.bind(this);\n        this.guardarVariableVariosAtributo = this.guardarVariableVariosAtributo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.eliminarAtributoVariable = this.eliminarAtributoVariable.bind(this);\n        this.modificarNombreVariable = this.modificarNombreVariable.bind(this);\n        this.crearVariableSQL = this.crearVariableSQL.bind(this);\n        this.crearInstruccionSQL = this.crearInstruccionSQL.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.modificarFormula = this.modificarFormula.bind(this);\n        this.eliminarFormula = this.eliminarFormula.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarEstadoSiEsObjeto = this.actualizarEstadoSiEsObjeto.bind(this);\n        this.actualizarEstadoSiEsInstruccionSQL = this.actualizarEstadoSiEsInstruccionSQL.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarSeleccionFormula = this.actualizarSeleccionFormula.bind(this);\n        this.actualizarIdFormula = this.actualizarIdFormula.bind(this);\n        this.actualizarNombreVariable = this.actualizarNombreVariable.bind(this);\n        this.actualizarDescripcionVariable = this.actualizarDescripcionVariable.bind(this);\n        this.actualizarFechaInicio = this.actualizarFechaInicio.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.actualizarNombreEncargado = this.actualizarNombreEncargado.bind(this);\n        this.actualizarNombreCampoNuevoAtributosVario = this.actualizarNombreCampoNuevoAtributosVario.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.actualizarCampoSQL = this.actualizarCampoSQL.bind(this);\n        this.eliminarCampoSQL = this.eliminarCampoSQL.bind(this);\n        this.eliminarVarForma = this.eliminarVarForma.bind(this);\n        this.eliminarVarExcel = this.eliminarVarExcel.bind(this);\n        this.eliminarVariable = this.eliminarVariable.bind(this);\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n        this.cambiarEstadoVistaVariable = this.cambiarEstadoVistaVariable.bind(this);\n\n        this.saveBitacora = this.saveBitacora.bind(this);\n    }\n\n    componentDidMount () {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n        if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n            if(this.props.esInstruccionSQLVariable) {\n                console.log('p1');\n                this.traerInstruccionSQLVariable();\n            } else if(this.props.esObjetoVariable) {\n                console.log('p2');\n                this.traerVariable(true);\n                banderaEsObjeto = true;\n            } else {\n                console.log('p3');\n                this.traerVariable(false);\n                banderaEsObjeto = false;\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        //this.limpiarArreglos();\n        nivelNuevoAtributoVarios = 0;\n        nivelNuevoAtributoUnico = 0;\n        indiceSeleccionadoSegmentoReglas = -1;\n        indiceSeleccionadoReglas = -1;\n        tipoElementoSeleccionadoRegla = '';\n        posicionAtributoSeleccionado = -1;\n        indiceSeleccionadoFormula = -1;\n\n        atributosVario = [];\n        reglasVariosAtributos = [];\n        segmentoReglasVariosAtributos = [];\n        formulasVariosAtributos = [];\n        elementosFormulasVariosAtributos = [];\n        atributosUnico = [];\n        reglasUnAtributo = [];\n        segmentoReglasUnAtributo = [];\n        formulasUnAtributo = [];\n        elementosFormulasUnAtributos = [];\n\n        tipoDeAsignacionSeleccionado = '';\n        tipoDeAsignacionSeleccionadoVarios = '';\n        tipoDeAsignacionSeleccionadoUnico = '';\n\n        variablesSQL = [];\n        instruccionSQL = '';\n        $(\"#nombreFuenteDato\").val(\"\");\n        $(\"#descripcionFuenteDato\").val(\"\");\n    }\n\n    loadAgain () {\n        if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n            if(this.props.esInstruccionSQLVariable) {\n                this.traerInstruccionSQLVariable();\n            } else if(this.props.esObjetoVariable) {\n                this.traerVariable(true);\n                banderaEsObjeto = true;\n            } else {\n                this.traerVariable(false);\n                banderaEsObjeto = false;\n            }\n        }\n    }\n\n    traerInstruccionSQLVariable () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            idFormula = result.recordset[0].idFormula;\n                            nombreVariable = result.recordset[0].nombre;\n                            descripcionVariable = result.recordset[0].descripcion;\n                            $(\"#idFormula\").val(result.recordset[0].idFormula);\n                            $(\"#nombreFuenteDato\").val(result.recordset[0].nombre);\n                            $(\"#descripcionFuenteDato\").val(result.recordset[0].descripcion);\n                            if(this.props.esInstruccionSQLVariable)\n                                $(\"#esInstruccionSQL\").prop('checked', true);\n                            else\n                                $(\"#esInstruccionSQL\").prop('checked', false);\n                            if(this.props.esObjetoVariable)\n                                $(\"#esObjetoFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#esObjetoFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].guardar)\n                                $(\"#guardarFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#guardarFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].esColeccion)\n                                $(\"#esColeccion\").prop('checked', true);\n                            else\n                                $(\"#esColeccion\").prop('checked', false);\n                            banderaEsInstruccionSQL = this.props.esInstruccionSQLVariable;\n                            banderaEsObjeto = this.props.esObjetoVariable;\n                            fechaInicioVariable = result.recordset[0].fechaInicioCalculo;\n                            periodicidadVariable = result.recordset[0].periodicidad;\n                            responsableVariable = result.recordset[0].responsable;\n                            categoriaVariable = result.recordset[0].categoriaVariable;\n                            $(\"#periodicidad\").val(periodicidadVariable);\n                            $(\"#responsable\").val(responsableVariable);\n                            $(\"#categoriaVariable\").val(categoriaVariable);\n                            $(\"#fecha\").datepicker(\"setDate\", fechaInicioVariable);\n                            if(fechaInicioVariable.getFullYear() == 1964 && fechaInicioVariable.getMonth() == 4 && fechaInicioVariable.getDate() == 28){\n                                //\n                            } else {\n                                $(\"#fecha\").datepicker(\"setDate\", fechaInicioVariable);\n                            }\n                            this.setState({\n                                nombreVariable: result.recordset[0].nombre,\n                                descripcionVariable: result.recordset[0].descripcion,\n                                objetoPadreIDVariable: result.recordset[0].objetoPadreID,\n                                guardarVariable: result.recordset[0].guardar,\n                                esColeccion: result.recordset[0].esColeccion\n                            });\n                            this.traerInstruccionSQL();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerInstruccionSQL () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from InstruccionSQLCampos where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            variablesSQL = result.recordset;\n                            this.setState({\n                                camposInstruccionSQL: result.recordset\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"select * from InstruccionSQL where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(result.recordset.length > 0) {\n                            instruccionSQL = result.recordset[0].instruccionSQL;\n                            this.setState({\n                                comandoSQL: result.recordset[0].instruccionSQL\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction1\n    }\n\n    traerVariable (esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            idFormula = result.recordset[0].idFormula;\n                            nombreVariable = result.recordset[0].nombre;\n                            descripcionVariable = result.recordset[0].descripcion;\n                            $(\"#idFormula\").val(result.recordset[0].idFormula);\n                            $(\"#nombreFuenteDato\").val(result.recordset[0].nombre);\n                            $(\"#descripcionFuenteDato\").val(result.recordset[0].descripcion);\n                            if(this.props.esInstruccionSQLVariable)\n                                $(\"#esInstruccionSQL\").prop('checked', true);\n                            else\n                                $(\"#esInstruccionSQL\").prop('checked', false);\n                            if(this.props.esObjetoVariable)\n                                $(\"#esObjetoFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#esObjetoFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].guardar)\n                                $(\"#guardarFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#guardarFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].esColeccion)\n                                $(\"#esColeccion\").prop('checked', true);\n                            else\n                                $(\"#esColeccion\").prop('checked', false);\n                            banderaEsInstruccionSQL = this.props.esInstruccionSQLVariable;\n                            banderaEsObjeto = this.props.esObjetoVariable;\n                            fechaInicioVariable = result.recordset[0].fechaInicioCalculo;\n                            periodicidadVariable = result.recordset[0].periodicidad;\n                            responsableVariable = result.recordset[0].responsable;\n                            categoriaVariable = result.recordset[0].categoriaVariable;\n                            $(\"#periodicidad\").val(periodicidadVariable);\n                            $(\"#responsable\").val(responsableVariable);\n                            $(\"#fecha\").datepicker(\"setDate\", fechaInicioVariable);\n                            $(\"#categoriaVariable\").val(categoriaVariable);\n                            if(fechaInicioVariable.getFullYear() == 1964 && fechaInicioVariable.getMonth() == 4 && fechaInicioVariable.getDate() == 28){\n                                //\n                            } else {\n                                $(\"#fecha\").datepicker(\"setDate\", fechaInicioVariable);\n                            }\n                            this.setState({\n                                nombreVariable: result.recordset[0].nombre,\n                                descripcionVariable: result.recordset[0].descripcion,\n                                objetoPadreIDVariable: result.recordset[0].objetoPadreID,\n                                guardarVariable: result.recordset[0].guardar,\n                                esColeccion: result.recordset[0].esColeccion\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"select * from VariablesCampos where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(esObjeto) {\n                                atributosVario = result.recordset;\n                            } else {\n                                atributosUnico = result.recordset;\n                                tipoDeAsignacionSeleccionado = result.recordset[0].tipo;\n                                this.setState({\n                                    tipoNuevaVariable: result.recordset[0].tipo\n                                });\n                            }\n                            this.setState({\n                                atributos: result.recordset\n                            });\n                            for (var i = 0; i < result.recordset.length; i++) {\n                                this.traerSegmentosDeCampo(result.recordset[i], i, esObjeto);\n                                this.traerFormulasDeCampo(result.recordset[i], i, esObjeto);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerSegmentosDeCampo (campo, posicionAtributo, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasVariables where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            console.log('SegmentoReglasVariables');\n                            console.log('result.recordset');\n                            console.log(result.recordset);\n                            if(esObjeto) {\n                                if(segmentoReglasVariosAtributos[posicionAtributo] ==  null)\n                                    segmentoReglasVariosAtributos[posicionAtributo] = [];\n                                segmentoReglasVariosAtributos[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < segmentoReglasVariosAtributos[posicionAtributo].length; i++) {\n                                    this.traerReglasDeCampo(campo, segmentoReglasVariosAtributos[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                                console.log('segmentoReglasVariosAtributos');\n                                console.log(segmentoReglasVariosAtributos);\n                            } else {\n                                if(segmentoReglasUnAtributo[posicionAtributo] ==  null)\n                                    segmentoReglasUnAtributo[posicionAtributo] = [];\n                                segmentoReglasUnAtributo[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < segmentoReglasUnAtributo[posicionAtributo].length; i++) {\n                                    this.traerReglasDeCampo(campo, segmentoReglasUnAtributo[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                                console.log('segmentoReglasUnAtributo');\n                                console.log(segmentoReglasUnAtributo);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerReglasDeCampo (campo, segmento, posicionAtributo, posicionSegmento, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasVariables where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID+\" and segmentoReglaID = \"+segmento.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            console.log('ReglasVariables');\n                            console.log('result.recordset');\n                            console.log(result.recordset);\n                            var tempCopy = result.recordset;\n                            tempCopy.sort(function(a, b){\n                                return a.reglaPadreID-b.reglaPadreID}\n                            );\n                            if(esObjeto) {\n                                if(reglasVariosAtributos[posicionAtributo] == null)\n                                    reglasVariosAtributos[posicionAtributo] = [];\n                                if(reglasVariosAtributos[posicionAtributo][posicionSegmento] == null)\n                                    reglasVariosAtributos[posicionAtributo][posicionSegmento] = [];\n                                reglasVariosAtributos[posicionAtributo][posicionSegmento] = tempCopy;\n                                console.log('reglasVariosAtributos');\n                                console.log(reglasVariosAtributos);\n                            } else {\n                                if(reglasUnAtributo[posicionAtributo] == null)\n                                    reglasUnAtributo[posicionAtributo] = [];\n                                if(reglasUnAtributo[posicionAtributo][posicionSegmento] == null)\n                                    reglasUnAtributo[posicionAtributo][posicionSegmento] = [];\n                                reglasUnAtributo[posicionAtributo][posicionSegmento] = tempCopy;\n                                console.log('reglasUnAtributo');\n                                console.log(reglasUnAtributo);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerFormulasDeCampo (campo, posicionAtributo, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            console.log('FormulasVariablesCampos');\n                            console.log('result.recordset');\n                            console.log(result.recordset);\n                            if(esObjeto) {\n                                if(formulasVariosAtributos[posicionAtributo] == null)\n                                    formulasVariosAtributos[posicionAtributo] = [];\n                                formulasVariosAtributos[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < formulasVariosAtributos[posicionAtributo].length; i++) {\n                                    this.traerElementosDeCampo(campo, formulasVariosAtributos[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                            } else {\n                                if(formulasUnAtributo[posicionAtributo] == null)\n                                    formulasUnAtributo[posicionAtributo] = [];\n                                formulasUnAtributo[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < formulasUnAtributo[posicionAtributo].length; i++) {\n                                    this.traerElementosDeCampo(campo, formulasUnAtributo[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                                console.log('formulasUnAtributo');\n                                console.log(formulasUnAtributo);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerElementosDeCampo (campo, formula, posicionAtributo, posicionFormula, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoFormulasVariablesCampos where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID+\" and formulaID = \"+formula.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            console.log('ElementoFormulasVariablesCampos');\n                            console.log('result.recordset');\n                            console.log(result.recordset);\n                            if(esObjeto) {\n                                if(elementosFormulasVariosAtributos[posicionAtributo] == null)\n                                    elementosFormulasVariosAtributos[posicionAtributo] = [];\n                                if(elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] == null)\n                                    elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] = [];\n                                elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] = result.recordset;\n                                console.log('elementosFormulasVariosAtributos');\n                                console.log(elementosFormulasVariosAtributos);\n                            } else {\n                                if(elementosFormulasUnAtributos[posicionAtributo] == null)\n                                    elementosFormulasUnAtributos[posicionAtributo] = [];\n                                if(elementosFormulasUnAtributos[posicionAtributo][posicionFormula] == null)\n                                    elementosFormulasUnAtributos[posicionAtributo][posicionFormula] = [];\n                                elementosFormulasUnAtributos[posicionAtributo][posicionFormula] = result.recordset;\n                                console.log('elementosFormulasUnAtributos');\n                                console.log(elementosFormulasUnAtributos);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadRules() {\n        this.sortRules();\n    }\n\n    sortRules() {\n        var tempCopy = [...this.state.reglas];\n        for (var i = 0; i < tempCopy.length; i++) {\n            tempCopy[i]\n        };\n    }\n\n    returnToCreateVariable () {\n        this.loadAgain();\n        this.setState({\n            componenteActual: \"editarVariable\"\n        });\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var formulas, reglas;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(banderaEsObjeto) {\n            formulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n        } else {\n            formulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormula (indice, esEditarVarN) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Variable</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        var esOperacionSQL, operacionSQL;\n        if(posicionAtributoSeleccionado == -1) {\n            esOperacionSQL = false;\n            operacionSQL = \"\";\n        }\n        if (this.state.formulaSeleccionadaEdit != null) {\n            if(this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"ASIG\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"COUNT\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"PROM\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MAX\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MIN\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"SUM\") == 0 || \n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                operacionSQL = this.state.formulaSeleccionadaEdit.operacion;\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar,\n            esEditarVar: esEditarVarN,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    goCreateVariableFieldSQL () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Instrucción SQL</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"variableSQL\",\n        });\n    }\n\n    goToTimeline (esExcel, idVariableExcel, nombreVariable, esColeccion) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Linea de Tiempo</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Linea de Tiempo</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        if(esExcel && idVariableExcel != undefined) {\n            this.setState({\n                idVariable: idVariableExcel,\n                esObjetoVariable: false,\n                esInstruccionSQLVariable: false,\n                nombreVariable: nombreVariable,\n                esColeccion: esColeccion,\n                navbar: navbar,\n                componenteActual: \"timelineVariable\",\n            }, console.log(this.state));\n        } else {\n            this.setState({\n                idVariable: this.props.idVariable,\n                esObjetoVariable: this.props.esObjetoVariable,\n                esInstruccionSQLVariable: this.props.esInstruccionSQLVariable,\n                esColeccion: this.state.esColeccion,\n                navbar: navbar,\n                componenteActual: \"timelineVariable\",\n            });\n        }\n    }\n\n    createVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Variables ( idFormula, nombre, descripcion, esObjeto, esColeccion, objetoPadreID, esInstruccionSQL, periodicidad, fechaInicioCalculo, responsable, guardar, categoriaVariable) values ('\"+variable.idFormula+\"', '\"+variable.nombre+\"', '\"+variable.descripcion+\"', '\"+variable.esObjeto+\"', '\"+variable.esColeccion+\"', \"+variable.objetoPadreID+\", '\"+variable.esInstruccionSQL+\"', '\"+variable.periodicidad+\"', '\"+variable.fechaInicioCalculo.getFullYear()+\"-\"+(variable.fechaInicioCalculo.getMonth()+1)+\"-\"+variable.fechaInicioCalculo.getDate()+\"', '\"+variable.responsable+\"', '\"+variable.guardar+\"', '\"+variable.categoriaVariable+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable modificada.\");\n                        /*$(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");*/\n                        contadorObjetosGuardados++;\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableID (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Variables order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(banderaEsInstruccionSQL) {\n                                this.createVariableSQL(result.recordset[0]);\n                            } else {\n                                for (var i = 0; i < campos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableField(result.recordset[0], campos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updateVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update Variables set idFormula = '\"+variable.idFormula+\"' nombre = '\"+variable.nombre+\"', descripcion = '\"+variable.descripcion+\"', esObjeto = '\"+variable.esObjeto+\"', objetoPadreID = \"+variable.objetoPadreID+\", esInstruccionSQL = '\"+variable.esInstruccionSQL+\"', periodicidad = '\"+variable.periodicidad+\"', fechaInicioCalculo = '\"+variable.fechaInicioCalculo.getFullYear()+\"-\"+(variable.fechaInicioCalculo.getMonth()+1)+\"-\"+variable.fechaInicioCalculo.getDate()+\"', responsable = '\"+variable.responsable+\"', guardar = '\"+variable.guardar+\"', categoriaVariable = '\"+variable.categoriaVariable+\"' where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable modificada.\");\n                        /*$(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");*/\n                        //para en verificarSiExisteExcelEnResultadosHistoricosModificar\n                        variable.ID = this.props.idVariable;\n\n                        contadorObjetosGuardados++;\n                        if(banderaEsInstruccionSQL) {\n                            this.createVariableSQL(variable);\n                        } else {\n                            for (var i = 0; i < campos.length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableField(variable, campos[i], i);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableSQL (variable) {\n        for (let i = 0; i < variablesSQL.length; i++) {\n            let nombre = variablesSQL[i].nombre;\n            let tipo = variablesSQL[i].tipo;\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into InstruccionSQLCampos (variableID, nombre, tipo) values (\"+variable.ID+\", '\"+nombre+\"', '\"+tipo+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(i == variablesSQL.length-1)\n                                this.createInstructionSQL(variable);\n                        });\n                    }\n                });\n            }); // fin transaction\n        };\n    }\n\n    createInstructionSQL (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into InstruccionSQL (variableID, instruccionSQL) values (\"+variable.ID+\", '\"+instruccionSQL+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.limpiarArreglos();\n                        this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableField (variable, variableCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into VariablesCampos (variableID, nombre, tipo, nivel) values (\"+variable.ID+\", '\"+variableCampo.nombre+\"', '\"+variableCampo.tipo+\"', \"+variableCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldID(variable, variableCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldID (variable, variableCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where nombre = '\"+variableCampo.nombre+\"' and variableID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //si fue llamado de crear atributo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(variable, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(variable, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            console.log('HOLA 1');\n                            //this.limpiarArreglos();\n                            this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionSegmento');\n        console.log(posicionSegmento);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasVariables (conexionTablaID, variableID, variableCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esConexionTabla, esValorManual, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esConexionTabla+\"', '\"+segmento.esValorManual+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (variable, variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasVariables where conexionTablaID = \"+segmento.conexionTablaID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            /*console.log('arregloReglasDeSegmentosALlamar 1111111');\n                            console.log(arregloReglasDeSegmentosALlamar);\n                            for (var i = 0; i < arregloReglasDeSegmentosALlamar.length; i++) {\n                                console.log('arregloReglasDeSegmentosALlamar[i]');\n                                console.log(arregloReglasDeSegmentosALlamar[i]);\n                                for (var j = 0; j < arregloReglasDeSegmentosALlamar[i].length; j++) {\n                                    console.log('arregloReglasDeSegmentosALlamar[i][j]');\n                                    console.log(arregloReglasDeSegmentosALlamar[i][j]);\n                                    for (var k = 0; k < arregloReglasDeSegmentosALlamar[i][j].length; k++) {\n                                        console.log('arregloReglasDeSegmentosALlamar[i][j][k]');\n                                        console.log(arregloReglasDeSegmentosALlamar[i][j][k]);\n                                    };\n                                };\n                            };*/\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                console.log('formulas')\n                                console.log(formulas)\n                                console.log('reglas')\n                                console.log(reglas)\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        console.log('ENCONTRO')\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(variable, variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 2');\n                                //this.limpiarArreglos();\n                                this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    createVariableFieldRules (variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        if(regla != undefined) {\n            console.log('variableCampo');\n            console.log(variableCampo);\n            console.log('segmento');\n            console.log(segmento);\n            console.log('regla');\n            console.log(regla);\n            console.log('posicionAtributo');\n            console.log(posicionAtributo);\n            console.log('posicionSegmento');\n            console.log(posicionSegmento);\n            console.log('posicionRegla');\n            console.log(posicionRegla);\n            console.log('reglaPadreID');\n            console.log(reglaPadreID);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasVariables (segmentoReglaID, variableID, variableCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmentoEnCampo, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            /*console.log('arregloReglasDeSegmentosALlamar 222');\n                            console.log(arregloReglasDeSegmentosALlamar);\n                            for (var i = 0; i < arregloReglasDeSegmentosALlamar.length; i++) {\n                                console.log('arregloReglasDeSegmentosALlamar[i]');\n                                console.log(arregloReglasDeSegmentosALlamar[i]);\n                                for (var j = 0; j < arregloReglasDeSegmentosALlamar[i].length; j++) {\n                                    console.log('arregloReglasDeSegmentosALlamar[i][j]');\n                                    console.log(arregloReglasDeSegmentosALlamar[i][j]);\n                                    for (var k = 0; k < arregloReglasDeSegmentosALlamar[i][j].length; k++) {\n                                        console.log('arregloReglasDeSegmentosALlamar[i][j][k]');\n                                        console.log(arregloReglasDeSegmentosALlamar[i][j][k]);\n                                    };\n                                };\n                            };*/\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 3');\n                                //this.limpiarArreglos();\n                                this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                            } else {\n                                this.traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            console.log('HOLA 4');\n            //this.limpiarArreglos();\n            this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n        }\n    }\n\n    traerRegla(variable, variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasVariables where segmentoReglaID = \"+segmento.ID+\" and variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            console.log('posicionAtributo');\n                            console.log(posicionAtributo);\n                            console.log('posicionSegmento');\n                            console.log(posicionSegmento);\n                            console.log('posicionRegla+1');\n                            console.log(posicionRegla+1);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('result.recordset');\n                            console.log(result.recordset[0]);\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variable, variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                console.log('HOLA 5');\n                                //this.limpiarArreglos();\n                                this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasVariablesCampos (variableID, variableCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (variable, variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+variable.ID+\" and variableCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var elementosFormulas, segmentoRegla, formulas;\n                            if (banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(variable, variableCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(variable, variableCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(variableCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 6');\n                                //this.limpiarArreglos();\n                                this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (variable, variableCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        //if(elemento != undefined) {\n            console.log('variableCampo');\n            console.log(variableCampo);\n            console.log('formula');\n            console.log(formula);\n            console.log('elemento');\n            console.log(elemento);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ElementoFormulasVariablesCampos (variableID, variableCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID , excelVariableID , formaVariableID , elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+variable.ID+\", \"+variableCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.esValorManual+\"', '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                                for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                    if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                        arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                        if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                            arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 7');\n                                //this.limpiarArreglos();\n                                this.verificarSiExisteExcelEnResultadosHistoricosModificar(variable);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        /*} else {\n            console.log('HOLA 8');\n            this.limpiarArreglos();\n        }*/\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            console.log(\"BORRRO\")\n            /*nivelNuevoAtributoVarios = 0;\n            nivelNuevoAtributoUnico = 0;\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n            posicionAtributoSeleccionado = -1;\n            indiceSeleccionadoFormula = -1;\n\n            atributosVario = [];\n            reglasVariosAtributos = [];\n            segmentoReglasVariosAtributos = [];\n            formulasVariosAtributos = [];\n            elementosFormulasVariosAtributos = [];\n            atributosUnico = [];\n            reglasUnAtributo = [];\n            segmentoReglasUnAtributo = [];\n            formulasUnAtributo = [];\n            elementosFormulasUnAtributos = [];\n\n            tipoDeAsignacionSeleccionado = '';\n            tipoDeAsignacionSeleccionadoVarios = '';\n            tipoDeAsignacionSeleccionadoUnico = '';\n\n            variablesSQL = [];\n            instruccionSQL = '';*/\n\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                formulas: [],\n                camposInstruccionSQL: [],\n                comandoSQL: \"\",\n                tipoNuevaVariable: \"\"\n            });\n\n            this.getVariables();\n            if (this.props.tipoVariable.localeCompare(\"variable\") != 0) {\n                this.props.actualizarIDVariableModificada(\"variable\");\n            }\n            var esObjeto;\n            if ($(\"#esObjetoFuenteDato\").is(':checked'))\n                esObjeto = true;\n            else\n                esObjeto = false;\n            var esColeccion;\n            if ($(\"#esColeccion\").is(':checked'))\n                esColeccion = true;\n            else\n                esColeccion = false;\n            var guardarResultadosEnBaseDatos;\n            if ($(\"#guardarFuenteDato\").is(':checked'))\n                guardarResultadosEnBaseDatos = true;\n            else\n                guardarResultadosEnBaseDatos = false;\n            var esInstruccionSQL;\n            if ($(\"#esInstruccionSQL\").is(':checked'))\n                esInstruccionSQL = true;\n            else\n                esInstruccionSQL = false;\n            var nuevosValores = 'nombre: '+nombreVariable+'\\n'+\n                                'descripcion: '+descripcionVariable+'\\n'+\n                                'esObjeto: '+esObjeto+'\\n'+\n                                'esColeccion: '+esColeccion+'\\n'+\n                                'esInstruccionSQL: '+esInstruccionSQL+'\\n'+\n                                'guardar: '+guardarResultadosEnBaseDatos+'\\n'+\n                                'periodicidad: '+periodicidadVariable+'\\n'+\n                                'responsable: '+responsableVariable+'\\n'+\n                                'categoriaVariable: '+categoriaVariable+'\\n'+\n                                'fechaInicioCalculo: '+fechaInicioVariable+'\\n';\n            if (esObjeto && atributosVario.length > 0) {\n                nuevosValores += 'ATRIBUTOS\\n';\n                for (var i = 0; i < atributosVario.length; i++) {\n                    nuevosValores += 'nombre: '+atributosVario[i].nombre+', tipo: '+atributosVario[i].tipo+'\\n';\n                };\n            }\n            this.saveBitacora(hoy, \"Usuario: \"+this.props.userName+\" modifico la variable: \"+nombreVariable+\"\\nNuevos valores: \\n\"+nuevosValores, \"variable\", this.props.idVariable);\n        }\n    }\n\n    verificarSiExisteExcelEnResultadosHistoricosModificar (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ResultadosNombreVariables where nombreVariable = '\"+variable.nombre+\"' and finVigencia = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length == 0) {\n                            //this.crearTablaDeResultadoNombreModificar(variable);\n                            this.limpiarArreglos();\n                        } else {\n                            console.log(\"ENCONTRO\")\n                            console.log(result.recordset[0])\n                            console.log(result.recordset[0].inicioVigencia)\n                            this.modificarResultadosNombre(variable, result.recordset[0].inicioVigencia);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearTablaDeResultadoNombreModificar (variable) {\n        //NOMBRE TABLA: NOMBREVARIABLE_AÑOVIGENCIA_MESVIGENCIA_DIAVIGENCIA_HORAVIGENCIA_MINUTOSVIGENCIA_SEGUNDOSVIGENCIA\n        //VIGENCIA: DIA CREACION\n        let hoy = new Date();\n        var textoCreacionTabla = 'CREATE TABLE '+variable.nombre+'_'+hoy.getFullYear()+'_'+(hoy.getMonth()+1)+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+' ( ID int IDENTITY(1,1) PRIMARY KEY, ';\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < variablesSQL.length; i++) {\n                if(i != 0)\n                    textoCreacionTabla += ', ';\n                if(variablesSQL[i].tipo.localeCompare(\"decimal\") == 0) {\n                    textoCreacionTabla += variablesSQL[i].nombre+' decimal(22,4)';\n                } else if(variablesSQL[i].tipo.localeCompare(\"int\") == 0) {\n                    textoCreacionTabla += variablesSQL[i].nombre+' int';\n                } else if(variablesSQL[i].tipo.localeCompare(\"varchar\") == 0) {\n                    textoCreacionTabla += variablesSQL[i].nombre+' varchar(1000)';\n                } else if(variablesSQL[i].tipo.localeCompare(\"bit\") == 0) {\n                    textoCreacionTabla += variablesSQL[i].nombre+' bit';\n                } else if(variablesSQL[i].tipo.localeCompare(\"date\") == 0) {\n                    textoCreacionTabla += variablesSQL[i].nombre+' date';\n                }\n            };\n        } else if (!banderaEsObjeto) {\n            for (var i = 0; i < atributosUnico.length; i++) {\n                if(i != 0)\n                    textoCreacionTabla += ', ';\n                if(atributosUnico[i].tipo.localeCompare(\"decimal\") == 0) {\n                    textoCreacionTabla += atributosUnico[i].decimal+' decimal(22,4)';\n                } else if(atributosUnico[i].tipo.localeCompare(\"int\") == 0) {\n                    textoCreacionTabla += atributosUnico[i].nombre+' int';\n                } else if(atributosUnico[i].tipo.localeCompare(\"varchar\") == 0) {\n                    textoCreacionTabla += atributosUnico[i].nombre+' varchar(1000)';\n                } else if(atributosUnico[i].tipo.localeCompare(\"bit\") == 0) {\n                    textoCreacionTabla += atributosUnico[i].nombre+' bit';\n                } else if(atributosUnico[i].tipo.localeCompare(\"date\") == 0) {\n                    textoCreacionTabla += atributosUnico[i].nombre+' date';\n                }\n            };\n        } else {\n            for (var i = 0; i < atributosVario.length; i++) {\n                if(i != 0)\n                    textoCreacionTabla += ', ';\n                if(atributosVario[i].tipo.localeCompare(\"decimal\") == 0) {\n                    textoCreacionTabla += atributosVario[i].nombre+' decimal(22,4)';\n                } else if(atributosVario[i].tipo.localeCompare(\"int\") == 0) {\n                    textoCreacionTabla += atributosVario[i].nombre+' int';\n                } else if(atributosVario[i].tipo.localeCompare(\"varchar\") == 0) {\n                    textoCreacionTabla += atributosVario[i].nombre+' varchar(1000)';\n                } else if(atributosVario[i].tipo.localeCompare(\"bit\") == 0) {\n                    textoCreacionTabla += atributosVario[i].nombre+' bit';\n                } else if(atributosVario[i].tipo.localeCompare(\"date\") == 0) {\n                    textoCreacionTabla += atributosVario[i].nombre+' date';\n                }\n            };\n        }\n        textoCreacionTabla += ', f3ch4Gu4rd4do date )';\n        console.log('textoCreacionTabla')\n        console.log(textoCreacionTabla)\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(textoCreacionTabla, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //console.log(\"Tabla \"+variable.nombre+'_'+hoy.getFullYear()+'_'+hoy.getMonth()+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+\" creada.\");\n                        console.log('CREO TABLA');\n                        this.crearResultadoNombreModificar(variable, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearResultadoNombreModificar (variable, hoy) {\n        console.log('INICAR CREAR RESULTADO');\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ResultadosNombreVariables (nombreVariable, inicioVigencia, finVigencia) values ('\"+variable.nombre+\"', '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\":\"+hoy.getMinutes()+\":\"+hoy.getSeconds()+\"', '1964-05-28')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('GUARDO RESULTADO');\n                        this.verificarPeriodicidadGuardarModificar(variable, \"variable\", hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    modificarResultadosNombre (variable, hoy)  {\n        console.log('MODIFICAR CREAR RESULTADO');\n        console.log('hoy');\n        console.log(hoy);\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update ResultadosNombreVariables set finVigencia = '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\"' where ID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('GUARDO RESULTADO');\n                        this.verificarPeriodicidadGuardarModificar(variable, \"variable\", hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarPeriodicidadGuardarModificar (variable, tabla, hoy) {\n        this.limpiarArreglos();\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.updatePeriodicidadModificar(variable, tabla, hoy);\n                        }/* else {\n                            this.guardarPeriodicidad(variable, tabla, hoy);\n                        }*/\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updatePeriodicidadModificar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"' set fechaUltimoCalculo = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    retornarCampo (campoNuevo) {\n        campoSeleccionado = campoNuevo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    actualizarCondicion (esCondicion) {\n        this.setState({\n            esCondicion: esCondicion\n        });\n    }\n\n    cambioDeArreglosDeAtributos () {\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        if (esObjeto) {\n            this.setState({\n                atributos: atributosVario\n            });\n        } else {\n            this.setState({\n                atributos: atributosUnico\n            });\n        }\n    }\n\n    guardarVariable() {\n        contadorObjetosGuardados = 0;\n        contadorObjetosAGuardar = 0;\n        if (banderaEsInstruccionSQL) {\n            this.guardarVariableSQL();\n        } else if (!banderaEsObjeto) {\n            this.guardarVariableUnAtributo();\n        } else {\n            this.guardarVariableVariosAtributo();\n        }\n    }\n\n    guardarVariableSQL () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 101 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(guardarResultadosEnBaseDatos != undefined) {\n                                    if(esInstruccionSQL != undefined) {\n                                        if(!isNaN(objetoPadreID)) {\n                                            if(periodicidad.length > 0) {\n                                                if(this.isValidDate(fechaInicioCalculo) ) {\n                                                    if(responsable.length > 0) {\n                                                        if(categoria.length < 101) {\n                                                            if(!isNaN(nuevoNivel)) {\n                                                                if(variablesSQL.length > 0) {\n                                                                    if(instruccionSQL.length > 0) {\n                                                                        if (this.props.tipoVariable.localeCompare(\"excel\") == 0) {\n                                                                            this.eliminarVarExcel(false);\n                                                                        }\n                                                                        if (this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                            this.eliminarVariable(false);\n                                                                        }\n                                                                        if (this.props.tipoVariable.localeCompare(\"forma\") == 0) {\n                                                                            this.eliminarVarForma(false);\n                                                                        }\n                                                                        var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: false, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                        if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                            this.updateVariable(nuevaVariable);\n                                                                        } else {\n                                                                            this.createVariable(nuevaVariable);\n                                                                        }\n                                                                        contadorObjetosAGuardar++;\n                                                                    } else {\n                                                                        alert(\"Cree una instrucción SQL.\");\n                                                                    }\n                                                                } else {\n                                                                    alert(\"Cree una variable SQL.\");\n                                                                }\n                                                            } else {\n                                                                alert(\"Seleccione un nivel para el campo.\");\n                                                            }\n                                                        } else {\n                                                            alert(\"La categoria de variable debe ser menor a 101 caracteres.\");\n                                                        }\n                                                    } else {\n                                                        alert(\"Ingrese un valor para el responsable.\");\n                                                    }\n                                                } else {\n                                                    alert(\"Ingrese una fecha válida para el inicio de cálculo.\");\n                                                }\n                                            } else {\n                                                alert(\"Ingrese un valor para la periodicidad.\");\n                                            }\n                                        } else {\n                                            alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                        }\n                                    } else {\n                                        alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar si guardar o no variable.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\");\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                alert(\"Tiene que ingresar un nombre de la variable.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un identificador de la variable en fórmula.\");\n        }\n    }\n\n    guardarVariableUnAtributo () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var esColeccion;\n        if ($(\"#esColeccion\").is(':checked'))\n            esColeccion = true;\n        else\n            esColeccion = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 101 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(esColeccion != undefined) {\n                                    if(guardarResultadosEnBaseDatos != undefined) {\n                                        if(esInstruccionSQL != undefined) {\n                                            if(!isNaN(objetoPadreID)) {\n                                                if(periodicidad.length > 0) {\n                                                    if(this.isValidDate(fechaInicioCalculo) ) {\n                                                        if(categoria.length < 101) {\n                                                            if(responsable.length > 0) {\n                                                                if(!isNaN(nuevoNivel)) {\n                                                                    if (this.props.tipoVariable.localeCompare(\"excel\") == 0) {\n                                                                        this.eliminarVarExcel(false);\n                                                                    }\n                                                                    if (this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                        this.eliminarVariable(false);\n                                                                    }\n                                                                    if (this.props.tipoVariable.localeCompare(\"forma\") == 0) {\n                                                                        this.eliminarVarForma(false);\n                                                                    }\n                                                                    var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                                                    var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: esColeccion, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                    if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                        this.updateVariable(nuevaVariable, [nuevoAtributo]);\n                                                                    } else {\n                                                                        this.createVariable(nuevaVariable, [nuevoAtributo]);\n                                                                    }\n                                                                    contadorObjetosAGuardar++;\n                                                                } else {\n                                                                    alert(\"Seleccione un nivel para el campo.\");\n                                                                }\n                                                            } else {\n                                                                alert(\"Ingrese un valor para el responsable.\");\n                                                            }\n                                                        } else {\n                                                            alert(\"La categoria de variable debe ser menor a 101 caracteres.\");\n                                                        }\n                                                    } else {\n                                                        alert(\"Ingrese una fecha válida para el inicio de cálculo.\");\n                                                    }\n                                                } else {\n                                                    alert(\"Ingrese un valor para la periodicidad.\");\n                                                }\n                                            } else {\n                                                alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                            }\n                                        } else {\n                                            alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                                        }\n                                    } else {\n                                        alert(\"Tiene que ingresar si guardar o no variable.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar si la variable es coleccion o no.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\");\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                alert(\"Tiene que ingresar un nombre de la variable.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un identificador de la variable en fórmula.\");\n        }\n    }\n\n    guardarVariableVariosAtributo () {\n        var idFormula = $(\"#idFormula\").val();\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var esColeccion;\n        if ($(\"#esColeccion\").is(':checked'))\n            esColeccion = true;\n        else\n            esColeccion = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        /*if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();*/\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        var periodicidad = $(\"#periodicidad\").val();\n        var fechaInicioCalculo;\n        if(periodicidad.localeCompare(\"-1\") == 0) {\n            fechaInicioCalculo = new Date(1964, 4, 28);\n        } else {\n            fechaInicioCalculo = $(\"#fecha\").datepicker('getDate');\n        }\n        var responsable = $(\"#responsable\").val();\n        var categoria = $(\"#categoriaVariable\").val();\n        if(idFormula.length < 101 && idFormula.length > 0) {\n            if(nombreVariable.length < 501 && nombreVariable.length > 0) {\n                if(!this.tieneEspaciosEnBlanco(idFormula)) {\n                    if (this.verificarNoExisteNombreVar(idFormula)) {\n                        if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                            if(esObjeto != undefined) {\n                                if(esColeccion != undefined) {\n                                    if(guardarResultadosEnBaseDatos != undefined) {\n                                        if(esInstruccionSQL != undefined) {\n                                            if(!isNaN(objetoPadreID)) {\n                                                if(periodicidad.length > 0) {\n                                                    if(this.isValidDate(fechaInicioCalculo) ) {\n                                                        if(categoria.length < 101) {\n                                                            if(responsable.length > 0) {\n                                                                if(!isNaN(nuevoNivel)) {\n                                                                    if (this.props.tipoVariable.localeCompare(\"excel\") == 0) {\n                                                                        this.eliminarVarExcel(false);\n                                                                    }\n                                                                    if (this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                        this.eliminarVariable(false);\n                                                                    }\n                                                                    if (this.props.tipoVariable.localeCompare(\"forma\") == 0) {\n                                                                        this.eliminarVarForma(false);\n                                                                    }\n                                                                    var nuevaVariable = {idFormula: idFormula, nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, esColeccion: esColeccion, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos, periodicidad: periodicidad, fechaInicioCalculo: fechaInicioCalculo, responsable: responsable, categoriaVariable: categoria};\n                                                                    if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                                        this.updateVariable(nuevaVariable, atributosVario);\n                                                                    } else {\n                                                                        this.createVariable(nuevaVariable, atributosVario);\n                                                                    }\n                                                                    contadorObjetosAGuardar++;\n                                                                } else {\n                                                                    alert(\"Seleccione un nivel para el campo.\");\n                                                                }\n                                                            } else {\n                                                                alert(\"Ingrese un valor para el responsable.\");\n                                                            }\n                                                        } else {\n                                                            alert(\"La categoria de variable debe ser menor a 101 caracteres.\");\n                                                        }\n                                                    } else {\n                                                        alert(\"Ingrese una fecha válida para el inicio de cálculo.\");\n                                                    }\n                                                } else {\n                                                    alert(\"Ingrese un valor para la periodicidad.\");\n                                                }\n                                            } else {\n                                                alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                            }\n                                        } else {\n                                            alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                                        }\n                                    } else {\n                                        alert(\"Tiene que ingresar si guardar o no variable.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar si la variable es coleccion o no.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar una descripción de la variable menor a 701 caracteres.\");\n                        }\n                    } else {\n                        this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula debe ser único.', true, false, {});\n                    }\n                } else {\n                    this.props.showMessage(\"Error\", 'El identificador de la variable en fórmula no debe contener espacios en blanco.', true, false, {});\n                }\n            } else {\n                alert(\"Tiene que ingresar un nombre de la variable.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(!this.tieneEspaciosEnBlanco(nombreAtributo)) {\n                if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                    if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                        //seleccionar arreglo a insertar, si de varios atributos o unico\n                        var arreglo, nivel;\n                        if(banderaEsObjeto) {\n                            arreglo = atributosVario;\n                            nivel = nivelNuevoAtributoVarios;\n                        } else {\n                            arreglo = atributosUnico;\n                            nivel = nivelNuevoAtributoUnico;\n                        }\n                        var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                        //si la formula ya fue asignada, no agregar tipo\n                        /*if(this.state.atributos[this.state.posicionNuevoAtributo].nombre == undefined) {\n                            nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, campoEsArreglo: campoEsArreglo};\n                        } else {\n                            nuevoAtributo = this.state.atributos[this.state.posicionNuevoAtributo];\n                            nuevoAtributo.nombre = nombreAtributo;\n                            nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                        }*/\n                        arreglo.push(nuevoAtributo);\n                        this.setState({\n                            atributos: arreglo,\n                            tipoNuevaVariable: \"\"\n                        });\n                        nivelNuevoAtributoVarios = 0;\n                        if(banderaEsObjeto) {\n                            atributosVario = arreglo;\n                        } else {\n                            atributosUnico = arreglo;\n                        }\n                        nombreCampoNuevoAtributosVario = '';\n                        $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                        alert(\"Campo creado.\");\n                    } else {\n                        alert(\"Seleccione un tipo de asignación.\");\n                    }\n                } else {\n                    alert(\"El nombre del campo debe ser unico.\");\n                }\n            } else {\n                alert('El nombre del atributo no debe contener espacios en blanco');\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    eliminarAtributoVariable(index) {\n        var elementosFormulas, copiaAntiguaFormulas, reglas, segmentoRegla, atributos;\n        if(banderaEsObjeto) {\n            elementosFormulas = elementosFormulasVariosAtributos;\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n            atributos = atributosVario;\n        } else {\n            elementosFormulas = elementosFormulasUnAtributos;\n            copiaAntiguaFormulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n            atributos = atributosUnico;\n        }\n        elementosFormulas.splice(index, 1);\n        copiaAntiguaFormulas.splice(index, 1);\n        reglas.splice(index, 1);\n        segmentoRegla.splice(index, 1);\n        atributos.splice(index, 1);\n        this.setState({\n            atributos: atributos\n        });\n    }\n\n    modificarNombreVariable(index) {\n        var copyAtributos = [...this.state.atributos];\n        copyAtributos[index].nombre = $(\"#nombreAtributo\"+index).val();\n        if(!this.tieneEspaciosEnBlanco(copyAtributos[index].nombre)) {\n            this.setState({\n                atributos: copyAtributos\n            });\n        } else {\n            alert('El nombre del atributo no debe contener espacios en blanco');\n        }\n    }\n\n    crearVariableSQL () {\n        var nombreCampo = $(\"#nuevoCampo\").val();\n        var tipo = $(\"#tipo\").val();\n        if(nombreCampo.length < 101) {\n            if(!this.tieneEspaciosEnBlanco(nombreCampo)) {\n                if(this.verificarNoExisteNombreCampo(nombreCampo)) {\n                    if(tipo.length < 101) {\n                        var nuevaVar = {nombre: nombreCampo, tipo: tipo};\n                        variablesSQL.push(nuevaVar);\n                        this.setState({\n                            camposInstruccionSQL: variablesSQL\n                        });\n                    } else {\n                        alert(\"El tipo del campo debe tener una longitud menor a 31 caracteres.\");\n                    }\n                } else {\n                    alert(\"El nombre del campo debe ser unico.\");\n                }\n            } else {\n                alert('El nombre del campo no debe contener espacios en blanco');\n            }\n        } else {\n            alert(\"El nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    crearInstruccionSQL () {\n        var instruccionSQLN = $(\"#comandoSQL\").val();\n        if(instruccionSQLN.length < 101) {\n            instruccionSQL = instruccionSQLN;\n            this.setState({\n                comandoSQL: instruccionSQL\n            });\n            alert('Instrucción Guardada');\n        } else {\n            alert(\"El nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    if(!esFormula) {\n                        if(campoSeleccionado.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var valor = $(\"#valor\").val();\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        if(campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta añadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta añadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = 0;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        var elementosFormulas;\n                        if(banderaEsObjeto) {\n                            elementosFormulas = elementosFormulasVariosAtributos;\n                        } else {\n                            elementosFormulas = elementosFormulasUnAtributos;\n                        }\n                        var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                        for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                            if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"ASIG\") == 0)\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MAX\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MIN\") == 0)\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"AUTOSUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"SUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"COUNT\") == 0)\n                                tipoNuevaAsig = 'int'\n                            else\n                                tipoNuevaAsig = 'decimal'\n                            break;\n                        };\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        //tipoDeAsignacionSeleccionado\n                        //if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                        if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) ) {\n                            var nuevoNivel = 0;\n                            var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            var esValorManual = false;\n                            if(formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            } else if(formulaSeleccionada.esValorManual != undefined) {\n                                esValorManual = formulaSeleccionada.esValorManual;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID,\n                                    esValorManual: esValorManual\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            formulaSeleccionada = null;\n                            //if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoNuevaAsig\n                                });\n                            //}\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado != null && campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparación';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            else\n                alert(\"La comparación ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].elementoVariableID != undefined)\n                    elementoVariableID = formulaArreglo[i].elementoVariableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].elementoVariableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].elementoVariableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                var esValorManual = false;\n                if(formulaArreglo[i].esValorManual != undefined)\n                    esValorManual = formulaArreglo[i].esValorManual;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    esValorManual: esValorManual,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: formulaArreglo[i].tipoOriginal,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        if(!esFormula) {\n                            if(campoSeleccionado.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.esValorManual) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var elementosFormulas;\n                            if(banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                            }\n                            var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                            for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                                if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"ASIG\") == 0)\n                                    tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MAX\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"MIN\") == 0)\n                                    tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                else if(elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"AUTOSUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"SUM\") == 0 || elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].operacion.localeCompare(\"COUNT\") == 0)\n                                    tipoNuevaAsig = 'int'\n                                else\n                                    tipoNuevaAsig = 'decimal'\n                                break;\n                            };\n                            //verificando que si modifica con un tipoDeAsignacionSeleccionado diferente al existente, que pueda entrar y actualizar tipo, si existe mas de una formula no se puede\n                            var existeSoloUnaFormula = false, contadorFormulas = 0;\n                            ForReglas:\n                            for (var i = 0; i < reglas[posicionSel].length; i++) {\n                                for (var j = 0; j < reglas[posicionSel][i].length; j++) {\n                                    if(!reglas[posicionSel][i][j].esCondicion) {\n                                        contadorFormulas++;\n                                    }\n                                };\n                            };\n                            if(contadorFormulas == 1) {\n                                existeSoloUnaFormula = true;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            //if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                            if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) || existeSoloUnaFormula ) {\n                                var nuevoNivel = 0;\n                                if(banderaEsObjeto) {\n                                    nuevoNivel = nivelNuevoAtributoVarios;\n                                } else {\n                                    nuevoNivel = nivelNuevoAtributoUnico;\n                                }\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta añadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta añadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(formulaSeleccionada.tablaID != undefined) {\n                                    conexionTablaID = formulaSeleccionada.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = formulaSeleccionada.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                });\n                                //if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoNuevaAsig\n                                    });\n                                //}\n                                if (banderaEsObjeto) {\n                                    reglasVariosAtributos = reglas;\n                                    segmentoReglasVariosAtributos = segmentoRegla;\n                                } else {\n                                    reglasUnAtributo = reglas;\n                                    segmentoReglasUnAtributo = segmentoRegla;\n                                }\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparación';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparación ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    eliminarRegla () {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            if (banderaEsObjeto) {\n                reglasVariosAtributos = reglas;\n                segmentoReglasVariosAtributos = segmentoRegla;\n            } else {\n                reglasUnAtributo = reglas;\n                segmentoReglasUnAtributo = segmentoRegla;\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    modificarFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        copiaAntiguaFormulas[posicionSel][indiceFormulaSeleccionadaEdit] = formula;\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n    }\n\n    eliminarFormula() {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        copiaAntiguaFormulas[posicionSel].splice(indiceFormulaSeleccionadaEdit, 1);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        elementosFormulas[posicionSel].splice(posicionFormulaEnCampo, 1);\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        if(banderaEsObjeto) {\n            tipoDeAsignacionSeleccionadoVarios = tipoVariable;\n            tipoDeAsignacionSeleccionado = tipoVariable;\n        } else {\n            tipoDeAsignacionSeleccionadoUnico = tipoVariable;\n            tipoDeAsignacionSeleccionado = tipoVariable;\n        }\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        //indice = indice de regla dentro de arreglo de reglas\n        //tipoElemento = si la seleccion en el contenedor de reglas es cursor arriba, cursor abajo, y otra regla o otra formula\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarEstadoSiEsObjeto (esObjeto) {\n        banderaEsObjeto = esObjeto;\n        if(banderaEsObjeto) {\n            tipoDeAsignacionSeleccionado = tipoDeAsignacionSeleccionadoVarios;\n        } else {\n            tipoDeAsignacionSeleccionado = tipoDeAsignacionSeleccionadoUnico;\n        }\n        this.setState({\n            tipoNuevaVariable: tipoDeAsignacionSeleccionado\n        });\n    }\n\n    actualizarEstadoSiEsInstruccionSQL (esObjeto) {\n        banderaEsInstruccionSQL = esObjeto;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(banderaEsObjeto) {\n            if(nivelNuevoAtributoVarios < nivel)\n                nivelNuevoAtributoVarios = nivel;\n        } else {\n            if(nivelNuevoAtributoUnico < nivel)\n                nivelNuevoAtributoUnico = nivel;\n        }\n    }\n\n    actualizarSeleccionFormula (formula, indice) {\n        var condicionFormula = \" ID = \"+formula.ID, condicionElemento = \" formulaID = \"+formula.ID;\n        this.setState({\n            formulaSeleccionadaEdit: formula,\n            condicionFormula: condicionFormula,\n            condicionElemento: condicionElemento\n        });\n        indiceFormulaSeleccionadaEdit =  indice;\n    }\n\n    actualizarIdFormula () {\n        var idFormulaN = $(\"#idFormula\").val();\n        idFormula = idFormulaN;\n    }\n\n    actualizarNombreVariable () {\n        var nombreVariableN = $(\"#nombreFuenteDato\").val();\n        nombreVariable = nombreVariableN;\n    }\n\n    actualizarDescripcionVariable () {\n        var descripcionVariableN = $(\"#descripcionFuenteDato\").val();\n        descripcionVariable = descripcionVariableN;\n    }\n\n    actualizarNombreCampoNuevoAtributosVario () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributosVario = nombreCampo;\n    }\n\n    actualizarFechaInicio (fecha) {\n        fechaInicioVariable = fecha;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        periodicidadVariable = periodicidad;\n    }\n\n    actualizarNombreEncargado () {\n        var responsable = $(\"#responsable\").val();\n        responsableVariable = responsable;\n    }\n\n    actualizarCategoriaVariable () {\n        var categoria = $(\"#categoriaVariable\").val();\n        categoriaVariable = categoria;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MÁXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MÍNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            variables: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            excel: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            formas: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (idFormula) {\n        var noExiste = true;\n        for (var i = 0; i < this.state.variables.length; i++) {\n            if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                if (this.state.variables[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0 && this.state.variables[i].ID != this.props.idVariable) {\n                    noExiste = false;\n                    break;\n                }\n            } else {\n                if (this.state.variables[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < this.state.excel.length; i++) {\n                if (this.state.excel[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < this.state.formas.length; i++) {\n                if (this.state.formas[i].idFormula.toLowerCase().localeCompare(idFormula.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < variablesSQL.length; i++) {\n                if (variablesSQL[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        } else {\n            for (var i = 0; i < atributosVario.length; i++) {\n                if (atributosVario[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarCampoSQL (index, nombreN, tipoN) {\n        var tempCopy = [...variablesSQL];\n        tempCopy[index].nombre = nombreN;\n        tempCopy[index].tipo = tipoN;\n        if(!this.tieneEspaciosEnBlanco(tempCopy[index].nombre)) {\n            this.setState({\n                camposInstruccionSQL: tempCopy\n            });\n        } else {\n            alert('El nombre del campo no debe contener espacios en blanco');\n        }\n    }\n\n    eliminarCampoSQL (index) {\n        var tempCopy = [...variablesSQL];\n        tempCopy.splice(index, 1);\n        variablesSQL.splice(index, 1);\n        this.setState({\n            camposInstruccionSQL: tempCopy\n        });\n    }\n\n    eliminarVarForma (mostrar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"DELETE FROM FormasVariables WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(mostrar) {\n                            alert(\"Variable eliminada.\");\n                            this.props.retornoSeleccionVariables();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    eliminarVarExcel (mostrar) {\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request1 = new sql.Request(transaction1);\n            request1.query(\"DELETE FROM ExcelArchivos WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(mostrar) {\n                            alert(\"Variable eliminada.\");\n                            this.props.retornoSeleccionVariables();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction1\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM ExcelVariables WHERE excelArchivoID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n    }\n\n    eliminarVariable (mostrar) {\n        if(mostrar) {\n            const transaction1 = new sql.Transaction( this.props.pool );\n            transaction1.begin(err => {\n                var rolledBack = false;\n                transaction1.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request2 = new sql.Request(transaction1);\n                request2.query(\"DELETE FROM Variables WHERE ID = \"+this.props.idVariable, (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction1.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction1.commit(err => {\n                            alert(\"Variable eliminada.\");\n                            this.props.retornoSeleccionVariables();\n                        });\n                    }\n                });\n            }); // fin transaction1\n        }\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM VariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n        const transaction3 = new sql.Transaction( this.props.pool );\n        transaction3.begin(err => {\n            var rolledBack = false;\n            transaction3.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request3 = new sql.Request(transaction3);\n            request3.query(\"DELETE FROM FormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction3.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction3.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction3\n        const transaction4 = new sql.Transaction( this.props.pool );\n        transaction4.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request4 = new sql.Request(transaction4);\n            request4.query(\"DELETE FROM ElementoFormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction4.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction4.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction4\n        const transaction5 = new sql.Transaction( this.props.pool );\n        transaction5.begin(err => {\n            var rolledBack = false;\n            transaction5.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request5 = new sql.Request(transaction5);\n            request5.query(\"DELETE FROM SegmentoReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction5.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction5.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction5\n        const transaction6 = new sql.Transaction( this.props.pool );\n        transaction6.begin(err => {\n            var rolledBack = false;\n            transaction6.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request6 = new sql.Request(transaction6);\n            request6.query(\"DELETE FROM ReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction6.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction6.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction6\n        const transaction7 = new sql.Transaction( this.props.pool );\n        transaction7.begin(err => {\n            var rolledBack = false;\n            transaction7.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request7 = new sql.Request(transaction7);\n            request7.query(\"DELETE FROM InstruccionSQL WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction7.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction7.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction7\n        const transaction8 = new sql.Transaction( this.props.pool );\n        transaction8.begin(err => {\n            var rolledBack = false;\n            transaction8.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request8 = new sql.Request(transaction8);\n            request8.query(\"DELETE FROM InstruccionSQLCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction8.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction8.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                    });\n                }\n            });\n        }); // fin transaction8\n    }\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n\n    cambiarEstadoVistaVariable (mostrarFuenteDatoVariable, mostrarFuenteDatoForma, mostrarFuenteDatoExcel) {\n        this.setState({\n            estadoVistaVariable: {\n                mostrarFuenteDatoVariable: mostrarFuenteDatoVariable,\n                mostrarFuenteDatoForma: mostrarFuenteDatoForma,\n                mostrarFuenteDatoExcel: mostrarFuenteDatoExcel\n            }\n        });\n    }\n\n    saveBitacora (fecha, descripcion, tipoVariable, idVariable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Bitacora (usuarioID, nombreUsuario, fecha, descripcion, tipoVariable, idVariable) values (\"+this.props.userID+\", '\"+this.props.userName+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+descripcion+\"', '\"+tipoVariable+\"', \"+idVariable+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    this.props.showMessage(\"Error\", 'No se pudo guardar información de bitacora.', true, false, {});\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    \n    render() {\n        if(this.state.componenteActual.localeCompare(\"editarVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <EditarVariable pool={this.props.pool}\n                                                tipoVariableOriginal={this.props.tipoVariable}\n                                                idVariable={this.props.idVariable}\n                                                esObjetoVariable={this.props.esObjetoVariable}\n                                                esInstruccionSQLVariable={this.props.esInstruccionSQLVariable}\n                                                terminoCrearCampo={this.props.terminoCrearCampo}\n                                                columnas={this.props.columnas}\n                                                atributos={this.state.atributos}\n                                                cambioDeArreglosDeAtributos={this.cambioDeArreglosDeAtributos}\n                                                idFormula={idFormula}\n                                                nombreVariable={nombreVariable}\n                                                tipoNuevaVariable={this.state.tipoNuevaVariable}\n                                                actualizarIdFormula={this.actualizarIdFormula}\n                                                actualizarNombreVariable={this.actualizarNombreVariable}\n                                                descripcionVariable={descripcionVariable}\n                                                actualizarDescripcionVariable={this.actualizarDescripcionVariable}\n                                                nombreCampoNuevoAtributosVario={nombreCampoNuevoAtributosVario}\n                                                actualizarNombreCampoNuevoAtributosVario={this.actualizarNombreCampoNuevoAtributosVario}\n                                                actualizarEstadoSiEsObjeto={this.actualizarEstadoSiEsObjeto}\n                                                actualizarEstadoSiEsInstruccionSQL={this.actualizarEstadoSiEsInstruccionSQL}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                goToTimeline={this.goToTimeline}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                goToCreateConditions={this.goToCreateConditions}\n                                                goCreateVariableFieldSQL={this.goCreateVariableFieldSQL}\n                                                guardarVariable={this.guardarVariable}\n                                                crearAtributoVariable={this.crearAtributoVariable}\n                                                eliminarAtributoVariable={this.eliminarAtributoVariable}\n                                                modificarNombreVariable={this.modificarNombreVariable}\n                                                actualizarIDVariableModificada={this.props.actualizarIDVariableModificada}\n                                                changeStateFirstTimeToFalse={this.props.changeStateFirstTimeToFalse}\n                                                changeStateFirstTimeToTrue={this.props.changeStateFirstTimeToTrue}\n                                                cambiarEstadoVistaVariable={this.cambiarEstadoVistaVariable}\n                                                estadoVistaVariable={this.state.estadoVistaVariable}\n                                                esPrimeraVez={this.props.esPrimeraVez}\n                                                eliminarVariable={this.eliminarVariable}\n                                                eliminarVarForma={this.eliminarVarForma}\n                                                eliminarVarExcel={this.eliminarVarExcel}\n                                                actualizarFechaInicio={this.actualizarFechaInicio}\n                                                actualizarPeriodicidad={this.actualizarPeriodicidad}\n                                                actualizarNombreEncargado={this.actualizarNombreEncargado}\n                                                actualizarCategoriaVariable={this.actualizarCategoriaVariable}\n                                                fechaInicioVariable={fechaInicioVariable}\n                                                periodicidadVariable={periodicidadVariable}\n                                                responsableVariable={responsableVariable}\n                                                categoriaVariable={categoriaVariable}\n                                                getExcel={this.getExcel}\n                                                getFormas={this.getFormas}\n                                                limpiarArreglos={this.limpiarArreglos}\n                                                permision={this.props.permision}\n                                                userID={this.props.userID}\n                                                userName={this.props.userName}>\n                    </EditarVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                actualizarSeleccionFormula={this.actualizarSeleccionFormula}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormula}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                eliminarFormula={this.eliminarFormula}\n                                                esEditarVar={true}\n                                                tablaBorrarFormulas={\"FormulasVariablesCampos\"}\n                                                tablaBorrarElementos={\"ElementoFormulasVariablesCampos\"}\n                                                condicionFormula={this.state.condicionFormula}\n                                                condicionElemento={this.state.condicionElemento}\n                                                limpiarArreglos={this.limpiarArreglos}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            esEditarVar={this.state.esEditarVar}\n                                            esOperacionSQL={this.state.esOperacionSQL}\n                                            operacionSQL={this.state.operacionSQL}\n                                            formulaSeleccionadaEdit={this.state.formulaSeleccionadaEdit}\n                                            anadirFormula={this.anadirFormula}\n                                            modificarFormula={this.modificarFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableSQL\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionSQL pool={this.props.pool}\n                                            variableID={this.state.variableID}\n                                            nombreVariable={this.state.nombreVariable}\n                                            camposInstruccionSQL={this.state.camposInstruccionSQL}\n                                            comandoSQL={this.state.comandoSQL}\n                                            agregarCampo={this.crearVariableSQL}\n                                            agregarInstruccionSQL={this.crearInstruccionSQL}\n                                            actualizarCampo={this.actualizarCampoSQL}\n                                            eliminarCampo={this.eliminarCampoSQL}\n                                            navbar={this.state.navbar}>\n                    </InstruccionSQL>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"timelineVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <TimelineVariable pool={this.props.pool}\n                                            variable={{ID: this.state.idVariable, esObjeto: this.state.esObjetoVariable, esInstruccionSQL: this.state.esInstruccionSQLVariable, esColeccion: this.state.esColeccion}}\n                                            esVariable={true}\n                                            esIndicador={false}\n                                            tablaInstruccion={\"ResultadosNombreVariables where nombreVariable = '\"+this.state.nombreVariable+\"' \"}\n                                            navbar={this.state.navbar}>\n                    </TimelineVariable>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"EditarVariablesHome.js"}