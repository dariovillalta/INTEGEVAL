{"version":3,"sources":["components/Variables/Variables/EditarVariable/EditarVariablesHome.js"],"names":["campoSeleccionado","operacionSeleccionada","objetoConexionSeleccionada","tipoDeAsignacionSeleccionado","nivelNuevoAtributoVarios","nivelNuevoAtributoUnico","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","posicionAtributoSeleccionado","indiceSeleccionadoFormula","nombreVariable","descripcionVariable","fechaInicioVariable","periodicidadVariable","analistaVariable","nombreCampoNuevoAtributosVario","atributosVario","reglasVariosAtributos","segmentoReglasVariosAtributos","formulasVariosAtributos","elementosFormulasVariosAtributos","atributosUnico","reglasUnAtributo","segmentoReglasUnAtributo","formulasUnAtributo","elementosFormulasUnAtributos","variablesSQL","instruccionSQL","banderaEsObjeto","banderaEsInstruccionSQL","contadorObjetosAGuardar","contadorObjetosGuardados","EditarVariablesHome","props","console","log","idVariable","esObjetoVariable","esInstruccionSQLVariable","state","componenteActual","atributos","reglas","formulas","esCondicion","navbar","tipoNuevaVariable","camposInstruccionSQL","comandoSQL","variables","excel","formas","tipoVariableOriginal","tipoVariable","objetoPadreIDVariable","guardarVariable","traerInstruccionSQLVariable","bind","traerInstruccionSQL","traerVariable","traerSegmentosDeCampo","traerReglasDeCampo","traerFormulasDeCampo","traerElementosDeCampo","loadRules","sortRules","returnToCreateVariable","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormula","goCreateVariableFieldSQL","createVariable","updateVariable","getVariableID","createVariableSQL","createInstructionSQL","createVariableField","getVariableFieldID","createVariableFieldRuleSegments","getVariableFieldRuleSegments","createVariableFieldRules","traerRegla","createVariableFieldFormula","getVariableFieldFormulaID","createVariableFieldFormulaElement","retornarCampo","retornarValor","actualizarCondicion","cambioDeArreglosDeAtributos","guardarVariableSQL","guardarVariableUnAtributo","guardarVariableVariosAtributo","crearAtributoVariable","crearVariableSQL","crearInstruccionSQL","anadirRegla","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","retornoCampoFormula","retornoCampoCondicion","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarEstadoSiEsObjeto","actualizarEstadoSiEsInstruccionSQL","actualizarNivelNuevaRegla","actualizarNombreVariable","actualizarDescripcionVariable","actualizarFechaInicio","actualizarPeriodicidad","actualizarNombreEncargado","actualizarNombreCampoNuevoAtributosVario","retornarCodigoOperacion","getVariables","getExcel","getFormas","verificarNoExisteNombreVar","verificarNoExisteNombreCampo","actualizarCampoSQL","eliminarCampoSQL","eliminarVarForma","eliminarVarExcel","eliminarVariable","localeCompare","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","rollback","commit","recordset","length","nombre","descripcion","$","val","prop","guardar","getFullYear","getMonth","getDate","datepicker","setState","transaction1","esObjeto","objetoPadreID","i","campo","posicionAtributo","ID","segmento","posicionSegmento","tempCopy","sort","a","b","reglaPadreID","formula","posicionFormula","indice","configuracionHome","goOptions","retornoSeleccionVariables","posicionSel","undefined","variable","campos","esInstruccionSQL","alert","tipo","limpiarArreglos","variableCampo","nivel","segmentoRegla","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","push","posicionFormulaEnCampo","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","conexionTablaID","variableID","excelArchivoID","excelVariableID","formaVariableID","esConexionTabla","nivelMax","splice","k","segmentoReglaID","formulaID","regla","posicionRegla","nombreColumnaEnTabla","tipoCampoObjetivo","operacion","operacionTexto","valor","texto","elementosFormulas","existenSegmentos","elemento","posicionElemento","esFuenteDeDato","elementoVariableID","elementoVariableCampoID","tipoColumnaEnTabla","actualizarIDVariableModificada","campoNuevo","campoNuevoTexto","valorSeleccionado","valorSeleccionadoTexto","is","guardarResultadosEnBaseDatos","nuevoNivel","isNaN","nuevaVariable","nuevoAtributo","nombreAtributo","arreglo","nombreCampo","nuevaVar","instruccionSQLN","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","nivelABuscar","reglaEsValida","indexOf","entrarACrearRegla","tablaID","variableSel","filter","object","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevaRegla","variableCampoID","posicionAInsertar","tempNewCopy","self","setTimeout","texto2","formulaArreglo","copiaAntiguaFormulas","numeroDeFormulaDeVariable","arregloDeElementos","array","Array","isArray","esFuenteDato","tipoOriginal","indiceSegmento","indiceRegla","tipoElemento","nombreVariableN","descripcionVariableN","fecha","periodicidad","analista","codigo","noExiste","toLowerCase","index","nombreN","tipoN","request1","transaction2","request2","transaction3","request3","transaction4","request4","transaction5","request5","transaction6","request6","transaction7","request7","transaction8","request8","width","height","terminoCrearCampo","columnas","changeStateFirstTimeToFalse","esPrimeraVez","nombreTablaSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport EditarVariable from './EditarVariable.js';\nimport InstruccionVariable from '../../../InstruccionVariable.js';\nimport Formula from '../../../Formula.js';\nimport InstruccionSQL from './InstruccionSQL.js';\n\nvar campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada;\nvar tipoDeAsignacionSeleccionado;   //para saber el tipo de asignacion que se debera hacer al atributo / campo\n\n/*COMPONENTE PARA MANEJRA CAMBIO DE VISTA ENTRE CREAR VARIABLE Y VISTA DE CONDICIONES / INSTRUCIONES*/\n/*MANEJA TODA LA LOGICA CREAR FUENTE DATO VARIABLE (OBJETO)*/\n\n/*              ARREGLO DE ATRIBUTOS               */\n/* CADA POSICION REPRESENTA UN CAMPO / ATRIBUTO / COLUMNA */\n/*\n    [ {nombre: \"IDCLIENTE\"}, {nombre: \"NOMBRECLIENTE\"} ]\n*/\n\n/*              ARREGLO DE SEGMENTO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA CONDICION IF PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}], [{esConexionTabla: FALSE}, {esConexionTabla: TRUE}] ]\n*/\n\n/*              ARREGLO DE REGLAS               */\n/* CADA POSICION REPRESENTA UNA REGLA PERTENECIENTE AL SEGMENTO DE REGLAS CORRESPONDIENTE A LA POSICION DEL SEGMENTO DE REGLAS DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{esCondicion: FALSE}], [{esCondicion: TRUE, esCondicion: FALSE}]], [[{esCondicion: FALSE}], [{esCondicion: FALSE}]] ]\n*/\n\n/*              ARREGLO DE FORMULAS               */\n/* CADA POSICION REPRESENTA UNA FORMULA PERTENECIENTE AL ATRIBUTO CORRESPONDIENTE A LA POSICION DEL ATRIBUTO */\n/*\n    [ [{formula: \"x + y\"}, {formula: \"2x + 2y\"}], [{formula: \"3x + 3y\"}] ]\n*/\n\n/*              ARREGLO DE ELEMENTOS DE FORMULAS               */\n/* CADA POSICION REPRESENTA UN ELEMENTO DE FORMULA PERTENECIENTE A LA FORMULA CORRESPONDIENTE A LA POSICION DE LA FORMULA DENTRO DE LA POSICION DEL ATRIBUTO */\n/*\n    [ [[{formula: \"sum(saldo)\"}, {formula: \"asig(impuesto)\"}], []], [[{formula: \"sum(saldo)\"}], []] ]\n*/\n\nvar nivelNuevoAtributoVarios = 0;                   //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar nivelNuevoAtributoUnico = 0;                    //nivel del nuevo atributo a agregar | cambia con al seleccionar regla, o agregar variable a una formula\nvar indiceSeleccionadoSegmentoReglas = -1;          //indice seleccionado del segmento al que pertenece la regla\nvar indiceSeleccionadoReglas = -1;                  //indice seleccionado de la regla dentro del segmento\nvar tipoElementoSeleccionadoRegla = '';             //tipo de seleccion de cursor de regla: esOtraRegla, arriba, abajo\nvar posicionAtributoSeleccionado = -1;              //posicion del arreglo donde se debe insertar el siguiente atributo / campo /  columna (para controlar cuando se agrega condiciones / instrucciones a un nuevo atributo)\nvar indiceSeleccionadoFormula = -1;                 //indice seleccionado formula\n\nvar nombreVariable = '';\nvar descripcionVariable = '';\nvar fechaInicioVariable = '';\nvar periodicidadVariable = '';\nvar analistaVariable = '';\n\nvar nombreCampoNuevoAtributosVario = '';\nvar atributosVario = [];\nvar reglasVariosAtributos = [];\nvar segmentoReglasVariosAtributos = [];\nvar formulasVariosAtributos = [];\nvar elementosFormulasVariosAtributos = [];\nvar atributosUnico = [];\nvar reglasUnAtributo = [];\nvar segmentoReglasUnAtributo = [];\nvar formulasUnAtributo = [];\nvar elementosFormulasUnAtributos = [];\n\nvar variablesSQL = [];\nvar instruccionSQL = '';\n\nvar banderaEsObjeto = true;                                //bandera para saber si la variable actual es objeto o no a traves de las diferentes vistas / componentes\nvar banderaEsInstruccionSQL = true;                                //bandera para saber si la variable actual es instruccion SQL o no a traves de las diferentes vistas / componentes\n\nvar contadorObjetosAGuardar = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\nvar contadorObjetosGuardados = 0;                            //bandera que lleva el total de objetos a guardar para limpiar los arreglos despues\n\nexport default class EditarVariablesHome extends React.Component {\n    constructor(props) {\n        super(props);\n        console.log(this.props.idVariable);\n        console.log(this.props.esObjetoVariable);\n        console.log(this.props.esInstruccionSQLVariable);\n        this.state = {\n            componenteActual: 'editarVariable',\n            atributos: [],\n            reglas: [],\n            formulas: [],\n            esCondicion: true,                             //bandera para estado de nueva regla / instruccion, saber si es nueva comparacion o regla / instruccion = verdadero; si es falso = es nueva formula / asignacion\n            navbar: \"\",\n            tipoNuevaVariable: \"\",\n            camposInstruccionSQL: [],\n            comandoSQL: \"\",\n            variables: [],\n            excel: [],\n            formas: [],\n            tipoVariableOriginal: this.props.tipoVariable,\n            nombreVariable: \"\",\n            descripcionVariable: \"\",\n            objetoPadreIDVariable: -1,\n            guardarVariable: \"\",\n        }\n        this.traerInstruccionSQLVariable = this.traerInstruccionSQLVariable.bind(this);\n        this.traerInstruccionSQL = this.traerInstruccionSQL.bind(this);\n        this.traerVariable = this.traerVariable.bind(this);\n        this.traerSegmentosDeCampo = this.traerSegmentosDeCampo.bind(this);\n        this.traerReglasDeCampo = this.traerReglasDeCampo.bind(this);\n        this.traerFormulasDeCampo = this.traerFormulasDeCampo.bind(this);\n        this.traerElementosDeCampo = this.traerElementosDeCampo.bind(this);\n        this.loadRules = this.loadRules.bind(this);\n        this.sortRules = this.sortRules.bind(this);\n        this.returnToCreateVariable = this.returnToCreateVariable.bind(this);\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCreateVariableFieldSQL = this.goCreateVariableFieldSQL.bind(this);\n        this.createVariable = this.createVariable.bind(this);\n        this.updateVariable = this.updateVariable.bind(this);\n        this.getVariableID = this.getVariableID.bind(this);\n        this.createVariableSQL = this.createVariableSQL.bind(this);\n        this.createInstructionSQL = this.createInstructionSQL.bind(this);\n        this.createVariableField = this.createVariableField.bind(this);\n        this.getVariableFieldID = this.getVariableFieldID.bind(this);\n        this.createVariableFieldRuleSegments = this.createVariableFieldRuleSegments.bind(this);\n        this.getVariableFieldRuleSegments = this.getVariableFieldRuleSegments.bind(this);\n        this.createVariableFieldRules = this.createVariableFieldRules.bind(this);\n        this.traerRegla = this.traerRegla.bind(this);\n        this.createVariableFieldFormula = this.createVariableFieldFormula.bind(this);\n        this.getVariableFieldFormulaID = this.getVariableFieldFormulaID.bind(this);\n        this.createVariableFieldFormulaElement = this.createVariableFieldFormulaElement.bind(this);\n        this.retornarCampo = this.retornarCampo.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.actualizarCondicion = this.actualizarCondicion.bind(this);\n        this.cambioDeArreglosDeAtributos = this.cambioDeArreglosDeAtributos.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.guardarVariableSQL = this.guardarVariableSQL.bind(this);\n        this.guardarVariableUnAtributo = this.guardarVariableUnAtributo.bind(this);\n        this.guardarVariableVariosAtributo = this.guardarVariableVariosAtributo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.crearVariableSQL = this.crearVariableSQL.bind(this);\n        this.crearInstruccionSQL = this.crearInstruccionSQL.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarEstadoSiEsObjeto = this.actualizarEstadoSiEsObjeto.bind(this);\n        this.actualizarEstadoSiEsInstruccionSQL = this.actualizarEstadoSiEsInstruccionSQL.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarNombreVariable = this.actualizarNombreVariable.bind(this);\n        this.actualizarDescripcionVariable = this.actualizarDescripcionVariable.bind(this);\n        this.actualizarFechaInicio = this.actualizarFechaInicio.bind(this);\n        this.actualizarPeriodicidad = this.actualizarPeriodicidad.bind(this);\n        this.actualizarNombreEncargado = this.actualizarNombreEncargado.bind(this);\n        this.actualizarNombreCampoNuevoAtributosVario = this.actualizarNombreCampoNuevoAtributosVario.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.getVariables = this.getVariables.bind(this);\n        this.getExcel = this.getExcel.bind(this);\n        this.getFormas = this.getFormas.bind(this);\n        this.verificarNoExisteNombreVar = this.verificarNoExisteNombreVar.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.actualizarCampoSQL = this.actualizarCampoSQL.bind(this);\n        this.eliminarCampoSQL = this.eliminarCampoSQL.bind(this);\n        this.eliminarVarForma = this.eliminarVarForma.bind(this);\n        this.eliminarVarExcel = this.eliminarVarExcel.bind(this);\n        this.eliminarVariable = this.eliminarVariable.bind(this);\n    }\n\n    componentDidMount () {\n        this.getVariables();\n        this.getExcel();\n        this.getFormas();\n        if(this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n            if(this.props.esInstruccionSQLVariable) {\n                console.log('p1');\n                this.traerInstruccionSQLVariable();\n            } else if(this.props.esObjetoVariable) {\n                console.log('p2');\n                this.traerVariable(true);\n                banderaEsObjeto = true;\n            } else {\n                console.log('p3');\n                this.traerVariable(false);\n                banderaEsObjeto = false;\n            }\n        }\n    }\n\n    traerInstruccionSQLVariable () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('result.recordset');\n                        console.log(result.recordset);\n                        if(result.recordset.length > 0) {\n                            nombreVariable = result.recordset[0].nombre;\n                            descripcionVariable = result.recordset[0].descripcion;\n                            $(\"#nombreFuenteDato\").val(result.recordset[0].nombre);\n                            $(\"#descripcionFuenteDato\").val(result.recordset[0].descripcion);\n                            if(this.props.esInstruccionSQLVariable)\n                                $(\"#esInstruccionSQL\").prop('checked', true);\n                            else\n                                $(\"#esInstruccionSQL\").prop('checked', false);\n                            if(this.props.esObjetoVariable)\n                                $(\"#esObjetoFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#esObjetoFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].guardar)\n                                $(\"#guardarFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#guardarFuenteDato\").prop('checked', false);\n                            fechaInicioVariable = result.recordset[0].nombre;\n                            periodicidadVariable = result.recordset[0].nombre;\n                            analistaVariable = result.recordset[0].nombre;\n                            $(\"#periodicidad\").val(periodicidadVariable);\n                            $(\"#analista\").val(analistaVariable);\n                            if(fechaInicioVariable.getFullYear() != 1964 && fechaInicioVariable.getMonth() != 4 && fechaInicioVariable.getDate() != 28)\n                                $(\"#fecha\").datepicker(\"setDate\", fechaInicioVariable);\n                            /*this.setState({\n                                nombreVariable: result.recordset[0].nombre,\n                                descripcionVariable: result.recordset[0].descripcion,\n                                objetoPadreIDVariable: result.recordset[0].objetoPadreID,\n                                guardarVariable: result.recordset[0].guardar\n                            });*/\n                            this.traerInstruccionSQL();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerInstruccionSQL () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from InstruccionSQLCampos where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            variablesSQL = result.recordset;\n                            this.setState({\n                                camposInstruccionSQL: result.recordset\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"select * from InstruccionSQL where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(result.recordset.length > 0) {\n                            instruccionSQL = result.recordset[0].instruccionSQL;\n                            this.setState({\n                                comandoSQL: result.recordset[0].instruccionSQL\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction1\n    }\n\n    traerVariable (esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('result.recordset');\n                        console.log(result.recordset);\n                        if(result.recordset.length > 0) {\n                            nombreVariable = result.recordset[0].nombre;\n                            descripcionVariable = result.recordset[0].descripcion;\n                            $(\"#nombreFuenteDato\").val(result.recordset[0].nombre);\n                            $(\"#descripcionFuenteDato\").val(result.recordset[0].descripcion);\n                            if(this.props.esInstruccionSQLVariable)\n                                $(\"#esInstruccionSQL\").prop('checked', true);\n                            else\n                                $(\"#esInstruccionSQL\").prop('checked', false);\n                            if(this.props.esObjetoVariable)\n                                $(\"#esObjetoFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#esObjetoFuenteDato\").prop('checked', false);\n                            if(result.recordset[0].guardar)\n                                $(\"#guardarFuenteDato\").prop('checked', true);\n                            else\n                                $(\"#guardarFuenteDato\").prop('checked', false);\n                            this.setState({\n                                nombreVariable: result.recordset[0].nombre,\n                                descripcionVariable: result.recordset[0].descripcion,\n                                objetoPadreIDVariable: result.recordset[0].objetoPadreID,\n                                guardarVariable: result.recordset[0].guardar\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"select * from VariablesCampos where variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(esObjeto) {\n                                atributosVario = result.recordset;\n                            } else {\n                                atributosUnico = result.recordset;\n                            }\n                            this.setState({\n                                atributos: result.recordset\n                            });\n                            for (var i = 0; i < result.recordset.length; i++) {\n                                this.traerSegmentosDeCampo(result.recordset[i], i, esObjeto);\n                                this.traerFormulasDeCampo(result.recordset[i], i, esObjeto);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerSegmentosDeCampo (campo, posicionAtributo, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasVariables where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('1');\n                        if(result.recordset.length > 0) {\n                            if(esObjeto) {\n                                if(segmentoReglasVariosAtributos[posicionAtributo] ==  null)\n                                    segmentoReglasVariosAtributos[posicionAtributo] = [];\n                                segmentoReglasVariosAtributos[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < segmentoReglasVariosAtributos[posicionAtributo].length; i++) {\n                                    this.traerReglasDeCampo(campo, segmentoReglasVariosAtributos[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                            } else {\n                                if(segmentoReglasUnAtributo[posicionAtributo] ==  null)\n                                    segmentoReglasUnAtributo[posicionAtributo] = [];\n                                segmentoReglasUnAtributo[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < segmentoReglasUnAtributo[posicionAtributo].length; i++) {\n                                    this.traerReglasDeCampo(campo, segmentoReglasUnAtributo[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerReglasDeCampo (campo, segmento, posicionAtributo, posicionSegmento, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasVariables where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID+\" and segmentoReglaID = \"+segmento.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('2');\n                        if(result.recordset.length > 0) {\n                            var tempCopy = result.recordset;\n                            tempCopy.sort(function(a, b){\n                                return a.reglaPadreID-b.reglaPadreID}\n                            );\n                            console.log('tempCopy')\n                            console.log(tempCopy)\n                            if(esObjeto) {\n                                if(reglasVariosAtributos[posicionAtributo] == null)\n                                    reglasVariosAtributos[posicionAtributo] = [];\n                                if(reglasVariosAtributos[posicionAtributo][posicionSegmento] == null)\n                                    reglasVariosAtributos[posicionAtributo][posicionSegmento] = [];\n                                reglasVariosAtributos[posicionAtributo][posicionSegmento] = tempCopy;\n                            } else {\n                                if(reglasUnAtributo[posicionAtributo] == null)\n                                    reglasUnAtributo[posicionAtributo] = [];\n                                if(reglasUnAtributo[posicionAtributo][posicionSegmento] == null)\n                                    reglasUnAtributo[posicionAtributo][posicionSegmento] = [];\n                                reglasUnAtributo[posicionAtributo][posicionSegmento] = tempCopy;\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerFormulasDeCampo (campo, posicionAtributo, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('11');\n                        if(result.recordset.length > 0) {\n                            if(esObjeto) {\n                                if(formulasVariosAtributos[posicionAtributo] == null)\n                                    formulasVariosAtributos[posicionAtributo] = [];\n                                formulasVariosAtributos[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < formulasVariosAtributos[posicionAtributo].length; i++) {\n                                    this.traerElementosDeCampo(campo, formulasVariosAtributos[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                            } else {\n                                if(formulasUnAtributo[posicionAtributo] == null)\n                                    formulasUnAtributo[posicionAtributo] = [];\n                                formulasUnAtributo[posicionAtributo] = result.recordset;\n                                for (var i = 0; i < formulasUnAtributo[posicionAtributo].length; i++) {\n                                    this.traerElementosDeCampo(campo, formulasUnAtributo[posicionAtributo][i], posicionAtributo, i, esObjeto);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerElementosDeCampo (campo, formula, posicionAtributo, posicionFormula, esObjeto) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoFormulasVariablesCampos where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+campo.ID+\" and formulaID = \"+formula.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('22');\n                        console.log('result.recordset');\n                        console.log(result.recordset);\n                        if(result.recordset.length > 0) {\n                            if(esObjeto) {\n                                if(elementosFormulasVariosAtributos[posicionAtributo] == null)\n                                    elementosFormulasVariosAtributos[posicionAtributo] = [];\n                                if(elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] == null)\n                                    elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] = [];\n                                elementosFormulasVariosAtributos[posicionAtributo][posicionFormula] = result.recordset;\n                            } else {\n                                if(elementosFormulasUnAtributos[posicionAtributo] == null)\n                                    elementosFormulasUnAtributos[posicionAtributo] = [];\n                                if(elementosFormulasUnAtributos[posicionAtributo][posicionFormula] == null)\n                                    elementosFormulasUnAtributos[posicionAtributo][posicionFormula] = [];\n                                elementosFormulasUnAtributos[posicionAtributo][posicionFormula] = result.recordset;\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadRules() {\n        this.sortRules();\n    }\n\n    sortRules() {\n        var tempCopy = [...this.state.reglas];\n        for (var i = 0; i < tempCopy.length; i++) {\n            tempCopy[i]\n        };\n    }\n\n    returnToCreateVariable () {\n        this.setState({\n            componenteActual: \"editarVariable\"\n        });\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var formulas, reglas;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(banderaEsObjeto) {\n            formulas = formulasVariosAtributos;\n            reglas = reglasVariosAtributos;\n        } else {\n            formulas = formulasUnAtributo;\n            reglas = reglasUnAtributo;\n        }\n        console.log('posicionSel');\n        console.log(posicionSel);\n        console.log('formulas[posicionSel]');\n        console.log(formulas[posicionSel]);\n        console.log('reglas[posicionSel]');\n        console.log(reglas[posicionSel]);\n        console.log('formulas');\n        console.log(formulas);\n        console.log('reglas');\n        console.log(reglas);\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormula (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar\n        });\n    }\n\n    goCreateVariableFieldSQL () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.returnToCreateVariable}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Variable</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Instruccin SQL</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"variableSQL\",\n        });\n    }\n\n    createVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Variables (nombre, descripcion, esObjeto, objetoPadreID, esInstruccionSQL, guardar) values ('\"+variable.nombre+\"', '\"+variable.descripcion+\"', '\"+variable.esObjeto+\"', \"+variable.objetoPadreID+\", '\"+variable.esInstruccionSQL+\"', '\"+variable.guardar+\"')\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable modificada.\");\n                        $(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");\n                        contadorObjetosGuardados++;\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updateVariable (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update Variables set nombre = '\"+variable.nombre+\"', descripcion = '\"+variable.descripcion+\"', esObjeto = '\"+variable.esObjeto+\"', objetoPadreID = \"+variable.objetoPadreID+\", esInstruccionSQL = '\"+variable.esInstruccionSQL+\"', guardar = '\"+variable.guardar+\"' where ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"variable modificada.\");\n                        $(\"#nombreFuenteDato\").val(\"\");\n                        $(\"#descripcionFuenteDato\").val(\"\");\n                        contadorObjetosGuardados++;\n                        this.getVariableID(variable, campos);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableID (variable, campos) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Variables order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(banderaEsInstruccionSQL) {\n                                this.createVariableSQL(result.recordset[0]);\n                            } else {\n                                for (var i = 0; i < campos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableField(result.recordset[0], campos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableSQL () {\n        for (var i = 0; i < variablesSQL.length; i++) {\n            let nombre = variablesSQL[i].nombre;\n            let tipo = variablesSQL[i].tipo;\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into InstruccionSQLCampos (variableID, nombre, tipo) values (\"+this.props.idVariable+\", '\"+nombre+\"', '\"+tipo+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(i == variablesSQL.length-1)\n                                this.createInstructionSQL();\n                        });\n                    }\n                });\n            }); // fin transaction\n        };\n    }\n\n    createInstructionSQL () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into InstruccionSQL (variableID, instruccionSQL) values (\"+this.props.idVariable+\", '\"+instruccionSQL+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.limpiarArreglos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableField (variableCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into VariablesCampos (variableID, nombre, tipo, nivel) values (\"+this.props.idVariable+\", '\"+variableCampo.nombre+\"', '\"+variableCampo.tipo+\"', \"+variableCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldID(variableCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldID (variableCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where nombre = '\"+variableCampo.nombre+\"' and variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //si fue llamado de crear atributo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            console.log('HOLA 1');\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasVariables (conexionTablaID, variableID, variableCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+variable.ID+\", \"+variableCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (variableCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglas where conexionTablaID = \"+segmento.conexionTablaID+\" and variableID = \"+this.props.idVariable+\" and variableCampoID = \"+variableCampo.ID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            /*console.log('arregloReglasDeSegmentosALlamar 1111111');\n                            console.log(arregloReglasDeSegmentosALlamar);\n                            for (var i = 0; i < arregloReglasDeSegmentosALlamar.length; i++) {\n                                console.log('arregloReglasDeSegmentosALlamar[i]');\n                                console.log(arregloReglasDeSegmentosALlamar[i]);\n                                for (var j = 0; j < arregloReglasDeSegmentosALlamar[i].length; j++) {\n                                    console.log('arregloReglasDeSegmentosALlamar[i][j]');\n                                    console.log(arregloReglasDeSegmentosALlamar[i][j]);\n                                    for (var k = 0; k < arregloReglasDeSegmentosALlamar[i][j].length; k++) {\n                                        console.log('arregloReglasDeSegmentosALlamar[i][j][k]');\n                                        console.log(arregloReglasDeSegmentosALlamar[i][j][k]);\n                                    };\n                                };\n                            };*/\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                console.log('formulas')\n                                console.log(formulas)\n                                console.log('reglas')\n                                console.log(reglas)\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        console.log('ENCONTRO')\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(variableCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 2');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    createVariableFieldRules (variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        if(regla != undefined) {\n            console.log('variableCampo');\n            console.log(variableCampo);\n            console.log('segmento');\n            console.log(segmento);\n            console.log('regla');\n            console.log(regla);\n            console.log('posicionAtributo');\n            console.log(posicionAtributo);\n            console.log('posicionSegmento');\n            console.log(posicionSegmento);\n            console.log('posicionRegla');\n            console.log(posicionRegla);\n            console.log('reglaPadreID');\n            console.log(reglaPadreID);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into Reglas (segmentoReglaID, variableID, variableCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmento, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+this.props.idVariable+\", \"+variableCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            /*console.log('arregloReglasDeSegmentosALlamar 222');\n                            console.log(arregloReglasDeSegmentosALlamar);\n                            for (var i = 0; i < arregloReglasDeSegmentosALlamar.length; i++) {\n                                console.log('arregloReglasDeSegmentosALlamar[i]');\n                                console.log(arregloReglasDeSegmentosALlamar[i]);\n                                for (var j = 0; j < arregloReglasDeSegmentosALlamar[i].length; j++) {\n                                    console.log('arregloReglasDeSegmentosALlamar[i][j]');\n                                    console.log(arregloReglasDeSegmentosALlamar[i][j]);\n                                    for (var k = 0; k < arregloReglasDeSegmentosALlamar[i][j].length; k++) {\n                                        console.log('arregloReglasDeSegmentosALlamar[i][j][k]');\n                                        console.log(arregloReglasDeSegmentosALlamar[i][j][k]);\n                                    };\n                                };\n                            };*/\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 3');\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            console.log('HOLA 4');\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(variableCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('variableCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Reglas where segmentoReglaID = \"+segmento.ID+\" and variableID = \"+this.props.idVariable+\" and variableCampoID = \"+variableCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            console.log('posicionAtributo');\n                            console.log(posicionAtributo);\n                            console.log('posicionSegmento');\n                            console.log(posicionSegmento);\n                            console.log('posicionRegla+1');\n                            console.log(posicionRegla+1);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('result.recordset');\n                            console.log(result.recordset[0]);\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(variableCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                console.log('HOLA 5');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasVariablesCampos (variableID, variableCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+this.props.idVariable+\", \"+variableCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (variableCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableID = \"+this.props.idVariable+\" and variableCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var elementosFormulas, segmentoRegla, formulas;\n                            if (banderaEsObjeto) {\n                                elementosFormulas = elementosFormulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                elementosFormulas = elementosFormulasUnAtributos;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(variableCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(variableCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(variableCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 6');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (variableCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        //if(elemento != undefined) {\n            console.log('variableCampo');\n            console.log(variableCampo);\n            console.log('formula');\n            console.log(formula);\n            console.log('elemento');\n            console.log(elemento);\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ElementoFormulasVariablesCampos (variableID, variableCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID , excelVariableID , formaVariableID , elementoVariableID, elementoVariableCampoID, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+this.props.idVariable+\", \"+variableCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                                for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                    if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                        arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                        if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                            arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 7');\n                                this.limpiarArreglos();\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        /*} else {\n            console.log('HOLA 8');\n            this.limpiarArreglos();\n        }*/\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            console.log(\"BORRRO\")\n            nivelNuevoAtributoVarios = 0;\n            nivelNuevoAtributoUnico = 0;\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n            posicionAtributoSeleccionado = -1;\n            indiceSeleccionadoFormula = -1;\n\n            atributosVario = [];\n            reglasVariosAtributos = [];\n            segmentoReglasVariosAtributos = [];\n            formulasVariosAtributos = [];\n            elementosFormulasVariosAtributos = [];\n            atributosUnico = [];\n            reglasUnAtributo = [];\n            segmentoReglasUnAtributo = [];\n            formulasUnAtributo = [];\n            elementosFormulasUnAtributos = [];\n\n            variablesSQL = [];\n            instruccionSQL = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                formulas: [],\n                camposInstruccionSQL: [],\n                comandoSQL: \"\",\n                tipoNuevaVariable: \"\"\n            });\n\n            this.getVariables();\n            this.getExcel();\n            this.getFormas();\n            if (this.props.tipoVariableOriginal.localeCompare(\"variable\") == 0) {\n                this.props.actualizarIDVariableModificada(\"variable\");\n            }\n        }\n    }\n\n    retornarCampo (campoNuevo) {\n        campoSeleccionado = campoNuevo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    actualizarCondicion (esCondicion) {\n        this.setState({\n            esCondicion: esCondicion\n        });\n    }\n\n    cambioDeArreglosDeAtributos () {\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        if (esObjeto) {\n            this.setState({\n                atributos: atributosVario\n            });\n        } else {\n            this.setState({\n                atributos: atributosUnico\n            });\n        }\n    }\n\n    guardarVariable() {\n        contadorObjetosGuardados = 0;\n        contadorObjetosAGuardar = 0;\n        if (this.props.tipoVariable.localeCompare(\"excel\") == 0) {\n            this.eliminarVarExcel();\n        }\n        if (this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n            this.eliminarVariable();\n        }\n        if (this.props.tipoVariable.localeCompare(\"forma\") == 0) {\n            this.eliminarVarForma();\n        }\n        if (banderaEsInstruccionSQL) {\n            this.guardarVariableSQL();\n        } else if (!banderaEsObjeto) {\n            this.guardarVariableUnAtributo();\n        } else {\n            this.guardarVariableVariosAtributo();\n        }\n    }\n\n    guardarVariableSQL () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                if(esObjeto != undefined) {\n                    if(guardarResultadosEnBaseDatos != undefined) {\n                        if(esInstruccionSQL != undefined) {\n                            if(!isNaN(objetoPadreID)) {\n                                if(!isNaN(nuevoNivel)) {\n                                    if(variablesSQL.length > 0) {\n                                        if(instruccionSQL.length > 0) {\n                                            var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos};\n                                            if (this.props.tipoVariable.localeCompare(\"variable\") == 0) {\n                                                this.updateVariable(nuevaVariable);\n                                            } else {\n                                                this.createVariable(nuevaVariable);\n                                            }\n                                            contadorObjetosAGuardar++;\n                                        } else {\n                                            alert(\"Cree una instruccin SQL.\");\n                                        }\n                                    } else {\n                                        alert(\"Cree una variable SQL.\");\n                                    }\n                                } else {\n                                    alert(\"Seleccione un nivel para el campo.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar un valor para objeto padre.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si guardar o no variable.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                }\n            } else {\n                alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    guardarVariableUnAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if (this.verificarNoExisteNombreVar(nombreVariable)) {\n                if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                    if(esObjeto != undefined) {\n                        if(guardarResultadosEnBaseDatos != undefined) {\n                            if(esInstruccionSQL != undefined) {\n                                if(!isNaN(objetoPadreID)) {\n                                    if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                                        if(!isNaN(nuevoNivel)) {\n                                            var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                            //si la formula ya fue asignada, no agregar tipo\n                                            /*if(atributosUnico[0].tipo == undefined) {\n                                                nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                            } else {\n                                                nuevoAtributo = atributosUnico[0];\n                                                nuevoAtributo.nombre = nombreVariable;\n                                                nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                                nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                            }*/\n                                            var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos};\n                                            nivelNuevoAtributoUnico = 0;\n                                            console.log('nuevoAtributo');\n                                            console.log(nuevoAtributo);\n                                            if (this.props.tipoVariableOriginal.localeCompare(\"variable\") == 0) {\n                                                this.updateVariable(nuevaVariable, [nuevoAtributo]);\n                                            } else {\n                                                this.createVariable(nuevaVariable, [nuevoAtributo]);\n                                            }\n                                            contadorObjetosAGuardar++;\n                                        } else {\n                                            alert(\"Seleccione un nivel para el campo.\");\n                                        }\n                                    } else {\n                                        alert(\"Seleccione un tipo de asignacin.\");\n                                    }\n                                } else {\n                                    alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si guardar o no variable.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre de la variable debe ser unico.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    guardarVariableVariosAtributo () {\n        var nombreVariable = $(\"#nombreFuenteDato\").val();\n        var descripcionVariable = $(\"#descripcionFuenteDato\").val();\n        var esObjeto;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            esObjeto = true;\n        else\n            esObjeto = false;\n        var guardarResultadosEnBaseDatos;\n        if ($(\"#guardarFuenteDato\").is(':checked'))\n            guardarResultadosEnBaseDatos = true;\n        else\n            guardarResultadosEnBaseDatos = false;\n        var objetoPadreID = -1;\n        if ($(\"#esObjetoFuenteDato\").is(':checked'))\n            objetoPadreID = $(\"#objetoPadreID\").val();\n        var nuevoNivel = 0;\n        if(banderaEsObjeto) {\n            nuevoNivel = nivelNuevoAtributoVarios;\n        } else {\n            nuevoNivel = nivelNuevoAtributoUnico;\n        }\n        var esInstruccionSQL;\n        if ($(\"#esInstruccionSQL\").is(':checked'))\n            esInstruccionSQL = true;\n        else\n            esInstruccionSQL = false;\n        if(nombreVariable.length < 101 && nombreVariable.length > 0) {\n            if (this.verificarNoExisteNombreVar(nombreVariable)) {\n                if(descripcionVariable.length < 701) {      //if(operacionSeleccionada.valor != undefined) {\n                    if(esObjeto != undefined) {\n                        if(guardarResultadosEnBaseDatos != undefined) {\n                            if(esInstruccionSQL != undefined) {\n                                if(!isNaN(objetoPadreID)) {\n                                    //if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                                        if(!isNaN(nuevoNivel)) {\n                                            //var nuevoAtributo = {nombre: nombreVariable, tipo: tipoDeAsignacionSeleccionado, nivel: nuevoNivel};\n                                            //si la formula ya fue asignada, no agregar tipo\n                                            /*if(atributosUnico[0].tipo == undefined) {\n                                                nuevoAtributo = {nombre: nombreVariable, tipo: '', campoEsArreglo: campoEsArreglo,  nivel: nivelNuevoAtributoUnico};\n                                            } else {\n                                                nuevoAtributo = atributosUnico[0];\n                                                nuevoAtributo.nombre = nombreVariable;\n                                                nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                                                nuevoAtributo.nivel = nivelNuevoAtributoUnico;\n                                            }*/\n                                            var nuevaVariable = {nombre: nombreVariable, descripcion: descripcionVariable, esObjeto: esObjeto, objetoPadreID: objetoPadreID, esInstruccionSQL: esInstruccionSQL, guardar: guardarResultadosEnBaseDatos};\n                                            if (this.props.tipoVariableOriginal.localeCompare(\"variable\") == 0) {\n                                                this.updateVariable(nuevaVariable, atributosVario);\n                                            } else {\n                                                this.createVariable(nuevaVariable, atributosVario);\n                                            }\n                                            nivelNuevoAtributoVarios = 0;\n                                            contadorObjetosAGuardar++;\n                                        } else {\n                                            alert(\"Seleccione un nivel para el campo.\");\n                                        }\n                                    /*} else {\n                                        alert(\"Seleccione un tipo de asignacin.\");\n                                    }*/\n                                } else {\n                                    alert(\"Tiene que ingresar un valor para objeto padre.\");\n                                }\n                            } else {\n                                alert(\"Tiene que ingresar si la variable se calcula con intrucciones SQL.\");\n                            }\n                        } else {\n                            alert(\"Tiene que ingresar si guardar o no variable.\");\n                        }\n                    } else {\n                        alert(\"Tiene que ingresar si la variable tiene un atributo o muchos.\");\n                    }\n                } else {\n                    alert(\"Tiene que ingresar una descripcin de la variable menor a 701 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre de la variable debe ser unico.\");\n            }\n        } else {\n            alert(\"Tiene que ingresar un nombre de la variable.\");\n        }\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                    //seleccionar arreglo a insertar, si de varios atributos o unico\n                    var arreglo, nivel;\n                    if(banderaEsObjeto) {\n                        arreglo = atributosVario;\n                        nivel = nivelNuevoAtributoVarios;\n                    } else {\n                        arreglo = atributosUnico;\n                        nivel = nivelNuevoAtributoUnico;\n                    }\n                    var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                    //si la formula ya fue asignada, no agregar tipo\n                    /*if(this.state.atributos[this.state.posicionNuevoAtributo].nombre == undefined) {\n                        nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, campoEsArreglo: campoEsArreglo};\n                    } else {\n                        nuevoAtributo = this.state.atributos[this.state.posicionNuevoAtributo];\n                        nuevoAtributo.nombre = nombreAtributo;\n                        nuevoAtributo.campoEsArreglo = campoEsArreglo;\n                    }*/\n                    arreglo.push(nuevoAtributo);\n                    this.setState({\n                        atributos: arreglo,\n                        tipoNuevaVariable: \"\"\n                    });\n                    nivelNuevoAtributoVarios = 0;\n                    if(banderaEsObjeto) {\n                        atributosVario = arreglo;\n                    } else {\n                        atributosUnico = arreglo;\n                    }\n                    nombreCampoNuevoAtributosVario = '';\n                    $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                    alert(\"Campo creado.\");\n                } else {\n                    alert(\"Seleccione un tipo de asignacin.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    crearVariableSQL () {\n        var nombreCampo = $(\"#nuevoCampo\").val();\n        var tipo = $(\"#tipo\").val();\n        if(nombreCampo.length < 101) {\n            if(this.verificarNoExisteNombreCampo(nombreCampo)) {\n                if(tipo.length < 101) {\n                    var nuevaVar = {nombre: nombreCampo, tipo: tipo};\n                    variablesSQL.push(nuevaVar);\n                    this.setState({\n                        camposInstruccionSQL: variablesSQL\n                    });\n                } else {\n                    alert(\"El tipo del campo debe tener una longitud menor a 31 caracteres.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"El nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    crearInstruccionSQL () {\n        var instruccionSQLN = $(\"#comandoSQL\").val();\n        if(instruccionSQL.length < 101) {\n            instruccionSQL = instruccionSQLN;\n            this.setState({\n                comandoSQL: instruccionSQL\n            });\n            alert('Instruccin Guardada');\n        } else {\n            alert(\"El nombre del campo debe tener una longitud menor a 101 caracteres.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        console.log('formulaSeleccionada');\n        console.log(formulaSeleccionada);\n        console.log('indiceSeleccionadoSegmentoReglas');\n        console.log(indiceSeleccionadoSegmentoReglas);\n        console.log('indiceSeleccionadoReglas');\n        console.log(indiceSeleccionadoReglas);\n        console.log('tipoElementoSeleccionadoRegla');\n        console.log(tipoElementoSeleccionadoRegla);\n        console.log('posicionFormulaSeleccionada');\n        console.log(posicionFormulaSeleccionada);\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        console.log('reglas');\n        console.log(reglas);\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    console.log('segmentoRegla');\n                    console.log(segmentoRegla);\n                    console.log('campoSeleccionado');\n                    console.log(campoSeleccionado);\n                    console.log('formulaSeleccionada');\n                    console.log(formulaSeleccionada);\n                    console.log('formulasVariosAtributos');\n                    console.log(formulasVariosAtributos);\n                    console.log('posicionAtributo');\n                    console.log(posicionAtributo);\n                    console.log('indiceSeleccionadoSegmentoReglas');\n                    console.log(indiceSeleccionadoSegmentoReglas);\n                    console.log('segmentoRegla');\n                    console.log(segmentoRegla);\n                    if(!esFormula) {\n                        console.log('1');\n                        if(campoSeleccionado.tablaID != undefined) {\n                            console.log('1.1');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                console.log('1.1.1');\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            console.log('1.2');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                console.log('1.2.2');\n                                entrarACrearRegla = true;\n                            }\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        console.log('2');\n                        console.log(formulaSeleccionada);\n                        if(formulaSeleccionada.tablaID != undefined) {\n                            console.log('2.1');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                console.log('2.1.1');\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined) {\n                            console.log('2.2');\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                console.log('2.2.2');\n                                entrarACrearRegla = true;\n                            }\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var valor = $(\"#valor\").val();\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        if(campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta aadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta aadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = 0;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valor,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            console.log('1')\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            console.log('2')\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                console.log('2.1')\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                console.log('2.2')\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                console.log('2.2')\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                console.log('2.2')\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        //reglas[posicionSel].push(nuevaRegla);\n                        console.log('reglas');\n                        console.log(reglas);\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        console.log('posicionInsertarReglaAtributo');\n                        console.log(posicionInsertarReglaAtributo);\n                        console.log('posicionInsertarReglaSegmento');\n                        console.log(posicionInsertarReglaSegmento);\n                        console.log('indiceSeleccionadoReglas');\n                        console.log(indiceSeleccionadoReglas);\n                        console.log('campoSeleccionado')\n                        console.log(campoSeleccionado)\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        //tipoDeAsignacionSeleccionado\n                        if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                            console.log(\"INICIO AGREGAR FORMULA\");\n                            var nuevoNivel = 0;\n                            var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            if(formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                console.log('1')\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                console.log('2')\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    console.log('2.1')\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    console.log('2.2')\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    console.log('2.2')\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    console.log('2.2')\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            }, console.log(this.state.reglas) );\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('segmentoRegla');\n                            console.log(segmentoRegla);\n                            console.log('posicionInsertarReglaAtributo');\n                            console.log(posicionInsertarReglaAtributo);\n                            console.log('posicionInsertarReglaSegmento');\n                            console.log(posicionInsertarReglaSegmento);\n                            console.log('indiceSeleccionadoReglas');\n                            console.log(indiceSeleccionadoReglas);\n                            console.log('formulaSeleccionada')\n                            console.log(formulaSeleccionada)\n                            var self = this;\n                            setTimeout(function(){\n                                console.log(self.state.reglas)\n                            }, 2000);\n                            formulaSeleccionada = null;\n                            if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                });\n                            }\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparacin';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            else\n                alert(\"La comparacin ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        console.log('formula');\n        console.log(formula);\n        console.log('formulaArreglo');\n        console.log(formulaArreglo);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        //copia antigua formulas\n        var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].elementoVariableID != undefined)\n                    elementoVariableID = formulaArreglo[i].elementoVariableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].elementoVariableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].elementoVariableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n        if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }\n        console.log('elementosFormulas');\n        console.log(elementosFormulas);\n        console.log('copiaAntiguaFormulas[posicionSel]');\n        console.log(copiaAntiguaFormulas[posicionSel]);\n        console.log('copiaAntiguaFormulas');\n        console.log(copiaAntiguaFormulas);\n        console.log('posicionSel');\n        console.log(posicionSel);\n        console.log('posicionFormulaEnCampo');\n        console.log(posicionFormulaEnCampo);\n        var self = this;\n        setTimeout(function(){\n            console.log(self.state.formulas)\n        }, 2000);\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: formulaArreglo[i].tipoOriginal,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            console.log('reglas');\n            console.log(reglas);\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        console.log('campoSeleccionado');\n                        console.log(campoSeleccionado);\n                        console.log('formulaSeleccionada');\n                        console.log(formulaSeleccionada);\n                        console.log('formulasVariosAtributos');\n                        console.log(formulasVariosAtributos);\n                        console.log('posicionAtributo');\n                        console.log(posicionAtributo);\n                        console.log('indiceSeleccionadoSegmentoReglas');\n                        console.log(indiceSeleccionadoSegmentoReglas);\n                        console.log('segmentoRegla');\n                        console.log(segmentoRegla);\n                        if(!esFormula) {\n                            console.log('1');\n                            if(campoSeleccionado.tablaID != undefined) {\n                                console.log('1.1');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    console.log('1.1.1');\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                console.log('1.2');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    console.log('1.2.2');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            console.log('2');\n                            console.log(formulaSeleccionada);\n                            if(formulaSeleccionada.tablaID != undefined) {\n                                console.log('2.1');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    console.log('2.1.1');\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.variableID != undefined) {\n                                console.log('2.2');\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    console.log('2.2.2');\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                                formulaID: -1,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                tipoCampoObjetivo: campoSeleccionado.tipo,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                operacion: operacionSeleccionada.operacion,\n                                                operacionTexto: operacionSeleccionada.operacionTexto,\n                                                valor: valor,\n                                                texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            //reglas[posicionSel].push(nuevaRegla);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('segmentoRegla');\n                            console.log(segmentoRegla);\n                            console.log('posicionInsertarReglaAtributo');\n                            console.log(posicionInsertarReglaAtributo);\n                            console.log('posicionInsertarReglaSegmento');\n                            console.log(posicionInsertarReglaSegmento);\n                            console.log('indiceSeleccionadoReglas');\n                            console.log(indiceSeleccionadoReglas);\n                            console.log('campoSeleccionado')\n                            console.log(campoSeleccionado)\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                                console.log(\"INICIO AGREGAR FORMULA\");\n                                var nuevoNivel = 0;\n                                if(banderaEsObjeto) {\n                                    nuevoNivel = nivelNuevoAtributoVarios;\n                                } else {\n                                    nuevoNivel = nivelNuevoAtributoUnico;\n                                }\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta aadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta aadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(campoSeleccionado.tablaID != undefined) {\n                                    conexionTablaID = campoSeleccionado.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = campoSeleccionado.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                }, console.log(this.state.reglas) );\n                                console.log('reglas');\n                                console.log(reglas);\n                                console.log('segmentoRegla');\n                                console.log(segmentoRegla);\n                                console.log('posicionInsertarReglaAtributo');\n                                console.log(posicionInsertarReglaAtributo);\n                                console.log('posicionInsertarReglaSegmento');\n                                console.log(posicionInsertarReglaSegmento);\n                                console.log('indiceSeleccionadoReglas');\n                                console.log(indiceSeleccionadoReglas);\n                                console.log('formulaSeleccionada')\n                                console.log(formulaSeleccionada)\n                                var self = this;\n                                setTimeout(function(){\n                                    console.log(self.state.reglas)\n                                }, 2000);\n                                if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                    });\n                                }\n                                if (banderaEsObjeto) {\n                                    reglasVariosAtributos = reglas;\n                                    segmentoReglasVariosAtributos = segmentoRegla;\n                                } else {\n                                    reglasUnAtributo = reglas;\n                                    segmentoReglasUnAtributo = segmentoRegla;\n                                }\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparacin';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparacin ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    eliminarRegla () {\n        var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            console.log('reglas');\n            console.log(reglas);\n            console.log('segmentoRegla');\n            console.log(segmentoRegla);\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            if (banderaEsObjeto) {\n                reglasVariosAtributos = reglas;\n                segmentoReglasVariosAtributos = segmentoRegla;\n            } else {\n                reglasUnAtributo = reglas;\n                segmentoReglasUnAtributo = segmentoRegla;\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    retornoCampoFormula (tipoVariableOriginal) {\n        tipoDeAsignacionSeleccionado = tipoVariableOriginal;\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        //indice = indice de regla dentro de arreglo de reglas\n        //tipoElemento = si la seleccion en el contenedor de reglas es cursor arriba, cursor abajo, y otra regla o otra formula\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarEstadoSiEsObjeto (esObjeto) {\n        banderaEsObjeto = esObjeto;\n    }\n\n    actualizarEstadoSiEsInstruccionSQL (esObjeto) {\n        banderaEsInstruccionSQL = esObjeto;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(banderaEsObjeto) {\n            if(nivelNuevoAtributoVarios < nivel)\n                nivelNuevoAtributoVarios = nivel;\n        } else {\n            if(nivelNuevoAtributoUnico < nivel)\n                nivelNuevoAtributoUnico = nivel;\n        }\n    }\n\n    actualizarNombreVariable () {\n        var nombreVariableN = $(\"#nombreFuenteDato\").val();\n        nombreVariable = nombreVariableN;\n    }\n\n    actualizarDescripcionVariable () {\n        var descripcionVariableN = $(\"#descripcionFuenteDato\").val();\n        descripcionVariable = descripcionVariableN;\n    }\n\n    actualizarNombreCampoNuevoAtributosVario () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributosVario = nombreCampo;\n    }\n\n    actualizarFechaInicio (fecha) {\n        fechaInicioVariable = fecha;\n    }\n\n    actualizarPeriodicidad () {\n        var periodicidad = $(\"#periodicidad\").val();\n        periodicidadVariable = periodicidad;\n    }\n\n    actualizarNombreEncargado () {\n        var analista = $(\"#analista\").val();\n        analistaVariable = analista;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    getVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            variables: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getExcel() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ExcelVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            excel: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFormas() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormasVariables\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            formas: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarNoExisteNombreVar (nombre) {\n        var noExiste = true;\n        for (var i = 0; i < this.state.variables.length; i++) {\n            if (this.state.variables[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                noExiste = false;\n                break;\n            }\n        };\n        if(noExiste) {\n            for (var i = 0; i < this.state.excel.length; i++) {\n                if (this.state.excel[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        if(noExiste) {\n            for (var i = 0; i < this.state.formas.length; i++) {\n                if (this.state.formas[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < variablesSQL.length; i++) {\n                if (variablesSQL[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        } else {\n            for (var i = 0; i < atributosVario.length; i++) {\n                if (atributosVario[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    actualizarCampoSQL (index, nombreN, tipoN) {\n        variablesSQL[index].nombre = nombreN;\n        variablesSQL[index].tipo = tipoN;\n    }\n\n    eliminarCampoSQL (index) {\n        variablesSQL.splice(index, 1);\n    }\n\n    actualizarCampoSQL (index, nombreN, tipoN) {\n        variablesSQL[index].nombre = nombreN;\n        variablesSQL[index].tipo = tipoN;\n    }\n\n    eliminarCampoSQL (index) {\n        variablesSQL.splice(index, 1);\n    }\n\n    eliminarVarForma () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"DELETE FROM FormasVariables WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    eliminarVarExcel () {\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request1 = new sql.Request(transaction1);\n            request1.query(\"DELETE FROM ExcelArchivos WHERE ID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction1\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM ExcelVariables WHERE excelArchivoID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n    }\n\n    eliminarVariable () {\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request2 = new sql.Request(transaction2);\n            request2.query(\"DELETE FROM VariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n        const transaction3 = new sql.Transaction( this.props.pool );\n        transaction3.begin(err => {\n            var rolledBack = false;\n            transaction3.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request3 = new sql.Request(transaction3);\n            request3.query(\"DELETE FROM FormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction3.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction3.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction3\n        const transaction4 = new sql.Transaction( this.props.pool );\n        transaction4.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request4 = new sql.Request(transaction4);\n            request4.query(\"DELETE FROM ElementoFormulasVariablesCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction4.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction4.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction4\n        const transaction5 = new sql.Transaction( this.props.pool );\n        transaction5.begin(err => {\n            var rolledBack = false;\n            transaction5.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request5 = new sql.Request(transaction5);\n            request5.query(\"DELETE FROM SegmentoReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction5.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction5.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction5\n        const transaction6 = new sql.Transaction( this.props.pool );\n        transaction6.begin(err => {\n            var rolledBack = false;\n            transaction6.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request6 = new sql.Request(transaction6);\n            request6.query(\"DELETE FROM ReglasVariables WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction6.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction6.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction6\n        const transaction7 = new sql.Transaction( this.props.pool );\n        transaction7.begin(err => {\n            var rolledBack = false;\n            transaction7.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request7 = new sql.Request(transaction7);\n            request7.query(\"DELETE FROM InstruccionSQL WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction7.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction7.commit(err => {\n                        this.limpiarArreglos();\n                    });\n                }\n            });\n        }); // fin transaction7\n        const transaction8 = new sql.Transaction( this.props.pool );\n        transaction8.begin(err => {\n            var rolledBack = false;\n            transaction8.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request8 = new sql.Request(transaction8);\n            request8.query(\"DELETE FROM InstruccionSQLCampos WHERE variableID = \"+this.props.idVariable, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction8.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction8.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                    });\n                }\n            });\n        }); // fin transaction8\n    }\n    \n    render() {\n        if(this.state.componenteActual.localeCompare(\"editarVariable\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <EditarVariable pool={this.props.pool}\n                                                tipoVariableOriginal={this.state.tipoVariableOriginal}\n                                                idVariable={this.props.idVariable}\n                                                esObjetoVariable={this.props.esObjetoVariable}\n                                                esInstruccionSQLVariable={this.props.esInstruccionSQLVariable}\n                                                terminoCrearCampo={this.props.terminoCrearCampo}\n                                                columnas={this.props.columnas}\n                                                atributos={this.state.atributos}\n                                                cambioDeArreglosDeAtributos={this.cambioDeArreglosDeAtributos}\n                                                nombreVariable={nombreVariable}\n                                                tipoNuevaVariable={this.state.tipoNuevaVariable}\n                                                actualizarNombreVariable={this.actualizarNombreVariable}\n                                                descripcionVariable={descripcionVariable}\n                                                actualizarDescripcionVariable={this.actualizarDescripcionVariable}\n                                                nombreCampoNuevoAtributosVario={nombreCampoNuevoAtributosVario}\n                                                actualizarNombreCampoNuevoAtributosVario={this.actualizarNombreCampoNuevoAtributosVario}\n                                                actualizarEstadoSiEsObjeto={this.actualizarEstadoSiEsObjeto}\n                                                actualizarEstadoSiEsInstruccionSQL={this.actualizarEstadoSiEsInstruccionSQL}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                goToCreateConditions={this.goToCreateConditions}\n                                                goCreateVariableFieldSQL={this.goCreateVariableFieldSQL}\n                                                guardarVariable={this.guardarVariable}\n                                                crearAtributoVariable={this.crearAtributoVariable}\n                                                actualizarIDVariableModificada={this.props.actualizarIDVariableModificada}\n                                                changeStateFirstTimeToFalse={this.props.changeStateFirstTimeToFalse}\n                                                esPrimeraVez={this.props.esPrimeraVez}\n                                                eliminarVariable={this.eliminarVariable}\n                                                eliminarVarForma={this.eliminarVarForma}\n                                                eliminarVarExcel={this.eliminarVarExcel}\n                                                actualizarFechaInicio={this.actualizarFechaInicio}\n                                                actualizarPeriodicidad={this.actualizarPeriodicidad}\n                                                actualizarNombreEncargado={this.actualizarNombreEncargado}\n                                                fechaInicioVariable={fechaInicioVariable}\n                                                periodicidadVariable={periodicidadVariable}\n                                                analistaVariable={analistaVariable}>\n                    </EditarVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormula}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            anadirFormula={this.anadirFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableSQL\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionSQL pool={this.props.pool}\n                                            variableID={this.state.variableID}\n                                            nombreVariable={this.state.nombreVariable}\n                                            camposInstruccionSQL={this.state.camposInstruccionSQL}\n                                            comandoSQL={this.state.comandoSQL}\n                                            agregarCampo={this.crearVariableSQL}\n                                            agregarInstruccionSQL={this.crearInstruccionSQL}\n                                            actualizarCampo={this.actualizarCampoSQL}\n                                            eliminarCampo={this.eliminarCampoSQL}\n                                            navbar={this.state.navbar}>\n                    </InstruccionSQL>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"EditarVariablesHome.js"}