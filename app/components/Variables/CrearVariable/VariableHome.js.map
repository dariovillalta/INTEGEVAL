{"version":3,"sources":["components/Variables/CrearVariable/VariableHome.js"],"names":["isMounted","VariableHome","props","state","componenteActual","idVariable","nombreVariable","descripcionVariable","esObjetoVariable","idObjetoPadreVariable","crearVariable","bind","retornoSeleccionVariable","editarVariable","retornoEditarVariable","terminoCrearVariablePasarAEdit","setState","showRiesgos","self","console","log","setTimeout","nombreFuenteDatos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","rollback","commit","recordset","undefined","length","ID","nombre","descripcion","esObjeto","objetoPadreID","localeCompare","configuracionHome","goOptions","showCondicionVar","showFormula","updateNavBar","showUmbralHome","updateFormula","retornoSeleccionVariableSameComponent","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarVariable from './SeleccionarVariable.js';\nimport CrearVariable from './CrearVariable.js';\nimport EditarVariable from './EditarVariable.js';\n\nvar isMounted = false;\n\nexport default class VariableHome extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: \"selVariable\",\n            idVariable: -1,\n            nombreVariable: \"\",\n            descripcionVariable: \"\",\n            esObjetoVariable: \"\",\n            idObjetoPadreVariable: -1\n        }\n        this.crearVariable = this.crearVariable.bind(this);\n        this.retornoSeleccionVariable = this.retornoSeleccionVariable.bind(this);\n        this.editarVariable = this.editarVariable.bind(this);\n        this.retornoEditarVariable = this.retornoEditarVariable.bind(this);\n        this.terminoCrearVariablePasarAEdit = this.terminoCrearVariablePasarAEdit.bind(this);\n    }\n\n    componentDidMount() {\n        isMounted = true;\n    }\n    componentWillUnmount() {\n        isMounted = false;\n    }\n\n    crearVariable () {\n        this.setState({\n            componenteActual: \"crearVariable\"\n        });\n    }\n\n    retornoSeleccionVariable () {\n        this.setState({\n            componenteActual: \"selVariable\",\n            idVariable: -1,\n            nombreVariable: \"\",\n            descripcionVariable: \"\",\n            esObjetoVariable: \"\",\n            idObjetoPadreVariable: -1\n        });\n    }\n\n    editarVariable (idVariable, nombreVariable, descripcionVariable, esObjetoVariable, idObjetoPadreVariable) {\n        this.setState({\n            idVariable: idVariable,\n            componenteActual: \"editarVariable\",\n            nombreVariable: nombreVariable,\n            descripcionVariable: descripcionVariable,\n            esObjetoVariable: esObjetoVariable,\n            idObjetoPadreVariable: -1\n        });\n    }\n\n    retornoEditarVariable () {\n        this.props.showRiesgos();\n        var self = this;\n        if(isMounted) {\n            console.log(\"SI\")\n        } else {\n            console.log(\"NO\")\n        }\n        setTimeout(function(){\n            if(isMounted) {\n                console.log(\"SI\")\n            } else {\n                console.log(\"NO\")\n            }\n            console.log(self)\n            self.setState({\n                componenteActual: \"editarVariable\"\n            });\n        }, 3500);\n    }\n\n    terminoCrearVariablePasarAEdit (nombreFuenteDatos) {\n        console.log(\"1\");\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where nombre = '\"+nombreFuenteDatos+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset != undefined) {\n                            console.log(\"result.recordset\")\n                            console.log(result.recordset)\n                            console.log(\"nombreFuenteDatos\")\n                            console.log(nombreFuenteDatos)\n                            if(result.recordset.length) {\n                                this.editarVariable(result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].descripcion, result.recordset[0].esObjeto, result.recordset[0].objetoPadreID);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"selVariable\") == 0) {\n            return (\n                <div>\n                    <SeleccionarVariable pool={this.props.pool}\n                                        configuracionHome={this.props.configuracionHome}\n                                        goOptions={this.props.goOptions}\n                                        crearVariable={this.crearVariable}\n                                        editarVariable={this.editarVariable}>\n                    </SeleccionarVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearVariable\") == 0) {\n            return (\n                <div>\n                    <CrearVariable pool={this.props.pool}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    terminoCrearCampo={this.terminoCrearVariablePasarAEdit}\n                                    retornoSeleccionVariable={this.retornoSeleccionVariable}\n                                    goOptions={this.props.goOptions}\n                                    configuracionHome={this.props.configuracionHome}>\n                    </CrearVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"editarVariable\") == 0) {\n            return (\n                <div>\n                    <EditarVariable pool={this.props.pool}\n                                    showFormula={this.props.showFormula}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    showRiesgos={this.props.showRiesgos}\n                                    retornoSeleccionVariable={this.retornoSeleccionVariable}\n                                    goOptions={this.props.goOptions}\n                                    configuracionHome={this.props.configuracionHome}\n                                    updateNavBar={this.props.updateNavBar}\n                                    showUmbralHome={this.props.showUmbralHome}\n                                    idVariable={this.state.idVariable}\n                                    nombreVariable={this.state.nombreVariable}\n                                    descripcionVariable={this.state.descripcionVariable}\n                                    esObjetoVariable={this.state.esObjetoVariable}\n                                    idObjetoPadreVariable={this.state.idObjetoPadreVariable}\n                                    updateFormula={this.props.updateFormula}\n                                    showVariables={this.retornoSeleccionVariableSameComponent}>\n                    </EditarVariable>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"VariableHome.js"}