{"version":3,"sources":["components/Indicadores/EditarIndicador/EditarIndicador.js"],"names":["tipoCampos","nombre","periodicidad","formulaG","elementosFormulasG","atributos","nombreCampoNuevoAtributo","reglas","segmentoRegla","elementosFormulas","formulas","posicionAtributoSeleccionado","nivelNuevoAtributo","tipoDeAsignacionSeleccionado","operacionSeleccionada","campoSeleccionado","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","valorSeleccionado","valorSeleccionadoTexto","indiceSeleccionadoFormula","indiceFormulaSeleccionadaEdit","nombreIndicador","codigoIndicador","toleranciaIndicador","valorIdealIndicador","tipoValorIdealIndicador","tipoIndicador","nombreEncargadoIndicador","banderaEsFormulaIndicador","mostrarToleranciaPorcentaje","periodicidadIndicador","fecha","contadorObjetosGuardados","contadorObjetosAGuardar","EditarIndicador","props","state","componenteActual","navbar","x","tipoNuevaVariable","esEditarVar","esOperacionSQL","operacionSQL","formulaSeleccionadaEdit","condicionFormula","condicionElemento","usuarios","getIndicator","bind","traerSegmentosDeCampo","traerReglasDeCampo","traerFormulasDeCampo","traerElementosDeCampo","traerElementosDeFormulaIndicador","editarIndicador","goToCreateFormula","goCrearUmbral","retornoEditarIndicador","retornoCampoFormula","retornoCampoCondicion","retornarValor","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarNivelNuevaRegla","actualizarSeleccionFormula","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormulaCampo","actualizarNombreCampoNuevoAtributo","retornarCodigoOperacion","verificarNoExisteNombreCampo","crearAtributoVariable","anadirRegla","revisarTipoAnadirFormula","anadirFormulaIndicador","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","verificarModificarFormula","modificarFormula","modificarFormulaGlobal","eliminarFormula","updateNombreIndicador","updateCodigoIndicador","updateValorIdealIndicador","updateTipoValorIdealIndicador","updateToleranciaIndicador","updatePeriodicidadIndicador","cargarDatePicker","updateTipoIndicador","updateNombreEncargadoIndicador","isValidDate","verificarSiExisteExcelEnResultadosHistoricosModificar","crearTablaDeResultadoNombreModificar","crearResultadoNombreModificar","modificarResultadosNombre","verificarPeriodicidadGuardarModificar","updatePeriodicidadModificar","tieneEspaciosEnBlanco","getUsuarios","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","idIndicadorSeleccionado","result","console","log","rollback","commit","recordset","length","formula","codigo","tolerancia","valorIdeal","tipoValorIdeal","fechaInicioCalculo","responsable","$","val","localeCompare","setState","peso","transaction1","i","campo","posicionAtributo","ID","segmento","posicionSegmento","tempCopy","sort","a","b","reglaPadreID","posicionFormula","parseInt","datepicker","Date","riesgoPadre","transaction2","transaction3","transaction4","transaction5","transaction6","isNaN","getFullYear","getMonth","getDate","alert","indicador","createIndicatorFormulaElements","createIndicatorField","elementoFormula","indiceElemento","ultimaPosicionElemento","conexionTablaID","esFuenteDeDato","excelArchivoID","excelVariableID","formaVariableID","elementoVariableID","elementoVariableCampoID","esValorManual","nombreColumnaEnTabla","tipoColumnaEnTabla","nombreVariable","descripcion","operacion","limpiarArreglos","indicadorCampo","tipo","nivel","getIndicatorFieldID","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","undefined","push","posicionFormulaEnCampo","createVariableFieldFormula","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","createVariableFieldRuleSegments","variableID","esConexionTabla","nivelMax","getVariableFieldRuleSegments","splice","k","segmentoReglaID","esCondicion","createVariableFieldRules","formulaID","regla","posicionRegla","tipoCampoObjetivo","operacionTexto","valor","texto","traerRegla","getVariableFieldFormulaID","existenSegmentos","createVariableFieldFormulaElement","elemento","posicionElemento","configuracionHome","retornoSeleccionIndicador","indexOf","tipoVariable","campoNuevo","campoNuevoTexto","indiceSegmento","indiceRegla","tipoElemento","indice","posicionSel","esEditarVarN","nombreCampo","noExiste","toLowerCase","nombreAtributo","arreglo","nuevoAtributo","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","is","nivelABuscar","reglaEsValida","entrarACrearRegla","tablaID","variableSel","variables","filter","object","esObjeto","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevoNivel","nuevaRegla","variableCampoID","posicionAInsertar","tipoNuevaAsig","tempNewCopy","texto2","formulaArreglo","arregloDeElementos","copiaAntiguaFormulas","numeroDeFormulaDeVariable","array","Array","isArray","esFuenteDato","existeSoloUnaFormula","contadorFormulas","ForReglas","existeFormula","format","todayHighlight","viewMode","minViewMode","language","self","Object","prototype","toString","call","getTime","variable","inicioVigencia","hoy","textoCreacionTabla","getHours","getMinutes","getSeconds","mes","dia","resultado","tabla","s","test","width","pesoDisponibleRiesgo","marginTop","textAlign","background","backgroundSize","backgroundPosition","map","formulaRiesgo","usuario","color","display","alignItems","justifyContent","atributo","height","retornarCampo","columnas","nombreTablaSeleccionada","actualizarCondicion","goOptions","retornoSeleccionVariables","indicadores","nombreIndicadorSeleccionada","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,GAAG,CAAE;AAACC,EAAAA,MAAM,EAAE;AAAT,CAAF,EAAqB;AAACA,EAAAA,MAAM,EAAE;AAAT,CAArB,EAA2C;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA3C,EAA8D;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA9D,EAAkF;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAlF,CAAnB;AAEA,IAAMC,YAAY,GAAG,CAAE;AAACD,EAAAA,MAAM,EAAE;AAAT,CAAF,EAAsB;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAtB,EAA2C;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA3C,EAAgE;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAhE,EAAwF;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAxF,EAA8G;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA9G,CAArB;AAEA,IAAIE,QAAQ,GAAG,EAAf;AAAA,IAAmBC,kBAAkB,GAAG,EAAxC;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,wBAAwB,GAAG,EAA/B;AACA,IAAIC,MAAM,GAAG,EAAb;AAAA,IAAiBC,aAAa,GAAG,EAAjC;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AAAA,IAA4BC,QAAQ,GAAG,EAAvC;AACA,IAAIC,4BAA4B,GAAG,CAAC,CAApC;AACA,IAAIC,kBAAkB,GAAG,CAAzB;AACA,IAAIC,4BAA4B,GAAG,EAAnC;AACA,IAAIC,qBAAqB,GAAG,EAA5B;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,IAAIC,gCAAgC,GAAG,CAAC,CAAxC;AAAA,IAA2CC,wBAAwB,GAAG,CAAC,CAAvE;AAAA,IAA0EC,6BAA6B,GAAG,EAA1G;AAEA,IAAIC,iBAAiB,GAAG,EAAxB;AAAA,IAA4BC,sBAAsB,GAAG,EAArD;AACA,IAAIC,yBAAyB,GAAG,CAAC,CAAjC;AACA,IAAIC,6BAA6B,GAAG,CAAC,CAArC;AAEA,IAAIC,eAAe,GAAG,EAAtB;AAAA,IAA0BC,eAAe,GAAG,EAA5C;AAAA,IAAgDC,mBAAmB,GAAG,EAAtE;AAAA,IAA0EC,mBAAmB,GAAG,EAAhG;AAAA,IAAoGC,uBAAuB,GAAG,EAA9H;AAAA,IAAkIC,aAAa,GAAG,EAAlJ;AAAA,IAAsJC,wBAAwB,GAAG,EAAjL;AAEA,IAAIC,yBAAyB,GAAG,KAAhC;AAAA,IAAuCC,2BAA2B,GAAG,KAArE;AAAA,IAA4EC,qBAAqB,GAAG,IAApG;AAAA,IAA0GC,KAAK,GAAG,EAAlH;AACA,IAAIC,wBAAwB,GAAG,CAA/B;AAAA,IAAkCC,uBAAuB,GAAG,CAA5D;;IAEqBC,e;;;;;AACjB,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,yFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,gBAAgB,EAAE,iBADT;AAETC,MAAAA,MAAM,EAAE,EAFC;AAGTC,MAAAA,CAAC,EAAE,CAHM;AAITpC,MAAAA,SAAS,EAAE,EAJF;AAKTqC,MAAAA,iBAAiB,EAAE,EALV;AAMTnC,MAAAA,MAAM,EAAE,EANC;AAOTwB,MAAAA,2BAA2B,EAAEA,2BAPpB;AAQTC,MAAAA,qBAAqB,EAAEA,qBARd;AASTW,MAAAA,WAAW,EAAE,KATJ;AAUTC,MAAAA,cAAc,EAAE,KAVP;AAWTC,MAAAA,YAAY,EAAE,EAXL;AAYTC,MAAAA,uBAAuB,EAAE,IAZhB;AAaTC,MAAAA,gBAAgB,EAAE,EAbT;AAcTC,MAAAA,iBAAiB,EAAE,EAdV;AAeTC,MAAAA,QAAQ,EAAE;AAfD,KAAb;AAiBA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AACA,UAAKC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BD,IAA3B,+BAA7B;AACA,UAAKE,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBF,IAAxB,+BAA1B;AACA,UAAKG,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BH,IAA1B,+BAA5B;AACA,UAAKI,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BJ,IAA3B,+BAA7B;AACA,UAAKK,gCAAL,GAAwC,MAAKA,gCAAL,CAAsCL,IAAtC,+BAAxC;AAEA,UAAKM,eAAL,GAAuB,MAAKA,eAAL,CAAqBN,IAArB,+BAAvB;AACA,UAAKO,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBP,IAAvB,+BAAzB;AACA,UAAKQ,aAAL,GAAqB,MAAKA,aAAL,CAAmBR,IAAnB,+BAArB;AACA,UAAKS,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BT,IAA5B,+BAA9B;AACA,UAAKU,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBV,IAAzB,+BAA3B;AACA,UAAKW,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BX,IAA3B,+BAA7B;AACA,UAAKY,aAAL,GAAqB,MAAKA,aAAL,CAAmBZ,IAAnB,+BAArB;AACA,UAAKa,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBb,IAAtB,+BAAxB;AACA,UAAKc,kCAAL,GAA0C,MAAKA,kCAAL,CAAwCd,IAAxC,+BAA1C;AACA,UAAKe,yBAAL,GAAiC,MAAKA,yBAAL,CAA+Bf,IAA/B,+BAAjC;AACA,UAAKgB,0BAAL,GAAkC,MAAKA,0BAAL,CAAgChB,IAAhC,+BAAlC;AAEA,UAAKiB,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BjB,IAA1B,+BAA5B;AACA,UAAKkB,sCAAL,GAA8C,MAAKA,sCAAL,CAA4ClB,IAA5C,+BAA9C;AACA,UAAKmB,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BnB,IAA5B,+BAA9B;AACA,UAAKoB,kCAAL,GAA0C,MAAKA,kCAAL,CAAwCpB,IAAxC,+BAA1C;AACA,UAAKqB,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BrB,IAA7B,+BAA/B;AACA,UAAKsB,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCtB,IAAlC,+BAApC;AACA,UAAKuB,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BvB,IAA3B,+BAA7B;AACA,UAAKwB,WAAL,GAAmB,MAAKA,WAAL,CAAiBxB,IAAjB,+BAAnB;AACA,UAAKyB,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BzB,IAA9B,+BAAhC;AACA,UAAK0B,sBAAL,GAA8B,MAAKA,sBAAL,CAA4B1B,IAA5B,+BAA9B;AACA,UAAK2B,aAAL,GAAqB,MAAKA,aAAL,CAAmB3B,IAAnB,+BAArB;AACA,UAAK4B,sBAAL,GAA8B,MAAKA,sBAAL,CAA4B5B,IAA5B,+BAA9B;AACA,UAAK6B,cAAL,GAAsB,MAAKA,cAAL,CAAoB7B,IAApB,+BAAtB;AACA,UAAK8B,aAAL,GAAqB,MAAKA,aAAL,CAAmB9B,IAAnB,+BAArB;AACA,UAAK+B,yBAAL,GAAiC,MAAKA,yBAAL,CAA+B/B,IAA/B,+BAAjC;AACA,UAAKgC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBhC,IAAtB,+BAAxB;AACA,UAAKiC,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BjC,IAA5B,+BAA9B;AACA,UAAKkC,eAAL,GAAuB,MAAKA,eAAL,CAAqBlC,IAArB,+BAAvB;AAEA,UAAKmC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BnC,IAA3B,+BAA7B;AACA,UAAKoC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BpC,IAA3B,+BAA7B;AACA,UAAKqC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BrC,IAA/B,+BAAjC;AACA,UAAKsC,6BAAL,GAAqC,MAAKA,6BAAL,CAAmCtC,IAAnC,+BAArC;AACA,UAAKuC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BvC,IAA/B,+BAAjC;AACA,UAAKwC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCxC,IAAjC,+BAAnC;AACA,UAAKyC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBzC,IAAtB,+BAAxB;AACA,UAAK0C,mBAAL,GAA2B,MAAKA,mBAAL,CAAyB1C,IAAzB,+BAA3B;AACA,UAAK2C,8BAAL,GAAsC,MAAKA,8BAAL,CAAoC3C,IAApC,+BAAtC;AACA,UAAK4C,WAAL,GAAmB,MAAKA,WAAL,CAAiB5C,IAAjB,+BAAnB;AAEA,UAAK6C,qDAAL,GAA6D,MAAKA,qDAAL,CAA2D7C,IAA3D,+BAA7D;AACA,UAAK8C,oCAAL,GAA4C,MAAKA,oCAAL,CAA0C9C,IAA1C,+BAA5C;AACA,UAAK+C,6BAAL,GAAqC,MAAKA,6BAAL,CAAmC/C,IAAnC,+BAArC;AACA,UAAKgD,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BhD,IAA/B,+BAAjC;AACA,UAAKiD,qCAAL,GAA6C,MAAKA,qCAAL,CAA2CjD,IAA3C,+BAA7C;AACA,UAAKkD,2BAAL,GAAmC,MAAKA,2BAAL,CAAiClD,IAAjC,+BAAnC;AAEA,UAAKmD,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BnD,IAA3B,+BAA7B;AAEA,UAAKoD,WAAL,GAAmB,MAAKA,WAAL,CAAiBpD,IAAjB,+BAAnB;AA7Ee;AA8ElB;;;;2CAEsB;AACnBnB,MAAAA,qBAAqB,GAAG,IAAxB;AACAD,MAAAA,2BAA2B,GAAG,KAA9B;AACAE,MAAAA,KAAK,GAAG,EAAR;AACH;;;wCAEoB;AACjB,WAAKiB,YAAL;AACA,WAAKM,gCAAL;AACA,WAAK+C,WAAL;AACH;;;mCAEe;AAAA;;AACZ,UAAMC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,2CAAyC,MAAI,CAAC9E,KAAL,CAAW+E,uBAAlE,EAA2F,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACxG,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BxH,gBAAAA,QAAQ,GAAGkH,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBE,OAA/B;AACArG,gBAAAA,eAAe,GAAG8F,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBzH,MAAtC;AACAuB,gBAAAA,eAAe,GAAG6F,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBG,MAAtC;AACApG,gBAAAA,mBAAmB,GAAG4F,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBI,UAA1C;AACApG,gBAAAA,mBAAmB,GAAG2F,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBK,UAA1C;AACApG,gBAAAA,uBAAuB,GAAG0F,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBM,cAA9C;AACAhG,gBAAAA,qBAAqB,GAAGqF,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBxH,YAA5C;AACA+B,gBAAAA,KAAK,GAAGoF,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBO,kBAA5B;AACArG,gBAAAA,aAAa,GAAGyF,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoB9F,aAApC;AACAC,gBAAAA,wBAAwB,GAAGwF,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBQ,WAA/C;AACAC,gBAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBC,GAAtB,CAA0B7G,eAA1B;AACA4G,gBAAAA,CAAC,CAAC,SAAD,CAAD,CAAaC,GAAb,CAAiB5G,eAAjB;AACA2G,gBAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,CAAqB3G,mBAArB;AACA0G,gBAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,CAAqB1G,mBAArB;AACAyG,gBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBC,GAArB,CAAyBzG,uBAAzB;AACAwG,gBAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,CAAuBpG,qBAAvB;AACAmG,gBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBC,GAApB,CAAwBxG,aAAxB;AACAuG,gBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,CAAsBvG,wBAAtB;AAEA,oBAAIE,2BAA2B,GAAG,KAAlC;AACA,oBAAGJ,uBAAuB,CAAC0G,aAAxB,CAAsC,YAAtC,KAAuD,CAA1D,EACItG,2BAA2B,GAAG,IAA9B;;AACJ,gBAAA,MAAI,CAACuG,QAAL,CAAc;AACV7F,kBAAAA,CAAC,EAAE4E,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBa,IADb;AAEVxG,kBAAAA,2BAA2B,EAAEA,2BAFnB;AAGVC,kBAAAA,qBAAqB,EAAEA;AAHb,iBAAd,EAIG,MAAI,CAAC4D,gBAJR;AAKH;AACJ,aA9BD;AA+BH;AACJ,SAxCD;AAyCH,OA/CD,EAFY,CAiDR;;AAEJ,UAAM4C,YAAY,GAAG,IAAI/B,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACA6B,MAAAA,YAAY,CAAC5B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA0B,QAAAA,YAAY,CAACzB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBsB,YAAhB,CAAhB;AACAvB,QAAAA,OAAO,CAACE,KAAR,CAAc,yDAAuD,MAAI,CAAC9E,KAAL,CAAW+E,uBAAhF,EAAyG,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACtH,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsG,cAAAA,YAAY,CAAChB,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAPD,MAOO;AACH2B,YAAAA,YAAY,CAACf,MAAb,CAAoB,UAAAZ,GAAG,EAAI;AACvB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BtH,gBAAAA,SAAS,GAAGgH,MAAM,CAACK,SAAnB;;AACA,gBAAA,MAAI,CAACY,QAAL,CAAc;AACVjI,kBAAAA,SAAS,EAAEgH,MAAM,CAACK;AADR,iBAAd;;AAGA,qBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,MAAM,CAACK,SAAP,CAAiBC,MAArC,EAA6Cc,CAAC,EAA9C,EAAkD;AAC9C,kBAAA,MAAI,CAACrF,qBAAL,CAA2BiE,MAAM,CAACK,SAAP,CAAiBe,CAAjB,CAA3B,EAAgDA,CAAhD;;AACA,kBAAA,MAAI,CAACnF,oBAAL,CAA0B+D,MAAM,CAACK,SAAP,CAAiBe,CAAjB,CAA1B,EAA+CA,CAA/C;AACH;;AAAA;AACJ;AACJ,aAXD;AAYH;AACJ,SAtBD;AAuBH,OA7BD,EApDY,CAiFR;AACP;;;0CAEsBC,K,EAAOC,gB,EAAkB;AAAA;;AAC5C,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,iEAA+D,MAAI,CAAC9E,KAAL,CAAW+E,uBAA1E,GAAkG,0BAAlG,GAA6HsB,KAAK,CAACE,EAAjJ,EAAqJ,UAAC/B,GAAD,EAAMQ,MAAN,EAAiB;AAClK,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAGnH,aAAa,CAACmI,gBAAD,CAAb,IAAoC,IAAvC,EACInI,aAAa,CAACmI,gBAAD,CAAb,GAAkC,EAAlC;AACJnI,gBAAAA,aAAa,CAACmI,gBAAD,CAAb,GAAkCtB,MAAM,CAACK,SAAzC;;AACA,qBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,aAAa,CAACmI,gBAAD,CAAb,CAAgChB,MAApD,EAA4Dc,CAAC,EAA7D,EAAiE;AAC7D,kBAAA,MAAI,CAACpF,kBAAL,CAAwBqF,KAAxB,EAA+BlI,aAAa,CAACmI,gBAAD,CAAb,CAAgCF,CAAhC,CAA/B,EAAmEE,gBAAnE,EAAqFF,CAArF;AACH;;AAAA;AACJ;AACJ,aATD;AAUH;AACJ,SApBD;AAqBH,OA3BD,EAF4C,CA6BxC;AACP;;;uCAEmBC,K,EAAOG,Q,EAAUF,gB,EAAkBG,gB,EAAkB;AAAA;;AACrE,UAAMtC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yDAAuD,MAAI,CAAC9E,KAAL,CAAW+E,uBAAlE,GAA0F,0BAA1F,GAAqHsB,KAAK,CAACE,EAA3H,GAA8H,yBAA9H,GAAwJC,QAAQ,CAACD,EAA/K,EAAmL,UAAC/B,GAAD,EAAMQ,MAAN,EAAiB;AAChM,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAIoB,QAAQ,GAAG1B,MAAM,CAACK,SAAtB;AACAqB,gBAAAA,QAAQ,CAACC,IAAT,CAAc,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACxB,yBAAOD,CAAC,CAACE,YAAF,GAAeD,CAAC,CAACC,YAAxB;AAAqC,iBADzC;AAGA,oBAAG5I,MAAM,CAACoI,gBAAD,CAAN,IAA4B,IAA/B,EACIpI,MAAM,CAACoI,gBAAD,CAAN,GAA2B,EAA3B;AACJ,oBAAGpI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,KAA8C,IAAjD,EACIvI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,IAA6C,EAA7C;AACJvI,gBAAAA,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,IAA6CC,QAA7C;AACH;AACJ,aAZD;AAaH;AACJ,SAvBD;AAwBH,OA9BD,EAFqE,CAgCjE;AACP;;;yCAEqBL,K,EAAOC,gB,EAAkB;AAAA;;AAC3C,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,iEAA+D,MAAI,CAAC9E,KAAL,CAAW+E,uBAA1E,GAAkG,0BAAlG,GAA6HsB,KAAK,CAACE,EAAjJ,EAAqJ,UAAC/B,GAAD,EAAMQ,MAAN,EAAiB;AAClK,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAGjH,QAAQ,CAACiI,gBAAD,CAAR,IAA8B,IAAjC,EACIjI,QAAQ,CAACiI,gBAAD,CAAR,GAA6B,EAA7B;AACJjI,gBAAAA,QAAQ,CAACiI,gBAAD,CAAR,GAA6BtB,MAAM,CAACK,SAApC;;AACA,qBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/H,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA/C,EAAuDc,CAAC,EAAxD,EAA4D;AACxD,kBAAA,MAAI,CAAClF,qBAAL,CAA2BmF,KAA3B,EAAkChI,QAAQ,CAACiI,gBAAD,CAAR,CAA2BF,CAA3B,CAAlC,EAAiEE,gBAAjE,EAAmFF,CAAnF;AACH;;AAAA;AACJ;AACJ,aATD;AAUH;AACJ,SApBD;AAqBH,OA3BD,EAF2C,CA6BvC;AACP;;;0CAEsBC,K,EAAOd,O,EAASe,gB,EAAkBS,e,EAAiB;AAAA;;AACtE,UAAM5C,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yEAAuE,MAAI,CAAC9E,KAAL,CAAW+E,uBAAlF,GAA0G,0BAA1G,GAAqIsB,KAAK,CAACE,EAA3I,GAA8I,mBAA9I,GAAkKhB,OAAO,CAACgB,EAAxL,EAA4L,UAAC/B,GAAD,EAAMQ,MAAN,EAAiB;AACzM,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAGlH,iBAAiB,CAACkI,gBAAD,CAAjB,IAAuC,IAA1C,EACIlI,iBAAiB,CAACkI,gBAAD,CAAjB,GAAsC,EAAtC;AACJ,oBAAGlI,iBAAiB,CAACkI,gBAAD,CAAjB,CAAoCS,eAApC,KAAwD,IAA3D,EACI3I,iBAAiB,CAACkI,gBAAD,CAAjB,CAAoCS,eAApC,IAAuD,EAAvD;AACJ3I,gBAAAA,iBAAiB,CAACkI,gBAAD,CAAjB,CAAoCS,eAApC,IAAuD/B,MAAM,CAACK,SAA9D;AACH;AACJ,aARD;AASH;AACJ,SAnBD;AAoBH,OA1BD,EAFsE,CA4BlE;AACP;;;uDAEmC;AAAA;;AAChC,UAAMlB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yDAAuD,MAAI,CAAC9E,KAAL,CAAW+E,uBAAhF,EAAyG,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACtH,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BvH,gBAAAA,kBAAkB,GAAGiH,MAAM,CAACK,SAA5B;AACH;AACJ,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAFgC,CAwB5B;AACP;;;sCAOkB;AAAA;;AACf,UAAIzH,MAAM,GAAGkI,CAAC,CAAC,kBAAD,CAAD,CAAsBC,GAAtB,EAAb;AACA,UAAIP,MAAM,GAAGM,CAAC,CAAC,SAAD,CAAD,CAAaC,GAAb,EAAb;AACA,UAAIR,OAAO,GAAGzH,QAAd;AACA,UAAIoI,IAAI,GAAG,KAAKjG,KAAL,CAAWG,CAAtB;AACA,UAAIsF,UAAU,GAAGsB,QAAQ,CAAClB,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAD,CAAzB;AACA,UAAIJ,cAAc,GAAGG,CAAC,CAAC,iBAAD,CAAD,CAAqBC,GAArB,EAArB;AACA,UAAIN,UAAU,GAAGuB,QAAQ,CAAClB,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAD,CAAzB;AACA,UAAIxG,aAAa,GAAGuG,CAAC,CAAC,gBAAD,CAAD,CAAoBC,GAApB,EAApB;AACA,UAAIlI,YAAY,GAAGiI,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAnB;AACA,UAAInG,KAAK,GAAGkG,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,CAAuB,SAAvB,CAAZ;AACA,UAAG1H,aAAa,CAACyG,aAAd,CAA4B,IAA5B,CAAH,EACIpG,KAAK,GAAG,IAAIsH,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,EAAlB,CAAR;AACJ,UAAIrB,WAAW,GAAGC,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAlB;AACA,UAAIoB,WAAW,GAAG,KAAKnH,KAAL,CAAWmH,WAA7B;AAEA,UAAMhB,YAAY,GAAG,IAAI/B,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACA6B,MAAAA,YAAY,CAAC5B,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA0B,QAAAA,YAAY,CAACzB,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBsB,YAAhB,CAAhB;AACAvB,QAAAA,OAAO,CAACE,KAAR,CAAc,uDAAqD,MAAI,CAAC9E,KAAL,CAAW+E,uBAA9E,EAAuG,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACpH,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb0B,cAAAA,YAAY,CAAChB,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH2B,YAAAA,YAAY,CAACf,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAjBe,CAmCX;;AACJ,UAAM4C,YAAY,GAAG,IAAIhD,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACA8C,MAAAA,YAAY,CAAC7C,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA2C,QAAAA,YAAY,CAAC1C,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBuC,YAAhB,CAAhB;AACAxC,QAAAA,OAAO,CAACE,KAAR,CAAc,uDAAqD,MAAI,CAAC9E,KAAL,CAAW+E,uBAA9E,EAAuG,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACpH,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb2C,cAAAA,YAAY,CAACjC,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH4C,YAAAA,YAAY,CAAChC,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EArCe,CAuDX;;AACJ,UAAM6C,YAAY,GAAG,IAAIjD,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACA+C,MAAAA,YAAY,CAAC9C,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA4C,QAAAA,YAAY,CAAC3C,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBwC,YAAhB,CAAhB;AACAzC,QAAAA,OAAO,CAACE,KAAR,CAAc,+DAA6D,MAAI,CAAC9E,KAAL,CAAW+E,uBAAtF,EAA+G,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AAC5H,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb4C,cAAAA,YAAY,CAAClC,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH6C,YAAAA,YAAY,CAACjC,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAzDe,CA2EX;;AACJ,UAAM8C,YAAY,GAAG,IAAIlD,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACAgD,MAAAA,YAAY,CAAC/C,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA6C,QAAAA,YAAY,CAAC5C,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgByC,YAAhB,CAAhB;AACA1C,QAAAA,OAAO,CAACE,KAAR,CAAc,uEAAqE,MAAI,CAAC9E,KAAL,CAAW+E,uBAA9F,EAAuH,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACpI,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb6C,cAAAA,YAAY,CAACnC,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH8C,YAAAA,YAAY,CAAClC,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EA7Ee,CA+FX;;AACJ,UAAM+C,YAAY,GAAG,IAAInD,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACAiD,MAAAA,YAAY,CAAChD,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA6C,QAAAA,YAAY,CAAC5C,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgB0C,YAAhB,CAAhB;AACA3C,QAAAA,OAAO,CAACE,KAAR,CAAc,+DAA6D,MAAI,CAAC9E,KAAL,CAAW+E,uBAAtF,EAA+G,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AAC5H,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb8C,cAAAA,YAAY,CAACpC,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACH+C,YAAAA,YAAY,CAACnC,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAjGe,CAmHX;;AACJ,UAAMgD,YAAY,GAAG,IAAIpD,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAArB;AACAkD,MAAAA,YAAY,CAACjD,KAAb,CAAmB,UAAAC,GAAG,EAAI;AACtB,YAAIC,UAAU,GAAG,KAAjB;AACA6C,QAAAA,YAAY,CAAC5C,EAAb,CAAgB,UAAhB,EAA4B,UAAAC,OAAO,EAAI;AACnCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgB2C,YAAhB,CAAhB;AACA5C,QAAAA,OAAO,CAACE,KAAR,CAAc,uDAAqD,MAAI,CAAC9E,KAAL,CAAW+E,uBAA9E,EAAuG,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACpH,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb+C,cAAAA,YAAY,CAACrC,QAAb,CAAsB,UAAAX,GAAG,EAAI,CAC5B,CADD;AAEH;AACJ,WAND,MAMO;AACHgD,YAAAA,YAAY,CAACpC,MAAb,CAAoB,UAAAZ,GAAG,EAAI,CAC1B,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EArHe,CAuIX;;AAEJ,UAAG5G,MAAM,CAAC0H,MAAP,GAAgB,CAAhB,IAAqB1H,MAAM,CAAC0H,MAAP,GAAgB,GAAxC,EAA6C;AACzC,YAAG,CAAC,KAAKrB,qBAAL,CAA2BrG,MAA3B,CAAJ,EAAwC;AACpC,cAAG4H,MAAM,CAACF,MAAP,GAAgB,CAAhB,IAAqBE,MAAM,CAACF,MAAP,GAAgB,GAAxC,EAA6C;AACzC,gBAAGC,OAAO,CAACD,MAAR,GAAiB,CAAjB,IAAsBC,OAAO,CAACD,MAAR,GAAiB,GAA1C,EAA+C;AAC3C,kBAAI,CAACmC,KAAK,CAACT,QAAQ,CAACd,IAAD,CAAT,CAAV,EAA6B;AACzB,oBAAI,CAACuB,KAAK,CAACT,QAAQ,CAACvB,UAAD,CAAT,CAAV,EAAmC;AAC/B,sBAAI,CAACgC,KAAK,CAACT,QAAQ,CAACtB,UAAD,CAAT,CAAV,EAAmC;AAC/B,wBAAGC,cAAc,CAACL,MAAf,GAAwB,CAAxB,IAA6BK,cAAc,CAACL,MAAf,GAAwB,EAAxD,EAA4D;AACxD,0BAAGzH,YAAY,CAACyH,MAAb,GAAsB,CAAtB,IAA2BzH,YAAY,CAACyH,MAAb,GAAsB,EAApD,EAAwD;AACpD,4BAAG/F,aAAa,CAAC+F,MAAd,GAAuB,CAAvB,IAA4B/F,aAAa,CAAC+F,MAAd,GAAuB,EAAtD,EAA0D;AACtD,8BAAGO,WAAW,CAACP,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,gCAAI,CAACmC,KAAK,CAACT,QAAQ,CAACG,WAAD,CAAT,CAAV,EAAoC;AAChC,kCAAG,KAAKzD,WAAL,CAAiB9D,KAAjB,CAAH,EAA4B;AAExB,oCAAMuE,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,gCAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,sCAAIC,UAAU,GAAG,KAAjB;AACAN,kCAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,oCAAAA,UAAU,GAAG,IAAb;AACH,mCAFD;AAGA,sCAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,kCAAAA,OAAO,CAACE,KAAR,CAAc,sCAAoClH,MAApC,GAA2C,eAA3C,GAA2D4H,MAA3D,GAAkE,gBAAlE,GAAmFD,OAAnF,GAA2F,YAA3F,GAAwGW,IAAxG,GAA6G,iBAA7G,GAA+HT,UAA/H,GAA0I,iBAA1I,GAA4JC,UAA5J,GAAuK,sBAAvK,GAA8LC,cAA9L,GAA6M,qBAA7M,GAAmO9H,YAAnO,GAAgP,sBAAhP,GAAuQ0B,aAAvQ,GAAqR,oBAArR,GAA0SsG,WAA1S,GAAsT,qBAAtT,GAA4UsB,WAA5U,GAAwV,0BAAxV,GAAmXvH,KAAK,CAAC8H,WAAN,EAAnX,GAAuY,GAAvY,IAA4Y9H,KAAK,CAAC+H,QAAN,KAAiB,CAA7Z,IAAga,GAAha,GAAoa/H,KAAK,CAACgI,OAAN,EAApa,GAAob,eAApb,GAAoc,MAAI,CAAC5H,KAAL,CAAW+E,uBAA7d,EAAsf,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AACngB,wCAAIR,GAAJ,EAAS;AACLS,sCAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,0CAAI,CAACC,UAAL,EAAiB;AACbN,wCAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,qCAND,MAMO;AACHL,sCAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtBqD,wCAAAA,KAAK,CAAC,uBAAD,CAAL;AACA;;;;;;;;;;;;;;;;;;;;;;AAqBAhI,wCAAAA,wBAAwB,GAAG,CAA3B;AACAC,wCAAAA,uBAAuB,GAAG,CAA1B;AACA,4CAAIgI,SAAS,GAAG;AAACvB,0CAAAA,EAAE,EAAE,MAAI,CAACvG,KAAL,CAAW+E,uBAAhB;AAAyCnH,0CAAAA,MAAM,EAAEA;AAAjD,yCAAhB;;AACA,4CAAGG,kBAAkB,CAACuH,MAAnB,IAA6B,CAAhC,EAAmC;AAC/B,+CAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrI,kBAAkB,CAACuH,MAAvC,EAA+Cc,CAAC,EAAhD,EAAoD;AAChD,4CAAA,MAAI,CAAC2B,8BAAL,CAAoCD,SAApC,EAA+C/J,kBAAkB,CAACqI,CAAD,CAAjE,EAAsEA,CAAtE,EAAyErI,kBAAkB,CAACuH,MAAnB,GAA0B,CAAnG;AACH;;AAAA;AACJ,yCAJD,MAIO;AACH,+CAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpI,SAAS,CAACsH,MAA9B,EAAsCc,CAAC,EAAvC,EAA2C;AACvCtG,4CAAAA,uBAAuB;;AACvB,4CAAA,MAAI,CAACkI,oBAAL,CAA0BhK,SAAS,CAACoI,CAAD,CAAnC,EAAwCA,CAAxC;AACH;;AAAA;AACJ;AACJ,uCApCD;AAqCH;AACJ,mCA9CD;AA+CH,iCArDD,EAHwB,CAwDpB;AAEP,+BA1DD,MA0DO;AACHyB,gCAAAA,KAAK,CAAC,4CAAD,CAAL;AACH;AACJ,6BA9DD,MA8DO;AACHA,8BAAAA,KAAK,CAAC,yDAAD,CAAL;AACH;AACJ,2BAlED,MAkEO;AACHA,4BAAAA,KAAK,CAAC,uCAAD,CAAL;AACH;AACJ,yBAtED,MAsEO;AACHA,0BAAAA,KAAK,CAAC,qEAAD,CAAL;AACH;AACJ,uBA1ED,MA0EO;AACHA,wBAAAA,KAAK,CAAC,8EAAD,CAAL;AACH;AACJ,qBA9ED,MA8EO;AACHA,sBAAAA,KAAK,CAAC,qFAAD,CAAL;AACH;AACJ,mBAlFD,MAkFO;AACHA,oBAAAA,KAAK,CAAC,wDAAD,CAAL;AACH;AACJ,iBAtFD,MAsFO;AACHA,kBAAAA,KAAK,CAAC,uDAAD,CAAL;AACH;AACJ,eA1FD,MA0FO;AACHA,gBAAAA,KAAK,CAAC,iDAAD,CAAL;AACH;AACJ,aA9FD,MA8FO;AACHA,cAAAA,KAAK,CAAC,0EAAD,CAAL;AACH;AACJ,WAlGD,MAkGO;AACHA,YAAAA,KAAK,CAAC,yEAAD,CAAL;AACH;AACJ,SAtGD,MAsGO;AACHA,UAAAA,KAAK,CAAC,2DAAD,CAAL;AACH;AACJ,OA1GD,MA0GO;AACHA,QAAAA,KAAK,CAAC,yEAAD,CAAL;AACH;AACJ;;;mDAE+BC,S,EAAWG,e,EAAiBC,c,EAAgBC,sB,EAAwB;AAAA;;AAChG,UAAMhE,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,0RAAwR,MAAI,CAAC9E,KAAL,CAAW+E,uBAAnS,GAA2T,IAA3T,GAAgUkD,eAAe,CAACG,eAAhV,GAAgW,KAAhW,GAAsWH,eAAe,CAACI,cAAtX,GAAqY,KAArY,GAA2YJ,eAAe,CAACK,cAA3Z,GAA0a,IAA1a,GAA+aL,eAAe,CAACM,eAA/b,GAA+c,IAA/c,GAAodN,eAAe,CAACO,eAApe,GAAof,IAApf,GAAyfP,eAAe,CAACQ,kBAAzgB,GAA4hB,IAA5hB,GAAiiBR,eAAe,CAACS,uBAAjjB,GAAykB,KAAzkB,GAA+kBT,eAAe,CAACU,aAA/lB,GAA6mB,MAA7mB,GAAonBV,eAAe,CAACW,oBAApoB,GAAypB,MAAzpB,GAAgqBX,eAAe,CAACY,kBAAhrB,GAAmsB,MAAnsB,GAA0sBZ,eAAe,CAACa,cAA1tB,GAAyuB,MAAzuB,GAAgvBb,eAAe,CAACc,WAAhwB,GAA4wB,MAA5wB,GAAmxBd,eAAe,CAACe,SAAnyB,GAA6yB,IAA3zB,EAAi0B,UAACxE,GAAD,EAAMQ,MAAN,EAAiB;AAC90B,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAG0D,cAAc,IAAIC,sBAAlB,IAA4CnK,SAAS,CAACsH,MAAV,GAAmB,CAAlE,EAAqE;AACjE,qBAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpI,SAAS,CAACsH,MAA9B,EAAsCc,CAAC,EAAvC,EAA2C;AACvCtG,kBAAAA,uBAAuB;;AACvB,kBAAA,MAAI,CAACkI,oBAAL,CAA0BhK,SAAS,CAACoI,CAAD,CAAnC,EAAwCA,CAAxC;AACH;;AAAA;AACJ,eALD,MAKO,IAAG8B,cAAc,IAAIC,sBAAlB,IAA4CnK,SAAS,CAACsH,MAAV,IAAoB,CAAnE,EAAsE;AACzE,gBAAA,MAAI,CAAC2D,eAAL;AACH;AACJ,aATD;AAUH;AACJ,SAnBD;AAoBH,OA1BD,EAFgG,CA4B5F;AACP;;;yCAEqBC,c,EAAgB5C,gB,EAAkB;AAAA;;AACpD,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,8EAA4E,OAAI,CAAC9E,KAAL,CAAW+E,uBAAvF,GAA+G,KAA/G,GAAqHmE,cAAc,CAACtL,MAApI,GAA2I,MAA3I,GAAkJsL,cAAc,CAACC,IAAjK,GAAsK,KAAtK,GAA4KD,cAAc,CAACE,KAA3L,GAAiM,GAA/M,EAAoN,UAAC5E,GAAD,EAAMQ,MAAN,EAAiB;AACjO,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB;AACA3E,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACwJ,mBAAL,CAAyBH,cAAzB,EAAyC5C,gBAAzC;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAFoD,CAwBhD;AACP;;;wCAEoB4C,c,EAAgB5C,gB,EAAkB;AAAA;;AACnD;AACA,UAAMnC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qDAAmDoE,cAAc,CAACtL,MAAlE,GAAyE,sBAAzE,GAAgG,OAAI,CAACoC,KAAL,CAAW+E,uBAAzH,EAAkJ,UAACP,GAAD,EAAMQ,MAAN,EAAiB;AAC/J,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB;;;;;;;;AAQA,kBAAI8E,wBAAwB,GAAG,EAA/B;AAAA,kBAAmCC,iCAAiC,GAAG,EAAvE;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnL,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA/C,EAAuDkE,CAAC,EAAxD,EAA4D;AACxD,oBAAGF,wBAAwB,CAAChD,gBAAD,CAAxB,IAA8CmD,SAAjD,EACIH,wBAAwB,CAAChD,gBAAD,CAAxB,GAA6C,EAA7C;AACJgD,gBAAAA,wBAAwB,CAAChD,gBAAD,CAAxB,CAA2CoD,IAA3C,CAAgDF,CAAhD;AACA,oBAAGD,iCAAiC,CAACjD,gBAAD,CAAjC,IAAuDmD,SAA1D,EACIF,iCAAiC,CAACjD,gBAAD,CAAjC,GAAsD,EAAtD;AACJjI,gBAAAA,QAAQ,CAACiI,gBAAD,CAAR,CAA2BkD,CAA3B,EAA8BG,sBAA9B,GAAuDH,CAAvD;AACA1J,gBAAAA,uBAAuB;;AACvB,gBAAA,OAAI,CAAC8J,0BAAL,CAAgC5E,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAAhC,EAAqDhH,QAAQ,CAACiI,gBAAD,CAAR,CAA2BkD,CAA3B,CAArD,EAAoFlD,gBAApF,EAAsGkD,CAAtG,EAAyGF,wBAAzG,EAAmIC,iCAAnI;AACH;;AAAA;;AACD,kBAAGlL,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA3B,IAAqC,CAAxC,EAA2C;AACvC,oBAAIuE,yBAAyB,GAAG,EAAhC;AAAA,oBAAoCC,+BAA+B,GAAG,EAAtE;;AACA,qBAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrL,aAAa,CAACmI,gBAAD,CAAb,CAAgChB,MAApD,EAA4DkE,CAAC,EAA7D,EAAiE;AAC7D,sBAAGK,yBAAyB,CAACvD,gBAAD,CAAzB,IAA+CmD,SAAlD,EACII,yBAAyB,CAACvD,gBAAD,CAAzB,GAA8C,EAA9C;AACJuD,kBAAAA,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4CoD,IAA5C,CAAiDF,CAAjD;AACA,sBAAGM,+BAA+B,CAACxD,gBAAD,CAA/B,IAAqDmD,SAAxD,EACIK,+BAA+B,CAACxD,gBAAD,CAA/B,GAAoD,EAApD;AACJnI,kBAAAA,aAAa,CAACmI,gBAAD,CAAb,CAAgCkD,CAAhC,EAAmCO,uBAAnC,GAA6DP,CAA7D;AACA1J,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAACkK,+BAAL,CAAqChF,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAArC,EAA0DlH,aAAa,CAACmI,gBAAD,CAAb,CAAgCkD,CAAhC,CAA1D,EAA8FlD,gBAA9F,EAAgHkD,CAAhH,EAAmHK,yBAAnH,EAA8IC,+BAA9I;AACH;;AAAA;AACJ;;AACD,kBAAGzL,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA3B,IAAqC,CAArC,IAA0CnH,aAAa,CAACmI,gBAAD,CAAb,CAAgChB,MAAhC,IAA0C,CAAvF,EAA0F;AACtFL,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,gBAAA,OAAI,CAAC+D,eAAL;AACH;AACJ,aArCD;AAsCH;AACJ,SA/CD;AAgDH,OAtDD,EAHmD,CAyD/C;AACP;;;oDAEgCC,c,EAAgB1C,Q,EAAUF,gB,EAAkBG,gB,EAAkBoD,yB,EAA2BC,+B,EAAiC;AAAA;;AACvJ;AACA;AACA,UAAM3F,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mPAAiP0B,QAAQ,CAAC4B,eAA1P,GAA0Q,IAA1Q,GAA+Q,OAAI,CAACpI,KAAL,CAAW+E,uBAA1R,GAAkT,IAAlT,GAAuTmE,cAAc,CAAC3C,EAAtU,GAAyU,IAAzU,GAA8UC,QAAQ,CAACyD,UAAvV,GAAkW,IAAlW,GAAuWzD,QAAQ,CAAC8B,cAAhX,GAA+X,IAA/X,GAAoY9B,QAAQ,CAAC+B,eAA7Y,GAA6Z,IAA7Z,GAAka/B,QAAQ,CAACgC,eAA3a,GAA2b,KAA3b,GAAichC,QAAQ,CAACmC,aAA1c,GAAwd,MAAxd,GAA+dnC,QAAQ,CAAC0D,eAAxe,GAAwf,KAAxf,GAA8fzD,gBAA9f,GAA+gB,IAA/gB,GAAohBD,QAAQ,CAAC2D,QAA7hB,GAAsiB,GAApjB,EAAyjB,UAAC3F,GAAD,EAAMQ,MAAN,EAAiB;AACtkB,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;AACxBsE,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB3E,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACuK,4BAAL,CAAkClB,cAAlC,EAAkD1C,QAAlD,EAA4DF,gBAA5D,EAA8EG,gBAA9E,EAAgGoD,yBAAhG,EAA2HC,+BAA3H;AACH,aAHD;AAIH;AACJ,SAdD;AAeH,OArBD,EAJuJ,CAyBnJ;AACP;;;iDAE6BZ,c,EAAgB1C,Q,EAAUF,gB,EAAkBG,gB,EAAkBoD,yB,EAA2BC,+B,EAAiC;AAAA;;AACpJ,UAAM3F,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qEAAmE0B,QAAQ,CAAC4B,eAA5E,GAA4F,qBAA5F,GAAkH,OAAI,CAACpI,KAAL,CAAW+E,uBAA7H,GAAqJ,0BAArJ,GAAgLmE,cAAc,CAAC3C,EAA/L,GAAkM,kCAAlM,GAAqOC,QAAQ,CAACyD,UAA9O,GAAyP,0BAAzP,GAAoRzD,QAAQ,CAAC0D,eAA7R,GAA6S,kCAA7S,GAAgVzD,gBAAhV,GAAiW,kBAAjW,GAAoXD,QAAQ,CAAC2D,QAA3Y,EAAqZ,UAAC3F,GAAD,EAAMQ,MAAN,EAAiB;AACla,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAIQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B;;;;;;;;;;AAUA,qBAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4ChB,MAAhE,EAAwEc,CAAC,EAAzE,EAA6E;AACzE,sBAAIyD,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4CF,CAA5C,KAAkDK,gBAAtD,EAAwE;AACpEoD,oBAAAA,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4C+D,MAA5C,CAAmDjE,CAAnD,EAAsD,CAAtD;AACA,wBAAGyD,yBAAyB,CAACvD,gBAAD,CAAzB,IAA+CmD,SAA/C,IAA4DI,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4ChB,MAA5C,IAAsD,CAArH,EACIuE,yBAAyB,CAACQ,MAA1B,CAAiC/D,gBAAjC,EAAmD,CAAnD;AACJ;AACH;AACJ;;AAAA;;AACD,qBAAK,IAAIgE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpM,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CnB,MAA/D,EAAuEgF,CAAC,EAAxE,EAA4E;AACxE,sBAAGR,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,KAAuEgD,SAA1E,EACIK,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,IAAsE,EAAtE;AACJqD,kBAAAA,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEiD,IAApE,CAAyEY,CAAzE;AACH;;AAAA,iBAvB4B,CAwB7B;;AACApM,gBAAAA,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C8D,eAA9C,GAAgEvF,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBkB,EAApF,CAzB6B,CA0B7B;;AACA,oBAAGrI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C+D,WAAjD,EAA8D;AAC1D1K,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAAC2K,wBAAL,CAA8BvB,cAA9B,EAA8ClE,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAA9C,EAAmEnH,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,CAAnE,EAAkHH,gBAAlH,EAAoIG,gBAApI,EAAsJ,CAAtJ,EAAyJqD,+BAAzJ,EAA0L,CAAC,CAA3L;AACH,iBAHD,MAGO,IAAG,CAAC5L,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8C+D,WAAlD,EAA+D;AAClE1K,kBAAAA,uBAAuB,GAD2C,CAElE;;AACA,uBAAK,IAAIsG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/H,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA/C,EAAuDc,CAAC,EAAxD,EAA4D;AACxD,wBAAGA,CAAC,IAAIlI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8CiE,SAAtD,EAAiE;AAC7DxM,sBAAAA,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,EAA8CiE,SAA9C,GAA0DrM,QAAQ,CAACiI,gBAAD,CAAR,CAA2BF,CAA3B,EAA8BG,EAAxF;AACA;AACH;AACJ;;AAAA;;AACD,kBAAA,OAAI,CAACkE,wBAAL,CAA8BvB,cAA9B,EAA8ClE,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAA9C,EAAmEnH,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2C,CAA3C,CAAnE,EAAkHH,gBAAlH,EAAoIG,gBAApI,EAAsJ,CAAtJ,EAAyJqD,+BAAzJ,EAA0L,CAAC,CAA3L;AACH;;AACD,oBAAID,yBAAyB,CAACvE,MAA1B,IAAoC,CAApC,IAAyCwE,+BAA+B,CAACxE,MAAhC,IAA0C,CAAvF,EAA0F;AACtF,kBAAA,OAAI,CAAC2D,eAAL;AACH;AACJ;AACJ,aA9CD;AA+CH;AACJ,SAxDD;AAyDH,OA/DD,EAFoJ,CAiEhJ;AACP;;;6CAEyBC,c,EAAgB1C,Q,EAAUmE,K,EAAOrE,gB,EAAkBG,gB,EAAkBmE,a,EAAed,+B,EAAiChD,Y,EAAc;AAAA;;AACzJ,UAAG6D,KAAK,IAAIlB,SAAZ,EAAuB;AACnB,YAAMtF,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,QAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,cAAIC,UAAU,GAAG,KAAjB;AACAN,UAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,YAAAA,UAAU,GAAG,IAAb;AACH,WAFD;AAGA,cAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,UAAAA,OAAO,CAACE,KAAR,CAAc,sRAAoR0B,QAAQ,CAACD,EAA7R,GAAgS,IAAhS,GAAqS,OAAI,CAACvG,KAAL,CAAW+E,uBAAhT,GAAwU,IAAxU,GAA6UmE,cAAc,CAAC3C,EAA5V,GAA+V,IAA/V,GAAoWoE,KAAK,CAACD,SAA1W,GAAoX,IAApX,GAAyX5D,YAAzX,GAAsY,IAAtY,GAA2Y6D,KAAK,CAACvC,eAAjZ,GAAia,KAAja,GAAuauC,KAAK,CAAC/B,oBAA7a,GAAkc,MAAlc,GAAyc+B,KAAK,CAACE,iBAA/c,GAAie,MAAje,GAAweF,KAAK,CAACH,WAA9e,GAA0f,MAA1f,GAAigBG,KAAK,CAACT,eAAvgB,GAAuhB,KAAvhB,GAA6hBzD,gBAA7hB,GAA8iB,KAA9iB,GAAojBkE,KAAK,CAAC3B,SAA1jB,GAAokB,MAApkB,GAA2kB2B,KAAK,CAACG,cAAjlB,GAAgmB,MAAhmB,GAAumBH,KAAK,CAACI,KAA7mB,GAAmnB,MAAnnB,GAA0nBJ,KAAK,CAACK,KAAhoB,GAAsoB,KAAtoB,GAA4oBL,KAAK,CAACvB,KAAlpB,GAAwpB,GAAtqB,EAA2qB,UAAC5E,GAAD,EAAMQ,MAAN,EAAiB;AACxrB,gBAAIR,GAAJ,EAAS;AACLS,cAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACA3E,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACoJ,eAAL;;AACA,kBAAI,CAACxE,UAAL,EAAiB;AACbN,gBAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,aARD,MAQO;AACHL,cAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB3E,gBAAAA,wBAAwB;AACxB;;;;;;;AAMA,oBAAGiK,+BAA+B,CAACxD,gBAAD,CAA/B,IAAqDmD,SAArD,IAAkEK,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,KAAuEgD,SAA5I,EAAuJ;AACnJ,uBAAK,IAAIrD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0D,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEnB,MAAxF,EAAgGc,CAAC,EAAjG,EAAqG;AACjG,wBAAI0D,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEL,CAApE,KAA0EwE,aAA9E,EAA6F;AACzFd,sBAAAA,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoE4D,MAApE,CAA2EjE,CAA3E,EAA8E,CAA9E;;AACA,0BAAG0D,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkDG,gBAAlD,EAAoEnB,MAApE,IAA8E,CAAjF,EAAoF;AAChFwE,wBAAAA,+BAA+B,CAACxD,gBAAD,CAA/B,CAAkD+D,MAAlD,CAAyD5D,gBAAzD,EAA2E,CAA3E;AACH;;AACD;AACH;AACJ;;AAAA;AACJ;;AACD,oBAAIqD,+BAA+B,CAACxE,MAAhC,IAA0C,CAA9C,EAAiD;AAC7C,kBAAA,OAAI,CAAC2D,eAAL;AACH,iBAFD,MAEO;AACH,kBAAA,OAAI,CAACgC,UAAL,CAAgB/B,cAAhB,EAAgC1C,QAAhC,EAA0CmE,KAA1C,EAAiDrE,gBAAjD,EAAmEG,gBAAnE,EAAqFmE,aAArF,EAAoGd,+BAApG,EAAqIhD,YAArI;AACH;AACJ,eAxBD;AAyBH;AACJ,WApCD;AAqCH,SA3CD,EAFmB,CA6Cf;AACP,OA9CD,MA8CO;AACH,aAAKmC,eAAL;AACH;AACJ;;;+BAEUC,c,EAAgB1C,Q,EAAUmE,K,EAAOrE,gB,EAAkBG,gB,EAAkBmE,a,EAAed,+B,EAAiChD,Y,EAAc;AAAA;;AAC1I,UAAM3C,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,6DAA2D0B,QAAQ,CAACD,EAApE,GAAuE,qBAAvE,GAA6F,OAAI,CAACvG,KAAL,CAAW+E,uBAAxG,GAAgI,0BAAhI,GAA2JmE,cAAc,CAAC3C,EAA1K,GAA6K,mBAA7K,GAAiMoE,KAAK,CAACD,SAAvM,GAAiN,uBAAjN,GAAyO5D,YAAzO,GAAsP,yBAAtP,GAAgR6D,KAAK,CAACvC,eAAtR,GAAsS,+BAAtS,GAAsUuC,KAAK,CAAC/B,oBAA5U,GAAiW,6BAAjW,GAA+X+B,KAAK,CAACE,iBAArY,GAAuZ,uBAAvZ,GAA+aF,KAAK,CAACH,WAArb,GAAic,2BAAjc,GAA6dG,KAAK,CAACT,eAAne,GAAmf,kCAAnf,GAAshBzD,gBAAthB,GAAuiB,oBAAviB,GAA4jBkE,KAAK,CAAC3B,SAAlkB,GAA4kB,0BAA5kB,GAAumB2B,KAAK,CAACG,cAA7mB,GAA4nB,iBAA5nB,GAA8oBH,KAAK,CAACI,KAAppB,GAA0pB,iBAA1pB,GAA4qBJ,KAAK,CAACK,KAAlrB,GAAwrB,gBAAxrB,GAAysBL,KAAK,CAACvB,KAA7tB,EAAouB,UAAC5E,GAAD,EAAMQ,MAAN,EAAiB;AACjvB,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACA3E,YAAAA,wBAAwB;;AACxB,YAAA,OAAI,CAACoJ,eAAL;;AACA,gBAAI,CAACxE,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAIQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA9B,EAAkC;AAC9B;;;;;;;;AAQA,oBAAGpH,MAAM,CAACoI,gBAAD,CAAN,IAA4BmD,SAA5B,IAAyCvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,KAA8CgD,SAAvF,IAAoGvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,KAA+DnB,SAAtK,EAAiL;AAC7K,sBAAGvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,EAA4DJ,WAA/D,EAA4E;AACxE1K,oBAAAA,uBAAuB;;AACvB,oBAAA,OAAI,CAAC2K,wBAAL,CAA8BvB,cAA9B,EAA8C1C,QAA9C,EAAwDtI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,CAAxD,EAAqHtE,gBAArH,EAAuIG,gBAAvI,EAAyJmE,aAAa,GAAC,CAAvK,EAA0Kd,+BAA1K,EAA2M9E,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBkB,EAA/N;AACH,mBAHD,MAGO,IAAG,CAACrI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,EAA4DJ,WAAhE,EAA6E;AAChF1K,oBAAAA,uBAAuB,GADyD,CAEhF;;AACA,yBAAK,IAAIsG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/H,QAAQ,CAACiI,gBAAD,CAAR,CAA2BhB,MAA/C,EAAuDc,CAAC,EAAxD,EAA4D;AACxD,0BAAGA,CAAC,IAAIlI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,EAA4DF,SAApE,EAA+E;AAC3ExM,wBAAAA,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,EAA4DF,SAA5D,GAAwErM,QAAQ,CAACiI,gBAAD,CAAR,CAA2BF,CAA3B,EAA8BG,EAAtG;AACA;AACH;AACJ;;AAAA;;AACD,oBAAA,OAAI,CAACkE,wBAAL,CAA8BvB,cAA9B,EAA8C1C,QAA9C,EAAwDtI,MAAM,CAACoI,gBAAD,CAAN,CAAyBG,gBAAzB,EAA2CmE,aAAa,GAAC,CAAzD,CAAxD,EAAqHtE,gBAArH,EAAuIG,gBAAvI,EAAyJmE,aAAa,GAAC,CAAvK,EAA0Kd,+BAA1K,EAA2M9E,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBkB,EAA/N;AACH;AACJ;AAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAfF,qBA6CS;AACL,oBAAA,OAAI,CAAC0C,eAAL;AACH;AACJ;AACJ,aA3DD;AA4DH;AACJ,SAvED;AAwEH,OA9ED,EAF0I,CAgFtI;AACP;;;+CAE2BC,c,EAAgB3D,O,EAASe,gB,EAAkBS,e,EAAiBuC,wB,EAA0BC,iC,EAAmC;AAAA;;AACjJ,UAAMpF,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,+HAA6H,OAAI,CAAC9E,KAAL,CAAW+E,uBAAxI,GAAgK,IAAhK,GAAqKmE,cAAc,CAAC3C,EAApL,GAAuL,IAAvL,GAA4LQ,eAA5L,GAA4M,KAA5M,GAAkNxB,OAAO,CAACA,OAA1N,GAAkO,MAAlO,GAAyOA,OAAO,CAACyD,SAAjP,GAA2P,IAAzQ,EAA+Q,UAACxE,GAAD,EAAMQ,MAAN,EAAiB;AAC5R,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACA3E,YAAAA,wBAAwB;;AACxB,gBAAI,CAAC4E,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB3E,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACqL,yBAAL,CAA+BhC,cAA/B,EAA+C3D,OAA/C,EAAwDe,gBAAxD,EAA0ES,eAA1E,EAA2FuC,wBAA3F,EAAqHC,iCAArH;AACH,aAHD;AAIH;AACJ,SAdD;AAeH,OArBD,EAFiJ,CAuB7I;AACP;;;8CAE0BL,c,EAAgB3D,O,EAASe,gB,EAAkBS,e,EAAiBuC,wB,EAA0BC,iC,EAAmC;AAAA;;AAChJ,UAAMpF,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,iEAA+D,OAAI,CAAC9E,KAAL,CAAW+E,uBAA1E,GAAkG,0BAAlG,GAA6HmE,cAAc,CAAC3C,EAA5I,GAA+I,gCAA/I,GAAgLQ,eAA9L,EAA+M,UAACvC,GAAD,EAAMQ,MAAN,EAAiB;AAC5N,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,oBAAI6F,gBAAgB,GAAG,KAAvB;;AACA,qBAAK,IAAI/E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,aAAa,CAACmH,MAAlC,EAA0Cc,CAAC,EAA3C,EAA+C;AAC3C,sBAAIjI,aAAa,CAACiI,CAAD,CAAb,CAAiBd,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B6F,oBAAAA,gBAAgB,GAAG,IAAnB;AACH;AACJ;;AAAA;;AACD,qBAAK,IAAI/E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhI,iBAAiB,CAACkI,gBAAD,CAAjB,CAAoCS,eAApC,EAAqDzB,MAAzE,EAAiFc,CAAC,EAAlF,EAAsF;AAClF,sBAAGmD,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,KAAwE0C,SAA3E,EACIF,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,IAAuE,EAAvE;AACJwC,kBAAAA,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,EAAqE2C,IAArE,CAA0EtD,CAA1E;AACAtG,kBAAAA,uBAAuB;;AACvB,kBAAA,OAAI,CAACsL,iCAAL,CAAuClC,cAAvC,EAAuDlE,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAAvD,EAA4EjH,iBAAiB,CAACkI,gBAAD,CAAjB,CAAoCS,eAApC,EAAqDX,CAArD,CAA5E,EAAqIE,gBAArI,EAAuJS,eAAvJ,EAAwKX,CAAxK,EAA2KmD,iCAA3K,EAA8M4B,gBAA9M;AACH;;AAAA;AACD9M,gBAAAA,QAAQ,CAACiI,gBAAD,CAAR,CAA2BS,eAA3B,EAA4CR,EAA5C,GAAiDvB,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBkB,EAArE;AACA;;;;;;AAKA,qBAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,wBAAwB,CAAChD,gBAAD,CAAxB,CAA2ChB,MAA/D,EAAuEc,CAAC,EAAxE,EAA4E;AACxE,sBAAIkD,wBAAwB,CAAChD,gBAAD,CAAxB,CAA2CF,CAA3C,KAAiDW,eAArD,EAAsE;AAClEuC,oBAAAA,wBAAwB,CAAChD,gBAAD,CAAxB,CAA2C+D,MAA3C,CAAkDjE,CAAlD,EAAqD,CAArD;AACA,wBAAGkD,wBAAwB,CAAChD,gBAAD,CAAxB,CAA2ChB,MAA3C,IAAqD,CAAxD,EACIgE,wBAAwB,CAACe,MAAzB,CAAgC/D,gBAAhC,EAAkD,CAAlD;AACJ;AACH;AACJ;;AAAA,iBA3B2B,CA4B5B;AACA;;AACA,oBAAGS,eAAe,IAAI,CAAtB,EAAyB;AACrB,sBAAI8C,yBAAyB,GAAG,EAAhC;AAAA,sBAAoCC,+BAA+B,GAAG,EAAtE;;AACA,uBAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrL,aAAa,CAACmI,gBAAD,CAAb,CAAgChB,MAApD,EAA4DkE,CAAC,EAA7D,EAAiE;AAC7D,wBAAGK,yBAAyB,CAACvD,gBAAD,CAAzB,IAA+CmD,SAAlD,EACII,yBAAyB,CAACvD,gBAAD,CAAzB,GAA8C,EAA9C;AACJuD,oBAAAA,yBAAyB,CAACvD,gBAAD,CAAzB,CAA4CoD,IAA5C,CAAiDF,CAAjD;AACA,wBAAGM,+BAA+B,CAACxD,gBAAD,CAA/B,IAAqDmD,SAAxD,EACIK,+BAA+B,CAACxD,gBAAD,CAA/B,GAAoD,EAApD;AACJxG,oBAAAA,uBAAuB;AACvB3B,oBAAAA,aAAa,CAACmI,gBAAD,CAAb,CAAgCkD,CAAhC,EAAmCO,uBAAnC,GAA6DP,CAA7D;;AACA,oBAAA,OAAI,CAACQ,+BAAL,CAAqCd,cAArC,EAAqD/K,aAAa,CAACmI,gBAAD,CAAb,CAAgCkD,CAAhC,CAArD,EAAyFlD,gBAAzF,EAA2GkD,CAA3G,EAA8GK,yBAA9G,EAAyIC,+BAAzI;AACH;;AAAA;AACD;;;;;;;;;;;;AAYH;;AACD,oBAAIR,wBAAwB,CAAChE,MAAzB,IAAmC,CAAnC,IAAwC,CAAC6F,gBAA7C,EAAgE;AAC5D,kBAAA,OAAI,CAAClC,eAAL;AACH;AACJ;AACJ,aA5DD;AA6DH;AACJ,SAtED;AAuEH,OA7ED,EAFgJ,CA+E5I;AACP;;;sDAEkCC,c,EAAgB3D,O,EAAS8F,Q,EAAU/E,gB,EAAkBS,e,EAAiBuE,gB,EAAkB/B,iC,EAAmC4B,gB,EAAkB;AAAA;;AAC5K,UAAMhH,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,uUAAqU,OAAI,CAAC9E,KAAL,CAAW+E,uBAAhV,GAAwW,IAAxW,GAA6WmE,cAAc,CAAC3C,EAA5X,GAA+X,IAA/X,GAAoYhB,OAAO,CAACgB,EAA5Y,GAA+Y,IAA/Y,GAAoZ8E,QAAQ,CAACjD,eAA7Z,GAA6a,KAA7a,GAAmbiD,QAAQ,CAAChD,cAA5b,GAA2c,KAA3c,GAAidgD,QAAQ,CAAC/C,cAA1d,GAAye,IAAze,GAA8e+C,QAAQ,CAAC9C,eAAvf,GAAugB,IAAvgB,GAA4gB8C,QAAQ,CAAC7C,eAArhB,GAAqiB,IAAriB,GAA0iB6C,QAAQ,CAAC5C,kBAAnjB,GAAskB,IAAtkB,GAA2kB4C,QAAQ,CAAC3C,uBAAplB,GAA4mB,KAA5mB,GAAknB2C,QAAQ,CAAC1C,aAA3nB,GAAyoB,MAAzoB,GAAgpB0C,QAAQ,CAACzC,oBAAzpB,GAA8qB,MAA9qB,GAAqrByC,QAAQ,CAACxC,kBAA9rB,GAAitB,MAAjtB,GAAwtBwC,QAAQ,CAACvC,cAAjuB,GAAgvB,MAAhvB,GAAuvBuC,QAAQ,CAACtC,WAAhwB,GAA4wB,MAA5wB,GAAmxBsC,QAAQ,CAACrC,SAA5xB,GAAsyB,IAApzB,EAA0zB,UAACxE,GAAD,EAAMQ,MAAN,EAAiB;AACv0B,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACb5E,cAAAA,wBAAwB;;AACxB,cAAA,OAAI,CAACoJ,eAAL;;AACA9E,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WARD,MAQO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB3E,cAAAA,wBAAwB;;AACxB,kBAAG0J,iCAAiC,CAACjD,gBAAD,CAAjC,IAAuDmD,SAAvD,IAAoEF,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,KAAwE0C,SAA/I,EAA0J;AACtJ,qBAAK,IAAIrD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmD,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,EAAqEzB,MAAzF,EAAiGc,CAAC,EAAlG,EAAsG;AAClG,sBAAImD,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,EAAqEX,CAArE,KAA2EkF,gBAA/E,EAAiG;AAC7F/B,oBAAAA,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,EAAqEsD,MAArE,CAA4EjE,CAA5E,EAA+E,CAA/E;AACA,wBAAGmD,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoDS,eAApD,EAAqEzB,MAArE,IAA+E,CAAlF,EACIiE,iCAAiC,CAACjD,gBAAD,CAAjC,CAAoD+D,MAApD,CAA2DtD,eAA3D,EAA4E,CAA5E;AACJ;AACH;AACJ;;AAAA;AACJ;;AACD,kBAAIwC,iCAAiC,CAACjE,MAAlC,IAA4C,CAA5C,IAAiD,CAAC6F,gBAAtD,EAAyE;AACrE,gBAAA,OAAI,CAAClC,eAAL;AACH;AACJ,aAfD;AAgBH;AACJ,SA3BD;AA4BH,OAlCD,EAF4K,CAoCxK;AACP;;;sCAEiB;AACd,UAAGpJ,wBAAwB,IAAIC,uBAA/B,EAAwD;AACpDhC,QAAAA,QAAQ,GAAG,EAAX;AACAC,QAAAA,kBAAkB,GAAG,EAArB;AACAC,QAAAA,SAAS,GAAG,EAAZ;AACAC,QAAAA,wBAAwB,GAAG,EAA3B;AACAC,QAAAA,MAAM,GAAG,EAAT;AACAC,QAAAA,aAAa,GAAG,EAAhB;AACAC,QAAAA,iBAAiB,GAAG,EAApB;AACAC,QAAAA,QAAQ,GAAG,EAAX;AACAC,QAAAA,4BAA4B,GAAG,CAAC,CAAhC;AACAC,QAAAA,kBAAkB,GAAG,CAArB;AACAC,QAAAA,4BAA4B,GAAG,EAA/B;AACAC,QAAAA,qBAAqB,GAAG,EAAxB;AACAC,QAAAA,iBAAiB,GAAG,EAApB;AACAC,QAAAA,gCAAgC,GAAG,CAAC,CAApC;AACAC,QAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACAC,QAAAA,6BAA6B,GAAG,EAAhC;AAEA,aAAKoH,QAAL,CAAc;AACVjI,UAAAA,SAAS,EAAE,EADD;AAEVE,UAAAA,MAAM,EAAE,EAFE;AAGVmC,UAAAA,iBAAiB,EAAE;AAHT,SAAd;AAKH;AACJ;;;wCAEoB;AACjB,UAAIF,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,4BADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWuL;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKvL,KAAL,CAAWwL;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,iCAA7G,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjK;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,+BAApG,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,4BAJJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAkBA,UAAIhB,cAAc,GAAG,KAArB;AAAA,UAA4BC,YAAY,GAAG,EAA3C;AAAA,UAA+CF,WAAW,GAAG,KAA7D;;AACA,UAAIxC,QAAQ,CAACwH,MAAT,GAAkB,CAAtB,EAAyB;AACrBhF,QAAAA,WAAW,GAAG,IAAd;;AACA,YAAGxC,QAAQ,CAAC2N,OAAT,CAAiB,MAAjB,KAA4B,CAA5B,IACC3N,QAAQ,CAAC2N,OAAT,CAAiB,OAAjB,KAA6B,CAD9B,IAEC3N,QAAQ,CAAC2N,OAAT,CAAiB,MAAjB,KAA4B,CAF7B,IAGC3N,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAH5B,IAIC3N,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAJ5B,IAKC3N,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAL5B,IAMC3N,QAAQ,CAAC2N,OAAT,CAAiB,SAAjB,KAA+B,CANnC,EAMuC;AAEnClL,UAAAA,cAAc,GAAG,IAAjB;;AACA,cAAGzC,QAAQ,CAAC2N,OAAT,CAAiB,MAAjB,KAA4B,CAA/B,EAAkC;AAC9BjL,YAAAA,YAAY,GAAG,MAAf;AACH,WAFD,MAEO,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,OAAjB,KAA6B,CAAhC,EAAmC;AACtCjL,YAAAA,YAAY,GAAG,OAAf;AACH,WAFM,MAEA,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,MAAjB,KAA4B,CAA/B,EAAkC;AACrCjL,YAAAA,YAAY,GAAG,MAAf;AACH,WAFM,MAEA,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAA9B,EAAiC;AACpCjL,YAAAA,YAAY,GAAG,KAAf;AACH,WAFM,MAEA,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAA9B,EAAiC;AACpCjL,YAAAA,YAAY,GAAG,KAAf;AACH,WAFM,MAEA,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,KAAjB,KAA2B,CAA9B,EAAiC;AACpCjL,YAAAA,YAAY,GAAG,KAAf;AACH,WAFM,MAEA,IAAG1C,QAAQ,CAAC2N,OAAT,CAAiB,SAAjB,KAA+B,CAAlC,EAAqC;AACxCjL,YAAAA,YAAY,GAAG,SAAf;AACH;AACJ,SAxBD,MAwBO;AACHD,UAAAA,cAAc,GAAG,KAAjB;AACAC,UAAAA,YAAY,GAAG,EAAf;AACH;AACJ;;AAEDf,MAAAA,yBAAyB,GAAG,IAA5B;AACA,WAAKwG,QAAL,CAAc;AACV/F,QAAAA,gBAAgB,EAAE,cADR;AAEVC,QAAAA,MAAM,EAAEA,MAFE;AAGVM,QAAAA,uBAAuB,EAAE;AAAC8E,UAAAA,OAAO,EAAEzH,QAAV;AAAoBkL,UAAAA,SAAS,EAAE;AAA/B,SAHf;AAIV1I,QAAAA,WAAW,EAAEA,WAJH;AAKVC,QAAAA,cAAc,EAAEA,cALN;AAMVC,QAAAA,YAAY,EAAEA;AANJ,OAAd;AAQH;;;6CAEyB;AACtB,WAAKyF,QAAL,CAAc;AACV/F,QAAAA,gBAAgB,EAAE;AADR,OAAd,EAEG,KAAKqD,gBAFR;AAGH;;;wCAEoBmI,Y,EAAc;AAC/BlN,MAAAA,4BAA4B,GAAGkN,YAA/B;AACH;;;0CAEsBrF,K,EAAO;AAC1B3H,MAAAA,iBAAiB,GAAG2H,KAApB;AACH;;;kCAEcsF,U,EAAYC,e,EAAiB;AACxC9M,MAAAA,iBAAiB,GAAG6M,UAApB;AACA5M,MAAAA,sBAAsB,GAAG6M,eAAzB;AACH;;;qCAEiB5C,S,EAAW;AACzBvK,MAAAA,qBAAqB,GAAGuK,SAAxB;AACH;;;uDAEkC6C,c,EAAgBC,W,EAAaC,Y,EAAc;AAC1EpN,MAAAA,gCAAgC,GAAGkN,cAAnC;AACAjN,MAAAA,wBAAwB,GAAGkN,WAA3B;AACAjN,MAAAA,6BAA6B,GAAGkN,YAAhC;AACH;;;8CAE0B3C,K,EAAO;AAC9B,UAAG7K,kBAAkB,GAAG6K,KAAxB,EACI7K,kBAAkB,GAAG6K,KAArB;AACP;;;+CAE2B7D,O,EAASyG,M,EAAQ;AACzC,UAAGzG,OAAO,IAAI,IAAd,EAAoB;AAChB,YAAI7E,gBAAgB,GAAG,WAAS6E,OAAO,CAACgB,EAAxC;AAAA,YAA4C5F,iBAAiB,GAAG,kBAAgB4E,OAAO,CAACgB,EAAxF;AACA,aAAKN,QAAL,CAAc;AACVxF,UAAAA,uBAAuB,EAAE8E,OADf;AAEV7E,UAAAA,gBAAgB,EAAEA,gBAFR;AAGVC,UAAAA,iBAAiB,EAAEA;AAHT,SAAd;AAKA1B,QAAAA,6BAA6B,GAAI+M,MAAjC;AACH,OARD,MAQO,CACH;AACH;AACJ;;;yCAEqBA,M,EAAQ;AAC1B,UAAI7L,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,uBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWuL;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKvL,KAAL,CAAWwL;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,iCAA7G,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjK;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,+BAApG,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,uBAJJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAiBAjD,MAAAA,4BAA4B,GAAG0N,MAA/B,CAlB0B,CAmB1B;;AACA,UAAIC,WAAW,GAAG3N,4BAAlB,CApB0B,CAqB1B;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,QAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH;;AACD,UAAGjH,QAAQ,CAAC4N,WAAD,CAAR,IAAyBxC,SAA5B,EACIpL,QAAQ,CAAC4N,WAAD,CAAR,GAAwB,EAAxB;AACJ,UAAG/N,MAAM,CAAC+N,WAAD,CAAN,IAAuBxC,SAA1B,EACIvL,MAAM,CAAC+N,WAAD,CAAN,GAAsB,EAAtB;AACJ,WAAKhG,QAAL,CAAc;AACV/F,QAAAA,gBAAgB,EAAE,qBADR;AAEVC,QAAAA,MAAM,EAAEA,MAFE;AAGV9B,QAAAA,QAAQ,EAAEA,QAAQ,CAAC4N,WAAD,CAHR;AAIV/N,QAAAA,MAAM,EAAEA,MAAM,CAAC+N,WAAD;AAJJ,OAAd;AAMH;;;6DAEyC;AACtC,WAAKlK,oBAAL,CAA0BzD,4BAA1B;AACH;;;2CAEuB0N,M,EAAQE,Y,EAAc;AAC1C,UAAI/L,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,uBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWuL;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKvL,KAAL,CAAWwL;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,iCAA7G,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjK;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,+BAApG,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKS;AAA5E,SAAoH;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,uBAApH,CAJJ,EAKI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,4BALJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAmBAvC,MAAAA,yBAAyB,GAAG,KAA5B;AAEA,UAAIc,cAAJ,EAAoBC,YAApB;;AACA,UAAGlC,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnCiC,QAAAA,cAAc,GAAG,KAAjB;AACAC,QAAAA,YAAY,GAAG,EAAf;AACH;;AACD,UAAI,KAAKP,KAAL,CAAWQ,uBAAX,IAAsC,IAA1C,EAAgD;AAC5C,YAAG,KAAKR,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,MAA3D,KAAsE,CAAtE,IACC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,OAA3D,KAAuE,CADxE,IAEC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,MAA3D,KAAsE,CAFvE,IAGC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,KAA3D,KAAqE,CAHtE,IAIC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,KAA3D,KAAqE,CAJtE,IAKC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,KAA3D,KAAqE,CALtE,IAMC,KAAK/F,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAnC,CAA6ChD,aAA7C,CAA2D,SAA3D,KAAyE,CAN7E,EAMiF;AAE7EzF,UAAAA,cAAc,GAAG,IAAjB;AACAC,UAAAA,YAAY,GAAG,KAAKP,KAAL,CAAWQ,uBAAX,CAAmCuI,SAAlD;AACH,SAVD,MAUO;AACHzI,UAAAA,cAAc,GAAG,KAAjB;AACAC,UAAAA,YAAY,GAAG,EAAf;AACH;AACJ,OA1CyC,CA4C1C;;;AACA5B,MAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACAI,MAAAA,yBAAyB,GAAGgN,MAA5B;AACA,WAAK/F,QAAL,CAAc;AACV/F,QAAAA,gBAAgB,EAAE,cADR;AAEVC,QAAAA,MAAM,EAAEA,MAFE;AAGVG,QAAAA,WAAW,EAAE4L,YAHH;AAIV3L,QAAAA,cAAc,EAAEA,cAJN;AAKVC,QAAAA,YAAY,EAAEA;AALJ,OAAd;AAOH;;;oCAEgB;AACb,UAAIL,MAAM,GAAG;AAAK,QAAA,SAAS,EAAE;AAAhB,SACT;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,4BADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWuL;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKvL,KAAL,CAAWwL;AAAlF,SAA6G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,iCAA7G,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjK;AAA5E,SAAoG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAApG,CAHJ,EAII;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,oBAJJ,CADJ,CADJ,CAFJ,CADJ,CADS,CAAb;;AAiBA,WAAK0E,QAAL,CAAc;AACV9F,QAAAA,MAAM,EAAEA,MADE;AAEVD,QAAAA,gBAAgB,EAAE;AAFR,OAAd;AAIH;;;yDAEqC;AAClC,UAAIiM,WAAW,GAAGrG,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,EAAlB;AACA9H,MAAAA,wBAAwB,GAAGkO,WAA3B;AACH;;;4CAEwB3G,M,EAAQ;AAC7B,UAAGA,MAAM,CAACQ,aAAP,CAAqB,MAArB,KAAgC,CAAnC,EAAsC;AAClC,eAAO,SAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,OAArB,KAAiC,CAApC,EAAuC;AACnC,eAAO,QAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,MAArB,KAAgC,CAAnC,EAAsC;AAClC,eAAO,WAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,QAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,QAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,KAArB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,OAAP;AACH;;AACD,UAAGR,MAAM,CAACQ,aAAP,CAAqB,SAArB,KAAmC,CAAtC,EAAyC;AACrC,eAAO,SAAP;AACH;AACJ;;;iDAE6BpI,M,EAAQ;AAClC,UAAIwO,QAAQ,GAAG,IAAf,CADkC,CAElC;;AACI,WAAK,IAAIhG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpI,SAAS,CAACsH,MAA9B,EAAsCc,CAAC,EAAvC,EAA2C;AACvC,YAAIpI,SAAS,CAACoI,CAAD,CAAT,CAAaxI,MAAb,CAAoByO,WAApB,GAAkCrG,aAAlC,CAAgDpI,MAAM,CAACyO,WAAP,EAAhD,KAAyE,CAA7E,EAAgF;AAC5ED,UAAAA,QAAQ,GAAG,KAAX;AACA;AACH;AACJ;;AAAA,OAR6B,CASlC;;AACA,aAAOA,QAAP;AACH;;;4CAEwB;AAAe;AACpC,UAAIE,cAAc,GAAGxG,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,EAArB;;AACA,UAAGuG,cAAc,CAAChH,MAAf,GAAwB,CAA3B,EAA8B;AAC1B,YAAG,KAAKlD,4BAAL,CAAkCkK,cAAlC,CAAH,EAAsD;AAClD,cAAG9N,4BAA4B,IAAIiL,SAAhC,IAA6CjL,4BAA4B,CAAC8G,MAA7B,GAAsC,CAAtF,EAAyF;AACrF;AACA,gBAAIiH,OAAJ,EAAanD,KAAb;AACAmD,YAAAA,OAAO,GAAGvO,SAAV;AACAoL,YAAAA,KAAK,GAAG7K,kBAAR;AACA,gBAAIiO,aAAa,GAAG;AAAC5O,cAAAA,MAAM,EAAE0O,cAAT;AAAyBnD,cAAAA,IAAI,EAAE3K,4BAA/B;AAA6D4K,cAAAA,KAAK,EAAEA;AAApE,aAApB;AACAmD,YAAAA,OAAO,CAAC7C,IAAR,CAAa8C,aAAb;AACA,iBAAKvG,QAAL,CAAc;AACVjI,cAAAA,SAAS,EAAEuO,OADD;AAEVlM,cAAAA,iBAAiB,EAAE;AAFT,aAAd;AAIA9B,YAAAA,kBAAkB,GAAG,CAArB;AACAN,YAAAA,wBAAwB,GAAG,EAA3B;AACA6H,YAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+BC,GAA/B,CAAmC,EAAnC;AACA8B,YAAAA,KAAK,CAAC,eAAD,CAAL;AACH,WAfD,MAeO;AACHA,YAAAA,KAAK,CAAC,mCAAD,CAAL;AACH;AACJ,SAnBD,MAmBO;AACHA,UAAAA,KAAK,CAAC,qCAAD,CAAL;AACH;AACJ,OAvBD,MAuBO;AACHA,QAAAA,KAAK,CAAC,+CAAD,CAAL;AACH;AACJ;;;gCAEY4E,S,EAAWC,mB,EAAqBC,2B,EAA6B;AACtE;AACA;AACA;AACA;AACA;AAEA;AACA;;AACA;;;;;;;;AAQA,UAAIrG,gBAAgB,GAAGhI,4BAAvB,CAjBsE,CAkBtE;AACA;AACA;;AACA,UAAGgI,gBAAgB,IAAI,CAAC,CAAxB,EAA2B;AACvBA,QAAAA,gBAAgB,GAAG,KAAKrG,KAAL,CAAWjC,SAAX,CAAqBsH,MAAxC;AACH,OAvBqE,CAwBtE;AACA;;;AACA,UAAIsH,sBAAsB,GAAG,IAA7B;;AACA,UAAG/N,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACyG,SAApE,IAAiF3G,CAAC,CAAC,YAAD,CAAD,CAAgB+G,EAAhB,CAAmB,UAAnB,CAApF,EAAoH;AAChH,YAAIC,YAAY,GAAG5O,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DC,wBAA3D,EAAqFwK,KAAxG;;AACA,YAAGxK,wBAAwB,GAAC,CAAzB,GAA6BV,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2D2G,MAA3F,EAAmG;AAC/F,eAAK,IAAIc,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2D2G,MAAxG,EAAgHc,CAAC,EAAjH,EAAqH;AACjH,gBAAI0G,YAAY,IAAI5O,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DyH,CAA3D,EAA8DgD,KAA9E,IAAuFlL,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DyH,CAA3D,EAA8D4C,SAA9D,CAAwEhD,aAAxE,CAAsF,MAAtF,KAAiG,CAA5L,EAA+L;AAC3L4G,cAAAA,sBAAsB,GAAG,KAAzB;AACH;AACJ;;AAAA;AACJ;AACJ;;AACD,UAAIG,aAAa,GAAG,IAApB;;AACA,UAAG,CAACN,SAAJ,EAAe;AACX,YAAG/N,iBAAiB,IAAI+K,SAArB,IAAkC/K,iBAAiB,CAACqM,KAAlB,IAA2BtB,SAAhE,EAA2E;AACvEsD,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAGjO,iBAAiB,CAACwG,MAAlB,IAA4B,CAA/B,EAAkC;AAC9ByH,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAGtO,qBAAqB,CAACuK,SAAtB,IAAmCS,SAAtC,EAAiD;AAC7CsD,UAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,YAAGrO,iBAAiB,CAACyK,IAAlB,IAA0BM,SAA7B,EAAwC;AACpC,cAAG/K,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,KAArC,KAA+C,CAA/C,IAAoDtH,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,SAArC,KAAmD,CAA1G,EAA6G;AACzG,gBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,QAA1B,KAAuC,CAAC,CAAxC,IAA6C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzF,EAA4F;AACxFsB,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJD,MAIO,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,gBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAtC,IAA2C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAvF,EAA0F;AACtFsB,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJM,MAIA,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,gBAAIlH,iBAAiB,CAAC2M,OAAlB,CAA0B,OAA1B,KAAsC,CAAC,CAAvC,IAA4C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,QAA1B,KAAuC,CAAC,CAApF,IAAyF3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAtI,EAAyI;AACrIsB,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAJM,MAIA,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D,gBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzC,IAA8C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAA1F,EAA6F;AACzFsB,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ;AACJ;AACJ,OA7BD,MA6BO;AACH,YAAGL,mBAAmB,CAACnH,OAApB,IAA+BkE,SAAlC,EAA6C;AACzCsD,UAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,OAvEqE,CAwEtE;;;AACA,UAAGH,sBAAsB,IAAIG,aAA7B,EAA4C;AACxC,YAAGnO,wBAAwB,IAAI,CAAC,CAA7B,IAAoCA,wBAAwB,IAAI,CAAC,CAA7B,KAAmCV,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAuBpH,MAAM,CAACoI,gBAAD,CAAN,IAA4BmD,SAA5B,IAAyCvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBhB,MAAzB,IAAmC,CAAtI,CAAvC,EAAqL;AACjL,cAAI0H,iBAAiB,GAAG,KAAxB;;AACA,cAAGpO,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACyG,MAA9B,GAAuC,CAAzE,IAA8EzG,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAtI,IAA2I7H,aAAa,CAACmI,gBAAD,CAAb,IAAmCmD,SAAjL,EAA4L;AACxL;AACA,gBAAG,CAACgD,SAAJ,EAAe;AACX,kBAAG/N,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EAA2C;AACvC,oBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEyJ,eAAlE,IAAqF1J,iBAAiB,CAACuO,OAA3G,EAAoH;AAChHD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAJD,MAIO,IAAGtO,iBAAiB,CAACuL,UAAlB,IAAgCR,SAAnC,EAA8C;AACjD,oBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEsL,UAAlE,IAAgFvL,iBAAiB,CAACuL,UAAtG,EAAkH;AAC9G+C,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAHgD,CAIjD;;;AACA,oBAAIE,WAAW,GAAG,KAAKjN,KAAL,CAAWkN,SAAX,CAAqBC,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,yBAAOA,MAAM,CAAC9G,EAAP,IAAa7H,iBAAiB,CAACuL,UAAtC;AACH,iBAFiB,CAAlB;;AAGA,oBAAGiD,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAeI,QAAnB,EACIN,iBAAiB,GAAG,IAApB;AACP;AACJ,eAZM,MAYA,IAAGtO,iBAAiB,CAAC4J,cAAlB,IAAoCmB,SAAvC,EAAkD;AACrDuD,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAGtO,iBAAiB,CAAC8J,eAAlB,IAAqCiB,SAAxC,EAAmD;AACtDuD,gBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,aAtBD,MAsBO;AACH,kBAAGN,mBAAmB,CAACO,OAApB,IAA+BxD,SAA/B,IAA4C,CAACiD,mBAAmB,CAAC/D,aAApE,EAAmF;AAC/E,oBAAIxK,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEyJ,eAAlE,IAAqFsE,mBAAmB,CAACO,OAA7G,EAAsH;AAClHD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAJD,MAIO,IAAGN,mBAAmB,CAACzC,UAApB,IAAkCR,SAAlC,IAA+C,CAACiD,mBAAmB,CAAC/D,aAAvE,EAAsF;AACzF,oBAAIxK,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEsL,UAAlE,IAAgFyC,mBAAmB,CAACzC,UAAxG,EAAoH;AAChH+C,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAHwF,CAIzF;;;AACA,oBAAIE,WAAW,GAAG,KAAKjN,KAAL,CAAWkN,SAAX,CAAqBC,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,yBAAOA,MAAM,CAAC9G,EAAP,IAAamG,mBAAmB,CAACzC,UAAxC;AACH,iBAFiB,CAAlB;;AAGA,oBAAGiD,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,sBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAeI,QAAnB,EACIN,iBAAiB,GAAG,IAApB;AACP;AACJ,eAZM,MAYA,IAAGN,mBAAmB,CAACpE,cAApB,IAAsCmB,SAAtC,IAAmD,CAACiD,mBAAmB,CAAC/D,aAA3E,EAA0F;AAC7FqE,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAGN,mBAAmB,CAAClE,eAApB,IAAuCiB,SAAvC,IAAoD,CAACiD,mBAAmB,CAAC/D,aAA5E,EAA2F;AAC9FqE,gBAAAA,iBAAiB,GAAG,IAApB;AACH,eAFM,MAEA,IAAGN,mBAAmB,CAAC/D,aAAvB,EAAsC;AACzCqE,gBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,WAjDD,MAiDO,IAAMpO,wBAAwB,IAAI,CAAC,CAA7B,KAAmCV,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAuBpH,MAAM,CAACoI,gBAAD,CAAN,IAA4BmD,SAA5B,IAAyCvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBhB,MAAzB,IAAmC,CAAtI,CAAF,IAAiJzG,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAzM,IAA+M7H,aAAa,CAACmI,gBAAD,CAAb,IAAmCmD,SAAtP,EAAiQ;AACpQuD,YAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,cAAGA,iBAAH,EAAsB;AAClB,gBAAG,CAACP,SAAJ,EAAe;AACX,kBAAIR,WAAW,GAAG3N,4BAAlB,CADW,CAEX;AACA;AACA;;AACA,kBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,gBAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH;;AACD,kBAAGpH,MAAM,CAAC+N,WAAD,CAAN,IAAuBxC,SAA1B,EAAqC;AACjC;AACH;;AACD,kBAAGtL,aAAa,CAACmH,MAAd,IAAwBmE,SAA3B,EACItL,aAAa,GAAG,EAAhB;AACJ,kBAAGA,aAAa,CAAC8N,WAAD,CAAb,IAA8BxC,SAAjC,EACItL,aAAa,CAAC8N,WAAD,CAAb,GAA6B,EAA7B;AACJ,kBAAI7D,eAAe,GAAG,CAAC,CAAvB;AAAA,kBAA0B6B,UAAU,GAAG,CAAC,CAAxC;AAAA,kBAA2CC,eAAe,GAAG,KAA7D;AAAA,kBAAoEC,QAAQ,GAAG,CAA/E;AAAA,kBAAkFvB,oBAAoB,GAAG,EAAzG;AACA,kBAAIN,cAAc,GAAG,CAAC,CAAtB;AAAA,kBAAyBC,eAAe,GAAG,CAAC,CAA5C;AAAA,kBAA+CC,eAAe,GAAG,CAAC,CAAlE;AACA,kBAAIG,aAAa,GAAG,KAApB;;AACA,kBAAGjK,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAA7B,IAA0C/K,iBAAiB,CAACuO,OAAlB,IAA6B,CAAC,CAA3E,EAA8E;AAC1E7E,gBAAAA,eAAe,GAAG1J,iBAAiB,CAACuO,OAApC;AACA/C,gBAAAA,eAAe,GAAG,IAAlB;AACAtB,gBAAAA,oBAAoB,GAAGlK,iBAAiB,CAACqM,KAAzC;AACH,eAJD,MAIO,IAAGrM,iBAAiB,CAACuL,UAAlB,IAAgCR,SAAhC,IAA6C/K,iBAAiB,CAACuL,UAAlB,IAAgC,CAAC,CAAjF,EAAoF;AACvFA,gBAAAA,UAAU,GAAGvL,iBAAiB,CAACuL,UAA/B;AACH,eAFM,MAEA,IAAGvL,iBAAiB,CAAC4J,cAAlB,IAAoCmB,SAApC,IAAiD/K,iBAAiB,CAAC4J,cAAlB,IAAoC,CAAC,CAAzF,EAA4F;AAC/FA,gBAAAA,cAAc,GAAG5J,iBAAiB,CAAC4J,cAAnC;AACAC,gBAAAA,eAAe,GAAG7J,iBAAiB,CAAC6J,eAApC;AACH,eAHM,MAGA,IAAG7J,iBAAiB,CAAC8J,eAAlB,IAAqCiB,SAArC,IAAkD/K,iBAAiB,CAAC8J,eAAlB,IAAqC,CAAC,CAA3F,EAA8F;AACjGA,gBAAAA,eAAe,GAAG9J,iBAAiB,CAAC8J,eAApC;AACH,eAFM,MAEA,IAAG9J,iBAAiB,CAACiK,aAAlB,IAAmCc,SAAtC,EAAiD;AACpDd,gBAAAA,aAAa,GAAGjK,iBAAiB,CAACiK,aAAlC;AACH;;AACD,kBAAI4E,6BAA6B,GAAG,CAApC;AAAA,kBAAuCC,6BAA6B,GAAG,CAAvE;;AACA,kBAAG3O,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAxD,IAA8DpH,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACyG,MAA9B,IAAwC,CAAxI,IAA8InH,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,IAAqC,CAAtL,EAAyL;AACrL,oBAAImI,kBAAkB,GAAG,CAAzB;;AACA,oBAAGtP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,GAAoC,CAAvC,EAA0C;AACtCmI,kBAAAA,kBAAkB,GAAGtP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAAhD;AACH;;AACDnH,gBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BvC,IAA3B,CAAgC;AAC5BtB,kBAAAA,eAAe,EAAEA,eADW;AAE5B6B,kBAAAA,UAAU,EAAEA,UAFgB;AAG5BC,kBAAAA,eAAe,EAAEA,eAHW;AAI5BC,kBAAAA,QAAQ,EAAEA,QAJkB;AAK5BsD,kBAAAA,kBAAkB,EAAEA,kBALQ;AAM5BnF,kBAAAA,cAAc,EAAEA,cANY;AAO5BC,kBAAAA,eAAe,EAAEA,eAPW;AAQ5BC,kBAAAA,eAAe,EAAEA,eARW;AAS5BG,kBAAAA,aAAa,EAAEA;AATa,iBAAhC;AAWA4E,gBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,gBAAAA,6BAA6B,GAAGrP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,GAAkC,CAAlE;AACH,eAlBD,MAkBO;AACHnH,gBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DwL,QAA7D;;AACA,oBAAGhM,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D2J,cAA7D,IAA+E,CAAC,CAAhF,IAAqFA,cAAc,IAAI,CAAC,CAA3G,EAA8G;AAC1GnK,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D2J,cAA7D,GAA8EA,cAA9E;AACAnK,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D4J,eAA7D,GAA+EA,eAA/E;AACH;;AACD,oBAAGpK,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D6J,eAA7D,IAAgF,CAAC,CAAjF,IAAsFA,eAAe,IAAI,CAAC,CAA7G,EAAgH;AAC5GrK,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D6J,eAA7D,GAA+EA,eAA/E;AACH;;AACD,oBAAGrK,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DsL,UAA7D,IAA2E,CAAC,CAA5E,IAAiFA,UAAU,IAAI,CAAC,CAAnG,EAAsG;AAClG9L,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DsL,UAA7D,GAA0EA,UAA1E;AACH;;AACDsD,gBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,gBAAAA,6BAA6B,GAAG7O,gCAAhC;AACH;;AACD,kBAAGT,MAAM,CAACqP,6BAAD,CAAN,IAAyC9D,SAA5C,EAAuD;AACnDvL,gBAAAA,MAAM,CAACqP,6BAAD,CAAN,GAAwC,EAAxC;AACH;;AACD,kBAAGrP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE/D,SAA3E,EAAsF;AAClFvL,gBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,IAAuE,EAAvE;AACH;;AACD,kBAAIhD,WAAW,GAAG,CAACiC,SAAnB;AACA,kBAAIgB,kBAAkB,GAAG,CAAzB;;AACA,kBAAG9O,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAyH,gBAAAA,kBAAkB,GAAG9O,gCAArB;AACH,eAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAyH,gBAAAA,kBAAkB,GAAG9O,gCAAgC,GAAC,CAAtD;AACH;;AACD,kBAAI+O,UAAU,GAAGnP,kBAAjB;AACA,kBAAIoP,UAAU,GAAG;AACGpD,gBAAAA,eAAe,EAAEkD,kBADpB;AAEGrF,gBAAAA,eAAe,EAAEA,eAFpB;AAGGQ,gBAAAA,oBAAoB,EAAEA,oBAHzB;AAIG8B,gBAAAA,SAAS,EAAE,CAAC,CAJf;AAKGT,gBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2D,gBAAAA,eAAe,EAAE,CAAC,CANrB;AAOG9G,gBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG+D,gBAAAA,iBAAiB,EAAEnM,iBAAiB,CAACyK,IARxC;AASGqB,gBAAAA,WAAW,EAAEA,WAThB;AAUGN,gBAAAA,eAAe,EAAEA,eAVpB;AAWGlB,gBAAAA,SAAS,EAAEvK,qBAAqB,CAACuK,SAXpC;AAYG8B,gBAAAA,cAAc,EAAErM,qBAAqB,CAACqM,cAZzC;AAaGC,gBAAAA,KAAK,EAAEjM,iBAbV;AAcGkM,gBAAAA,KAAK,EAAEtM,iBAAiB,CAACqM,KAAlB,GAAwB,GAAxB,GAA4BtM,qBAAqB,CAACqM,cAAlD,GAAiE,GAAjE,GAAqE/L,sBAd/E;AAeGqK,gBAAAA,KAAK,EAAEsE,UAfV;AAgBG3D,gBAAAA,uBAAuB,EAAE0D;AAhB5B,eAAjB;;AAkBA,kBAAGvP,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAsBpH,MAAM,CAACqP,6BAAD,CAAN,CAAsCjI,MAAtC,IAAgD,CAAtE,IAA2EpH,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAArE,IAA+E,CAA7J,EAAgK;AAC5J;AACApH,gBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH,eAHD,MAGO;AACH;AAEA,oBAAG9O,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEF,CAAC,CAAC,UAAD,CAAD,CAAc+G,EAAd,CAAiB,UAAjB,CAAtE,EAAqG;AACjG;AACA;AACAc,kBAAAA,UAAU,CAAC7G,YAAX,GAA0BlI,wBAA1B;AACA+O,kBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAA/F,GAAqG,CAAxH;AACAlL,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAAwB,GAAC,CAArG,EAAwG,CAAxG,EAA2G+O,UAA3G;;AACA,sBAAGzP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,yBAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,0BAAGuH,UAAU,CAACvE,KAAX,IAAoBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA/F,EAAsG;AAClGlL,wBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAlI,wBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,iBAdD,MAcO,IAAGvK,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEF,CAAC,CAAC,YAAD,CAAD,CAAgB+G,EAAhB,CAAmB,UAAnB,CAAtE,EAAuG;AAC1G,sBAAIgB,iBAAiB,GAAG,CAAC,CAAzB;AACAF,kBAAAA,UAAU,CAAC7G,YAAX,GAA0B5I,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FkI,YAAzH;AACA6G,kBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAAlH;;AACA,sBAAGlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,yBAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,0BAAGuH,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA9F,EAAoG;AAChGyE,wBAAAA,iBAAiB,GAAGzH,CAApB;AACH;AACJ;;AAAA;AACJ;;AACD,sBAAGyH,iBAAiB,IAAI,CAAC,CAAzB,EAA4B;AACxB3P,oBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EwD,iBAA5E,EAA+F,CAA/F,EAAkGF,UAAlG;AACH,mBAFD,MAEO;AACH;AACAzP,oBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH;AACJ,iBAjBM,MAiBA,IAAG9O,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAA3D,EAA8D;AACjE2H,kBAAAA,UAAU,CAAC7G,YAAX,GAA0B,CAAC,CAA3B;AACA6G,kBAAAA,UAAU,CAACvE,KAAX,GAAmB,CAAC,CAApB;AACAlL,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH,iBAJM,MAIA,IAAG9O,6BAA6B,CAACmH,aAA9B,CAA4C,QAA5C,KAAyD,CAA5D,EAA+D;AAClE2H,kBAAAA,UAAU,CAAC7G,YAAX,GAA0B5I,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FkI,YAAzH;AACA6G,kBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAAlH;AACAlL,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAA5E,EAAsG,CAAtG,EAAyG+O,UAAzG;;AACA,sBAAGzP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,yBAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,0BAAGuH,UAAU,CAACvE,KAAX,IAAoBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA/F,EAAsG;AAClGlL,wBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAlI,wBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,iBAlDE,CAmDH;;AACH,eA3JU,CA4JX;;;AACAxK,cAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACA;;;;;;;;AAOA,mBAAKqH,QAAL,CAAc;AACV/H,gBAAAA,MAAM,EAAEA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,eAAd;AAGA9O,cAAAA,iBAAiB,GAAG,IAApB;AACAI,cAAAA,iBAAiB,GAAG,EAApB;AACH,aA1KD,MA0KO;AACH;AACA,kBAAImN,WAAW,GAAG3N,4BAAlB,CAFG,CAGH;AACA;AACA;;AACA,kBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,gBAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH,eARE,CASH;;;AACA,kBAAIwI,aAAa,GAAGtP,4BAApB;;AACA,mBAAK,IAAI4H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhI,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BhN,6BAA/B,EAA8DqG,MAAlF,EAA0Fc,CAAC,EAA3F,EAA+F;AAC3F0H,gBAAAA,aAAa,GAAG1P,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BhN,6BAA/B,EAA8DmH,CAA9D,EAAiEyC,kBAAjF;AACA;AACH;;AAAA;;AACD,kBAAKvK,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAK2B,KAAL,CAAWI,iBAAX,CAA6B2F,aAA7B,CAA2C8H,aAA3C,KAA6D,CAA7D,IAAkE,KAAK7N,KAAL,CAAWI,iBAAX,CAA6BiF,MAA7B,IAAuC,CAAhJ,CAAD,IAAyJhH,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAK2B,KAAL,CAAWjC,SAAX,CAAqBiO,WAArB,EAAkC9C,IAAlC,CAAuCnD,aAAvC,CAAqD8H,aAArD,KAAuE,CAAvE,IAA4E,KAAK7N,KAAL,CAAWjC,SAAX,CAAqBiO,WAArB,EAAkC9C,IAAlC,CAAuC7D,MAAvC,IAAiD,CAApK,CAA7J,EAAuU;AACnU,oBAAIoI,UAAU,GAAGnP,kBAAjB;AACA;;;;;;;;;AAQA,oBAAGJ,aAAa,CAACmH,MAAd,IAAwBmE,SAA3B,EACItL,aAAa,GAAG,EAAhB;AACJ,oBAAGA,aAAa,CAAC8N,WAAD,CAAb,IAA8BxC,SAAjC,EACItL,aAAa,CAAC8N,WAAD,CAAb,GAA6B,EAA7B;AACJ,oBAAI7D,eAAe,GAAG,CAAC,CAAvB;AAAA,oBAA0B6B,UAAU,GAAG,CAAC,CAAxC;AAAA,oBAA2CC,eAAe,GAAG,KAA7D;AAAA,oBAAoEC,QAAQ,GAAG,CAA/E;AACA,oBAAIoD,6BAA6B,GAAG,CAApC;AAAA,oBAAuCC,6BAA6B,GAAG,CAAvE;AACA,oBAAIzD,uBAAuB,GAAG,CAAC,CAA/B,CAhBmU,CAgBjS;;AAClC,oBAAIzB,cAAc,GAAG,CAAC,CAAtB;AAAA,oBAAyBC,eAAe,GAAG,CAAC,CAA5C;AAAA,oBAA+CC,eAAe,GAAG,CAAC,CAAlE;AACA,oBAAIG,aAAa,GAAG,KAApB;;AACA,oBAAG+D,mBAAmB,CAACO,OAApB,IAA+BxD,SAA/B,IAA4CiD,mBAAmB,CAACO,OAApB,IAA+B,CAAC,CAA/E,EAAkF;AAC9E7E,kBAAAA,eAAe,GAAGsE,mBAAmB,CAACO,OAAtC;AACA/C,kBAAAA,eAAe,GAAG,IAAlB;AACH,iBAHD,MAGO,IAAGwC,mBAAmB,CAACzC,UAApB,IAAkCR,SAAlC,IAA+CiD,mBAAmB,CAACzC,UAApB,IAAkC,CAAC,CAArF,EAAwF;AAC3FA,kBAAAA,UAAU,GAAGyC,mBAAmB,CAACzC,UAAjC;AACH,iBAFM,MAEA,IAAGyC,mBAAmB,CAACpE,cAApB,IAAsCmB,SAAtC,IAAmDiD,mBAAmB,CAACpE,cAApB,IAAsC,CAAC,CAA7F,EAAgG;AACnGA,kBAAAA,cAAc,GAAGoE,mBAAmB,CAACpE,cAArC;AACAC,kBAAAA,eAAe,GAAGmE,mBAAmB,CAACnE,eAAtC;AACH,iBAHM,MAGA,IAAGmE,mBAAmB,CAAClE,eAApB,IAAuCiB,SAAvC,IAAoDiD,mBAAmB,CAAClE,eAApB,IAAuC,CAAC,CAA/F,EAAkG;AACrGA,kBAAAA,eAAe,GAAGkE,mBAAmB,CAAClE,eAAtC;AACH,iBAFM,MAEA,IAAGkE,mBAAmB,CAAC/D,aAApB,IAAqCc,SAAxC,EAAmD;AACtDd,kBAAAA,aAAa,GAAG+D,mBAAmB,CAAC/D,aAApC;AACH;;AACD,oBAAG9J,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAxD,IAA8DpH,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACyG,MAA9B,IAAwC,CAAxI,IAA8InH,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,IAAqC,CAAtL,EAAyL;AACrL,sBAAImI,kBAAkB,GAAG,CAAzB;;AACA,sBAAGtP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,GAAoC,CAAvC,EAA0C;AACtCmI,oBAAAA,kBAAkB,GAAGtP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAAhD;AACH;;AACDnH,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BvC,IAA3B,CAAgC;AAC5BtB,oBAAAA,eAAe,EAAEA,eADW;AAE5B6B,oBAAAA,UAAU,EAAEA,UAFgB;AAG5BC,oBAAAA,eAAe,EAAEA,eAHW;AAI5BC,oBAAAA,QAAQ,EAAEA,QAJkB;AAK5BsD,oBAAAA,kBAAkB,EAAEA,kBALQ;AAM5BnF,oBAAAA,cAAc,EAAEA,cANY;AAO5BC,oBAAAA,eAAe,EAAEA,eAPW;AAQ5BC,oBAAAA,eAAe,EAAEA,eARW;AAS5BG,oBAAAA,aAAa,EAAEA;AATa,mBAAhC;AAWA4E,kBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,kBAAAA,6BAA6B,GAAGrP,aAAa,CAAC8N,WAAD,CAAb,CAA2B3G,MAA3B,GAAkC,CAAlE;AACH,iBAlBD,MAkBO;AACHnH,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DwL,QAA7D;;AACA,sBAAGhM,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D2J,cAA7D,IAA+E,CAAC,CAAhF,IAAqFA,cAAc,IAAI,CAAC,CAA3G,EAA8G;AAC1GnK,oBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D2J,cAA7D,GAA8EA,cAA9E;AACAnK,oBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D4J,eAA7D,GAA+EA,eAA/E;AACH;;AACD,sBAAGpK,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D6J,eAA7D,IAAgF,CAAC,CAAjF,IAAsFA,eAAe,IAAI,CAAC,CAA7G,EAAgH;AAC5GrK,oBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6D6J,eAA7D,GAA+EA,eAA/E;AACH;;AACD,sBAAGrK,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DsL,UAA7D,IAA2E,CAAC,CAA5E,IAAiFA,UAAU,IAAI,CAAC,CAAnG,EAAsG;AAClG9L,oBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DsL,UAA7D,GAA0EA,UAA1E;AACH;;AACDsD,kBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,kBAAAA,6BAA6B,GAAG7O,gCAAhC;AACH;;AACD,oBAAGT,MAAM,CAACqP,6BAAD,CAAN,IAAyC9D,SAA5C,EAAuD;AACnDvL,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,GAAwC,EAAxC;AACH;;AACD,oBAAGrP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE/D,SAA3E,EAAsF;AAClFvL,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,IAAuE,EAAvE;AACH;;AACD,oBAAIhD,WAAW,GAAG,CAACiC,SAAnB;AACA,oBAAIgB,kBAAkB,GAAG,CAAzB;;AACA,oBAAG9O,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAyH,kBAAAA,kBAAkB,GAAG9O,gCAArB;AACH,iBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAyH,kBAAAA,kBAAkB,GAAG9O,gCAAgC,GAAC,CAAtD;AACH;;AAED,oBAAIgP,UAAU,GAAG;AACGpD,kBAAAA,eAAe,EAAEkD,kBADpB;AAEGrF,kBAAAA,eAAe,EAAEA,eAFpB;AAGGQ,kBAAAA,oBAAoB,EAAE,EAHzB;AAIG8B,kBAAAA,SAAS,EAAEiC,2BAJd;AAKG1C,kBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2D,kBAAAA,eAAe,EAAE,CAAC,CANrB;AAOG9G,kBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG0D,kBAAAA,WAAW,EAAEA,WARhB;AASGN,kBAAAA,eAAe,EAAEA,eATpB;AAUGW,kBAAAA,iBAAiB,EAAErM,4BAVtB;AAWGwK,kBAAAA,SAAS,EAAE0D,mBAAmB,CAAC1D,SAXlC;AAYG8B,kBAAAA,cAAc,EAAE,KAAK3I,uBAAL,CAA6BuK,mBAAmB,CAAC1D,SAAjD,CAZnB;AAaG+B,kBAAAA,KAAK,EAAE2B,mBAAmB,CAAC1D,SAb9B;AAcGgC,kBAAAA,KAAK,EAAE0B,mBAAmB,CAACnH,OAd9B;AAeG6D,kBAAAA,KAAK,EAAEsE,UAfV;AAgBG3D,kBAAAA,uBAAuB,EAAE0D;AAhB5B,iBAAjB;;AAkBA,oBAAGvP,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAsBpH,MAAM,CAACqP,6BAAD,CAAN,CAAsCjI,MAAtC,IAAgD,CAAtE,IAA2EpH,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAArE,IAA+E,CAA7J,EAAgK;AAC5J;AACApH,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH,iBAHD,MAGO;AACH;AAEA,sBAAK9O,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEF,CAAC,CAAC,UAAD,CAAD,CAAc+G,EAAd,CAAiB,UAAjB,CAApE,IAAsGhO,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACF,CAAC,CAAC,UAAD,CAAD,CAAc+G,EAAd,CAAiB,UAAjB,CAApE,IAAoG,CAAC/G,CAAC,CAAC,YAAD,CAAD,CAAgB+G,EAAhB,CAAmB,UAAnB,CAA/M,EAAiP;AAC7O;AACA;AACAc,oBAAAA,UAAU,CAAC7G,YAAX,GAA0BlI,wBAA1B;AACA+O,oBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAA/F,GAAqG,CAAxH;AACAlL,oBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAAwB,GAAC,CAArG,EAAwG,CAAxG,EAA2G+O,UAA3G;;AACA,wBAAGzP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,2BAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,4BAAGuH,UAAU,CAACvE,KAAX,IAAoBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA/F,EAAsG;AAClGlL,0BAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAlI,0BAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,mBAdD,MAcO,IAAGvK,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmEF,CAAC,CAAC,YAAD,CAAD,CAAgB+G,EAAhB,CAAmB,UAAnB,CAAtE,EAAuG;AAC1G,wBAAIgB,iBAAiB,GAAG,CAAC,CAAzB;AACAF,oBAAAA,UAAU,CAAC7G,YAAX,GAA0B5I,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FkI,YAAzH;AACA6G,oBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAAlH;;AACA,wBAAGlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,2BAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,4BAAGuH,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA9F,EAAoG;AAChGyE,0BAAAA,iBAAiB,GAAGzH,CAApB;AACH;AACJ;;AAAA;AACJ;;AACD,wBAAGyH,iBAAiB,IAAI,CAAC,CAAzB,EAA4B;AACxB3P,sBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EwD,iBAA5E,EAA+F,CAA/F,EAAkGF,UAAlG;AACH,qBAFD,MAEO;AACH;AACAzP,sBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH;AACJ,mBAjBM,MAiBA,IAAG9O,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAA3D,EAA8D;AACjE2H,oBAAAA,UAAU,CAAC7G,YAAX,GAA0B,CAAC,CAA3B;AACA6G,oBAAAA,UAAU,CAACvE,KAAX,GAAmB,CAAC,CAApB;AACAlL,oBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE9D,IAArE,CAA0EiE,UAA1E;AACH,mBAJM,MAIA,IAAG9O,6BAA6B,CAACmH,aAA9B,CAA4C,QAA5C,KAAyD,CAA5D,EAA+D;AAClE2H,oBAAAA,UAAU,CAAC7G,YAAX,GAA0B5I,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FkI,YAAzH;AACA6G,oBAAAA,UAAU,CAACvE,KAAX,GAAmBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAArE,EAA+FwK,KAAlH;AACAlL,oBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAA5E,EAAsG,CAAtG,EAAyG+O,UAAzG;;AACA,wBAAGzP,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqE5O,wBAAwB,GAAC,CAA9F,KAAoG6K,SAAvG,EAAkH;AAC9G,2BAAK,IAAIrD,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAAlH,EAA0Hc,CAAC,EAA3H,EAA+H;AAC3H,4BAAGuH,UAAU,CAACvE,KAAX,IAAoBlL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAA/F,EAAsG;AAClGlL,0BAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEU,YAAxE,GAAuFV,CAAC,GAAC,CAAzF;AACAlI,0BAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEpH,CAArE,EAAwEgD,KAAxE;AACH;AACJ;;AAAA;AACJ;AACJ,mBAlDE,CAmDH;;AACH,iBA1JkU,CA2JnU;;;AACAxK,gBAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,oBAAImP,WAAW,sBAAO7P,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,CAAP,CAAf;;AACA,qBAAKvH,QAAL,CAAc;AACV/H,kBAAAA,MAAM,EAAEA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,iBAAd;AAGAd,gBAAAA,mBAAmB,GAAG,IAAtB,CAjKmU,CAkKnU;;AACI,qBAAKzG,QAAL,CAAc;AACV5F,kBAAAA,iBAAiB,EAAEyN;AADT,iBAAd,EAnK+T,CAsKnU;;AACA;;;;;;;AAOA;AACH,eA/KD,MA+KO;AACH,oBAAG,KAAK7N,KAAL,CAAWI,iBAAX,CAA6B2F,aAA7B,CAA2C8H,aAA3C,KAA6D,CAAhE,EAAmE;AAC/DjG,kBAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;AACJ;AACJ,WA/WD,MA+WO;AACH,gBAAImG,MAAM,GAAG,UAAb;AACA,gBAAGtP,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EACIuE,MAAM,GAAG,OAAT;AACJ,gBAAIhD,KAAK,GAAG,SAAZ;AACA,gBAAG,CAACyB,SAAJ,EACIzB,KAAK,GAAG,aAAR;AACJnD,YAAAA,KAAK,CAAC,QAAMmD,KAAN,GAAY,qCAAZ,GAAkDgD,MAAlD,GAAyD,GAA1D,CAAL;AACH;AACJ,SA9aD,MA8aO;AACHnG,UAAAA,KAAK,CAAC,wDAAD,CAAL;AACH;AACJ,OAlbD,MAkbO;AACH,YAAG,CAACkF,aAAD,IAAkB,CAACN,SAAtB,EACI5E,KAAK,CAAC,wDAAD,CAAL,CADJ,KAEK,IAAG,CAACkF,aAAD,IAAkBN,SAArB,EACD5E,KAAK,CAAC,yBAAD,CAAL,CADC,KAGDA,KAAK,CAAC,6CAAD,CAAL;AACP;AACJ;;;6CAEyBtC,O,EAAS0I,c,EAAgB;AAC/C,UAAGxO,yBAAH,EACI,KAAK+C,sBAAL,CAA4B+C,OAA5B,EAAqC0I,cAArC,EADJ,KAGI,KAAKxL,aAAL,CAAmB8C,OAAnB,EAA4B0I,cAA5B;AACP;;;2CAEuB1I,O,EAAS0I,c,EAAgB;AAC7CnQ,MAAAA,QAAQ,GAAGyH,OAAO,CAACA,OAAnB,CAD6C,CAE7C;;AACAxH,MAAAA,kBAAkB,GAAG,EAArB;AACA,UAAImQ,kBAAkB,GAAG,EAAzB;AACA,WAAKxL,sBAAL,CAA4BuL,cAA5B,EAA4CC,kBAA5C;AACAnQ,MAAAA,kBAAkB,GAAGmQ,kBAArB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CH;;;kCAEa3I,O,EAAS0I,c,EAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIhC,WAAW,GAAG3N,4BAAlB,CAVmC,CAWnC;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,QAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH,OAhBkC,CAiBnC;;;AACA,UAAI6I,oBAAoB,GAAG9P,QAA3B;AACA,UAAG8P,oBAAoB,CAAClC,WAAD,CAApB,IAAqCxC,SAAxC,EACI0E,oBAAoB,CAAClC,WAAD,CAApB,GAAoC,EAApC;AACJ1G,MAAAA,OAAO,CAAC6I,yBAAR,GAAoCD,oBAAoB,CAAClC,WAAD,CAApB,CAAkC3G,MAAtE;AACA6I,MAAAA,oBAAoB,CAAClC,WAAD,CAApB,CAAkCvC,IAAlC,CAAuCnE,OAAvC;AACA,WAAKU,QAAL,CAAc;AACV5H,QAAAA,QAAQ,EAAE8P,oBAAoB,CAAClC,WAAD;AADpB,OAAd;AAGA,UAAG7N,iBAAiB,CAAC6N,WAAD,CAAjB,IAAkCxC,SAArC,EACIrL,iBAAiB,CAAC6N,WAAD,CAAjB,GAAiC,EAAjC;AACJ,UAAItC,sBAAsB,GAAG,CAA7B;AACA,UAAIwE,oBAAoB,CAAClC,WAAD,CAApB,CAAkC3G,MAAlC,GAA2C,CAA/C,EACIqE,sBAAsB,GAAGwE,oBAAoB,CAAClC,WAAD,CAApB,CAAkC3G,MAAlC,GAAyC,CAAlE,CA9B+B,CA+BnC;;AACA,UAAGlH,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,KAA0DF,SAA7D,EACIrL,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,IAAyD,EAAzD;AACJ,UAAIuE,kBAAkB,GAAG,EAAzB;AACA,WAAKxL,sBAAL,CAA4BuL,cAA5B,EAA4CC,kBAA5C;AACA9P,MAAAA,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,IAAyDuE,kBAAzD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CH;;;2CAEuBD,c,EAAgBI,K,EAAO;AAC3C,WAAK,IAAIjI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6H,cAAc,CAAC3I,MAAnC,EAA2Cc,CAAC,EAA5C,EAAgD;AAC5C,YAAGkI,KAAK,CAACC,OAAN,CAAcN,cAAc,CAAC7H,CAAD,CAAd,CAAkB2E,KAAhC,CAAH,EAA2C;AACvC,eAAKrI,sBAAL,CAA4BuL,cAAc,CAAC7H,CAAD,CAAd,CAAkB2E,KAA9C,EAAqDsD,KAArD;AACH,SAFD,MAEO,IAAGJ,cAAc,CAAC7H,CAAD,CAAd,CAAkB+C,IAAlB,CAAuBnD,aAAvB,CAAqC,UAArC,KAAoD,CAAvD,EAA0D;AAC7D,cAAIoC,eAAe,GAAG,CAAC,CAAvB;AACA,cAAG6F,cAAc,CAAC7H,CAAD,CAAd,CAAkBoI,YAAlB,IAAkC/E,SAAlC,IAA+CwE,cAAc,CAAC7H,CAAD,CAAd,CAAkBoI,YAApE,EACIpG,eAAe,GAAG6F,cAAc,CAAC7H,CAAD,CAAd,CAAkB6G,OAApC;AACJ,cAAI5E,cAAc,GAAG,KAArB;AACA,cAAG4F,cAAc,CAAC7H,CAAD,CAAd,CAAkBoI,YAAlB,IAAkC/E,SAAlC,IAA+CwE,cAAc,CAAC7H,CAAD,CAAd,CAAkBoI,YAApE,EACInG,cAAc,GAAG,IAAjB;AACJ,cAAIC,cAAc,GAAG,CAAC,CAAtB;AACA,cAAG2F,cAAc,CAAC7H,CAAD,CAAd,CAAkBkC,cAAlB,IAAoCmB,SAAvC,EACInB,cAAc,GAAG2F,cAAc,CAAC7H,CAAD,CAAd,CAAkBkC,cAAnC;AACJ,cAAIC,eAAe,GAAG,CAAC,CAAvB;AACA,cAAG0F,cAAc,CAAC7H,CAAD,CAAd,CAAkBmC,eAAlB,IAAqCkB,SAAxC,EACIlB,eAAe,GAAG0F,cAAc,CAAC7H,CAAD,CAAd,CAAkBmC,eAApC;AACJ,cAAIC,eAAe,GAAG,CAAC,CAAvB;AACA,cAAGyF,cAAc,CAAC7H,CAAD,CAAd,CAAkBoC,eAAlB,IAAqCiB,SAAxC,EACIjB,eAAe,GAAGyF,cAAc,CAAC7H,CAAD,CAAd,CAAkBoC,eAApC;AACJ,cAAIC,kBAAkB,GAAG,CAAC,CAA1B;AACA,cAAGwF,cAAc,CAAC7H,CAAD,CAAd,CAAkB6D,UAAlB,IAAgCR,SAAnC,EACIhB,kBAAkB,GAAGwF,cAAc,CAAC7H,CAAD,CAAd,CAAkB6D,UAAvC;AACJ,cAAIvB,uBAAuB,GAAG,CAAC,CAA/B;AACA,cAAGuF,cAAc,CAAC7H,CAAD,CAAd,CAAkBwH,eAAlB,IAAqCnE,SAAxC,EACIf,uBAAuB,GAAGuF,cAAc,CAAC7H,CAAD,CAAd,CAAkBwH,eAA5C;AACJ,cAAIjF,aAAa,GAAG,KAApB;AACA,cAAGsF,cAAc,CAAC7H,CAAD,CAAd,CAAkBuC,aAAlB,IAAmCc,SAAtC,EACId,aAAa,GAAGsF,cAAc,CAAC7H,CAAD,CAAd,CAAkBuC,aAAlC;AACJ0F,UAAAA,KAAK,CAAC3E,IAAN,CAAW;AACPO,YAAAA,UAAU,EAAE,CAAC,CADN;AAEP2D,YAAAA,eAAe,EAAE,CAAC,CAFX;AAGPlD,YAAAA,SAAS,EAAE,CAAC,CAHL;AAIPtC,YAAAA,eAAe,EAAEA,eAJV;AAKPC,YAAAA,cAAc,EAAEA,cALT;AAMPC,YAAAA,cAAc,EAAEA,cANT;AAOPC,YAAAA,eAAe,EAAEA,eAPV;AAQPC,YAAAA,eAAe,EAAEA,eARV;AASPC,YAAAA,kBAAkB,EAAEA,kBATb;AAUPC,YAAAA,uBAAuB,EAAEA,uBAVlB;AAWPC,YAAAA,aAAa,EAAEA,aAXR;AAYPC,YAAAA,oBAAoB,EAAEqF,cAAc,CAAC7H,CAAD,CAAd,CAAkB2E,KAZjC;AAaPlC,YAAAA,kBAAkB,EAAErK,4BAbb;AAcPsK,YAAAA,cAAc,EAAEmF,cAAc,CAAC7H,CAAD,CAAd,CAAkB2E,KAd3B;AAePhC,YAAAA,WAAW,EAAE,EAfN;AAgBPC,YAAAA,SAAS,EAAEiF,cAAc,CAAC7H,CAAD,CAAd,CAAkB4C;AAhBtB,WAAX;AAkBH;AACJ;;AAAA;AACJ;;;mCAEeyD,S,EAAWC,mB,EAAqBC,2B,EAA6B;AACzE,UAAGzO,MAAM,CAAC,CAAD,CAAN,CAAUoH,MAAV,GAAmB,CAAnB,IAAyBpH,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,KAAgBuL,SAAhB,IAA6BvL,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,EAAaoH,MAAb,GAAsB,CAA/E,EAAmF;AAC/E,YAAIgB,gBAAgB,GAAGhI,4BAAvB,CAD+E,CAE/E;AACA;AACA;;AACA,YAAGgI,gBAAgB,IAAI,CAAC,CAAxB,EAA2B;AACvBA,UAAAA,gBAAgB,GAAG,KAAKrG,KAAL,CAAWjC,SAAX,CAAqBsH,MAAxC;AACH,SAP8E,CAQ/E;AACA;;;AACA,YAAIsH,sBAAsB,GAAG,IAA7B;;AACA,YAAG/N,6BAA6B,CAACmH,aAA9B,CAA4C,aAA5C,KAA8D,CAA9D,IAAmE,CAACyG,SAApE,IAAiF3G,CAAC,CAAC,YAAD,CAAD,CAAgB+G,EAAhB,CAAmB,UAAnB,CAApF,EAAoH;AAChH,cAAIC,YAAY,GAAG5O,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DC,wBAA3D,EAAqFwK,KAAxG;;AACA,cAAGxK,wBAAwB,GAAC,CAAzB,GAA6BV,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2D2G,MAA3F,EAAmG;AAC/F,iBAAK,IAAIc,CAAC,GAAGxH,wBAAwB,GAAC,CAAtC,EAAyCwH,CAAC,GAAGlI,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2D2G,MAAxG,EAAgHc,CAAC,EAAjH,EAAqH;AACjH,kBAAI0G,YAAY,IAAI5O,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DyH,CAA3D,EAA8DgD,KAA9E,IAAuFlL,MAAM,CAACoI,gBAAD,CAAN,CAAyB3H,gCAAzB,EAA2DyH,CAA3D,EAA8D4C,SAA9D,CAAwEhD,aAAxE,CAAsF,MAAtF,KAAiG,CAA5L,EAA+L;AAC3L4G,gBAAAA,sBAAsB,GAAG,KAAzB;AACH;AACJ;;AAAA;AACJ;AACJ;;AACD,YAAIG,aAAa,GAAG,IAApB;;AACA,YAAG,CAACN,SAAJ,EAAe;AACX,cAAG/N,iBAAiB,IAAI+K,SAArB,IAAkC/K,iBAAiB,CAACqM,KAAlB,IAA2BtB,SAAhE,EAA2E;AACvEsD,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAGjO,iBAAiB,CAACwG,MAAlB,IAA4B,CAA/B,EAAkC;AAC9ByH,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAGtO,qBAAqB,CAACuK,SAAtB,IAAmCS,SAAtC,EAAiD;AAC7CsD,YAAAA,aAAa,GAAG,KAAhB;AACH;;AACD,cAAGrO,iBAAiB,CAACyK,IAAlB,IAA0BM,SAA7B,EAAwC;AACpC,gBAAG/K,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,KAArC,KAA+C,CAA/C,IAAoDtH,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,SAArC,KAAmD,CAA1G,EAA6G;AACzG,kBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,QAA1B,KAAuC,CAAC,CAAxC,IAA6C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzF,EAA4F;AACxFsB,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJD,MAIO,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,kBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAtC,IAA2C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAvF,EAA0F;AACtFsB,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJM,MAIA,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,MAArC,KAAgD,CAAnD,EAAsD;AACzD,kBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,OAA1B,KAAsC,CAAC,CAAvC,IAA4C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,MAA1B,KAAqC,CAAC,CAAlF,IAAuF3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAnI,EAAsI;AAClIsB,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,aAJM,MAIA,IAAGrO,iBAAiB,CAACyK,IAAlB,CAAuBnD,aAAvB,CAAqC,SAArC,KAAmD,CAAtD,EAAyD;AAC5D,kBAAGlH,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAAzC,IAA8C3M,iBAAiB,CAAC2M,OAAlB,CAA0B,SAA1B,KAAwC,CAAC,CAA1F,EAA6F;AACzFsB,gBAAAA,aAAa,GAAG,KAAhB;AACH;AACJ;AACJ;AACJ,SA7BD,MA6BO;AACH,cAAGL,mBAAmB,CAACnH,OAApB,IAA+BkE,SAAlC,EAA6C;AACzCsD,YAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,SAvD8E,CAwD/E;;;AACA,YAAGH,sBAAsB,IAAIG,aAA7B,EAA4C;AACxC,cAAGnO,wBAAwB,IAAI,CAAC,CAA7B,IAAoCA,wBAAwB,IAAI,CAAC,CAA7B,KAAmCV,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAuBpH,MAAM,CAACoI,gBAAD,CAAN,IAA4BmD,SAA5B,IAAyCvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBhB,MAAzB,IAAmC,CAAtI,CAAvC,EAAqL;AACjL,gBAAI0H,iBAAiB,GAAG,KAAxB;;AACA,gBAAGpO,wBAAwB,IAAI,CAAC,CAA7B,IAAkCC,6BAA6B,CAACyG,MAA9B,GAAuC,CAAzE,IAA8EzG,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAtI,IAA2I7H,aAAa,CAACmI,gBAAD,CAAb,IAAmCmD,SAAjL,EAA4L;AACxL;AACA,kBAAG,CAACgD,SAAJ,EAAe;AACX,oBAAG/N,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EAA2C;AACvC,sBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEyJ,eAAlE,IAAqF1J,iBAAiB,CAACuO,OAA3G,EAAoH;AAChHD,oBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,iBAJD,MAIO,IAAGtO,iBAAiB,CAACuL,UAAlB,IAAgCR,SAAnC,EAA8C;AACjD,sBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEsL,UAAlE,IAAgFvL,iBAAiB,CAACuL,UAAtG,EAAkH;AAC9G+C,oBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,sBAAGrO,gCAAgC,IAAI,CAAvC,EACIqO,iBAAiB,GAAG,IAApB,CAL6C,CAMjD;;AACA,sBAAIE,WAAW,GAAG,KAAKjN,KAAL,CAAWkN,SAAX,CAAqBC,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,2BAAOA,MAAM,CAAC9G,EAAP,IAAa7H,iBAAiB,CAACuL,UAAtC;AACH,mBAFiB,CAAlB;;AAGA,sBAAGiD,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,wBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAeI,QAAnB,EACIN,iBAAiB,GAAG,IAApB;AACP;AACJ,iBAdM,MAcA,IAAGtO,iBAAiB,CAAC4J,cAAlB,IAAoCmB,SAAvC,EAAkD;AACrDuD,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAFM,MAEA,IAAGtO,iBAAiB,CAAC8J,eAAlB,IAAqCiB,SAAxC,EAAmD;AACtDuD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,eAxBD,MAwBO;AACH,oBAAGN,mBAAmB,CAACO,OAApB,IAA+BxD,SAAlC,EAA6C;AACzC,sBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEyJ,eAAlE,IAAqFsE,mBAAmB,CAACO,OAA7G,EAAsH;AAClHD,oBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ,iBAJD,MAIO,IAAGN,mBAAmB,CAACzC,UAApB,IAAkCR,SAArC,EAAgD;AACnD,sBAAItL,aAAa,CAACmI,gBAAD,CAAb,CAAgC3H,gCAAhC,EAAkEsL,UAAlE,IAAgFyC,mBAAmB,CAACzC,UAAxG,EAAoH;AAChH+C,oBAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,sBAAGrO,gCAAgC,IAAI,CAAvC,EACIqO,iBAAiB,GAAG,IAApB,CAL+C,CAMnD;;AACA,sBAAIE,WAAW,GAAG,KAAKjN,KAAL,CAAWkN,SAAX,CAAqBC,MAArB,CAA4B,UAAUC,MAAV,EAAkB;AAC5D,2BAAOA,MAAM,CAAC9G,EAAP,IAAamG,mBAAmB,CAACzC,UAAxC;AACH,mBAFiB,CAAlB;;AAGA,sBAAGiD,WAAW,CAAC5H,MAAZ,GAAqB,CAAxB,EAA2B;AACvB,wBAAG,CAAC4H,WAAW,CAAC,CAAD,CAAX,CAAeI,QAAnB,EACIN,iBAAiB,GAAG,IAApB;AACP;AACJ,iBAdM,MAcA,IAAGN,mBAAmB,CAACpE,cAApB,IAAsCmB,SAAzC,EAAoD;AACvDuD,kBAAAA,iBAAiB,GAAG,IAApB;AACH,iBAFM,MAEA,IAAGN,mBAAmB,CAAClE,eAApB,IAAuCiB,SAA1C,EAAqD;AACxDuD,kBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,aAnDD,MAmDO,IAAMpO,wBAAwB,IAAI,CAAC,CAA7B,KAAmCV,MAAM,CAACoH,MAAP,IAAiB,CAAjB,IAAuBpH,MAAM,CAACoI,gBAAD,CAAN,IAA4BmD,SAA5B,IAAyCvL,MAAM,CAACoI,gBAAD,CAAN,CAAyBhB,MAAzB,IAAmC,CAAtI,CAAF,IAAiJzG,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAAzM,IAA+M7H,aAAa,CAACmI,gBAAD,CAAb,IAAmCmD,SAAtP,EAAiQ;AACpQuD,cAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,gBAAGA,iBAAH,EAAsB;AAClB,kBAAG,CAACP,SAAJ,EAAe;AACX,oBAAI1B,KAAK,GAAGjF,CAAC,CAAC,QAAD,CAAD,CAAYC,GAAZ,EAAZ;AACA,oBAAIkG,WAAW,GAAG3N,4BAAlB,CAFW,CAGX;AACA;AACA;;AACA,oBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,kBAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH;;AACD,oBAAIiI,6BAA6B,GAAG,CAApC;AAAA,oBAAuCC,6BAA6B,GAAG,CAAvE;AACArP,gBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DwL,QAA7D;AACAoD,gBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,gBAAAA,6BAA6B,GAAG7O,gCAAhC;AACA,oBAAI6L,WAAW,GAAG,CAACiC,SAAnB;AACA,oBAAIgB,kBAAkB,GAAG,CAAzB;;AACA,oBAAG9O,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAyH,kBAAAA,kBAAkB,GAAG9O,gCAArB;AACH,iBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAyH,kBAAAA,kBAAkB,GAAG9O,gCAAgC,GAAC,CAAtD;AACH;;AACD,oBAAIyJ,eAAe,GAAG,CAAC,CAAvB;AAAA,oBAA0B8B,eAAe,GAAG,KAA5C;AAAA,oBAAmDtB,oBAAoB,GAAG,EAA1E;;AACA,oBAAGlK,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EAA2C;AACvCrB,kBAAAA,eAAe,GAAG1J,iBAAiB,CAACuO,OAApC;AACA/C,kBAAAA,eAAe,GAAG,IAAlB;AACAtB,kBAAAA,oBAAoB,GAAGlK,iBAAiB,CAACqM,KAAzC;AACH;;AACD,oBAAI2C,UAAU,GAAG,CAAjB;AACA,oBAAIC,UAAU,GAAG;AACGpD,kBAAAA,eAAe,EAAEkD,kBADpB;AAEGrF,kBAAAA,eAAe,EAAEA,eAFpB;AAGGQ,kBAAAA,oBAAoB,EAAEA,oBAHzB;AAIG8B,kBAAAA,SAAS,EAAE,CAAC,CAJf;AAKGT,kBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2D,kBAAAA,eAAe,EAAE,CAAC,CANrB;AAOG9G,kBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG+D,kBAAAA,iBAAiB,EAAEnM,iBAAiB,CAACyK,IARxC;AASGqB,kBAAAA,WAAW,EAAEA,WAThB;AAUGN,kBAAAA,eAAe,EAAEA,eAVpB;AAWGlB,kBAAAA,SAAS,EAAEvK,qBAAqB,CAACuK,SAXpC;AAYG8B,kBAAAA,cAAc,EAAErM,qBAAqB,CAACqM,cAZzC;AAaGC,kBAAAA,KAAK,EAAEA,KAbV;AAcGC,kBAAAA,KAAK,EAAEtM,iBAAiB,CAACqM,KAAlB,GAAwB,GAAxB,GAA4BtM,qBAAqB,CAACqM,cAAlD,GAAiE,GAAjE,GAAqEC,KAd/E;AAeG3B,kBAAAA,KAAK,EAAEsE,UAfV;AAgBG3D,kBAAAA,uBAAuB,EAAE0D;AAhB5B,iBAAjB;AAkBAvP,gBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAA5E,EAAsG,CAAtG,EAAyG+O,UAAzG,EA/CW,CAgDX;;AACA/O,gBAAAA,wBAAwB,GAAG,CAAC,CAA5B;AACA,qBAAKqH,QAAL,CAAc;AACV/H,kBAAAA,MAAM,EAAEA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,iBAAd;AAGA9O,gBAAAA,iBAAiB,GAAG,IAApB;AACAI,gBAAAA,iBAAiB,GAAG,EAApB,CAtDW,CAuDX;AACH,eAxDD,MAwDO;AACH;AACA,oBAAImN,WAAW,GAAG3N,4BAAlB,CAFG,CAGH;AACA;AACA;;AACA,oBAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,kBAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH,iBARE,CASH;AACA;AACA;;;AACA,oBAAImJ,oBAAoB,GAAG,KAA3B;AAAA,oBAAkCC,gBAAgB,GAAG,CAArD;;AACAC,gBAAAA,SAAS,EACT,KAAK,IAAIvI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlI,MAAM,CAAC+N,WAAD,CAAN,CAAoB3G,MAAxC,EAAgDc,CAAC,EAAjD,EAAqD;AACjD,uBAAK,IAAIoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtL,MAAM,CAAC+N,WAAD,CAAN,CAAoB7F,CAApB,EAAuBd,MAA3C,EAAmDkE,CAAC,EAApD,EAAwD;AACpD,wBAAG,CAACtL,MAAM,CAAC+N,WAAD,CAAN,CAAoB7F,CAApB,EAAuBoD,CAAvB,EAA0BgB,WAA9B,EAA2C;AACvCkE,sBAAAA,gBAAgB;AACnB;AACJ;;AAAA;AACJ;;AAAA;;AACD,oBAAGA,gBAAgB,IAAI,CAAvB,EAA0B;AACtBD,kBAAAA,oBAAoB,GAAG,IAAvB;AACH;;AACD,oBAAIX,aAAa,GAAGtP,4BAApB;;AACA,qBAAK,IAAI4H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhI,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BhN,6BAA/B,EAA8DqG,MAAlF,EAA0Fc,CAAC,EAA3F,EAA+F;AAC3F0H,kBAAAA,aAAa,GAAG1P,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BhN,6BAA/B,EAA8DmH,CAA9D,EAAiEyC,kBAAjF;AACA;AACH;;AAAA;;AACD,oBAAKvK,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAK2B,KAAL,CAAWI,iBAAX,CAA6B2F,aAA7B,CAA2C8H,aAA3C,KAA6D,CAA7D,IAAkE,KAAK7N,KAAL,CAAWI,iBAAX,CAA6BiF,MAA7B,IAAuC,CAAhJ,CAAD,IAAyJhH,4BAA4B,IAAI,CAAC,CAAjC,KAAuC,KAAK2B,KAAL,CAAWjC,SAAX,CAAqBiO,WAArB,EAAkC9C,IAAlC,CAAuCnD,aAAvC,CAAqD8H,aAArD,KAAuE,CAAvE,IAA4E,KAAK7N,KAAL,CAAWjC,SAAX,CAAqBiO,WAArB,EAAkC9C,IAAlC,CAAuC7D,MAAvC,IAAiD,CAApK,CAAzJ,IAAoUmJ,oBAAxU,EAA+V;AAC3V,sBAAIf,UAAU,GAAGnP,kBAAjB;AACA,sBAAIgP,6BAA6B,GAAG,CAApC;AAAA,sBAAuCC,6BAA6B,GAAG,CAAvE;AACArP,kBAAAA,aAAa,CAAC8N,WAAD,CAAb,CAA2BtN,gCAA3B,EAA6DwL,QAA7D;AACAoD,kBAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,kBAAAA,6BAA6B,GAAG7O,gCAAhC;AACA,sBAAI6L,WAAW,GAAG,CAACiC,SAAnB;AACA,sBAAIgB,kBAAkB,GAAG,CAAzB;;AACA,sBAAG9O,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AACpG;AACAyH,oBAAAA,kBAAkB,GAAG9O,gCAArB;AACH,mBAHD,MAGO,IAAGA,gCAAgC,IAAI,CAAC,CAArC,IAA0CE,6BAA6B,CAACmH,aAA9B,CAA4C,OAA5C,KAAwD,CAArG,EAAwG;AAC3G;AACAyH,oBAAAA,kBAAkB,GAAG9O,gCAAgC,GAAC,CAAtD;AACH;;AACD,sBAAIyJ,eAAe,GAAG,CAAC,CAAvB;AAAA,sBAA0B8B,eAAe,GAAG,KAA5C;AAAA,sBAAmDtB,oBAAoB,GAAG,EAA1E;;AACA,sBAAGlK,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EAA2C;AACvCrB,oBAAAA,eAAe,GAAG1J,iBAAiB,CAACuO,OAApC;AACA/C,oBAAAA,eAAe,GAAG,IAAlB;AACAtB,oBAAAA,oBAAoB,GAAGlK,iBAAiB,CAACqM,KAAzC;AACH;;AACD,sBAAI4C,UAAU,GAAG;AACGpD,oBAAAA,eAAe,EAAEkD,kBADpB;AAEGrF,oBAAAA,eAAe,EAAEA,eAFpB;AAGGQ,oBAAAA,oBAAoB,EAAE,EAHzB;AAIG8B,oBAAAA,SAAS,EAAEiC,2BAJd;AAKG1C,oBAAAA,UAAU,EAAE,CAAC,CALhB;AAMG2D,oBAAAA,eAAe,EAAE,CAAC,CANrB;AAOG9G,oBAAAA,YAAY,EAAE,CAAC,CAPlB;AAQG0D,oBAAAA,WAAW,EAAEA,WARhB;AASGN,oBAAAA,eAAe,EAAEA,eATpB;AAUGlB,oBAAAA,SAAS,EAAE0D,mBAAmB,CAAC1D,SAVlC;AAWG8B,oBAAAA,cAAc,EAAE,KAAK3I,uBAAL,CAA6BuK,mBAAmB,CAAC1D,SAAjD,CAXnB;AAYG+B,oBAAAA,KAAK,EAAE2B,mBAAmB,CAAC1D,SAZ9B;AAaGgC,oBAAAA,KAAK,EAAE0B,mBAAmB,CAACnH,OAb9B;AAcG6D,oBAAAA,KAAK,EAAEsE,UAdV;AAeG3D,oBAAAA,uBAAuB,EAAE0D;AAf5B,mBAAjB;AAiBAvP,kBAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAA5E,EAAsG,CAAtG,EAAyG+O,UAAzG,EAtC2V,CAuC3V;AACA;;AACA,sBAAII,WAAW,sBAAO7P,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,CAAP,CAAf;;AACA,uBAAKvH,QAAL,CAAc;AACV/H,oBAAAA,MAAM,EAAEA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,mBAAd;AAGAd,kBAAAA,mBAAmB,GAAG,IAAtB,CA7C2V,CA8C3V;;AACI,uBAAKzG,QAAL,CAAc;AACV5F,oBAAAA,iBAAiB,EAAEyN;AADT,mBAAd,EA/CuV,CAkD3V;AACA;AACH,iBApDD,MAoDO;AACH,sBAAG,KAAK7N,KAAL,CAAWI,iBAAX,CAA6B2F,aAA7B,CAA2CxH,4BAA3C,KAA4E,CAA/E,EAAkF;AAC9EqJ,oBAAAA,KAAK,CAAC,gEAAD,CAAL;AACH;AACJ;AACJ;AACJ,aAhJD,MAgJO;AACH,kBAAImG,MAAM,GAAG,UAAb;AACA,kBAAGtP,iBAAiB,CAACuO,OAAlB,IAA6BxD,SAAhC,EACIuE,MAAM,GAAG,OAAT;AACJ,kBAAIhD,KAAK,GAAG,SAAZ;AACA,kBAAG,CAACyB,SAAJ,EACIzB,KAAK,GAAG,aAAR;AACJnD,cAAAA,KAAK,CAAC,QAAMmD,KAAN,GAAY,qCAAZ,GAAkDgD,MAAlD,GAAyD,GAA1D,CAAL;AACH;AACJ,WAjND,MAiNO;AACHnG,YAAAA,KAAK,CAAC,wDAAD,CAAL;AACH;AACJ,SArND,MAqNO;AACH,cAAG,CAACkF,aAAD,IAAkB,CAACN,SAAtB,EACI5E,KAAK,CAAC,wDAAD,CAAL,CADJ,KAEK,IAAG,CAACkF,aAAD,IAAkBN,SAArB,EACD5E,KAAK,CAAC,yBAAD,CAAL,CADC,KAGDA,KAAK,CAAC,6CAAD,CAAL;AACP;AACJ,OAtRD,MAsRO;AACHA,QAAAA,KAAK,CAAC,8BAAD,CAAL;AACH;AACJ;;;oCAEgB;AACb,UAAG3J,MAAM,CAAC,CAAD,CAAN,CAAUoH,MAAV,GAAmB,CAAnB,IAAyBpH,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,KAAgBuL,SAAhB,IAA6BvL,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,EAAaoH,MAAb,GAAsB,CAA/E,EAAmF;AAC/E,YAAI2G,WAAW,GAAG3N,4BAAlB,CAD+E,CAE/E;AACA;AACA;;AACA,YAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,UAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH;;AACD,YAAIiI,6BAA6B,GAAG,CAApC;AAAA,YAAuCC,6BAA6B,GAAG,CAAvE;AACAD,QAAAA,6BAA6B,GAAGtB,WAAhC;AACAuB,QAAAA,6BAA6B,GAAG7O,gCAAhC;AACAT,QAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqEnD,MAArE,CAA4EzL,wBAA5E,EAAsG,CAAtG;AACAA,QAAAA,wBAAwB,GAAG,CAAC,CAA5B;;AACA,YAAGV,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAArE,IAA+E,CAAlF,EAAqF;AACjFpH,UAAAA,MAAM,CAACqP,6BAAD,CAAN,CAAsClD,MAAtC,CAA6CmD,6BAA7C,EAA4E,CAA5E;AACArP,UAAAA,aAAa,CAACoP,6BAAD,CAAb,CAA6ClD,MAA7C,CAAoDmD,6BAApD,EAAmF,CAAnF;AACH;;AACD,YAAGtP,MAAM,CAACqP,6BAAD,CAAN,IAAyC9D,SAAzC,IAAsDvL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,KAAwE/D,SAA9H,IAA2IvL,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC,EAAqElI,MAArE,IAA+E,CAA7N,EAAgO;AAC5N,eAAKW,QAAL,CAAc;AACV/H,YAAAA,MAAM,EAAE;AADE,WAAd;AAGH,SAJD,MAIO;AACH,eAAK+H,QAAL,CAAc;AACV/H,YAAAA,MAAM,EAAEA,MAAM,CAACqP,6BAAD,CAAN,CAAsCC,6BAAtC;AADE,WAAd;AAGH;;AACD,YAAIoB,aAAa,GAAG,KAApB;;AACAD,QAAAA,SAAS,EACT,KAAK,IAAIvI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlI,MAAM,CAACqP,6BAAD,CAAN,CAAsCjI,MAA1D,EAAkEc,CAAC,EAAnE,EAAuE;AACnE,eAAK,IAAIoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtL,MAAM,CAACqP,6BAAD,CAAN,CAAsCnH,CAAtC,EAAyCd,MAA7D,EAAqEkE,CAAC,EAAtE,EAA0E;AACtE,gBAAG,CAACtL,MAAM,CAACqP,6BAAD,CAAN,CAAsCnH,CAAtC,EAAyCoD,CAAzC,EAA4CgB,WAAhD,EAA6D;AACzDoE,cAAAA,aAAa,GAAG,IAAhB;AACA,oBAAMD,SAAN;AACH;AACJ;;AAAA;AACJ;;AAAA;;AACD,YAAG,CAACC,aAAJ,EAAmB;AACf,eAAK3I,QAAL,CAAc;AACV5F,YAAAA,iBAAiB,EAAE;AADT,WAAd;AAGA7B,UAAAA,4BAA4B,GAAG,EAA/B;AACH;AACJ,OA1CD,MA0CO;AACHqJ,QAAAA,KAAK,CAAC,8BAAD,CAAL;AACH;AACJ;;;8CAE0BtC,O,EAAS0I,c,EAAgB;AAChD,UAAGxO,yBAAH,EACI,KAAKsD,sBAAL,CAA4BwC,OAA5B,EAAqC0I,cAArC,EADJ,KAGI,KAAKnL,gBAAL,CAAsByC,OAAtB,EAA+B0I,cAA/B;AACP;;;qCAEgB1I,O,EAAS0I,c,EAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIhC,WAAW,GAAG3N,4BAAlB,CAVsC,CAWtC;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,QAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH,OAhBqC,CAiBtC;;AACA;;;;;;;;;;AAQA,UAAGjH,QAAQ,CAAC4N,WAAD,CAAR,IAAyBxC,SAA5B,EACIpL,QAAQ,CAAC4N,WAAD,CAAR,GAAwB,EAAxB;AACJ5N,MAAAA,QAAQ,CAAC4N,WAAD,CAAR,CAAsBhN,6BAAtB,IAAuDsG,OAAvD;AACA,WAAKU,QAAL,CAAc;AACV5H,QAAAA,QAAQ,EAAEA,QAAQ,CAAC4N,WAAD;AADR,OAAd;AAGA,UAAG7N,iBAAiB,CAAC6N,WAAD,CAAjB,IAAkCxC,SAArC,EACIrL,iBAAiB,CAAC6N,WAAD,CAAjB,GAAiC,EAAjC;AACJ,UAAItC,sBAAsB,GAAG1K,6BAA7B,CAlCsC,CAmCtC;;AACA,UAAGb,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,KAA0DF,SAA7D,EACIrL,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,IAAyD,EAAzD;AACJ,UAAIuE,kBAAkB,GAAG,EAAzB;AACA,WAAKxL,sBAAL,CAA4BuL,cAA5B,EAA4CC,kBAA5C;AACA9P,MAAAA,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+BtC,sBAA/B,IAAyDuE,kBAAzD;AACA;;;;;;;AAOH;;;2CAEsB3I,O,EAAS0I,c,EAAgB;AAC5CnQ,MAAAA,QAAQ,GAAGyH,OAAO,CAACA,OAAnB;AACA,UAAI2I,kBAAkB,GAAG,EAAzB;AACA,WAAKxL,sBAAL,CAA4BuL,cAA5B,EAA4CC,kBAA5C;AACAnQ,MAAAA,kBAAkB,GAAGmQ,kBAArB;AACH;;;sCAEiB;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIjC,WAAW,GAAG3N,4BAAlB,CAVc,CAWd;AACA;AACA;;AACA,UAAGA,4BAA4B,IAAI,CAAC,CAApC,EAAuC;AACnC2N,QAAAA,WAAW,GAAG,KAAKhM,KAAL,CAAWjC,SAAX,CAAqBsH,MAAnC;AACH,OAhBa,CAiBd;;AACA;;;;;;;;;;AAQA,UAAGjH,QAAQ,CAAC4N,WAAD,CAAR,IAAyBxC,SAA5B,EACIpL,QAAQ,CAAC4N,WAAD,CAAR,GAAwB,EAAxB;AACJ5N,MAAAA,QAAQ,CAAC4N,WAAD,CAAR,CAAsB5B,MAAtB,CAA6BpL,6BAA7B,EAA4D,CAA5D;AACA,WAAKgH,QAAL,CAAc;AACV5H,QAAAA,QAAQ,EAAEA,QAAQ,CAAC4N,WAAD;AADR,OAAd;AAGA,UAAItC,sBAAsB,GAAG1K,6BAA7B;AACAb,MAAAA,iBAAiB,CAAC6N,WAAD,CAAjB,CAA+B5B,MAA/B,CAAsCV,sBAAtC,EAA8D,CAA9D;AACH;;;4CAEuB;AACpBzK,MAAAA,eAAe,GAAG4G,CAAC,CAAC,kBAAD,CAAD,CAAsBC,GAAtB,EAAlB;AACH;;;4CAEuB;AACpB5G,MAAAA,eAAe,GAAG2G,CAAC,CAAC,SAAD,CAAD,CAAaC,GAAb,EAAlB;AACH;;;gDAE2B;AACxB1G,MAAAA,mBAAmB,GAAGyG,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAtB;AACH;;;oDAE+B;AAC5BzG,MAAAA,uBAAuB,GAAGwG,CAAC,CAAC,iBAAD,CAAD,CAAqBC,GAArB,EAA1B;;AACA,UAAGzG,uBAAuB,CAAC0G,aAAxB,CAAsC,UAAtC,KAAqD,CAAxD,EAA2D;AACvDtG,QAAAA,2BAA2B,GAAG,KAA9B;AACH,OAFD,MAEO;AACHA,QAAAA,2BAA2B,GAAG,IAA9B;AACH;;AACD,WAAKuG,QAAL,CAAc;AACVvG,QAAAA,2BAA2B,EAAEA;AADnB,OAAd;AAGH;;;gDAE2B;AACxBN,MAAAA,mBAAmB,GAAG0G,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAtB;AACH;;;kDAE6B;AAC1BpG,MAAAA,qBAAqB,GAAGmG,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAxB;AACA,WAAKE,QAAL,CAAc;AACVtG,QAAAA,qBAAqB,EAAEA;AADb,OAAd,EAEG,KAAK4D,gBAFR;AAGH;;;uCAEmB;AAChBuC,MAAAA,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,CAAuB;AACnB4H,QAAAA,MAAM,EAAE,YADW;AAEnBC,QAAAA,cAAc,EAAE,IAFG;AAGnBC,QAAAA,QAAQ,EAAE,MAHS;AAInBC,QAAAA,WAAW,EAAE,MAJM;AAKnBC,QAAAA,QAAQ,EAAE;AALS,OAAvB;;AAOA,UAAG,KAAKvL,WAAL,CAAiB9D,KAAjB,CAAH,EAA4B;AACxBkG,QAAAA,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,CAAuB,SAAvB,EAAkCrH,KAAlC;AACH;;AACD,UAAIsP,IAAI,GAAG,IAAX;AACApJ,MAAAA,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,GAAyBvC,EAAzB,CAA4B,YAA5B,EAA0C,YAAY;AAClD,YAAGwK,IAAI,CAACxL,WAAL,CAAiBoC,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,CAAuB,SAAvB,CAAjB,CAAH,EAAwD;AACpDrH,UAAAA,KAAK,GAAGkG,CAAC,CAAC,QAAD,CAAD,CAAYmB,UAAZ,CAAuB,SAAvB,CAAR;AACH;AACJ,OAJD;AAKH;;;0CAEqB;AAClB1H,MAAAA,aAAa,GAAGuG,CAAC,CAAC,gBAAD,CAAD,CAAoBC,GAApB,EAAhB;AACH;;;qDAEgC;AAC7BvG,MAAAA,wBAAwB,GAAGsG,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAA3B;AACH;;;gCAEYnG,K,EAAO;AAChB,UAAIuP,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+B1P,KAA/B,MAA0C,eAA9C,EAA+D;AAC3D,YAAI6H,KAAK,CAAC7H,KAAK,CAAC2P,OAAN,EAAD,CAAT,EAA4B;AACxB,iBAAO,KAAP;AACH,SAFD,MAEO;AACH,iBAAO,IAAP;AACH;AACJ,OAND,MAMO;AACH,eAAO,KAAP;AACH;AACJ;;;0EAEsDC,Q,EAAU;AAAA;;AAC7D,UAAMrL,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,wEAAsE0K,QAAQ,CAAC5R,MAA/E,GAAsF,kCAApG,EAAwI,UAAC4G,GAAD,EAAMQ,MAAN,EAAiB;AACrJ,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAIQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,IAA2B,CAA/B,EAAkC;AAC9B,gBAAA,OAAI,CAAC1B,oCAAL,CAA0C4L,QAA1C;AACH,eAFD,MAEO;AACH,gBAAA,OAAI,CAAC1L,yBAAL,CAA+B0L,QAA/B,EAAyCxK,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBoK,cAA7D;AACH;AACJ,aAND;AAOH;AACJ,SAhBD;AAiBH,OAvBD,EAF6D,CAyBzD;AACP;;;yDAEqCD,Q,EAAU;AAAA;;AAC5C;AACA;AACA,UAAIE,GAAG,GAAG,IAAIxI,IAAJ,EAAV;AACA,UAAIyI,kBAAkB,GAAG,kBAAgBH,QAAQ,CAAC5R,MAAzB,GAAgC,GAAhC,GAAoC8R,GAAG,CAAChI,WAAJ,EAApC,GAAsD,GAAtD,IAA2DgI,GAAG,CAAC/H,QAAJ,KAAe,CAA1E,IAA6E,GAA7E,GAAiF+H,GAAG,CAAC9H,OAAJ,EAAjF,GAA+F,GAA/F,GAAmG8H,GAAG,CAACE,QAAJ,EAAnG,GAAkH,GAAlH,GAAsHF,GAAG,CAACG,UAAJ,EAAtH,GAAuI,GAAvI,GAA2IH,GAAG,CAACI,UAAJ,EAA3I,GAA4J,uCAArL;;AACA,WAAK,IAAI1J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoJ,QAAQ,CAACrC,SAAT,CAAmB7H,MAAvC,EAA+Cc,CAAC,EAAhD,EAAoD;AAChD,YAAGA,CAAC,IAAI,CAAR,EACIuJ,kBAAkB,IAAI,IAAtB;;AACJ,YAAGH,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsB+C,IAAtB,CAA2BnD,aAA3B,CAAyC,QAAzC,KAAsD,CAAzD,EAA4D;AACxD2J,UAAAA,kBAAkB,IAAIH,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsBxI,MAAtB,GAA6B,gBAAnD;AACH,SAFD,MAEO,IAAG4R,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsB+C,IAAtB,CAA2BnD,aAA3B,CAAyC,SAAzC,KAAuD,CAA1D,EAA6D;AAChE2J,UAAAA,kBAAkB,IAAIH,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsBxI,MAAtB,GAA6B,gBAAnD;AACH,SAFM,MAEA,IAAG4R,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsB+C,IAAtB,CAA2BnD,aAA3B,CAAyC,KAAzC,KAAmD,CAAtD,EAAyD;AAC5D2J,UAAAA,kBAAkB,IAAIH,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsBxI,MAAtB,GAA6B,MAAnD;AACH,SAFM,MAEA,IAAG4R,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsB+C,IAAtB,CAA2BnD,aAA3B,CAAyC,MAAzC,KAAoD,CAAvD,EAA0D;AAC7D2J,UAAAA,kBAAkB,IAAIH,QAAQ,CAACrC,SAAT,CAAmB/G,CAAnB,EAAsBxI,MAAtB,GAA6B,OAAnD;AACH;AACJ;;AAAA;AACD+R,MAAAA,kBAAkB,IAAI,wBAAtB;AACA,UAAMxL,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc6K,kBAAd,EAAkC,UAACnL,GAAD,EAAMQ,MAAN,EAAiB;AAC/C,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,cAAA,OAAI,CAACX,6BAAL,CAAmC2L,QAAnC,EAA6CE,GAA7C;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EApB4C,CAuCxC;AACP;;;kDAE8BF,Q,EAAUE,G,EAAK;AAAA;;AAC1C,UAAIK,GAAG,GAAGL,GAAG,CAAC/H,QAAJ,KAAe,CAAzB;AACA,UAAGoI,GAAG,CAACV,QAAJ,GAAe/J,MAAf,IAAyB,CAA5B,EACIyK,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAIC,GAAG,GAAGN,GAAG,CAAC9H,OAAJ,EAAV;AACA,UAAGoI,GAAG,CAACX,QAAJ,GAAe/J,MAAf,IAAyB,CAA5B,EACI0K,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAM7L,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qGAAmG0K,QAAQ,CAAC5R,MAA5G,GAAmH,MAAnH,GAA0H8R,GAAG,CAAChI,WAAJ,EAA1H,GAA4I,GAA5I,GAAgJqI,GAAhJ,GAAoJ,GAApJ,GAAwJC,GAAxJ,GAA4J,GAA5J,GAAgKN,GAAG,CAACE,QAAJ,EAAhK,GAA+K,GAA/K,GAAmLF,GAAG,CAACG,UAAJ,EAAnL,GAAoM,GAApM,GAAwMH,GAAG,CAACI,UAAJ,EAAxM,GAAyN,kBAAvO,EAA2P,UAACtL,GAAD,EAAMQ,MAAN,EAAiB;AACxQ,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,cAAA,OAAI,CAACT,qCAAL,CAA2CyL,QAA3C,EAAqD,WAArD,EAAkEE,GAAlE;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EAR0C,CA2BtC;AACP;;;8CAE0BO,S,EAAWT,Q,EAAUE,G,EAAM;AAAA;;AAClD,UAAIK,GAAG,GAAGL,GAAG,CAAC/H,QAAJ,KAAe,CAAzB;AACA,UAAGoI,GAAG,CAACV,QAAJ,GAAe/J,MAAf,IAAyB,CAA5B,EACIyK,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAIC,GAAG,GAAGN,GAAG,CAAC9H,OAAJ,EAAV;AACA,UAAGoI,GAAG,CAACX,QAAJ,GAAe/J,MAAf,IAAyB,CAA5B,EACI0K,GAAG,GAAG,MAAIA,GAAV;AACJ,UAAM7L,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yDAAuD4K,GAAG,CAAChI,WAAJ,EAAvD,GAAyE,GAAzE,GAA6EqI,GAA7E,GAAiF,GAAjF,GAAqFC,GAArF,GAAyF,GAAzF,GAA6FN,GAAG,CAACE,QAAJ,EAA7F,GAA4G,eAA5G,GAA4HK,SAAS,CAAC1J,EAApJ,EAAwJ,UAAC/B,GAAD,EAAMQ,MAAN,EAAiB;AACrK,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,cAAA,OAAI,CAACZ,oCAAL,CAA0C4L,QAA1C;AACH,aAFD;AAGH;AACJ,SAZD;AAaH,OAnBD,EARkD,CA2B9C;AACP;;;0DAEsCA,Q,EAAUU,K,EAAOR,G,EAAK;AAAA;;AACzD,UAAMvL,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,0DAAwD0K,QAAQ,CAACjJ,EAAjE,GAAoE,wBAApE,GAA6F2J,KAA7F,GAAmG,GAAjH,EAAsH,UAAC1L,GAAD,EAAMQ,MAAN,EAAiB;AACnI,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,kBAAGQ,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,gBAAA,OAAI,CAACtB,2BAAL,CAAiCwL,QAAjC,EAA2CU,KAA3C,EAAkDR,GAAlD;AACH;AAAA;;;;AAGJ,aAND;AAOH;AACJ,SAhBD;AAiBH,OAvBD,EAFyD,CAyBrD;AACP;;;gDAE4BF,Q,EAAUU,K,EAAOR,G,EAAK;AAC/C,UAAMvL,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mDAAiD0K,QAAQ,CAACjJ,EAA1D,GAA6D,wBAA7D,GAAsF2J,KAAtF,GAA4F,yCAA1G,EAAqJ,UAAC1L,GAAD,EAAMQ,MAAN,EAAiB;AAClK,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI,CACzB,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAF+C,CAoB3C;AACP;;;0CAEsB2L,C,EAAG;AACtB,aAAO,MAAMC,IAAN,CAAWD,CAAX,CAAP;AACH;;;kCAEc;AAAA;;AACX,UAAMhM,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKrE,KAAL,CAAWsE,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,wBAAd,EAAwC,UAACN,GAAD,EAAMQ,MAAN,EAAiB;AACrD,cAAIR,GAAJ,EAAS;AACLS,YAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AACA,gBAAI,CAACC,UAAL,EAAiB;AACbN,cAAAA,WAAW,CAACgB,QAAZ,CAAqB,UAAAX,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACiB,MAAZ,CAAmB,UAAAZ,GAAG,EAAI;AACtB,cAAA,OAAI,CAACyB,QAAL,CAAc;AACVrF,gBAAAA,QAAQ,EAAEoE,MAAM,CAACK;AADP,eAAd;;AAGAS,cAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,CAAsBvG,wBAAtB;AACH,aALD;AAMH;AACJ,SAfD;AAgBH,OAtBD,EAFW,CAwBP;AACP;;;6BAEQ;AAAA;;AACL,UAAG,KAAKS,KAAL,CAAWC,gBAAX,CAA4B8F,aAA5B,CAA0C,iBAA1C,KAAgE,CAAnE,EAAsE;AAClE,eACI,6CACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAI,UAAA,SAAS,EAAE;AAAf,8BADJ,EAEI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,wBAAW;AAAhB,WACI;AAAI,UAAA,SAAS,EAAE;AAAf,WACI;AAAI,UAAA,SAAS,EAAE,yBAAf;AAA0C,0BAAa,MAAvD;AAA8D,UAAA,OAAO,EAAE,KAAKhG,KAAL,CAAWuL;AAAlF,WAAqG;AAAG,UAAA,IAAI,EAAC,GAAR;AAAY,UAAA,SAAS,EAAE;AAAvB,8BAArG,CADJ,EAEI;AAAI,UAAA,SAAS,EAAE,yBAAf;AAA0C,0BAAa,MAAvD;AAA8D,UAAA,OAAO,EAAE,KAAKvL,KAAL,CAAWwL;AAAlF,WAA6G;AAAG,UAAA,IAAI,EAAC,GAAR;AAAY,UAAA,SAAS,EAAE;AAAvB,mCAA7G,CAFJ,EAGI;AAAI,UAAA,SAAS,EAAE,gCAAf;AAAiD,0BAAa;AAA9D,iCAHJ,CADJ,CADJ,CAFJ,CADJ,CADJ,CADJ,EAiBI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE,6CAAhB;AAA+D,UAAA,KAAK,EAAE;AAAC6E,YAAAA,KAAK,EAAE;AAAR;AAAtE,WACI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,iBAAf;AAAiC,UAAA,SAAS,EAAC;AAA3C,8BADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,EAAE,EAAC,iBAAV;AAA4B,UAAA,YAAY,EAAEnR,eAA1C;AAA2D,UAAA,OAAO,EAAE,KAAK+D,qBAAzE;AAAgG,UAAA,IAAI,EAAC,MAArG;AAA4G,UAAA,SAAS,EAAC;AAAtH,UADJ,CAJJ,CADJ,EASI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACoN,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,QAAf;AAAwB,UAAA,SAAS,EAAC;AAAlC,oBADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,EAAE,EAAC,QAAV;AAAmB,UAAA,YAAY,EAAElR,eAAjC;AAAkD,UAAA,OAAO,EAAE,KAAK+D,qBAAhE;AAAuF,UAAA,IAAI,EAAC,MAA5F;AAAmG,UAAA,SAAS,EAAC;AAA7G,UADJ,CAJJ,CATJ,EAiBI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACmN,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,MAAf;AAAsB,UAAA,SAAS,EAAC;AAAhC,kBADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI,gCAAC,4BAAD;AACI,UAAA,IAAI,EAAC,GADT;AAEI,UAAA,KAAK,EAAE,CAFX;AAGI,UAAA,IAAI,EAAE,CAHV;AAII,UAAA,IAAI,EAAE,KAAKrQ,KAAL,CAAWsQ,oBAJrB;AAKI,UAAA,CAAC,EAAE,KAAKrQ,KAAL,CAAWG,CALlB;AAMI,UAAA,QAAQ,EAAE;AAAA,gBAAGA,CAAH,QAAGA,CAAH;AAAA,mBAAW,OAAI,CAAC6F,QAAL,CAAc;AAAE7F,cAAAA,CAAC,EAAEA;AAAL,aAAd,CAAX;AAAA,WANd;AAOI,UAAA,KAAK,EAAE;AAACiQ,YAAAA,KAAK,EAAE,MAAR;AAAgBE,YAAAA,SAAS,EAAE;AAA3B;AAPX,UADJ,CAJJ,EAcI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,EAAE,EAAC,WAAV;AAAsB,UAAA,SAAS,EAAC;AAAhC,WAAkD,KAAKtQ,KAAL,CAAWG,CAA7D,CADJ,CAdJ,CAjBJ,EAmCI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACiQ,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,YAAf;AAA4B,UAAA,SAAS,EAAC;AAAtC,yBADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WAEQ,KAAKpQ,KAAL,CAAWP,2BAAX,GACE;AAAO,UAAA,EAAE,EAAC,YAAV;AAAuB,UAAA,IAAI,EAAC,YAA5B;AAAyC,UAAA,IAAI,EAAC,GAA9C;AAAkD,UAAA,GAAG,EAAC,GAAtD;AAA0D,UAAA,IAAI,EAAC,QAA/D;AAAwE,UAAA,YAAY,EAAEL,mBAAtF;AAA2G,UAAA,QAAQ,EAAE,KAAK8D,yBAA1H;AAAqJ,UAAA,KAAK,EAAE;AAACqN,YAAAA,SAAS,EAAE,MAAZ;AAAoBC,YAAAA,UAAU,EAAE,8CAAhC;AAAgFC,YAAAA,cAAc,EAAE,MAAhG;AAAwGC,YAAAA,kBAAkB,EAAE,cAA5H;AAA4IN,YAAAA,KAAK,EAAE;AAAnJ;AAA5J,UADF,GAEE;AAAO,UAAA,EAAE,EAAC,YAAV;AAAuB,UAAA,IAAI,EAAC,YAA5B;AAAyC,UAAA,IAAI,EAAC,GAA9C;AAAkD,UAAA,GAAG,EAAC,GAAtD;AAA0D,UAAA,IAAI,EAAC,QAA/D;AAAwE,UAAA,YAAY,EAAEhR,mBAAtF;AAA2G,UAAA,QAAQ,EAAE,KAAK8D,yBAA1H;AAAqJ,UAAA,KAAK,EAAE;AAACqN,YAAAA,SAAS,EAAE,MAAZ;AAAoBH,YAAAA,KAAK,EAAE;AAA3B;AAA5J,UAJV,CAJJ,CAnCJ,EA+CI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,gBAAf;AAAgC,UAAA,SAAS,EAAC;AAA1C,iCADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAQ,UAAA,EAAE,EAAC,gBAAX;AAA4B,UAAA,YAAY,EAAE/Q,uBAA1C;AAAmE,UAAA,QAAQ,EAAE,KAAK8D,6BAAlF;AAAiH,UAAA,SAAS,EAAC;AAA3H,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,yBADJ,EAEI;AAAQ,UAAA,KAAK,EAAC;AAAd,wBAFJ,CADJ,CAJJ,CA/CJ,EA0DI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACiN,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,YAAf;AAA4B,UAAA,SAAS,EAAC;AAAtC,wBADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WAEQ,KAAKpQ,KAAL,CAAWP,2BAAX,GACE;AAAO,UAAA,EAAE,EAAC,YAAV;AAAuB,UAAA,IAAI,EAAC,YAA5B;AAAyC,UAAA,IAAI,EAAC,GAA9C;AAAkD,UAAA,GAAG,EAAC,GAAtD;AAA0D,UAAA,IAAI,EAAC,QAA/D;AAAwE,UAAA,YAAY,EAAEN,mBAAtF;AAA2G,UAAA,QAAQ,EAAE,KAAKiE,yBAA1H;AAAqJ,UAAA,KAAK,EAAE;AAACmN,YAAAA,SAAS,EAAE,MAAZ;AAAoBC,YAAAA,UAAU,EAAE,8CAAhC;AAAgFC,YAAAA,cAAc,EAAE,MAAhG;AAAwGC,YAAAA,kBAAkB,EAAE,cAA5H;AAA4IN,YAAAA,KAAK,EAAE;AAAnJ;AAA5J,UADF,GAEE;AAAO,UAAA,EAAE,EAAC,YAAV;AAAuB,UAAA,IAAI,EAAC,YAA5B;AAAyC,UAAA,IAAI,EAAC,GAA9C;AAAkD,UAAA,GAAG,EAAC,GAAtD;AAA0D,UAAA,IAAI,EAAC,QAA/D;AAAwE,UAAA,YAAY,EAAEjR,mBAAtF;AAA2G,UAAA,QAAQ,EAAE,KAAKiE,yBAA1H;AAAqJ,UAAA,KAAK,EAAE;AAACmN,YAAAA,SAAS,EAAE,MAAZ;AAAoBH,YAAAA,KAAK,EAAE;AAA3B;AAA5J,UAJV,CAJJ,CA1DJ,EAsEI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,cAAf;AAA8B,UAAA,SAAS,EAAC;AAAxC,0BADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAQ,UAAA,EAAE,EAAC,cAAX;AAA0B,UAAA,YAAY,EAAE1Q,qBAAxC;AAA+D,UAAA,QAAQ,EAAE,KAAK2D,2BAA9E;AAA2G,UAAA,SAAS,EAAC;AAArH,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,qBADJ,EAEKzF,YAAY,CAAC+S,GAAb,CAAiB,UAAC/S,YAAD,EAAeuI,CAAf;AAAA,iBACd;AAAQ,YAAA,KAAK,EAAEvI,YAAY,CAACD,MAA5B;AAAoC,YAAA,GAAG,EAAEC,YAAY,CAACD;AAAtD,aAA+DC,YAAY,CAACD,MAA5E,CADc;AAAA,SAAjB,CAFL,CADJ,CAJJ,CAtEJ,EAmFK,KAAKqC,KAAL,CAAWN,qBAAX,CAAiCqG,aAAjC,CAA+C,IAA/C,KAAwD,CAAxD,GAEO;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACqK,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,OAAf;AAAuB,UAAA,SAAS,EAAC;AAAjC,4CADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,SAAS,EAAC,cAA7B;AAA4C,UAAA,EAAE,EAAC;AAA/C,UADJ,CAJJ,CAFP,GAUK,IA7FV,EA+FI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,eAAf;AAA+B,UAAA,SAAS,EAAC;AAAzC,4BADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WAEQ,KAAKrQ,KAAL,CAAW6Q,aAAX,CAAyB7K,aAAzB,CAAuC,OAAvC,KAAmD,CAAnD,GACI;AAAQ,UAAA,EAAE,EAAC,eAAX;AAA2B,UAAA,YAAY,EAAEzG,aAAzC;AAAwD,UAAA,QAAQ,EAAE,KAAKiE,mBAAvE;AAA4F,UAAA,SAAS,EAAC;AAAtG,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,8BADJ,EAEI;AAAQ,UAAA,KAAK,EAAC;AAAd,mCAFJ,CADJ,GAKE,IAPV,EAUQ,KAAKxD,KAAL,CAAW6Q,aAAX,CAAyB7K,aAAzB,CAAuC,gBAAvC,KAA4D,CAA5D,GACI;AAAQ,UAAA,EAAE,EAAC,eAAX;AAA2B,UAAA,YAAY,EAAEzG,aAAzC;AAAwD,UAAA,QAAQ,EAAE,KAAKiE,mBAAvE;AAA4F,UAAA,SAAS,EAAC;AAAtG,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,mCADJ,CADJ,GAIE,IAdV,EAiBQ,KAAKxD,KAAL,CAAW6Q,aAAX,CAAyB7K,aAAzB,CAAuC,iBAAvC,KAA6D,CAA7D,GACI;AAAQ,UAAA,EAAE,EAAC,eAAX;AAA2B,UAAA,YAAY,EAAEzG,aAAzC;AAAwD,UAAA,QAAQ,EAAE,KAAKiE,mBAAvE;AAA4F,UAAA,SAAS,EAAC;AAAtG,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,8BADJ,CADJ,GAIE,IArBV,CAJJ,CA/FJ,EA4HI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAAC6M,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,aAAf;AAA6B,UAAA,SAAS,EAAC;AAAvC,8BADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAQ,UAAA,EAAE,EAAC,aAAX;AAAyB,UAAA,YAAY,EAAE7Q,wBAAvC;AAAiE,UAAA,QAAQ,EAAE,KAAKiE,8BAAhF;AAAgH,UAAA,SAAS,EAAC;AAA1H,WACI;AAAQ,UAAA,KAAK,EAAC;AAAd,qBADJ,EAEK,KAAKxD,KAAL,CAAWW,QAAX,CAAoBgQ,GAApB,CAAwB,UAACE,OAAD,EAAU1K,CAAV;AAAA,iBACrB;AAAQ,YAAA,KAAK,EAAE0K,OAAO,CAACvK,EAAvB;AAA2B,YAAA,GAAG,EAAEuK,OAAO,CAACvK;AAAxC,aAA6CuK,OAAO,CAACA,OAArD,CADqB;AAAA,SAAxB,CAFL,CADJ,CAJJ,CA5HJ,EAyII,2CAzIJ,EA0II;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACT,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAG,UAAA,SAAS,EAAE,kEAAd;AAAkF,UAAA,KAAK,EAAE;AAACU,YAAAA,KAAK,EAAE;AAAR,WAAzF;AAA6G,UAAA,OAAO,EAAE,KAAK1P;AAA3H,+BADJ,CADJ,CA1IJ,EA+II,2CA/IJ,EAgJI,2CAhJJ,EAiJI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAK,UAAA,KAAK,EAAE;AAACgP,YAAAA,KAAK,EAAE;AAAR;AAAZ,WACI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,0BAAf;AAA0C,UAAA,SAAS,EAAC;AAApD,iCADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE,2CAAhB;AAA6D,UAAA,KAAK,EAAE;AAACW,YAAAA,OAAO,EAAE,MAAV;AAAkBC,YAAAA,UAAU,EAAE,QAA9B;AAAwCC,YAAAA,cAAc,EAAE;AAAxD;AAApE,WACI;AAAO,UAAA,EAAE,EAAC,0BAAV;AAAqC,UAAA,YAAY,EAAEjT,wBAAnD;AAA6E,UAAA,OAAO,EAAE,KAAKiE,kCAA3F;AAA+H,UAAA,IAAI,EAAC,MAApI;AAA2I,UAAA,SAAS,EAAC;AAArJ,UADJ,CAJJ,CADJ,CADJ,EAWI,2CAXJ,EAYI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACmO,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAO,UAAA,OAAO,EAAC,gBAAf;AAAgC,UAAA,SAAS,EAAC;AAA1C,8BADJ,CADJ,EAII;AAAK,UAAA,SAAS,EAAE,sDAAhB;AAAwE,UAAA,KAAK,EAAE;AAACW,YAAAA,OAAO,EAAE,MAAV;AAAkBC,YAAAA,UAAU,EAAE,QAA9B;AAAwCC,YAAAA,cAAc,EAAE;AAAxD;AAA/E,WACI;AAAG,UAAA,SAAS,EAAE,gCAAd;AAAgD,0BAAa;AAA7D,WAAqE,KAAKjR,KAAL,CAAWI,iBAAhF,CADJ,CAJJ,CAZJ,EAoBI,2CApBJ,EAqBI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACgQ,YAAAA,KAAK,EAAE;AAAR;AAA9B,WACI;AAAK,UAAA,SAAS,EAAE;AAAhB,WACI;AAAG,UAAA,SAAS,EAAE,gEAAd;AAAgF,UAAA,KAAK,EAAE;AAACU,YAAAA,KAAK,EAAE;AAAR,WAAvF;AAA2G,UAAA,OAAO,EAAE;AAAA,mBAAM,OAAI,CAAChP,oBAAL,CAA0B,CAAC,CAA3B,CAAN;AAAA;AAApH,iDADJ,CADJ,CArBJ,EA0BI,2CA1BJ,EA2BI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAACiP,YAAAA,OAAO,EAAE,MAAV;AAAkBC,YAAAA,UAAU,EAAE,QAA9B;AAAwCC,YAAAA,cAAc,EAAE;AAAxD;AAA9B,WACI;AAAG,UAAA,SAAS,EAAE,sDAAd;AAAsE,UAAA,KAAK,EAAE;AAACH,YAAAA,KAAK,EAAE;AAAR,WAA7E;AAAiG,UAAA,OAAO,EAAE,KAAK1O;AAA/G,4BADJ,CA3BJ,EA8BI,2CA9BJ,EAgCK,KAAKpC,KAAL,CAAWjC,SAAX,CAAqB4S,GAArB,CAAyB,UAACO,QAAD,EAAW/K,CAAX;AAAA,iBACtB;AAAK,YAAA,KAAK,EAAE;AAACiK,cAAAA,KAAK,EAAE;AAAR,aAAZ;AAA6B,YAAA,GAAG,EAAEjK;AAAlC,aACI,2CADJ,EAEI;AAAK,YAAA,KAAK,EAAE;AAACiK,cAAAA,KAAK,EAAE;AAAR;AAAZ,aACI;AAAK,YAAA,SAAS,EAAE,KAAhB;AAAuB,YAAA,KAAK,EAAE;AAACA,cAAAA,KAAK,EAAE;AAAR;AAA9B,aACI;AAAK,YAAA,SAAS,EAAE;AAAhB,aACI;AAAO,YAAA,OAAO,EAAC,gBAAf;AAAgC,YAAA,SAAS,EAAC;AAA1C,mCADJ,CADJ,EAII;AAAK,YAAA,SAAS,EAAE,2CAAhB;AAA6D,YAAA,KAAK,EAAE;AAACW,cAAAA,OAAO,EAAE,MAAV;AAAkBC,cAAAA,UAAU,EAAE,QAA9B;AAAwCC,cAAAA,cAAc,EAAE;AAAxD;AAApE,aACI;AAAO,YAAA,EAAE,EAAC,gBAAV;AAA2B,YAAA,IAAI,EAAC,MAAhC;AAAuC,YAAA,YAAY,EAAEC,QAAQ,CAACvT,MAA9D;AAAsE,YAAA,SAAS,EAAC;AAAhF,YADJ,CAJJ,CADJ,CAFJ,EAYI,2CAZJ,EAaI;AAAK,YAAA,SAAS,EAAE,KAAhB;AAAuB,YAAA,KAAK,EAAE;AAACyS,cAAAA,KAAK,EAAE;AAAR;AAA9B,aACI;AAAK,YAAA,SAAS,EAAE;AAAhB,aACI;AAAO,YAAA,OAAO,EAAC,gBAAf;AAAgC,YAAA,SAAS,EAAC;AAA1C,gCADJ,CADJ,EAII;AAAK,YAAA,SAAS,EAAE,sDAAhB;AAAwE,YAAA,KAAK,EAAE;AAACW,cAAAA,OAAO,EAAE,MAAV;AAAkBC,cAAAA,UAAU,EAAE,QAA9B;AAAwCC,cAAAA,cAAc,EAAE;AAAxD;AAA/E,aACI;AAAG,YAAA,SAAS,EAAE,gCAAd;AAAgD,4BAAa;AAA7D,aAAqEC,QAAQ,CAAChI,IAA9E,CADJ,CAJJ,CAbJ,EAqBI,2CArBJ,EAsBI;AAAG,YAAA,SAAS,EAAE,gEAAd;AAAgF,YAAA,KAAK,EAAE;AAAC4H,cAAAA,KAAK,EAAE;AAAR,aAAvF;AAA2G,YAAA,OAAO,EAAE;AAAA,qBAAM,OAAI,CAAChP,oBAAL,CAA0BqE,CAA1B,CAAN;AAAA;AAApH,oDAtBJ,EAuBI,2CAvBJ,CADsB;AAAA,SAAzB,CAhCL,CADJ,CAjJJ,EA+MI,2CA/MJ,EAgNI,2CAhNJ,EAiNI;AAAG,UAAA,SAAS,EAAE,8DAAd;AAA8E,UAAA,KAAK,EAAE;AAAC2K,YAAAA,KAAK,EAAE;AAAR,WAArF;AAAyG,UAAA,OAAO,EAAE,KAAKzP;AAAvH,sBAjNJ,EAkNI,2CAlNJ,EAmNI;AAAK,UAAA,SAAS,EAAE,KAAhB;AAAuB,UAAA,KAAK,EAAE;AAAC0P,YAAAA,OAAO,EAAE,MAAV;AAAkBC,YAAAA,UAAU,EAAE,QAA9B;AAAwCC,YAAAA,cAAc,EAAE;AAAxD;AAA9B,WACI;AAAG,UAAA,SAAS,EAAE,sDAAd;AAAsE,UAAA,KAAK,EAAE;AAACH,YAAAA,KAAK,EAAE;AAAR,WAA7E;AAAiG,UAAA,OAAO,EAAE,KAAK3P;AAA/G,iCADJ,CAnNJ,EAsNI,2CAtNJ,CADJ,CADJ,CADJ,CADJ,CAjBJ,CADJ;AAoPH,OArPD,MAqPO,IAAG,KAAKnB,KAAL,CAAWC,gBAAX,CAA4B8F,aAA5B,CAA0C,cAA1C,KAA6D,CAAhE,EAAmE;AACtE,eACI;AAAK,UAAA,KAAK,EAAE;AAACqK,YAAAA,KAAK,EAAE,MAAR;AAAgBe,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,mBAAD;AAAS,UAAA,IAAI,EAAE,KAAKpR,KAAL,CAAWsE,IAA1B;AACwB,UAAA,WAAW,EAAE,KAAKrE,KAAL,CAAWK,WADhD;AAEwB,UAAA,cAAc,EAAE,KAAKL,KAAL,CAAWM,cAFnD;AAGwB,UAAA,YAAY,EAAE,KAAKN,KAAL,CAAWO,YAHjD;AAIwB,UAAA,uBAAuB,EAAE,KAAKP,KAAL,CAAWQ,uBAJ5D;AAKwB,UAAA,aAAa,EAAE,KAAK8B,wBAL5C;AAMwB,UAAA,gBAAgB,EAAE,KAAKM,yBAN/C;AAOwB,UAAA,YAAY,EAAE,KAAKrB,mBAP3C;AAQwB,UAAA,gBAAgB,EAAE,KAAKG,gBAR/C;AASwB,UAAA,yBAAyB,EAAE,KAAKE,yBATxD;AAUwB,UAAA,MAAM,EAAE,KAAK5B,KAAL,CAAWE;AAV3C,UADJ,CADJ;AAgBH,OAjBM,MAiBA,IAAG,KAAKF,KAAL,CAAWC,gBAAX,CAA4B8F,aAA5B,CAA0C,qBAA1C,KAAoE,CAAvE,EAA0E;AAC7E,eACI;AAAK,UAAA,KAAK,EAAE;AAACqK,YAAAA,KAAK,EAAE,MAAR;AAAgBe,YAAAA,MAAM,EAAE;AAAxB;AAAZ,WACI,gCAAC,+BAAD;AAAqB,UAAA,IAAI,EAAE,KAAKpR,KAAL,CAAWsE,IAAtC;AAA4C,UAAA,aAAa,EAAE,KAAK+M,aAAhE;AAC4B,UAAA,MAAM,EAAE,KAAKrR,KAAL,CAAWsR,QAD/C;AAE4B,UAAA,cAAc,EAAE,CAAC;AAACvG,YAAAA,KAAK,EAAE,KAAK/K,KAAL,CAAWuR;AAAnB,WAAD,CAF5C;AAG4B,UAAA,eAAe,EAAE,KAAKvR,KAAL,CAAWsR,QAHxD;AAI4B,UAAA,YAAY,EAAE,KAAKrR,KAAL,CAAW5B,QAJrD;AAK4B,UAAA,kBAAkB,EAAE,KAAKiE,WALrD;AAM4B,UAAA,sBAAsB,EAAE,KAAKK,cANzD;AAO4B,UAAA,qBAAqB,EAAE,KAAKC,aAPxD;AAQ4B,UAAA,0BAA0B,EAAE,KAAKhB,kCAR7D;AAS4B,UAAA,8BAA8B,EAAE,0CAAM;AAAC,YAAA,OAAI,CAAC4P,mBAAL;AAAyB,WAT5F;AAU4B,UAAA,YAAY,EAAE,KAAK/P,qBAV/C;AAW4B,UAAA,aAAa,EAAE,KAAKC,aAXhD;AAY4B,UAAA,gBAAgB,EAAE,KAAKC,gBAZnD;AAa4B,UAAA,0BAA0B,EAAE,KAAKG,0BAb7D;AAc4B,UAAA,MAAM,EAAE,KAAK7B,KAAL,CAAW/B,MAd/C;AAe4B,UAAA,MAAM,EAAE,KAAK+B,KAAL,CAAWE,MAf/C;AAgB4B,UAAA,iBAAiB,EAAE,KAAK8B,sBAhBpD;AAiB4B,UAAA,iBAAiB,EAAE,KAAKjC,KAAL,CAAWuL,iBAjB1D;AAkB4B,UAAA,SAAS,EAAE,KAAKvL,KAAL,CAAWyR,SAlBlD;AAmB4B,UAAA,yBAAyB,EAAE,KAAK5P,yBAnB5D;AAoB4B,UAAA,yBAAyB,EAAE,KAAK7B,KAAL,CAAW0R,yBApBlE;AAqB4B,UAAA,eAAe,EAAE,KAAK1O,eArBlD;AAsB4B,UAAA,WAAW,EAAE,KAtBzC;AAuB4B,UAAA,mBAAmB,EAAE,2BAvBjD;AAwB4B,UAAA,oBAAoB,EAAE,mCAxBlD;AAyB4B,UAAA,gBAAgB,EAAE,KAAK/C,KAAL,CAAWS,gBAzBzD;AA0B4B,UAAA,iBAAiB,EAAE,KAAKT,KAAL,CAAWU;AA1B1D,UADJ,CADJ;AAgCH,OAjCM,MAiCA,IAAG,KAAKV,KAAL,CAAWC,gBAAX,CAA4B8F,aAA5B,CAA0C,cAA1C,KAA6D,CAAhE,EAAmE;AACtE,eACI,6CACI,gCAAC,kBAAD;AAAQ,UAAA,MAAM,EAAE,KAAK/F,KAAL,CAAWE,MAA3B;AAAmC,UAAA,UAAU,EAAE,KAAKH,KAAL,CAAW+E,uBAA1D;AAAmF,UAAA,IAAI,EAAE,KAAK/E,KAAL,CAAWsE,IAApG;AACoC,UAAA,KAAK,EAAE,KAAKtE,KAAL,CAAW2R,WADtD;AAEoC,UAAA,aAAa,EAAE,WAFnD;AAGoC,UAAA,YAAY,EAAE,gBAAc,KAAK3R,KAAL,CAAW4R;AAH3E,eADJ,CADJ;AAQH;AACJ;;;;EA3kGwCC,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\nimport Slider from 'react-input-slider';\n\nimport Formula from '../../Formula.js';\nimport InstruccionVariable from '../../InstruccionVariable.js';\nimport Umbral from '../../Umbral/Umbral.js';\n\nconst tipoCampos = [ {nombre: \"texto\"}, {nombre: \"booleano\"}, {nombre: \"fecha\"}, {nombre: \"número\"}, {nombre: \"arreglo\"}];\n\nconst periodicidad = [ {nombre: \"diario\"}, {nombre: \"semanal\"}, {nombre: \"mensual\"}, {nombre: \"trimestral\"}, {nombre: \"bi-anual\"}, {nombre: \"anual\"}];\n\nvar formulaG = '', elementosFormulasG = [];\nvar atributos = [];\nvar nombreCampoNuevoAtributo = '';\nvar reglas = [], segmentoRegla = [];\nvar elementosFormulas = [], formulas = [];\nvar posicionAtributoSeleccionado = -1;\nvar nivelNuevoAtributo = 0;\nvar tipoDeAsignacionSeleccionado = '';\nvar operacionSeleccionada = '';\nvar campoSeleccionado = {};\nvar indiceSeleccionadoSegmentoReglas = -1, indiceSeleccionadoReglas = -1, tipoElementoSeleccionadoRegla = '';\n\nvar valorSeleccionado = '', valorSeleccionadoTexto = '';\nvar indiceSeleccionadoFormula = -1;\nvar indiceFormulaSeleccionadaEdit = -1;\n\nvar nombreIndicador = '', codigoIndicador = '', toleranciaIndicador = '', valorIdealIndicador = '', tipoValorIdealIndicador = '', tipoIndicador = '', nombreEncargadoIndicador = '';\n\nvar banderaEsFormulaIndicador = false, mostrarToleranciaPorcentaje = false, periodicidadIndicador = \"-1\", fecha = '';\nvar contadorObjetosGuardados = 0, contadorObjetosAGuardar = 0;\n\nexport default class EditarIndicador extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'editarIndicador',\n            navbar: \"\",\n            x: 0,\n            atributos: [],\n            tipoNuevaVariable: \"\",\n            reglas: [],\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje,\n            periodicidadIndicador: periodicidadIndicador,\n            esEditarVar: false,\n            esOperacionSQL: false,\n            operacionSQL: \"\",\n            formulaSeleccionadaEdit: null,\n            condicionFormula: \"\",\n            condicionElemento: \"\",\n            usuarios: []\n        }\n        this.getIndicator = this.getIndicator.bind(this);\n        this.traerSegmentosDeCampo = this.traerSegmentosDeCampo.bind(this);\n        this.traerReglasDeCampo = this.traerReglasDeCampo.bind(this);\n        this.traerFormulasDeCampo = this.traerFormulasDeCampo.bind(this);\n        this.traerElementosDeCampo = this.traerElementosDeCampo.bind(this);\n        this.traerElementosDeFormulaIndicador = this.traerElementosDeFormulaIndicador.bind(this);\n\n        this.editarIndicador = this.editarIndicador.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.goCrearUmbral = this.goCrearUmbral.bind(this);\n        this.retornoEditarIndicador = this.retornoEditarIndicador.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarSeleccionFormula = this.actualizarSeleccionFormula.bind(this);\n\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormulaCampo = this.goToCreateFormulaCampo.bind(this);\n        this.actualizarNombreCampoNuevoAtributo = this.actualizarNombreCampoNuevoAtributo.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.revisarTipoAnadirFormula = this.revisarTipoAnadirFormula.bind(this);\n        this.anadirFormulaIndicador = this.anadirFormulaIndicador.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.verificarModificarFormula = this.verificarModificarFormula.bind(this);\n        this.modificarFormula = this.modificarFormula.bind(this);\n        this.modificarFormulaGlobal = this.modificarFormulaGlobal.bind(this);\n        this.eliminarFormula = this.eliminarFormula.bind(this);\n        \n        this.updateNombreIndicador = this.updateNombreIndicador.bind(this);\n        this.updateCodigoIndicador = this.updateCodigoIndicador.bind(this);\n        this.updateValorIdealIndicador = this.updateValorIdealIndicador.bind(this);\n        this.updateTipoValorIdealIndicador = this.updateTipoValorIdealIndicador.bind(this);\n        this.updateToleranciaIndicador = this.updateToleranciaIndicador.bind(this);\n        this.updatePeriodicidadIndicador = this.updatePeriodicidadIndicador.bind(this);\n        this.cargarDatePicker = this.cargarDatePicker.bind(this);\n        this.updateTipoIndicador = this.updateTipoIndicador.bind(this);\n        this.updateNombreEncargadoIndicador = this.updateNombreEncargadoIndicador.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n\n        this.verificarSiExisteExcelEnResultadosHistoricosModificar = this.verificarSiExisteExcelEnResultadosHistoricosModificar.bind(this);\n        this.crearTablaDeResultadoNombreModificar = this.crearTablaDeResultadoNombreModificar.bind(this);\n        this.crearResultadoNombreModificar = this.crearResultadoNombreModificar.bind(this);\n        this.modificarResultadosNombre = this.modificarResultadosNombre.bind(this);\n        this.verificarPeriodicidadGuardarModificar = this.verificarPeriodicidadGuardarModificar.bind(this);\n        this.updatePeriodicidadModificar = this.updatePeriodicidadModificar.bind(this);\n\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n\n        this.getUsuarios = this.getUsuarios.bind(this);\n    }\n\n    componentWillUnmount() {\n        periodicidadIndicador = '-1';\n        mostrarToleranciaPorcentaje = false;\n        fecha = '';\n    }\n\n    componentDidMount () {\n        this.getIndicator();\n        this.traerElementosDeFormulaIndicador();\n        this.getUsuarios();\n    }\n\n    getIndicator () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Indicadores where ID  = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            formulaG = result.recordset[0].formula;\n                            nombreIndicador = result.recordset[0].nombre;\n                            codigoIndicador = result.recordset[0].codigo;\n                            toleranciaIndicador = result.recordset[0].tolerancia;\n                            valorIdealIndicador = result.recordset[0].valorIdeal;\n                            tipoValorIdealIndicador = result.recordset[0].tipoValorIdeal;\n                            periodicidadIndicador = result.recordset[0].periodicidad;\n                            fecha = result.recordset[0].fechaInicioCalculo;\n                            tipoIndicador = result.recordset[0].tipoIndicador;\n                            nombreEncargadoIndicador = result.recordset[0].responsable;\n                            $(\"#nombreIndicador\").val(nombreIndicador);\n                            $(\"#codigo\").val(codigoIndicador);\n                            $(\"#tolerancia\").val(toleranciaIndicador);\n                            $(\"#valorIdeal\").val(valorIdealIndicador);\n                            $(\"#tipoValorIdeal\").val(tipoValorIdealIndicador);\n                            $(\"#periodicidad\").val(periodicidadIndicador);\n                            $(\"#tipoIndicador\").val(tipoIndicador);\n                            $(\"#responsable\").val(nombreEncargadoIndicador);\n\n                            var mostrarToleranciaPorcentaje = false;\n                            if(tipoValorIdealIndicador.localeCompare(\"porcentual\") == 0)\n                                mostrarToleranciaPorcentaje = true;\n                            this.setState({\n                                x: result.recordset[0].peso,\n                                mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje,\n                                periodicidadIndicador: periodicidadIndicador,\n                            }, this.cargarDatePicker );\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"select * from IndicadoresCampos where indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                        if(result.recordset.length > 0) {\n                            atributos = result.recordset;\n                            this.setState({\n                                atributos: result.recordset\n                            });\n                            for (var i = 0; i < result.recordset.length; i++) {\n                                this.traerSegmentosDeCampo(result.recordset[i], i);\n                                this.traerFormulasDeCampo(result.recordset[i], i);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerSegmentosDeCampo (campo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasIndicadores where indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(segmentoRegla[posicionAtributo] ==  null)\n                                segmentoRegla[posicionAtributo] = [];\n                            segmentoRegla[posicionAtributo] = result.recordset;\n                            for (var i = 0; i < segmentoRegla[posicionAtributo].length; i++) {\n                                this.traerReglasDeCampo(campo, segmentoRegla[posicionAtributo][i], posicionAtributo, i);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerReglasDeCampo (campo, segmento, posicionAtributo, posicionSegmento) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasIndicadores where indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+campo.ID+\" and segmentoReglaID = \"+segmento.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var tempCopy = result.recordset;\n                            tempCopy.sort(function(a, b){\n                                return a.reglaPadreID-b.reglaPadreID}\n                            );\n                            if(reglas[posicionAtributo] == null)\n                                reglas[posicionAtributo] = [];\n                            if(reglas[posicionAtributo][posicionSegmento] == null)\n                                reglas[posicionAtributo][posicionSegmento] = [];\n                            reglas[posicionAtributo][posicionSegmento] = tempCopy;\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerFormulasDeCampo (campo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasIndicadoresCampos where indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+campo.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(formulas[posicionAtributo] == null)\n                                formulas[posicionAtributo] = [];\n                            formulas[posicionAtributo] = result.recordset;\n                            for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                this.traerElementosDeCampo(campo, formulas[posicionAtributo][i], posicionAtributo, i);\n                            };\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerElementosDeCampo (campo, formula, posicionAtributo, posicionFormula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoFormulasIndicadoresCampos where indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+campo.ID+\" and formulaID = \"+formula.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            if(elementosFormulas[posicionAtributo] == null)\n                                elementosFormulas[posicionAtributo] = [];\n                            if(elementosFormulas[posicionAtributo][posicionFormula] == null)\n                                elementosFormulas[posicionAtributo][posicionFormula] = [];\n                            elementosFormulas[posicionAtributo][posicionFormula] = result.recordset;\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerElementosDeFormulaIndicador () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoIndicador where indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            elementosFormulasG = result.recordset;\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n\n\n\n\n\n    editarIndicador () {\n        var nombre = $(\"#nombreIndicador\").val();\n        var codigo = $(\"#codigo\").val();\n        var formula = formulaG;\n        var peso = this.state.x;\n        var valorIdeal = parseInt($(\"#valorIdeal\").val());\n        var tipoValorIdeal = $(\"#tipoValorIdeal\").val();\n        var tolerancia = parseInt($(\"#tolerancia\").val());\n        var tipoIndicador = $(\"#tipoIndicador\").val();\n        var periodicidad = $(\"#periodicidad\").val();\n        var fecha = $(\"#fecha\").datepicker('getDate');\n        if(tipoIndicador.localeCompare(\"-1\"))\n            fecha = new Date(1964, 4, 28);\n        var responsable = $(\"#responsable\").val();\n        var riesgoPadre = this.props.riesgoPadre;\n\n        const transaction1 = new sql.Transaction( this.props.pool );\n        transaction1.begin(err => {\n            var rolledBack = false;\n            transaction1.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction1);\n            request.query(\"DELETE FROM ElementoIndicador WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction1.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction1.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction1\n        const transaction2 = new sql.Transaction( this.props.pool );\n        transaction2.begin(err => {\n            var rolledBack = false;\n            transaction2.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction2);\n            request.query(\"DELETE FROM IndicadoresCampos WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction2.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction2.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction2\n        const transaction3 = new sql.Transaction( this.props.pool );\n        transaction3.begin(err => {\n            var rolledBack = false;\n            transaction3.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction3);\n            request.query(\"DELETE FROM FormulasIndicadoresCampos WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction3.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction3.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction3\n        const transaction4 = new sql.Transaction( this.props.pool );\n        transaction4.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction4);\n            request.query(\"DELETE FROM ElementoFormulasIndicadoresCampos WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction4.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction4.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction4\n        const transaction5 = new sql.Transaction( this.props.pool );\n        transaction5.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction5);\n            request.query(\"DELETE FROM SegmentoReglasIndicadores WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction5.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction5.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction5\n        const transaction6 = new sql.Transaction( this.props.pool );\n        transaction6.begin(err => {\n            var rolledBack = false;\n            transaction4.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction6);\n            request.query(\"DELETE FROM ReglasIndicadores WHERE indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction6.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction6.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction6\n\n        if(nombre.length > 0 && nombre.length < 101) {\n            if(!this.tieneEspaciosEnBlanco(nombre)) {\n                if(codigo.length > 0 && codigo.length < 101) {\n                    if(formula.length > 0 && formula.length < 501) {\n                        if( !isNaN(parseInt(peso)) ) {\n                            if( !isNaN(parseInt(tolerancia)) ) {\n                                if( !isNaN(parseInt(valorIdeal)) ) {\n                                    if(tipoValorIdeal.length > 0 && tipoValorIdeal.length < 21) {\n                                        if(periodicidad.length > 0 && periodicidad.length < 51) {\n                                            if(tipoIndicador.length > 0 && tipoIndicador.length < 21) {\n                                                if(responsable.length > 0) {\n                                                    if( !isNaN(parseInt(riesgoPadre)) ) {\n                                                        if(this.isValidDate(fecha)) {\n                                                            \n                                                            const transaction = new sql.Transaction( this.props.pool );\n                                                            transaction.begin(err => {\n                                                                var rolledBack = false;\n                                                                transaction.on('rollback', aborted => {\n                                                                    rolledBack = true;\n                                                                });\n                                                                const request = new sql.Request(transaction);\n                                                                request.query(\"update Indicadores set nombre = '\"+nombre+\"', codigo = '\"+codigo+\"', formula = '\"+formula+\"', peso = \"+peso+\", tolerancia = \"+tolerancia+\", valorIdeal = \"+valorIdeal+\", tipoValorIdeal = '\"+tipoValorIdeal+\"', periodicidad = '\"+periodicidad+\"', tipoIndicador = '\"+tipoIndicador+\"', responsable = '\"+responsable+\"', idRiesgoPadre = \"+riesgoPadre+\", fechaInicioCalculo = '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"' WHERE ID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                                                                    if (err) {\n                                                                        console.log(err);\n                                                                        if (!rolledBack) {\n                                                                            transaction.rollback(err => {\n                                                                            });\n                                                                        }\n                                                                    } else {\n                                                                        transaction.commit(err => {\n                                                                            alert(\"Indicador Modificado.\");\n                                                                            /*nombreIndicador = '';\n                                                                            codigoIndicador = '';\n                                                                            toleranciaIndicador = '';\n                                                                            tipoToleranciaIndicador = '';\n                                                                            valorIdealIndicador = '';\n                                                                            tipoValorIdealIndicador = '';\n                                                                            periodicidadIndicador = '';\n                                                                            tipoIndicador = '';\n                                                                            nombreEncargadoIndicador = '';\n                                                                            $(\"#nombreIndicador\").val(\"\");\n                                                                            $(\"#codigo\").val(\"\");\n                                                                            this.setState({\n                                                                                x: 0\n                                                                            });\n                                                                            $(\"#valorIdeal\").val(\"\");\n                                                                            $(\"#tipoValorIdeal\").val(\"numerico\");\n                                                                            $(\"#tolerancia\").val(\"\");\n                                                                            $(\"#tipoTolerancia\").val(\"numerico\");\n                                                                            $(\"#periodicidad\").val(\"-1\");\n                                                                            $(\"#tipoIndicador\").val(\"riesgoInherente\");\n                                                                            $(\"#responsable\").val(\"\");*/\n                                                                            contadorObjetosGuardados = 0;\n                                                                            contadorObjetosAGuardar = 0;\n                                                                            var indicador = {ID: this.props.idIndicadorSeleccionado, nombre: nombre};\n                                                                            if(elementosFormulasG.length != 0) {\n                                                                                for (var i = 0; i < elementosFormulasG.length; i++) {\n                                                                                    this.createIndicatorFormulaElements(indicador, elementosFormulasG[i], i, elementosFormulasG.length-1);\n                                                                                };\n                                                                            } else {\n                                                                                for (var i = 0; i < atributos.length; i++) {\n                                                                                    contadorObjetosAGuardar++;\n                                                                                    this.createIndicatorField(atributos[i], i);\n                                                                                };\n                                                                            }\n                                                                        });\n                                                                    }\n                                                                });\n                                                            }); // fin transaction\n\n                                                        } else {\n                                                            alert(\"la fecha inicial debe ser una fecha valida\");\n                                                        }\n                                                    } else {\n                                                        alert(\"el riesgo padre del indicador debe ser un numero valido\");\n                                                    }\n                                                } else {\n                                                    alert(\"Ingrese un valor para el responsable.\");\n                                                }\n                                            } else {\n                                                alert(\"el tipo de indicador debe tener una longitud mayor a 0 y menor a 21\");\n                                            }\n                                        } else {\n                                            alert(\"la periodicidad del indicador debe tener una longitud mayor a 0 y menor a 51\");\n                                        }\n                                    } else {\n                                        alert(\"el tipo de valor ideal del indicador debe tener una longitud mayor a 0 y menor a 21\");\n                                    }\n                                } else {\n                                    alert(\"el valor ideal del indicador debe ser un numero valido\");\n                                }\n                            } else {\n                                alert(\"la tolerancia del indicador debe ser un numero valido\");\n                            }\n                        } else {\n                            alert(\"el peso del indicador debe ser un numero valido\");\n                        }\n                    } else {\n                        alert(\"la formula del indicador debe tener una longitud mayor a 0 y menor a 501\");\n                    }\n                } else {\n                    alert(\"el codigo del indicador debe tener una longitud mayor a 0 y menor a 101\");\n                }\n            } else {\n                alert('El nombre del archivo no debe contener espacios en blanco');\n            }\n        } else {\n            alert(\"el nombre del indicador debe tener una longitud mayor a 0 y menor a 101\");\n        }\n    }\n\n    createIndicatorFormulaElements (indicador, elementoFormula, indiceElemento, ultimaPosicionElemento) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoIndicador (indicadorID, conexionTablaID, esFuenteDeDato, excelArchivoID, excelVariableID, formaVariableID, elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+this.props.idIndicadorSeleccionado+\", \"+elementoFormula.conexionTablaID+\", '\"+elementoFormula.esFuenteDeDato+\"', \"+elementoFormula.excelArchivoID+\", \"+elementoFormula.excelVariableID+\", \"+elementoFormula.formaVariableID+\", \"+elementoFormula.elementoVariableID+\", \"+elementoFormula.elementoVariableCampoID+\", '\"+elementoFormula.esValorManual+\"', '\"+elementoFormula.nombreColumnaEnTabla+\"', '\"+elementoFormula.tipoColumnaEnTabla+\"', '\"+elementoFormula.nombreVariable+\"', '\"+elementoFormula.descripcion+\"', '\"+elementoFormula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(indiceElemento == ultimaPosicionElemento && atributos.length > 0) {\n                            for (var i = 0; i < atributos.length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createIndicatorField(atributos[i], i);\n                            };\n                        } else if(indiceElemento == ultimaPosicionElemento && atributos.length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createIndicatorField (indicadorCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into IndicadoresCampos (indicadorID, nombre, tipo, nivel) values (\"+this.props.idIndicadorSeleccionado+\", '\"+indicadorCampo.nombre+\"', '\"+indicadorCampo.tipo+\"', \"+indicadorCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getIndicatorFieldID(indicadorCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getIndicatorFieldID (indicadorCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from IndicadoresCampos where nombre = '\"+indicadorCampo.nombre+\"' and indicadorID = \"+this.props.idIndicadorSeleccionado, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        /*var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }*/\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            console.log('HOLA 1');\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        //los campos variableID y variableCampoID se ponen luego de la creacion e importacion\n        //el campo variableIDCreacionCodigo es el variableID de segmento asignado al crear reglas\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasIndicadores (conexionTablaID, indicadorID, indicadorCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esValorManual, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+this.props.idIndicadorSeleccionado+\", \"+indicadorCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esValorManual+\"', '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasIndicadores where conexionTablaID = \"+segmento.conexionTablaID+\" and indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and variableIDCreacionCodigo = \"+segmento.variableID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length > 0) {\n                            /*var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRules (indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        if(regla != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasIndicadores (segmentoReglaID, indicadorID, indicadorCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmentoEnCampo, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+this.props.idIndicadorSeleccionado+\", \"+indicadorCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            /*var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasIndicadores where segmentoReglaID = \"+segmento.ID+\" and indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    contadorObjetosGuardados++;\n                    this.limpiarArreglos();\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            /*var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }*/\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasIndicadoresCampos (indicadorID, indicadorCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+this.props.idIndicadorSeleccionado+\", \"+indicadorCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    contadorObjetosGuardados++;\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasIndicadoresCampos where indicadorID = \"+this.props.idIndicadorSeleccionado+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(indicadorCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            /*if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }*/\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(indicadorCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(indicadorCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (indicadorCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoFormulasIndicadoresCampos (indicadorID, indicadorCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID, excelVariableID, formaVariableID, elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+this.props.idIndicadorSeleccionado+\", \"+indicadorCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.esValorManual+\"', '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                            for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                    if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                        arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                    break;\n                                }\n                            };\n                        }\n                        if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            formulaG = '';\n            elementosFormulasG = [];\n            atributos = [];\n            nombreCampoNuevoAtributo = '';\n            reglas = [];\n            segmentoRegla = [];\n            elementosFormulas = [];\n            formulas = [];\n            posicionAtributoSeleccionado = -1;\n            nivelNuevoAtributo = 0;\n            tipoDeAsignacionSeleccionado = '';\n            operacionSeleccionada = '';\n            campoSeleccionado = {};\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                tipoNuevaVariable: \"\"\n            });\n        }\n    }\n\n    goToCreateFormula () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Crear Fórmula</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoEditarIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Fórmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        var esOperacionSQL = false, operacionSQL = \"\", esEditarVar = false;\n        if (formulaG.length > 0) {\n            esEditarVar = true;\n            if(formulaG.indexOf(\"ASIG\") == 0 ||\n                formulaG.indexOf(\"COUNT\") == 0 ||\n                formulaG.indexOf(\"PROM\") == 0 ||\n                formulaG.indexOf(\"MAX\") == 0 ||\n                formulaG.indexOf(\"MIN\") == 0 ||\n                formulaG.indexOf(\"SUM\") == 0 || \n                formulaG.indexOf(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                if(formulaG.indexOf(\"ASIG\") == 0) {\n                    operacionSQL = \"ASIG\";\n                } else if(formulaG.indexOf(\"COUNT\") == 0) {\n                    operacionSQL = \"COUNT\";\n                } else if(formulaG.indexOf(\"PROM\") == 0) {\n                    operacionSQL = \"PROM\";\n                } else if(formulaG.indexOf(\"MAX\") == 0) {\n                    operacionSQL = \"MAX\";\n                } else if(formulaG.indexOf(\"MIN\") == 0) {\n                    operacionSQL = \"MIN\";\n                } else if(formulaG.indexOf(\"SUM\") == 0) {\n                    operacionSQL = \"SUM\";\n                } else if(formulaG.indexOf(\"AUTOSUM\") == 0) {\n                    operacionSQL = \"AUTOSUM\";\n                }\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        banderaEsFormulaIndicador = true;\n        this.setState({\n            componenteActual: \"crearFormula\",\n            navbar: navbar,\n            formulaSeleccionadaEdit: {formula: formulaG, operacion: \"FORMULA\"},\n            esEditarVar: esEditarVar,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    retornoEditarIndicador () {\n        this.setState({\n            componenteActual: \"editarIndicador\"\n        }, this.cargarDatePicker );\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        tipoDeAsignacionSeleccionado = tipoVariable;\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(nivelNuevoAtributo < nivel)\n            nivelNuevoAtributo = nivel;\n    }\n\n    actualizarSeleccionFormula (formula, indice) {\n        if(formula != null) {\n            var condicionFormula = \" ID = \"+formula.ID, condicionElemento = \" formulaID = \"+formula.ID;\n            this.setState({\n                formulaSeleccionadaEdit: formula,\n                condicionFormula: condicionFormula,\n                condicionElemento: condicionElemento\n            });\n            indiceFormulaSeleccionadaEdit =  indice;\n        } else {\n            //\n        }\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoEditarIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormulaCampo (indice, esEditarVarN) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoEditarIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Modificar Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        banderaEsFormulaIndicador = false;\n\n        var esOperacionSQL, operacionSQL;\n        if(posicionAtributoSeleccionado == -1) {\n            esOperacionSQL = false;\n            operacionSQL = \"\";\n        }\n        if (this.state.formulaSeleccionadaEdit != null) {\n            if(this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"ASIG\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"COUNT\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"PROM\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MAX\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MIN\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"SUM\") == 0 || \n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                operacionSQL = this.state.formulaSeleccionadaEdit.operacion;\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"crearFormula\",\n            navbar: navbar,\n            esEditarVar: esEditarVarN,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    goCrearUmbral () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Configuraci&oacute;n</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoEditarIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Editar Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Umbrales</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"EditarUmbral\"\n        });\n    }\n\n    actualizarNombreCampoNuevoAtributo () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributo = nombreCampo;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MÁXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MÍNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        //if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < atributos.length; i++) {\n                if (atributos[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        //}\n        return noExiste;\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                    //seleccionar arreglo a insertar, si de varios atributos o unico\n                    var arreglo, nivel;\n                    arreglo = atributos;\n                    nivel = nivelNuevoAtributo;\n                    var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                    arreglo.push(nuevoAtributo);\n                    this.setState({\n                        atributos: arreglo,\n                        tipoNuevaVariable: \"\"\n                    });\n                    nivelNuevoAtributo = 0;\n                    nombreCampoNuevoAtributo = '';\n                    $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                    alert(\"Campo creado.\");\n                } else {\n                    alert(\"Seleccione un tipo de asignación.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        /*var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }*/\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if( valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIEMPO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    if(!esFormula) {\n                        if(campoSeleccionado.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        var esValorManual = false;\n                        if(campoSeleccionado.tablaID != undefined && campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != undefined && campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != undefined && campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != undefined && campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        } else if(campoSeleccionado.esValorManual != undefined) {\n                            esValorManual = campoSeleccionado.esValorManual;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID,\n                                esValorManual: esValorManual\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta añadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta añadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = nivelNuevoAtributo;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        /*if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }*/\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                        for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                            tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            break;\n                        };\n                        if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) ) {\n                            var nuevoNivel = nivelNuevoAtributo;\n                            /*var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            var esValorManual = false;\n                            if(formulaSeleccionada.tablaID != undefined && formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != undefined && formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != undefined && formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != undefined && formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            } else if(formulaSeleccionada.esValorManual != undefined) {\n                                esValorManual = formulaSeleccionada.esValorManual;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID,\n                                    esValorManual: esValorManual\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            formulaSeleccionada = null;\n                            //if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoNuevaAsig\n                                });\n                            //}\n                            /*if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }*/\n                            //tipoDeAsignacionSeleccionado = '';\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparación';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            else\n                alert(\"La comparación ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    revisarTipoAnadirFormula (formula, formulaArreglo) {\n        if(banderaEsFormulaIndicador)\n            this.anadirFormulaIndicador(formula, formulaArreglo);\n        else\n            this.anadirFormula(formula, formulaArreglo);\n    }\n\n    anadirFormulaIndicador (formula, formulaArreglo) {\n        formulaG = formula.formula;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        elementosFormulasG = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulasG = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulasG.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var copiaAntiguaFormulas = formulas;\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                var esValorManual = false;\n                if(formulaArreglo[i].esValorManual != undefined)\n                    esValorManual = formulaArreglo[i].esValorManual;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    esValorManual: esValorManual,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        if(!esFormula) {\n                            if(campoSeleccionado.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            if(formulaSeleccionada.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                                formulaID: -1,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                tipoCampoObjetivo: campoSeleccionado.tipo,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                operacion: operacionSeleccionada.operacion,\n                                                operacionTexto: operacionSeleccionada.operacionTexto,\n                                                valor: valor,\n                                                texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            campoSeleccionado = null;\n                            valorSeleccionado = '';\n                            //reglas[posicionSel].push(nuevaRegla);\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            //verificando que si modifica con un tipoDeAsignacionSeleccionado diferente al existente, que pueda entrar y actualizar tipo, si existe mas de una formula no se puede\n                            var existeSoloUnaFormula = false, contadorFormulas = 0;\n                            ForReglas:\n                            for (var i = 0; i < reglas[posicionSel].length; i++) {\n                                for (var j = 0; j < reglas[posicionSel][i].length; j++) {\n                                    if(!reglas[posicionSel][i][j].esCondicion) {\n                                        contadorFormulas++;\n                                    }\n                                };\n                            };\n                            if(contadorFormulas == 1) {\n                                existeSoloUnaFormula = true;\n                            }\n                            var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                            for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                break;\n                            };\n                            if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) || existeSoloUnaFormula ) {\n                                var nuevoNivel = nivelNuevoAtributo;\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta añadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta añadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(campoSeleccionado.tablaID != undefined) {\n                                    conexionTablaID = campoSeleccionado.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = campoSeleccionado.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                });\n                                formulaSeleccionada = null;\n                                //if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoNuevaAsig\n                                    });\n                                //}\n                                //tipoDeAsignacionSeleccionado = '';\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparación';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparación ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    eliminarRegla () {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            var existeFormula = false;\n            ForReglas:\n            for (var i = 0; i < reglas[posicionInsertarReglaAtributo].length; i++) {\n                for (var j = 0; j < reglas[posicionInsertarReglaAtributo][i].length; j++) {\n                    if(!reglas[posicionInsertarReglaAtributo][i][j].esCondicion) {\n                        existeFormula = true;\n                        break ForReglas;\n                    }\n                };\n            };\n            if(!existeFormula) {\n                this.setState({\n                    tipoNuevaVariable: \"\"\n                });\n                tipoDeAsignacionSeleccionado = '';\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    verificarModificarFormula (formula, formulaArreglo) {\n        if(banderaEsFormulaIndicador)\n            this.modificarFormulaGlobal(formula, formulaArreglo);\n        else\n            this.modificarFormula(formula, formulaArreglo);\n    }\n\n    modificarFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        /*var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }*/\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        formulas[posicionSel][indiceFormulaSeleccionadaEdit] = formula;\n        this.setState({\n            formulas: formulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }*/\n    }\n\n    modificarFormulaGlobal(formula, formulaArreglo) {\n        formulaG = formula.formula;\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulasG = arregloDeElementos;\n    }\n\n    eliminarFormula() {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        /*var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }*/\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        formulas[posicionSel].splice(indiceFormulaSeleccionadaEdit, 1);\n        this.setState({\n            formulas: formulas[posicionSel]\n        });\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        elementosFormulas[posicionSel].splice(posicionFormulaEnCampo, 1);\n    }\n\n    updateNombreIndicador() {\n        nombreIndicador = $(\"#nombreIndicador\").val();\n    }\n\n    updateCodigoIndicador() {\n        codigoIndicador = $(\"#codigo\").val();\n    }\n\n    updateValorIdealIndicador() {\n        valorIdealIndicador = $(\"#valorIdeal\").val();\n    }\n\n    updateTipoValorIdealIndicador() {\n        tipoValorIdealIndicador = $(\"#tipoValorIdeal\").val();\n        if(tipoValorIdealIndicador.localeCompare(\"numerico\") == 0) {\n            mostrarToleranciaPorcentaje = false;\n        } else {\n            mostrarToleranciaPorcentaje = true;\n        }\n        this.setState({\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje\n        });\n    }\n\n    updateToleranciaIndicador() {\n        toleranciaIndicador = $(\"#tolerancia\").val();\n    }\n\n    updatePeriodicidadIndicador() {\n        periodicidadIndicador = $(\"#periodicidad\").val();\n        this.setState({\n            periodicidadIndicador: periodicidadIndicador\n        }, this.cargarDatePicker );\n    }\n\n    cargarDatePicker () {\n        $('#fecha').datepicker({\n            format: \"dd-mm-yyyy\",\n            todayHighlight: true,\n            viewMode: \"days\", \n            minViewMode: \"days\",\n            language: 'es'\n        });\n        if(this.isValidDate(fecha)) {\n            $(\"#fecha\").datepicker(\"setDate\", fecha);\n        }\n        var self = this;\n        $('#fecha').datepicker().on('changeDate', function () {\n            if(self.isValidDate($(\"#fecha\").datepicker('getDate'))) {\n                fecha = $(\"#fecha\").datepicker('getDate');\n            }\n        });\n    }\n\n    updateTipoIndicador() {\n        tipoIndicador = $(\"#tipoIndicador\").val();\n    }\n\n    updateNombreEncargadoIndicador() {\n        nombreEncargadoIndicador = $(\"#responsable\").val();\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    verificarSiExisteExcelEnResultadosHistoricosModificar (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ResultadosNombreIndicadores where nombreIndicador = '\"+variable.nombre+\"' and finVigencia = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if (result.recordset.length == 0) {\n                            this.crearTablaDeResultadoNombreModificar(variable);\n                        } else {\n                            this.modificarResultadosNombre(variable, result.recordset[0].inicioVigencia);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearTablaDeResultadoNombreModificar (variable) {\n        //NOMBRE TABLA: NOMBREVARIABLE_AÑOVIGENCIA_MESVIGENCIA_DIAVIGENCIA_HORAVIGENCIA_MINUTOSVIGENCIA_SEGUNDOSVIGENCIA\n        //VIGENCIA: DIA CREACION\n        let hoy = new Date();\n        var textoCreacionTabla = 'CREATE TABLE '+variable.nombre+'_'+hoy.getFullYear()+'_'+(hoy.getMonth()+1)+'_'+hoy.getDate()+'_'+hoy.getHours()+'_'+hoy.getMinutes()+'_'+hoy.getSeconds()+' ( ID int IDENTITY(1,1) PRIMARY KEY, ';\n        for (var i = 0; i < variable.variables.length; i++) {\n            if(i != 0)\n                textoCreacionTabla += ', ';\n            if(variable.variables[i].tipo.localeCompare(\"numero\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' decimal(22,4)';\n            } else if(variable.variables[i].tipo.localeCompare(\"varchar\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' varchar(1000)';\n            } else if(variable.variables[i].tipo.localeCompare(\"bit\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' bit';\n            } else if(variable.variables[i].tipo.localeCompare(\"date\") == 0) {\n                textoCreacionTabla += variable.variables[i].nombre+' date';\n            }\n        };\n        textoCreacionTabla += ', f3ch4Gu4rd4do date )';\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(textoCreacionTabla, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.crearResultadoNombreModificar(variable, hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearResultadoNombreModificar (variable, hoy) {\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ResultadosNombreIndicadores (nombreIndicador, inicioVigencia, finVigencia) values ('\"+variable.nombre+\"', '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\":\"+hoy.getMinutes()+\":\"+hoy.getSeconds()+\"', '1964-05-28')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.verificarPeriodicidadGuardarModificar(variable, \"indicador\", hoy);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    modificarResultadosNombre (resultado, variable, hoy)  {\n        let mes = hoy.getMonth()+1;\n        if(mes.toString().length == 1)\n            mes = '0'+mes;\n        let dia = hoy.getDate();\n        if(dia.toString().length == 1)\n            dia = '0'+dia;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update ResultadosNombreVariables set finVigencia = '\"+hoy.getFullYear()+'-'+mes+'-'+dia+\" \"+hoy.getHours()+\"' where ID = \"+resultado.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.crearTablaDeResultadoNombreModificar(variable);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    verificarPeriodicidadGuardarModificar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.updatePeriodicidadModificar(variable, tabla, hoy);\n                        }/* else {\n                            this.guardarPeriodicidad(variable, tabla, hoy);\n                        }*/\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updatePeriodicidadModificar (variable, tabla, hoy) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update PeriodicidadCalculo where variableID = \"+variable.ID+\" and tablaVariable = '\"+tabla+\"' set fechaUltimoCalculo = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    getUsuarios () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Usuarios\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            usuarios: result.recordset\n                        });\n                        $(\"#responsable\").val(nombreEncargadoIndicador);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"editarIndicador\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Editar Indicador</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Indicador</a></li>\n                                            <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Modificar Indicador</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"card influencer-profile-data\"}>\n                                <div className={\"card-body\"}>\n                                    <div className={\"border-top border-bottom addPaddingToConfig\"} style={{width: \"100%\"}}>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"nombreIndicador\" className=\"col-form-label\">Nombre Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"nombreIndicador\" defaultValue={nombreIndicador} onKeyUp={this.updateNombreIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"codigo\" className=\"col-form-label\">Codigo</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"codigo\" defaultValue={codigoIndicador} onKeyUp={this.updateCodigoIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"peso\" className=\"col-form-label\">Peso</label>\n                                            </div>\n                                            <div className={\"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-8 form-group\"}>\n                                                <Slider\n                                                    axis=\"x\"\n                                                    xstep={1}\n                                                    xmin={0}\n                                                    xmax={this.props.pesoDisponibleRiesgo}\n                                                    x={this.state.x}\n                                                    onChange={({ x }) => this.setState({ x: x }) }\n                                                    style={{width: \"100%\", marginTop: \"10px\"}}/>\n                                            </div>\n                                            <div className={\"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1 form-group\"}>\n                                                <label id=\"pesoLabel\" className=\"col-form-label\">{this.state.x}</label>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"valorIdeal\" className=\"col-form-label\">Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoValorIdeal\" className=\"col-form-label\">Tipo de Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"tipoValorIdeal\" defaultValue={tipoValorIdealIndicador} onChange={this.updateTipoValorIdealIndicador} className=\"form-control\">\n                                                    <option value=\"numerico\">Numérico</option>\n                                                    <option value=\"porcentual\">Porcentual</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tolerancia\" className=\"col-form-label\">Tolerancia</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"periodicidad\" className=\"col-form-label\">Periodicidad</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"periodicidad\" defaultValue={periodicidadIndicador} onChange={this.updatePeriodicidadIndicador} className=\"form-control\">\n                                                    <option value=\"-1\">Ninguno</option>\n                                                    {periodicidad.map((periodicidad, i) =>\n                                                        <option value={periodicidad.nombre} key={periodicidad.nombre}>{periodicidad.nombre}</option>\n                                                    )}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        {this.state.periodicidadIndicador.localeCompare(\"-1\") != 0\n                                            ?\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                        <label htmlFor=\"fecha\" className=\"col-form-label\">Fecha de Inicio de Cálculo:</label>\n                                                    </div>\n                                                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                        <input type=\"text\" className=\"form-control\" id=\"fecha\"/>\n                                                    </div>\n                                                </div>\n                                            : null\n                                        }\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoIndicador\" className=\"col-form-label\">Tipo Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('ambos') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                            <option value=\"calidadGestion\">Calidad de Gestión</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('calidadGestión') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"calidadGestion\">Calidad de Gestión</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('riesgoInherente') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"responsable\" className=\"col-form-label\">Nombre Encargado</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"responsable\" defaultValue={nombreEncargadoIndicador} onChange={this.updateNombreEncargadoIndicador} className=\"form-control\">\n                                                    <option value=\"-1\">Ninguno</option>\n                                                    {this.state.usuarios.map((usuario, i) =>\n                                                        <option value={usuario.ID} key={usuario.ID}>{usuario.usuario}</option>\n                                                    )}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                <a className={\"btn btn-secondary btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.goToCreateFormula}>Editar Fórmula</a>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <hr/>\n                                        <div className={\"row\"}>\n                                            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                <div style={{width: \"100%\"}}>\n                                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3\"}>\n                                                            <label htmlFor=\"nombreAtributoNuevoCampo\" className=\"col-form-label\">Nombre de Atributo:</label>\n                                                        </div>\n                                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                            <input id=\"nombreAtributoNuevoCampo\" defaultValue={nombreCampoNuevoAtributo} onKeyUp={this.actualizarNombreCampoNuevoAtributo} type=\"text\" className=\"form-control form-control-sm\"/>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                        <label htmlFor=\"tipoFuenteDato\" className=\"col-form-label\">Tipo de Variable</label>\n                                                    </div>\n                                                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                        <a className={\"breadcrumb-item active font-20\"} aria-current=\"page\">{this.state.tipoNuevaVariable}</a>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={() => this.goToCreateConditions(-1)}>Crear Instrucción Personalizada </a>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                    <a className={\"btn btn-primary btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.crearAtributoVariable}>Crear Atributo</a>\n                                                </div>\n                                                <br/>\n\n                                                {this.state.atributos.map((atributo, i) => (\n                                                    <div style={{width: \"100%\"}} key={i}>\n                                                        <hr/>\n                                                        <div style={{width: \"100%\"}}>\n                                                            <div className={\"row\"} style={{width: \"100%\"}}>\n                                                                <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3\"}>\n                                                                    <label htmlFor=\"nombreAtributo\" className=\"col-form-label\">Nombre de Atributo:</label>\n                                                                </div>\n                                                                <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                                    <input id=\"nombreAtributo\" type=\"text\" defaultValue={atributo.nombre} className=\"form-control form-control-sm\"/>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <br/>\n                                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                                <label htmlFor=\"tipoFuenteDato\" className=\"col-form-label\">Tipo de Variable</label>\n                                                            </div>\n                                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                                <a className={\"breadcrumb-item active font-20\"} aria-current=\"page\">{atributo.tipo}</a>\n                                                            </div>\n                                                        </div>\n                                                        <br/>\n                                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={() => this.goToCreateConditions(i)}>Editar Instrucción Personalizada </a>\n                                                        <br/>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <hr/>\n                                        <a className={\"btn btn-brand btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.goCrearUmbral}>Umbrales</a>\n                                        <br/>\n                                        <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            <a className={\"btn btn-primary btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.editarIndicador}>Modificar Indicador</a>\n                                        </div>\n                                        <br/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            esEditarVar={this.state.esEditarVar}\n                                            esOperacionSQL={this.state.esOperacionSQL}\n                                            operacionSQL={this.state.operacionSQL}\n                                            formulaSeleccionadaEdit={this.state.formulaSeleccionadaEdit}\n                                            anadirFormula={this.revisarTipoAnadirFormula}\n                                            modificarFormula={this.verificarModificarFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                actualizarSeleccionFormula={this.actualizarSeleccionFormula}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormulaCampo}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                eliminarFormula={this.eliminarFormula}\n                                                esEditarVar={false}\n                                                tablaBorrarFormulas={\"FormulasIndicadoresCampos\"}\n                                                tablaBorrarElementos={\"ElementoFormulasIndicadoresCampos\"}\n                                                condicionFormula={this.state.condicionFormula}\n                                                condicionElemento={this.state.condicionElemento}>\n                    </InstruccionVariable>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"EditarUmbral\") == 0) {\n            return (\n                <div>\n                    <Umbral navbar={this.state.navbar} idVariable={this.props.idIndicadorSeleccionado} pool={this.props.pool}\n                                                        lista={this.props.indicadores}\n                                                        tablaVariable={\"Indicador\"}\n                                                        tituloUmbral={\"Indicador: \"+this.props.nombreIndicadorSeleccionada}> </Umbral>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"EditarIndicador.js"}