{"version":3,"sources":["components/Indicadores/CrearIndicador/CrearIndicador.js"],"names":["tipoCampos","nombre","periodicidad","formulaG","elementosFormulasG","atributos","nombreCampoNuevoAtributo","reglas","segmentoRegla","elementosFormulas","formulas","posicionAtributoSeleccionado","nivelNuevoAtributo","tipoDeAsignacionSeleccionado","operacionSeleccionada","campoSeleccionado","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","valorSeleccionado","valorSeleccionadoTexto","indiceSeleccionadoFormula","indiceFormulaSeleccionadaEdit","nombreIndicador","codigoIndicador","toleranciaIndicador","valorIdealIndicador","tipoValorIdealIndicador","tipoToleranciaIndicador","periodicidadIndicador","tipoIndicador","nombreEncargadoIndicador","banderaEsFormulaIndicador","mostrarToleranciaPorcentaje","fecha","contadorObjetosGuardados","contadorObjetosAGuardar","CrearIndicador","props","state","componenteActual","navbar","x","tipoNuevaVariable","esEditarVar","esOperacionSQL","operacionSQL","formulaSeleccionadaEdit","condicionFormula","condicionElemento","usuarios","crearIndicador","bind","getIndicadorID","goToCreateFormula","retornoCrearIndicador","retornoCampoFormula","retornoCampoCondicion","retornarValor","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarNivelNuevaRegla","actualizarSeleccionFormula","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormulaCampo","actualizarNombreCampoNuevoAtributo","retornarCodigoOperacion","verificarNoExisteNombreCampo","crearAtributoVariable","anadirRegla","revisarTipoAnadirFormula","anadirFormulaIndicador","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","verificarModificarFormula","modificarFormula","modificarFormulaGlobal","eliminarFormula","updateNombreIndicador","updateCodigoIndicador","updateValorIdealIndicador","updateTipoValorIdealIndicador","updateToleranciaIndicador","updatePeriodicidadIndicador","cargarDatePicker","updateTipoIndicador","updateNombreEncargadoIndicador","isValidDate","tieneEspaciosEnBlanco","getUsuarios","$","val","codigo","formula","peso","valorIdeal","parseInt","tipoValorIdeal","tolerancia","datepicker","localeCompare","Date","responsable","riesgoPadre","length","isNaN","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","getFullYear","getMonth","getDate","result","console","log","rollback","commit","alert","setState","recordset","i","createIndicatorFormulaElements","createIndicatorField","indicador","elementoFormula","indiceElemento","ultimaPosicionElemento","ID","conexionTablaID","esFuenteDeDato","excelArchivoID","excelVariableID","formaVariableID","elementoVariableID","elementoVariableCampoID","esValorManual","nombreColumnaEnTabla","tipoColumnaEnTabla","nombreVariable","descripcion","operacion","limpiarArreglos","indicadorCampo","posicionAtributo","tipo","nivel","getIndicatorFieldID","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","undefined","push","posicionFormulaEnCampo","createVariableFieldFormula","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","createVariableFieldRuleSegments","segmento","posicionSegmento","variableID","esConexionTabla","nivelMax","getVariableFieldRuleSegments","splice","k","segmentoReglaID","esCondicion","createVariableFieldRules","formulaID","regla","posicionRegla","reglaPadreID","tipoCampoObjetivo","operacionTexto","valor","texto","traerRegla","posicionFormula","getVariableFieldFormulaID","existenSegmentos","createVariableFieldFormulaElement","elemento","posicionElemento","terminoCrearIndicadorPasarAEdit","configuracionHome","retornoSeleccionIndicador","indexOf","tipoVariable","campo","campoNuevo","campoNuevoTexto","indiceSegmento","indiceRegla","tipoElemento","indice","posicionSel","esEditarVarN","goOptions","retornoSeleccionVariables","nombreCampo","noExiste","toLowerCase","nombreAtributo","arreglo","nuevoAtributo","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","is","nivelABuscar","reglaEsValida","entrarACrearRegla","tablaID","variableSel","variables","filter","object","esObjeto","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevoNivel","nuevaRegla","variableCampoID","posicionAInsertar","tipoNuevaAsig","tempNewCopy","texto2","formulaArreglo","arregloDeElementos","copiaAntiguaFormulas","numeroDeFormulaDeVariable","array","Array","isArray","esFuenteDato","existeSoloUnaFormula","contadorFormulas","ForReglas","existeFormula","format","todayHighlight","viewMode","minViewMode","language","self","Object","prototype","toString","call","getTime","s","test","width","pesoDisponibleRiesgo","marginTop","textAlign","background","backgroundSize","backgroundPosition","map","formulaRiesgo","usuario","color","display","alignItems","justifyContent","atributo","height","retornarCampo","columnas","nombreTablaSeleccionada","actualizarCondicion","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\nimport Slider from 'react-input-slider';\n\nimport Formula from '../../Formula.js';\nimport InstruccionVariable from '../../InstruccionVariable.js';\n\nconst tipoCampos = [ {nombre: \"texto\"}, {nombre: \"booleano\"}, {nombre: \"fecha\"}, {nombre: \"número\"}, {nombre: \"arreglo\"}];\n\nconst periodicidad = [ {nombre: \"diario\"}, {nombre: \"semanal\"}, {nombre: \"mensual\"}, {nombre: \"trimestral\"}, {nombre: \"bi-anual\"}, {nombre: \"anual\"}];\n\nvar formulaG = '', elementosFormulasG = [];\nvar atributos = [];\nvar nombreCampoNuevoAtributo = '';\nvar reglas = [], segmentoRegla = [];\nvar elementosFormulas = [], formulas = [];\nvar posicionAtributoSeleccionado = -1;\nvar nivelNuevoAtributo = 0;\nvar tipoDeAsignacionSeleccionado = '';\nvar operacionSeleccionada = '';\nvar campoSeleccionado = {};\nvar indiceSeleccionadoSegmentoReglas = -1, indiceSeleccionadoReglas = -1, tipoElementoSeleccionadoRegla = '';\n\nvar valorSeleccionado = '', valorSeleccionadoTexto = '';\nvar indiceSeleccionadoFormula = -1;\nvar indiceFormulaSeleccionadaEdit = -1;\n\nvar nombreIndicador = '', codigoIndicador = '', toleranciaIndicador = '', valorIdealIndicador = '', tipoValorIdealIndicador = '', tipoToleranciaIndicador = '', periodicidadIndicador = '', tipoIndicador = '', nombreEncargadoIndicador = '';\n\nvar banderaEsFormulaIndicador = false, mostrarToleranciaPorcentaje = false, periodicidadIndicador = \"-1\", fecha = '';\nvar contadorObjetosGuardados = 0, contadorObjetosAGuardar = 0;\n\nexport default class CrearIndicador extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'crearIndicador',\n            navbar: \"\",\n            x: 0,\n            atributos: [],\n            tipoNuevaVariable: \"\",\n            reglas: [],\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje,\n            periodicidadIndicador: periodicidadIndicador,\n            esEditarVar: false,\n            esOperacionSQL: false,\n            operacionSQL: \"\",\n            formulaSeleccionadaEdit: null,\n            condicionFormula: \"\",\n            condicionElemento: \"\",\n            usuarios: []\n        }\n        this.crearIndicador = this.crearIndicador.bind(this);\n        this.getIndicadorID = this.getIndicadorID.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.retornoCrearIndicador = this.retornoCrearIndicador.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n        this.actualizarSeleccionFormula = this.actualizarSeleccionFormula.bind(this);\n\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormulaCampo = this.goToCreateFormulaCampo.bind(this);\n        this.actualizarNombreCampoNuevoAtributo = this.actualizarNombreCampoNuevoAtributo.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.revisarTipoAnadirFormula = this.revisarTipoAnadirFormula.bind(this);\n        this.anadirFormulaIndicador = this.anadirFormulaIndicador.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        this.verificarModificarFormula = this.verificarModificarFormula.bind(this);\n        this.modificarFormula = this.modificarFormula.bind(this);\n        this.modificarFormulaGlobal = this.modificarFormulaGlobal.bind(this);\n        this.eliminarFormula = this.eliminarFormula.bind(this);\n        \n        this.updateNombreIndicador = this.updateNombreIndicador.bind(this);\n        this.updateCodigoIndicador = this.updateCodigoIndicador.bind(this);\n        this.updateValorIdealIndicador = this.updateValorIdealIndicador.bind(this);\n        this.updateTipoValorIdealIndicador = this.updateTipoValorIdealIndicador.bind(this);\n        this.updateToleranciaIndicador = this.updateToleranciaIndicador.bind(this);\n        this.updatePeriodicidadIndicador = this.updatePeriodicidadIndicador.bind(this);\n        this.cargarDatePicker = this.cargarDatePicker.bind(this);\n        this.updateTipoIndicador = this.updateTipoIndicador.bind(this);\n        this.updateNombreEncargadoIndicador = this.updateNombreEncargadoIndicador.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n\n        this.tieneEspaciosEnBlanco = this.tieneEspaciosEnBlanco.bind(this);\n\n        this.getUsuarios = this.getUsuarios.bind(this);\n    }\n\n    componentWillUnmount() {\n        periodicidadIndicador = '-1';\n        mostrarToleranciaPorcentaje = false;\n        fecha = '';\n    }\n\n    componentDidMount () {\n        this.getUsuarios();\n    }\n\n    crearIndicador () {\n        var nombre = $(\"#nombreIndicador\").val();\n        var codigo = $(\"#codigo\").val();\n        var formula = formulaG;\n        var peso = this.state.x;\n        var valorIdeal = parseInt($(\"#valorIdeal\").val());\n        var tipoValorIdeal = $(\"#tipoValorIdeal\").val();\n        var tolerancia = parseInt($(\"#tolerancia\").val());\n        var tipoIndicador = $(\"#tipoIndicador\").val();\n        var periodicidad = $(\"#periodicidad\").val();\n        var fecha = $(\"#fecha\").datepicker('getDate');\n        if(tipoIndicador.localeCompare(\"-1\"))\n            fecha = new Date(1964, 4, 28);\n        var responsable = $(\"#responsable\").val();\n        var riesgoPadre = this.props.riesgoPadre;\n        if(nombre.length > 0 && nombre.length < 101) {\n            if(!this.tieneEspaciosEnBlanco(nombre)) {\n                if(codigo.length > 0 && codigo.length < 101) {\n                    if(formula.length > 0 && formula.length < 501) {\n                        if( !isNaN(parseInt(peso)) ) {\n                            if( !isNaN(parseInt(tolerancia)) ) {\n                                if( !isNaN(parseInt(valorIdeal)) ) {\n                                    if(tipoValorIdeal.length > 0 && tipoValorIdeal.length < 21) {\n                                        if(periodicidad.length > 0 && periodicidad.length < 51) {\n                                            if(tipoIndicador.length > 0 && tipoIndicador.length < 21) {\n                                                if(responsable.length > 0) {\n                                                    if( !isNaN(parseInt(riesgoPadre)) ) {\n                                                        if(this.isValidDate(fecha)) {\n                                                            \n                                                            const transaction = new sql.Transaction( this.props.pool );\n                                                            transaction.begin(err => {\n                                                                var rolledBack = false;\n                                                                transaction.on('rollback', aborted => {\n                                                                    rolledBack = true;\n                                                                });\n                                                                const request = new sql.Request(transaction);\n                                                                request.query(\"insert into Indicadores (nombre, codigo, formula, peso, tolerancia, valorIdeal, tipoValorIdeal, periodicidad, tipoIndicador, responsable, idRiesgoPadre, fechaInicioCalculo) values ('\"+nombre+\"', '\"+codigo+\"', '\"+formula+\"', \"+peso+\", \"+tolerancia+\", \"+valorIdeal+\", '\"+tipoValorIdeal+\"', '\"+periodicidad+\"', '\"+tipoIndicador+\"', '\"+responsable+\"', \"+riesgoPadre+\", '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"')\", (err, result) => {\n                                                                    if (err) {\n                                                                        console.log(err);\n                                                                        if (!rolledBack) {\n                                                                            transaction.rollback(err => {\n                                                                            });\n                                                                        }\n                                                                    } else {\n                                                                        transaction.commit(err => {\n                                                                            alert(\"Indicador Creado.\");\n                                                                            nombreIndicador = '';\n                                                                            codigoIndicador = '';\n                                                                            toleranciaIndicador = '';\n                                                                            tipoToleranciaIndicador = '';\n                                                                            valorIdealIndicador = '';\n                                                                            tipoValorIdealIndicador = '';\n                                                                            periodicidadIndicador = '';\n                                                                            tipoIndicador = '';\n                                                                            nombreEncargadoIndicador = '';\n                                                                            $(\"#nombreIndicador\").val(\"\");\n                                                                            $(\"#codigo\").val(\"\");\n                                                                            this.setState({\n                                                                                x: 0\n                                                                            });\n                                                                            $(\"#valorIdeal\").val(\"\");\n                                                                            $(\"#tipoValorIdeal\").val(\"numerico\");\n                                                                            $(\"#tolerancia\").val(\"\");\n                                                                            $(\"#tipoTolerancia\").val(\"numerico\");\n                                                                            $(\"#periodicidad\").val(\"-1\");\n                                                                            $(\"#tipoIndicador\").val(\"riesgoInherente\");\n                                                                            $(\"#responsable\").val(\"\");\n                                                                            this.getIndicadorID();\n                                                                        });\n                                                                    }\n                                                                });\n                                                            }); // fin transaction\n\n                                                        } else {\n                                                            alert(\"la fecha inicial debe ser una fecha valida\");\n                                                        }\n                                                    } else {\n                                                        alert(\"el riesgo padre del indicador debe ser un numero valido\");\n                                                    }\n                                                } else {\n                                                    alert(\"Ingrese un valor para el responsable.\");\n                                                }\n                                            } else {\n                                                alert(\"el tipo de indicador debe tener una longitud mayor a 0 y menor a 21\");\n                                            }\n                                        } else {\n                                            alert(\"la periodicidad del indicador debe tener una longitud mayor a 0 y menor a 51\");\n                                        }\n                                    } else {\n                                        alert(\"el tipo de valor ideal del indicador debe tener una longitud mayor a 0 y menor a 21\");\n                                    }\n                                } else {\n                                    alert(\"el valor ideal del indicador debe ser un numero valido\");\n                                }\n                            } else {\n                                alert(\"la tolerancia del indicador debe ser un numero valido\");\n                            }\n                        } else {\n                            alert(\"el peso del indicador debe ser un numero valido\");\n                        }\n                    } else {\n                        alert(\"la formula del indicador debe tener una longitud mayor a 0 y menor a 501\");\n                    }\n                } else {\n                    alert(\"el codigo del indicador debe tener una longitud mayor a 0 y menor a 101\");\n                }\n            } else {\n                alert('El nombre del archivo no debe contener espacios en blanco');\n            }\n        } else {\n            alert(\"el nombre del indicador debe tener una longitud mayor a 0 y menor a 101\");\n        }\n    }\n\n    getIndicadorID () {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Indicadores order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            contadorObjetosGuardados = 0;\n                            contadorObjetosAGuardar = 0;\n                            if(elementosFormulasG.length != 0) {\n                                for (var i = 0; i < elementosFormulasG.length; i++) {\n                                    this.createIndicatorFormulaElements(result.recordset[0], elementosFormulasG[i], i, elementosFormulasG.length-1);\n                                };\n                            } else {\n                                for (var i = 0; i < atributos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createIndicatorField(result.recordset[0], atributos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createIndicatorFormulaElements (indicador, elementoFormula, indiceElemento, ultimaPosicionElemento) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoIndicador (indicadorID, conexionTablaID, esFuenteDeDato, excelArchivoID, excelVariableID, formaVariableID, elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+indicador.ID+\", \"+elementoFormula.conexionTablaID+\", '\"+elementoFormula.esFuenteDeDato+\"', \"+elementoFormula.excelArchivoID+\", \"+elementoFormula.excelVariableID+\", \"+elementoFormula.formaVariableID+\", \"+elementoFormula.elementoVariableID+\", \"+elementoFormula.elementoVariableCampoID+\", '\"+elementoFormula.esValorManual+\"', '\"+elementoFormula.nombreColumnaEnTabla+\"', '\"+elementoFormula.tipoColumnaEnTabla+\"', '\"+elementoFormula.nombreVariable+\"', '\"+elementoFormula.descripcion+\"', '\"+elementoFormula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(indiceElemento == ultimaPosicionElemento && atributos.length > 0) {\n                            for (var i = 0; i < atributos.length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createIndicatorField(indicador, atributos[i], i);\n                            };\n                        } else if(indiceElemento == ultimaPosicionElemento && atributos.length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createIndicatorField (indicador, indicadorCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into IndicadoresCampos (indicadorID, nombre, tipo, nivel) values (\"+indicador.ID+\", '\"+indicadorCampo.nombre+\"', '\"+indicadorCampo.tipo+\"', \"+indicadorCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getIndicatorFieldID(indicador, indicadorCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getIndicatorFieldID (indicador, indicadorCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from IndicadoresCampos where nombre = '\"+indicadorCampo.nombre+\"' and indicadorID = \"+indicador.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        /*var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }*/\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(indicador, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(indicador, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        //los campos variableID y variableCampoID se ponen luego de la creacion e importacion\n        //el campo variableIDCreacionCodigo es el variableID de segmento asignado al crear reglas\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasIndicadores (conexionTablaID, indicadorID, indicadorCampoID, variableIDCreacionCodigo, excelArchivoID, excelVariableID, formaVariableID, esValorManual, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+segmento.variableID+\", \"+segmento.excelArchivoID+\", \"+segmento.excelVariableID+\", \"+segmento.formaVariableID+\", '\"+segmento.esValorManual+\"', '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasIndicadores where conexionTablaID = \"+segmento.conexionTablaID+\" and indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and variableIDCreacionCodigo = \"+segmento.variableID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            /*var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(indicador, indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(indicador, indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRules (indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        if(regla != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasIndicadores (segmentoReglaID, indicadorID, indicadorCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmentoEnCampo, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            /*var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 3');\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasIndicadores where segmentoReglaID = \"+segmento.ID+\" and indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            /*var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }*/\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasIndicadoresCampos (indicadorID, indicadorCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasIndicadoresCampos where indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(indicador, indicadorCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            /*if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }*/\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(indicador, indicadorCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(indicador, indicadorCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 6');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (indicador, indicadorCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoFormulasIndicadoresCampos (indicadorID, indicadorCampoID, formulaID, conexionTablaID, esFuenteDeDato, excelArchivoID, excelVariableID, formaVariableID, elementoVariableID, elementoVariableCampoID, esValorManual, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.excelArchivoID+\", \"+elemento.excelVariableID+\", \"+elemento.formaVariableID+\", \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.esValorManual+\"', '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                            for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                    if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                        arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                    break;\n                                }\n                            };\n                        }\n                        if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            formulaG = '';\n            elementosFormulasG = [];\n            atributos = [];\n            nombreCampoNuevoAtributo = '';\n            reglas = [];\n            segmentoRegla = [];\n            elementosFormulas = [];\n            formulas = [];\n            posicionAtributoSeleccionado = -1;\n            nivelNuevoAtributo = 0;\n            tipoDeAsignacionSeleccionado = '';\n            operacionSeleccionada = '';\n            campoSeleccionado = {};\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                tipoNuevaVariable: \"\"\n            });\n\n            this.props.terminoCrearIndicadorPasarAEdit();\n        }\n    }\n\n    goToCreateFormula () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Crear Fórmula</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Fórmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        var esOperacionSQL = false, operacionSQL = \"\", esEditarVar = false;\n        if (formulaG.length > 0) {\n            esEditarVar = true;\n            if(formulaG.indexOf(\"ASIG\") == 0 ||\n                formulaG.indexOf(\"COUNT\") == 0 ||\n                formulaG.indexOf(\"PROM\") == 0 ||\n                formulaG.indexOf(\"MAX\") == 0 ||\n                formulaG.indexOf(\"MIN\") == 0 ||\n                formulaG.indexOf(\"SUM\") == 0 || \n                formulaG.indexOf(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                if(formulaG.indexOf(\"ASIG\") == 0) {\n                    operacionSQL = \"ASIG\";\n                } else if(formulaG.indexOf(\"COUNT\") == 0) {\n                    operacionSQL = \"COUNT\";\n                } else if(formulaG.indexOf(\"PROM\") == 0) {\n                    operacionSQL = \"PROM\";\n                } else if(formulaG.indexOf(\"MAX\") == 0) {\n                    operacionSQL = \"MAX\";\n                } else if(formulaG.indexOf(\"MIN\") == 0) {\n                    operacionSQL = \"MIN\";\n                } else if(formulaG.indexOf(\"SUM\") == 0) {\n                    operacionSQL = \"SUM\";\n                } else if(formulaG.indexOf(\"AUTOSUM\") == 0) {\n                    operacionSQL = \"AUTOSUM\";\n                }\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        banderaEsFormulaIndicador = true;\n        this.setState({\n            componenteActual: \"crearFormula\",\n            navbar: navbar,\n            formulaSeleccionadaEdit: {formula: formulaG, operacion: \"FORMULA\"},\n            esEditarVar: esEditarVar,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    retornoCrearIndicador () {\n        this.setState({\n            componenteActual: \"crearIndicador\"\n        }, this.cargarDatePicker );\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        tipoDeAsignacionSeleccionado = tipoVariable;\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarNivelNuevaRegla (nivel) {\n        if(nivelNuevoAtributo < nivel)\n            nivelNuevoAtributo = nivel;\n    }\n\n    actualizarSeleccionFormula (formula, indice) {\n        if(formula != null) {\n            var condicionFormula = \" ID = \"+formula.ID, condicionElemento = \" formulaID = \"+formula.ID;\n            this.setState({\n                formulaSeleccionadaEdit: formula,\n                condicionFormula: condicionFormula,\n                condicionElemento: condicionElemento\n            });\n            indiceFormulaSeleccionadaEdit =  indice;\n        } else {\n            //\n        }\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormulaCampo (indice, esEditarVarN) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.goOptions}><a href=\"#\" className={\"breadcrumb-link\"}>Tipo de Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionVariables}><a href=\"#\" className={\"breadcrumb-link\"}>Variables</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n\n        banderaEsFormulaIndicador = false;\n\n        var esOperacionSQL, operacionSQL;\n        if(posicionAtributoSeleccionado == -1) {\n            esOperacionSQL = false;\n            operacionSQL = \"\";\n        }\n        if (this.state.formulaSeleccionadaEdit != null) {\n            if(this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"ASIG\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"COUNT\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"PROM\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MAX\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"MIN\") == 0 ||\n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"SUM\") == 0 || \n                this.state.formulaSeleccionadaEdit.operacion.localeCompare(\"AUTOSUM\") == 0 ) {\n\n                esOperacionSQL = true;\n                operacionSQL = this.state.formulaSeleccionadaEdit.operacion;\n            } else {\n                esOperacionSQL = false;\n                operacionSQL = \"\";\n            }\n        }\n\n        //deseleccionado regla seleccionada\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"crearFormula\",\n            navbar: navbar,\n            esEditarVar: esEditarVarN,\n            esOperacionSQL: esOperacionSQL,\n            operacionSQL: operacionSQL\n        });\n    }\n\n    actualizarNombreCampoNuevoAtributo () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributo = nombreCampo;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MÁXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MÍNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        //if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < atributos.length; i++) {\n                if (atributos[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        //}\n        return noExiste;\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                    //seleccionar arreglo a insertar, si de varios atributos o unico\n                    var arreglo, nivel;\n                    arreglo = atributos;\n                    nivel = nivelNuevoAtributo;\n                    var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                    arreglo.push(nuevoAtributo);\n                    this.setState({\n                        atributos: arreglo,\n                        tipoNuevaVariable: \"\"\n                    });\n                    nivelNuevoAtributo = 0;\n                    nombreCampoNuevoAtributo = '';\n                    $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                    alert(\"Campo creado.\");\n                } else {\n                    alert(\"Seleccione un tipo de asignación.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        //si se agrega una formula/asignacion, todas las otras formulas tienen que ser del mismo tipo para esa variable\n        //si el indiceSeleccionado es igual a -1, se llamo desde nuevo atributo\n        //sino, modificar elemento seleccionado\n        //primer if: ver el estado de donde fue llamado el metodo\n        //campoSeleccionado, operacionSeleccionada, objetoConexionSeleccionada\n\n        //indiceSeleccionadoReglas\n        //tipoElementoSeleccionadoRegla\n        /*var reglas, segmentoRegla;\n        if (banderaEsObjeto) {\n            reglas = reglasVariosAtributos;\n            segmentoRegla = segmentoReglasVariosAtributos;\n        } else {\n            reglas = reglasUnAtributo;\n            segmentoRegla = segmentoReglasUnAtributo;\n        }*/\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if( valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIEMPO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    if(!esFormula) {\n                        if(campoSeleccionado.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        if(formulaSeleccionada.tablaID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined && !formulaSeleccionada.esValorManual) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined && !formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.esValorManual) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                        var esValorManual = false;\n                        if(campoSeleccionado.tablaID != undefined && campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else if(campoSeleccionado.variableID != undefined && campoSeleccionado.variableID != -1) {\n                            variableID = campoSeleccionado.variableID;\n                        } else if(campoSeleccionado.excelArchivoID != undefined && campoSeleccionado.excelArchivoID != -1) {\n                            excelArchivoID = campoSeleccionado.excelArchivoID;\n                            excelVariableID = campoSeleccionado.excelVariableID;\n                        } else if(campoSeleccionado.formaVariableID != undefined && campoSeleccionado.formaVariableID != -1) {\n                            formaVariableID = campoSeleccionado.formaVariableID;\n                        } else if(campoSeleccionado.esValorManual != undefined) {\n                            esValorManual = campoSeleccionado.esValorManual;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({\n                                conexionTablaID: conexionTablaID,\n                                variableID: variableID,\n                                esConexionTabla: esConexionTabla,\n                                nivelMax: nivelMax,\n                                segmentoReglaIndex: segmentoReglaIndex,\n                                excelArchivoID: excelArchivoID,\n                                excelVariableID: excelVariableID,\n                                formaVariableID: formaVariableID,\n                                esValorManual: esValorManual\n                            });\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                            }\n                            if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                            }\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta añadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta añadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = nivelNuevoAtributo;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valorSeleccionado,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valorSeleccionadoTexto,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        /*if (banderaEsObjeto) {\n                            reglasVariosAtributos = reglas;\n                            segmentoReglasVariosAtributos = segmentoRegla;\n                        } else {\n                            reglasUnAtributo = reglas;\n                            segmentoReglasUnAtributo = segmentoRegla;\n                        }*/\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                        for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                            tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                            break;\n                        };\n                        if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) ) {\n                            var nuevoNivel = nivelNuevoAtributo;\n                            /*var segmentoRegla;\n                            if(banderaEsObjeto) {\n                                nuevoNivel = nivelNuevoAtributoVarios;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                nuevoNivel = nivelNuevoAtributoUnico;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            var excelArchivoID = -1, excelVariableID = -1, formaVariableID = -1;\n                            var esValorManual = false;\n                            if(formulaSeleccionada.tablaID != undefined && formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else if(formulaSeleccionada.variableID != undefined && formulaSeleccionada.variableID != -1) {\n                                variableID = formulaSeleccionada.variableID;\n                            } else if(formulaSeleccionada.excelArchivoID != undefined && formulaSeleccionada.excelArchivoID != -1) {\n                                excelArchivoID = formulaSeleccionada.excelArchivoID;\n                                excelVariableID = formulaSeleccionada.excelVariableID;\n                            } else if(formulaSeleccionada.formaVariableID != undefined && formulaSeleccionada.formaVariableID != -1) {\n                                formaVariableID = formulaSeleccionada.formaVariableID;\n                            } else if(formulaSeleccionada.esValorManual != undefined) {\n                                esValorManual = formulaSeleccionada.esValorManual;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({\n                                    conexionTablaID: conexionTablaID,\n                                    variableID: variableID,\n                                    esConexionTabla: esConexionTabla,\n                                    nivelMax: nivelMax,\n                                    segmentoReglaIndex: segmentoReglaIndex,\n                                    excelArchivoID: excelArchivoID,\n                                    excelVariableID: excelVariableID,\n                                    formaVariableID: formaVariableID,\n                                    esValorManual: esValorManual\n                                });\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID == -1 && excelArchivoID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelArchivoID = excelArchivoID;\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].excelVariableID = excelVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID == -1 && formaVariableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].formaVariableID = formaVariableID;\n                                }\n                                if(segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID == -1 && variableID != -1) {\n                                    segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].variableID = variableID;\n                                }\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            formulaSeleccionada = null;\n                            //if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoNuevaAsig\n                                });\n                            //}\n                            /*if (banderaEsObjeto) {\n                                reglasVariosAtributos = reglas;\n                                segmentoReglasVariosAtributos = segmentoRegla;\n                            } else {\n                                reglasUnAtributo = reglas;\n                                segmentoReglasUnAtributo = segmentoRegla;\n                            }*/\n                            //tipoDeAsignacionSeleccionado = '';\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparación';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            else\n                alert(\"La comparación ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    revisarTipoAnadirFormula (formula, formulaArreglo) {\n        if(banderaEsFormulaIndicador)\n            this.anadirFormulaIndicador(formula, formulaArreglo);\n        else\n            this.anadirFormula(formula, formulaArreglo);\n    }\n\n    anadirFormulaIndicador (formula, formulaArreglo) {\n        formulaG = formula.formula;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        elementosFormulasG = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulasG = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulasG.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var copiaAntiguaFormulas = formulas;\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                var esValorManual = false;\n                if(formulaArreglo[i].esValorManual != undefined)\n                    esValorManual = formulaArreglo[i].esValorManual;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    esValorManual: esValorManual,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        if(!esFormula) {\n                            if(campoSeleccionado.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            if(formulaSeleccionada.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta añadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta añadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                                formulaID: -1,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                tipoCampoObjetivo: campoSeleccionado.tipo,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                operacion: operacionSeleccionada.operacion,\n                                                operacionTexto: operacionSeleccionada.operacionTexto,\n                                                valor: valor,\n                                                texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            campoSeleccionado = null;\n                            valorSeleccionado = '';\n                            //reglas[posicionSel].push(nuevaRegla);\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            //verificando que si modifica con un tipoDeAsignacionSeleccionado diferente al existente, que pueda entrar y actualizar tipo, si existe mas de una formula no se puede\n                            var existeSoloUnaFormula = false, contadorFormulas = 0;\n                            ForReglas:\n                            for (var i = 0; i < reglas[posicionSel].length; i++) {\n                                for (var j = 0; j < reglas[posicionSel][i].length; j++) {\n                                    if(!reglas[posicionSel][i][j].esCondicion) {\n                                        contadorFormulas++;\n                                    }\n                                };\n                            };\n                            if(contadorFormulas == 1) {\n                                existeSoloUnaFormula = true;\n                            }\n                            var tipoNuevaAsig = tipoDeAsignacionSeleccionado;\n                            for (var i = 0; i < elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit].length; i++) {\n                                tipoNuevaAsig = elementosFormulas[posicionSel][indiceFormulaSeleccionadaEdit][i].tipoColumnaEnTabla;\n                                break;\n                            };\n                            if( (posicionAtributoSeleccionado == -1 && (this.state.tipoNuevaVariable.localeCompare(tipoNuevaAsig) == 0 || this.state.tipoNuevaVariable.length == 0)) || (posicionAtributoSeleccionado != -1 && (this.state.atributos[posicionSel].tipo.localeCompare(tipoNuevaAsig) == 0 || this.state.atributos[posicionSel].tipo.length == 0)) || existeSoloUnaFormula ) {\n                                var nuevoNivel = nivelNuevoAtributo;\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta añadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta añadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(campoSeleccionado.tablaID != undefined) {\n                                    conexionTablaID = campoSeleccionado.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = campoSeleccionado.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                });\n                                formulaSeleccionada = null;\n                                //if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoNuevaAsig\n                                    });\n                                //}\n                                //tipoDeAsignacionSeleccionado = '';\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparación';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posición en la 'Lógica para el cálculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparación ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    eliminarRegla () {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n            var existeFormula = false;\n            ForReglas:\n            for (var i = 0; i < reglas[posicionInsertarReglaAtributo].length; i++) {\n                for (var j = 0; j < reglas[posicionInsertarReglaAtributo][i].length; j++) {\n                    if(!reglas[posicionInsertarReglaAtributo][i][j].esCondicion) {\n                        existeFormula = true;\n                        break ForReglas;\n                    }\n                };\n            };\n            if(!existeFormula) {\n                this.setState({\n                    tipoNuevaVariable: \"\"\n                });\n                tipoDeAsignacionSeleccionado = '';\n            }\n        } else {\n            alert(\"Cree una comparación primero\");\n        }\n    }\n\n    verificarModificarFormula (formula, formulaArreglo) {\n        if(banderaEsFormulaIndicador)\n            this.modificarFormulaGlobal(formula, formulaArreglo);\n        else\n            this.modificarFormula(formula, formulaArreglo);\n    }\n\n    modificarFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        /*var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }*/\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        formulas[posicionSel][indiceFormulaSeleccionadaEdit] = formula;\n        this.setState({\n            formulas: formulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*if(banderaEsObjeto) {\n            formulasVariosAtributos = copiaAntiguaFormulas;\n            elementosFormulasVariosAtributos = elementosFormulas;\n        } else {\n            formulasUnAtributo = copiaAntiguaFormulas;\n            elementosFormulasUnAtributos = elementosFormulas;\n        }*/\n    }\n\n    modificarFormulaGlobal(formula, formulaArreglo) {\n        formulaG = formula.formula;\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulasG = arregloDeElementos;\n    }\n\n    eliminarFormula() {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        /*var elementosFormulas, copiaAntiguaFormulas;\n        if(banderaEsObjeto) {\n            copiaAntiguaFormulas = formulasVariosAtributos;\n            elementosFormulas = elementosFormulasVariosAtributos;\n        } else {\n            copiaAntiguaFormulas = formulasUnAtributo;\n            elementosFormulas = elementosFormulasUnAtributos;\n        }*/\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        formulas[posicionSel].splice(indiceFormulaSeleccionadaEdit, 1);\n        this.setState({\n            formulas: formulas[posicionSel]\n        });\n        var posicionFormulaEnCampo = indiceFormulaSeleccionadaEdit;\n        elementosFormulas[posicionSel].splice(posicionFormulaEnCampo, 1);\n    }\n\n    updateNombreIndicador() {\n        nombreIndicador = $(\"#nombreIndicador\").val();\n    }\n\n    updateCodigoIndicador() {\n        codigoIndicador = $(\"#codigo\").val();\n    }\n\n    updateValorIdealIndicador() {\n        valorIdealIndicador = $(\"#valorIdeal\").val();\n    }\n\n    updateTipoValorIdealIndicador() {\n        tipoValorIdealIndicador = $(\"#tipoValorIdeal\").val();\n        if(tipoValorIdealIndicador.localeCompare(\"numerico\") == 0) {\n            mostrarToleranciaPorcentaje = false;\n        } else {\n            mostrarToleranciaPorcentaje = true;\n        }\n        this.setState({\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje\n        });\n    }\n\n    updateToleranciaIndicador() {\n        toleranciaIndicador = $(\"#tolerancia\").val();\n    }\n\n    updatePeriodicidadIndicador() {\n        periodicidadIndicador = $(\"#periodicidad\").val();\n        this.setState({\n            periodicidadIndicador: periodicidadIndicador\n        }, this.cargarDatePicker );\n    }\n\n    cargarDatePicker () {\n        $('#fecha').datepicker({\n            format: \"dd-mm-yyyy\",\n            todayHighlight: true,\n            viewMode: \"days\", \n            minViewMode: \"days\",\n            language: 'es'\n        });\n        if(this.isValidDate(fecha)) {\n            $(\"#fecha\").datepicker(\"setDate\", fecha);\n        }\n        var self = this;\n        $('#fecha').datepicker().on('changeDate', function () {\n            if(self.isValidDate($(\"#fecha\").datepicker('getDate'))) {\n                fecha = $(\"#fecha\").datepicker('getDate');\n            }\n        });\n    }\n\n    updateTipoIndicador() {\n        tipoIndicador = $(\"#tipoIndicador\").val();\n    }\n\n    updateNombreEncargadoIndicador() {\n        nombreEncargadoIndicador = $(\"#responsable\").val();\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    tieneEspaciosEnBlanco (s) {\n        return /\\s/g.test(s);\n    }\n\n    getUsuarios () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Usuarios\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            usuarios: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Crear Indicador</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                            <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Indicador</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"card influencer-profile-data\"}>\n                                <div className={\"card-body\"}>\n                                    <div className={\"border-top border-bottom addPaddingToConfig\"} style={{width: \"100%\"}}>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"nombreIndicador\" className=\"col-form-label\">Nombre Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"nombreIndicador\" defaultValue={nombreIndicador} onKeyUp={this.updateNombreIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"codigo\" className=\"col-form-label\">Codigo</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"codigo\" defaultValue={codigoIndicador} onKeyUp={this.updateCodigoIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"peso\" className=\"col-form-label\">Peso</label>\n                                            </div>\n                                            <div className={\"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-8 form-group\"}>\n                                                <Slider\n                                                    axis=\"x\"\n                                                    xstep={1}\n                                                    xmin={0}\n                                                    xmax={this.props.pesoDisponibleRiesgo}\n                                                    x={this.state.x}\n                                                    onChange={({ x }) => this.setState({ x: x }) }\n                                                    style={{width: \"100%\", marginTop: \"10px\"}}/>\n                                            </div>\n                                            <div className={\"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1 form-group\"}>\n                                                <label id=\"pesoLabel\" className=\"col-form-label\">{this.state.x}</label>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"valorIdeal\" className=\"col-form-label\">Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoValorIdeal\" className=\"col-form-label\">Tipo de Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"tipoValorIdeal\" defaultValue={tipoValorIdealIndicador} onChange={this.updateTipoValorIdealIndicador} className=\"form-control\">\n                                                    <option value=\"numerico\">Numérico</option>\n                                                    <option value=\"porcentual\">Porcentual</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tolerancia\" className=\"col-form-label\">Tolerancia</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"periodicidad\" className=\"col-form-label\">Periodicidad</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"periodicidad\" defaultValue={periodicidadIndicador} onChange={this.updatePeriodicidadIndicador} className=\"form-control\">\n                                                    <option value=\"-1\">Ninguno</option>\n                                                    {periodicidad.map((periodicidad, i) =>\n                                                        <option value={periodicidad.nombre} key={periodicidad.nombre}>{periodicidad.nombre}</option>\n                                                    )}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        {this.state.periodicidadIndicador.localeCompare(\"-1\") != 0\n                                            ?\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                        <label htmlFor=\"fecha\" className=\"col-form-label\">Fecha de Inicio de Cálculo:</label>\n                                                    </div>\n                                                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                        <input type=\"text\" className=\"form-control\" id=\"fecha\"/>\n                                                    </div>\n                                                </div>\n                                            : null\n                                        }\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoIndicador\" className=\"col-form-label\">Tipo Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('ambos') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                            <option value=\"calidadGestion\">Calidad de Gestión</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('calidadGestión') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"calidadGestion\">Calidad de Gestión</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('riesgoInherente') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"responsable\" className=\"col-form-label\">Nombre Encargado</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"responsable\" defaultValue={nombreEncargadoIndicador} onChange={this.updateNombreEncargadoIndicador} className=\"form-control\">\n                                                    <option value=\"-1\">Ninguno</option>\n                                                    {this.state.usuarios.map((usuario, i) =>\n                                                        <option value={usuario.ID} key={usuario.ID}>{usuario.usuario}</option>\n                                                    )}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                <a className={\"btn btn-secondary btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.goToCreateFormula}>Crear Fórmula</a>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <hr/>\n                                        <div className={\"row\"}>\n                                            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                <div style={{width: \"100%\"}}>\n                                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3\"}>\n                                                            <label htmlFor=\"nombreAtributoNuevoCampo\" className=\"col-form-label\">Nombre de Atributo:</label>\n                                                        </div>\n                                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                            <input id=\"nombreAtributoNuevoCampo\" defaultValue={nombreCampoNuevoAtributo} onKeyUp={this.actualizarNombreCampoNuevoAtributo} type=\"text\" className=\"form-control form-control-sm\"/>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                        <label htmlFor=\"tipoFuenteDato\" className=\"col-form-label\">Tipo de Variable</label>\n                                                    </div>\n                                                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                        <a className={\"breadcrumb-item active font-20\"} aria-current=\"page\">{this.state.tipoNuevaVariable}</a>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={() => this.goToCreateConditions(-1)}>Crear Instrucción Personalizada </a>\n                                                    </div>\n                                                </div>\n                                                <br/>\n                                                <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                    <a className={\"btn btn-primary btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.crearAtributoVariable}>Crear Atributo</a>\n                                                </div>\n                                                <br/>\n\n                                                {this.state.atributos.map((atributo, i) => (\n                                                    <div style={{width: \"100%\"}} key={i}>\n                                                        <hr/>\n                                                        <div style={{width: \"100%\"}}>\n                                                            <div className={\"row\"} style={{width: \"100%\"}}>\n                                                                <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3\"}>\n                                                                    <label htmlFor=\"nombreAtributo\" className=\"col-form-label\">Nombre de Atributo:</label>\n                                                                </div>\n                                                                <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                                    <input id=\"nombreAtributo\" type=\"text\" defaultValue={atributo.nombre} className=\"form-control form-control-sm\"/>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <br/>\n                                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                                <label htmlFor=\"tipoFuenteDato\" className=\"col-form-label\">Tipo de Variable</label>\n                                                            </div>\n                                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                                                <a className={\"breadcrumb-item active font-20\"} aria-current=\"page\">{atributo.tipo}</a>\n                                                            </div>\n                                                        </div>\n                                                        <br/>\n                                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={() => this.goToCreateConditions(i)}>Editar Instrucción Personalizada </a>\n                                                        <br/>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <hr/>\n                                        <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            <a className={\"btn btn-primary btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.crearIndicador}>Crear Indicador</a>\n                                        </div>\n                                        <br/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            esEditarVar={this.state.esEditarVar}\n                                            esOperacionSQL={this.state.esOperacionSQL}\n                                            operacionSQL={this.state.operacionSQL}\n                                            formulaSeleccionadaEdit={this.state.formulaSeleccionadaEdit}\n                                            anadirFormula={this.revisarTipoAnadirFormula}\n                                            modificarFormula={this.verificarModificarFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                actualizarSeleccionFormula={this.actualizarSeleccionFormula}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormulaCampo}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}\n                                                eliminarFormula={this.eliminarFormula}\n                                                esEditarVar={false}\n                                                tablaBorrarFormulas={\"FormulasIndicadoresCampos\"}\n                                                tablaBorrarElementos={\"ElementoFormulasIndicadoresCampos\"}\n                                                condicionFormula={this.state.condicionFormula}\n                                                condicionElemento={this.state.condicionElemento}>\n                    </InstruccionVariable>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CrearIndicador.js"}