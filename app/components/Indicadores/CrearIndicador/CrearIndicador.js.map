{"version":3,"sources":["components/Indicadores/CrearIndicador/CrearIndicador.js"],"names":["tipoCampos","nombre","periodicidad","formulaG","elementosFormulasG","atributos","nombreCampoNuevoAtributo","reglas","segmentoRegla","elementosFormulas","formulas","posicionAtributoSeleccionado","nivelNuevoAtributo","tipoDeAsignacionSeleccionado","operacionSeleccionada","campoSeleccionado","indiceSeleccionadoSegmentoReglas","indiceSeleccionadoReglas","tipoElementoSeleccionadoRegla","nombreIndicador","codigoIndicador","toleranciaIndicador","valorIdealIndicador","tipoValorIdealIndicador","tipoToleranciaIndicador","periodicidadIndicador","tipoIndicador","nombreEncargadoIndicador","banderaEsFormulaIndicador","mostrarToleranciaPorcentaje","fecha","contadorObjetosGuardados","contadorObjetosAGuardar","CrearIndicador","props","state","componenteActual","navbar","x","tipoNuevaVariable","crearIndicador","bind","getIndicadorID","goToCreateFormula","retornoCrearIndicador","retornoCampoFormula","retornoCampoCondicion","retornarValor","retornoOperacion","actualizarIndiceSeleccionadoReglas","actualizarNivelNuevaRegla","goToCreateConditions","goToCreateConditionsClickNavBarFormula","goToCreateFormulaCampo","actualizarNombreCampoNuevoAtributo","retornarCodigoOperacion","verificarNoExisteNombreCampo","crearAtributoVariable","anadirRegla","revisarTipoAnadirFormula","anadirFormulaIndicador","anadirFormula","getElementsFromFormula","modificarRegla","eliminarRegla","updateNombreIndicador","updateCodigoIndicador","updateValorIdealIndicador","updateTipoValorIdealIndicador","updateToleranciaIndicador","updatePeriodicidadIndicador","cargarDatePicker","updateTipoIndicador","updateNombreEncargadoIndicador","isValidDate","$","val","codigo","formula","peso","valorIdeal","parseInt","tipoValorIdeal","tolerancia","datepicker","analista","riesgoPadre","console","log","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","getFullYear","getMonth","getDate","result","rollback","commit","alert","setState","recordset","length","i","createIndicatorFormulaElements","createIndicatorField","indicador","elementoFormula","indiceElemento","ultimaPosicionElemento","ID","conexionTablaID","esFuenteDeDato","excelArchivoID","excelVariableID","formaVariableID","elementoVariableID","elementoVariableCampoID","nombreColumnaEnTabla","tipoColumnaEnTabla","nombreVariable","descripcion","operacion","limpiarArreglos","indicadorCampo","posicionAtributo","tipo","nivel","getIndicatorFieldID","arregloDeFormulasALlamar","arregloElementosDeFormulasALlamar","j","undefined","push","posicionFormulaEnCampo","createVariableFieldFormula","arregloDeSegmentosALlamar","arregloReglasDeSegmentosALlamar","posicionSegmentoEnCampo","createVariableFieldRuleSegments","segmento","posicionSegmento","variableID","esConexionTabla","nivelMax","getVariableFieldRuleSegments","splice","k","segmentoReglaID","esCondicion","createVariableFieldRules","formulaID","regla","posicionRegla","reglaPadreID","tipoCampoObjetivo","operacionTexto","valor","texto","traerRegla","variableCampo","posicionFormula","getVariableFieldFormulaID","existenSegmentos","createVariableFieldFormulaElement","banderaEsObjeto","formulasVariosAtributos","formulasUnAtributo","elemento","posicionElemento","configuracionHome","retornoSeleccionIndicador","tipoVariable","campo","campoNuevo","campoNuevoTexto","valorSeleccionado","valorSeleccionadoTexto","indiceSegmento","indiceRegla","tipoElemento","indice","posicionSel","indiceSeleccionadoFormula","nombreCampo","localeCompare","noExiste","banderaEsInstruccionSQL","toLowerCase","nombreAtributo","arreglo","nuevoAtributo","esFormula","formulaSeleccionada","posicionFormulaSeleccionada","banderaSinoReglaValido","is","nivelABuscar","reglaEsValida","indexOf","entrarACrearRegla","tablaID","variableSel","variables","filter","object","esObjeto","posicionInsertarReglaAtributo","posicionInsertarReglaSegmento","segmentoReglaIndex","nuevoNivel","nuevaRegla","variableCampoID","posicionAInsertar","tempNewCopy","texto2","formulaArreglo","arregloDeElementos","copiaAntiguaFormulas","numeroDeFormulaDeVariable","array","Array","isArray","esFuenteDato","self","setTimeout","format","todayHighlight","viewMode","minViewMode","language","Object","prototype","toString","call","isNaN","getTime","width","pesoDisponibleRiesgo","marginTop","textAlign","background","backgroundSize","backgroundPosition","map","formulaRiesgo","color","display","alignItems","justifyContent","height","retornarCampo","columnas","nombreTablaSeleccionada","actualizarCondicion","goOptions","retornoSeleccionVariables","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\nimport Slider from 'react-input-slider';\n\nimport Formula from '../../Formula.js';\nimport InstruccionVariable from '../../InstruccionVariable.js';\n\nconst tipoCampos = [ {nombre: \"texto\"}, {nombre: \"booleano\"}, {nombre: \"fecha\"}, {nombre: \"nmero\"}, {nombre: \"arreglo\"}];\n\nconst periodicidad = [ {nombre: \"diario\"}, {nombre: \"semanal\"}, {nombre: \"mensual\"}, {nombre: \"trimestral\"}, {nombre: \"bi-anual\"}, {nombre: \"anual\"}];\n\nvar formulaG = '', elementosFormulasG = [];\nvar atributos = [];\nvar nombreCampoNuevoAtributo = '';\nvar reglas = [], segmentoRegla = [];\nvar elementosFormulas = [], formulas = [];\nvar posicionAtributoSeleccionado = -1;\nvar nivelNuevoAtributo = 0;\nvar tipoDeAsignacionSeleccionado = '';\nvar operacionSeleccionada = '';\nvar campoSeleccionado = {};\nvar indiceSeleccionadoSegmentoReglas = -1, indiceSeleccionadoReglas = -1, tipoElementoSeleccionadoRegla = '';\n\nvar nombreIndicador = '', codigoIndicador = '', toleranciaIndicador = '', valorIdealIndicador = '', tipoValorIdealIndicador = '', tipoToleranciaIndicador = '', periodicidadIndicador = '', tipoIndicador = '', nombreEncargadoIndicador = '';\n\nvar banderaEsFormulaIndicador = false, mostrarToleranciaPorcentaje = false, periodicidadIndicador = \"-1\", fecha = '';\nvar contadorObjetosGuardados = 0, contadorObjetosAGuardar = 0;\nexport default class CrearIndicador extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: 'crearIndicador',\n            navbar: \"\",\n            x: 0,\n            atributos: [],\n            tipoNuevaVariable: \"\",\n            reglas: [],\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje,\n            periodicidadIndicador: periodicidadIndicador\n        }\n        this.crearIndicador = this.crearIndicador.bind(this);\n        this.getIndicadorID = this.getIndicadorID.bind(this);\n        this.goToCreateFormula = this.goToCreateFormula.bind(this);\n        this.retornoCrearIndicador = this.retornoCrearIndicador.bind(this);\n        this.retornoCampoFormula = this.retornoCampoFormula.bind(this);\n        this.retornoCampoCondicion = this.retornoCampoCondicion.bind(this);\n        this.retornarValor = this.retornarValor.bind(this);\n        this.retornoOperacion = this.retornoOperacion.bind(this);\n        this.actualizarIndiceSeleccionadoReglas = this.actualizarIndiceSeleccionadoReglas.bind(this);\n        this.actualizarNivelNuevaRegla = this.actualizarNivelNuevaRegla.bind(this);\n\n        this.goToCreateConditions = this.goToCreateConditions.bind(this);\n        this.goToCreateConditionsClickNavBarFormula = this.goToCreateConditionsClickNavBarFormula.bind(this);\n        this.goToCreateFormulaCampo = this.goToCreateFormulaCampo.bind(this);\n        this.actualizarNombreCampoNuevoAtributo = this.actualizarNombreCampoNuevoAtributo.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.verificarNoExisteNombreCampo = this.verificarNoExisteNombreCampo.bind(this);\n        this.crearAtributoVariable = this.crearAtributoVariable.bind(this);\n        this.anadirRegla = this.anadirRegla.bind(this);\n        this.revisarTipoAnadirFormula = this.revisarTipoAnadirFormula.bind(this);\n        this.anadirFormulaIndicador = this.anadirFormulaIndicador.bind(this);\n        this.anadirFormula = this.anadirFormula.bind(this);\n        this.getElementsFromFormula = this.getElementsFromFormula.bind(this);\n        this.modificarRegla = this.modificarRegla.bind(this);\n        this.eliminarRegla = this.eliminarRegla.bind(this);\n        \n        this.updateNombreIndicador = this.updateNombreIndicador.bind(this);\n        this.updateCodigoIndicador = this.updateCodigoIndicador.bind(this);\n        this.updateValorIdealIndicador = this.updateValorIdealIndicador.bind(this);\n        this.updateTipoValorIdealIndicador = this.updateTipoValorIdealIndicador.bind(this);\n        this.updateToleranciaIndicador = this.updateToleranciaIndicador.bind(this);\n        this.updatePeriodicidadIndicador = this.updatePeriodicidadIndicador.bind(this);\n        this.cargarDatePicker = this.cargarDatePicker.bind(this);\n        this.updateTipoIndicador = this.updateTipoIndicador.bind(this);\n        this.updateNombreEncargadoIndicador = this.updateNombreEncargadoIndicador.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n    }\n\n    crearIndicador () {\n        var nombre = $(\"#nombreIndicador\").val();\n        var codigo = $(\"#codigo\").val();\n        var formula = formulaG;\n        var peso = this.state.x;\n        var valorIdeal = parseInt($(\"#valorIdeal\").val());\n        var tipoValorIdeal = $(\"#tipoValorIdeal\").val();\n        var tolerancia = parseInt($(\"#tolerancia\").val());\n        var tipoIndicador = $(\"#tipoIndicador\").val();\n        var periodicidad = $(\"#periodicidad\").val();\n        var fecha = $(\"#fecha\").datepicker('getDate');\n        var analista = $(\"#analista\").val();\n        var riesgoPadre = this.props.riesgoPadre;\n        console.log('nombre');\n        console.log(nombre);\n        console.log('codigo');\n        console.log(codigo);\n        console.log('formula');\n        console.log(formula);\n        console.log('peso');\n        console.log(peso);\n        console.log('valorIdeal');\n        console.log(valorIdeal);\n        console.log('tipoValorIdeal');\n        console.log(tipoValorIdeal);\n        console.log('tolerancia');\n        console.log(tolerancia);\n        console.log('periodicidad');\n        console.log(periodicidad);\n        console.log('tipoIndicador');\n        console.log(tipoIndicador);\n        console.log('analista');\n        console.log(analista);\n        console.log('riesgoPadre');\n        console.log(riesgoPadre);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Indicadores (nombre, codigo, formula, peso, tolerancia, valorIdeal, tipoValorIdeal, periodicidad, tipoIndicador, analista, idRiesgoPadre, fechaInicioCalculo) values ('\"+nombre+\"', '\"+codigo+\"', '\"+formula+\"', \"+peso+\", \"+tolerancia+\", \"+valorIdeal+\", '\"+tipoValorIdeal+\"', '\"+periodicidad+\"', '\"+tipoIndicador+\"', '\"+analista+\"', \"+riesgoPadre+\", '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        alert(\"Indicador Creado.\");\n                        nombreIndicador = '';\n                        codigoIndicador = '';\n                        toleranciaIndicador = '';\n                        tipoToleranciaIndicador = '';\n                        valorIdealIndicador = '';\n                        tipoValorIdealIndicador = '';\n                        periodicidadIndicador = '';\n                        tipoIndicador = '';\n                        nombreEncargadoIndicador = '';\n                        $(\"#nombreIndicador\").val(\"\");\n                        $(\"#codigo\").val(\"\");\n                        this.setState({\n                            x: 0\n                        });\n                        $(\"#valorIdeal\").val(\"\");\n                        $(\"#tipoValorIdeal\").val(\"numerico\");\n                        $(\"#tolerancia\").val(\"\");\n                        $(\"#tipoTolerancia\").val(\"numerico\");\n                        $(\"#periodicidad\").val(\"-1\");\n                        $(\"#tipoIndicador\").val(\"riesgoInherente\");\n                        $(\"#analista\").val(\"\");\n                        this.getIndicadorID();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getIndicadorID () {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Indicadores order by ID desc\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            contadorObjetosGuardados = 0;\n                            contadorObjetosAGuardar = 0;\n                            if(elementosFormulasG.length != 0) {\n                                for (var i = 0; i < elementosFormulasG.length; i++) {\n                                    this.createIndicatorFormulaElements(result.recordset[0], elementosFormulasG[i], i, elementosFormulasG.length-1);\n                                };\n                            } else {\n                                for (var i = 0; i < atributos.length; i++) {\n                                    contadorObjetosAGuardar++;\n                                    this.createIndicatorField(result.recordset[0], atributos[i], i);\n                                };\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createIndicatorFormulaElements (indicador, elementoFormula, indiceElemento, ultimaPosicionElemento) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoIndicador (indicadorID, conexionTablaID, esFuenteDeDato, excelArchivoID, excelVariableID, formaVariableID, elementoVariableID, elementoVariableCampoID, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+indicador.ID+\", \"+elementoFormula.conexionTablaID+\", '\"+elementoFormula.esFuenteDeDato+\"', \"+elementoFormula.excelArchivoID+\", \"+elementoFormula.excelVariableID+\", \"+elementoFormula.formaVariableID+\", \"+elementoFormula.elementoVariableID+\", \"+elementoFormula.elementoVariableCampoID+\", '\"+elementoFormula.nombreColumnaEnTabla+\"', '\"+elementoFormula.tipoColumnaEnTabla+\"', '\"+elementoFormula.nombreVariable+\"', '\"+elementoFormula.descripcion+\"', '\"+elementoFormula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(indiceElemento == ultimaPosicionElemento && atributos.length > 0) {\n                            for (var i = 0; i < atributos.length; i++) {\n                                contadorObjetosAGuardar++;\n                                this.createIndicatorField(result.recordset[0], atributos[i], i);\n                            };\n                        } else if(indiceElemento == ultimaPosicionElemento && atributos.length == 0) {\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createIndicatorField (indicador, indicadorCampo, posicionAtributo) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into IndicadoresCampos (variableID, nombre, tipo, nivel) values (\"+indicador.ID+\", '\"+indicadorCampo.nombre+\"', '\"+indicadorCampo.tipo+\"', \"+indicadorCampo.nivel+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        //this.props.terminoCrearCampo(variable, variableCampo);\n                        contadorObjetosGuardados++;\n                        this.getIndicatorFieldID(indicador, indicadorCampo, posicionAtributo);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getIndicatorFieldID (indicador, indicadorCampo, posicionAtributo) {\n        //validaciones existe por lo menos regla asignar\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from IndicadoresCampos where nombre = '\"+indicadorCampo.nombre+\"' and indicadorID = \"+indicador.ID, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        /*var formulas, segmentoRegla;\n                        if (banderaEsObjeto) {\n                            formulas = formulasVariosAtributos;\n                            segmentoRegla = segmentoReglasVariosAtributos;\n                        } else {\n                            formulas = formulasUnAtributo;\n                            segmentoRegla = segmentoReglasUnAtributo;\n                        }*/\n                        var arregloDeFormulasALlamar = [], arregloElementosDeFormulasALlamar = [];\n                        for (var j = 0; j < formulas[posicionAtributo].length; j++) {\n                            if(arregloDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloDeFormulasALlamar[posicionAtributo] = [];\n                            arregloDeFormulasALlamar[posicionAtributo].push(j);\n                            if(arregloElementosDeFormulasALlamar[posicionAtributo] == undefined)\n                                arregloElementosDeFormulasALlamar[posicionAtributo] = [];\n                            formulas[posicionAtributo][j].posicionFormulaEnCampo = j;\n                            contadorObjetosAGuardar++;\n                            this.createVariableFieldFormula(indicador, result.recordset[0], formulas[posicionAtributo][j], posicionAtributo, j, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                        };\n                        if(formulas[posicionAtributo].length == 0) {\n                            var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                            for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRuleSegments(indicador, result.recordset[0], segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                            };\n                        }\n                        if(formulas[posicionAtributo].length == 0 && segmentoRegla[posicionAtributo].length == 0) {\n                            console.log('HOLA 1');\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldRuleSegments (indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        //los campos variableID y variableCampoID se ponen luego de la creacion e importacion\n        //el campo variableIDCreacionCodigo es el variableID de segmento asignado al crear reglas\n        console.log('=============    3');\n        console.log('Crear Segmento');\n        console.log('indicador');\n        console.log(indicador);\n        console.log('indicadorCampo');\n        console.log(indicadorCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionSegmento');\n        console.log(posicionSegmento);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into SegmentoReglasIndicadores (conexionTablaID, indicadorID, indicadorCampoID, variableIDCreacionCodigo, esConexionTabla, posicionSegmentoEnCampo, nivelMax) values (\"+segmento.conexionTablaID+\", \"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+segmento.variableID+\", '\"+segmento.esConexionTabla+\"', \"+posicionSegmento+\", \"+segmento.nivelMax+\")\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldRuleSegments(indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldRuleSegments (indicador, indicadorCampo, segmento, posicionAtributo, posicionSegmento, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglasIndicadores where conexionTablaID = \"+segmento.conexionTablaID+\" and indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and variableIDCreacionCodigo = \"+segmento.variableID+\" and esConexionTabla = '\"+segmento.esConexionTabla+\"' and posicionSegmentoEnCampo = \"+posicionSegmento+\" and nivelMax = \"+segmento.nivelMax, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        console.log('resultado FormulasVariablesCampos')\n                        console.log(result.recordset)\n                        if (result.recordset.length > 0) {\n                            /*var reglas, formulas, segmento, segmentoRegla;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            for (var i = 0; i < arregloDeSegmentosALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeSegmentosALlamar[posicionAtributo][i] == posicionSegmento) {\n                                    arregloDeSegmentosALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] != undefined && arregloDeSegmentosALlamar[posicionAtributo].length == 0)\n                                        arregloDeSegmentosALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            for (var k = 0; k < reglas[posicionAtributo][posicionSegmento].length; k++) {\n                                if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] == undefined)\n                                    arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] = [];\n                                arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].push(k);\n                            };\n                            //lamar solo la primer regla o sea regla padre\n                            reglas[posicionAtributo][posicionSegmento][0].segmentoReglaID = result.recordset[0].ID;\n                            //crear reglas que sean de comparacion (esCondicion = verdadero)\n                            if(reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldRules(indicador, indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            } else if(!reglas[posicionAtributo][posicionSegmento][0].esCondicion) {\n                                contadorObjetosAGuardar++;\n                                //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                console.log('formulas')\n                                console.log(formulas)\n                                console.log('reglas')\n                                console.log(reglas)\n                                for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                    if(i == reglas[posicionAtributo][posicionSegmento][0].formulaID) {\n                                        console.log('ENCONTRO')\n                                        reglas[posicionAtributo][posicionSegmento][0].formulaID = formulas[posicionAtributo][i].ID;\n                                        break;\n                                    }\n                                };\n                                this.createVariableFieldRules(indicador, indicadorCampo, result.recordset[0], reglas[posicionAtributo][posicionSegmento][0], posicionAtributo, posicionSegmento, 0, arregloReglasDeSegmentosALlamar, -1);\n                            }\n                            if( arregloDeSegmentosALlamar.length == 0 && arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 2');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    createVariableFieldRules (indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('=============    4');\n        console.log('Crear Regla');\n        console.log('indicador');\n        console.log(indicador);\n        console.log('indicadorCampo');\n        console.log(indicadorCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionSegmento');\n        console.log(posicionSegmento);\n        console.log('posicionRegla');\n        console.log(posicionRegla);\n        if(regla != undefined) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"insert into ReglasIndicadores (segmentoReglaID, indicadorID, indicadorCampoID, formulaID, reglaPadreID, conexionTablaID, nombreColumnaEnTabla, tipoCampoObjetivo, esCondicion, esConexionTabla, posicionSegmento, operacion, operacionTexto, valor, texto, nivel) values (\"+segmento.ID+\", \"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+regla.formulaID+\", \"+reglaPadreID+\", \"+regla.conexionTablaID+\", '\"+regla.nombreColumnaEnTabla+\"', '\"+regla.tipoCampoObjetivo+\"', '\"+regla.esCondicion+\"', '\"+regla.esConexionTabla+\"', \"+posicionSegmento+\", '\"+regla.operacion+\"', '\"+regla.operacionTexto+\"', '\"+regla.valor+\"', '\"+regla.texto+\"', \"+regla.nivel+\")\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            contadorObjetosGuardados++;\n                            console.log('HOLA 3.1');\n                            this.limpiarArreglos();\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            contadorObjetosGuardados++;\n                            /*var segmentoRegla;\n                            if (banderaEsObjeto) {\n                                segmentoRegla = segmentoReglasVariosAtributos;\n                            } else {\n                                segmentoRegla = segmentoReglasUnAtributo;\n                            }*/\n                            if(arregloReglasDeSegmentosALlamar[posicionAtributo] != undefined && arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento] != undefined) {\n                                for (var i = 0; i < arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length; i++) {\n                                    if (arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento][i] == posicionRegla) {\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].splice(i, 1);\n                                        if(arregloReglasDeSegmentosALlamar[posicionAtributo][posicionSegmento].length == 0) {\n                                            arregloReglasDeSegmentosALlamar[posicionAtributo].splice(posicionSegmento, 1);\n                                        }\n                                        break;\n                                    }\n                                };\n                            }\n                            if( arregloReglasDeSegmentosALlamar.length == 0) {\n                                console.log('HOLA 3');\n                                this.limpiarArreglos();\n                            } else {\n                                this.traerRegla(indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID);\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else {\n            console.log('HOLA 4');\n            this.limpiarArreglos();\n        }\n    }\n\n    traerRegla(indicador, indicadorCampo, segmento, regla, posicionAtributo, posicionSegmento, posicionRegla, arregloReglasDeSegmentosALlamar, reglaPadreID) {\n        console.log('=============   5');\n        console.log('indicador');\n        console.log(indicador);\n        console.log('indicadorCampo');\n        console.log(variableCampo);\n        console.log('segmento');\n        console.log(segmento);\n        console.log('regla');\n        console.log(regla);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ReglasIndicadores where segmentoReglaID = \"+segmento.ID+\" and indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+indicadorCampo.ID+\" and formulaID = \"+regla.formulaID+\" and reglaPadreID =  \"+reglaPadreID+\" and conexionTablaID = \"+regla.conexionTablaID+\" and nombreColumnaEnTabla = '\"+regla.nombreColumnaEnTabla+\"' and tipoCampoObjetivo = '\"+regla.tipoCampoObjetivo+\"' and esCondicion = '\"+regla.esCondicion+\"' and esConexionTabla = '\"+regla.esConexionTabla+\"' and posicionSegmento = \"+posicionSegmento+\" and operacion = '\"+regla.operacion+\"' and operacionTexto = '\"+regla.operacionTexto+\"' and valor = '\"+regla.valor+\"' and texto = '\"+regla.texto+\"' and nivel = \"+regla.nivel, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if( result.recordset.length > 0 ) {\n                            /*var reglas, formulas;\n                            if (banderaEsObjeto) {\n                                reglas = reglasVariosAtributos;\n                                formulas = formulasVariosAtributos;\n                            } else {\n                                reglas = reglasUnAtributo;\n                                formulas = formulasUnAtributo;\n                            }*/\n                            console.log('posicionAtributo');\n                            console.log(posicionAtributo);\n                            console.log('posicionSegmento');\n                            console.log(posicionSegmento);\n                            console.log('posicionRegla+1');\n                            console.log(posicionRegla+1);\n                            console.log('reglas');\n                            console.log(reglas);\n                            console.log('result.recordset');\n                            console.log(result.recordset[0]);\n                            if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento] != undefined && reglas[posicionAtributo][posicionSegmento][posicionRegla+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento][posicionRegla+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento][posicionRegla+1].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento][posicionRegla+1], posicionAtributo, posicionSegmento, posicionRegla+1, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } /*else if(reglas[posicionAtributo] != undefined && reglas[posicionAtributo][posicionSegmento+1] != undefined) {\n                                if(reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo][posicionSegmento+1][posicionRegla].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo].length; i++) {\n                                        if(i == reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID) {\n                                            reglas[posicionAtributo][posicionSegmento+1][posicionRegla].formulaID = formulas[posicionAtributo][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo][posicionSegmento+1][posicionRegla], posicionAtributo, posicionSegmento+1, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            } else if(reglas[posicionAtributo+1] != undefined) {\n                                if(reglas[posicionAtributo+1][0][0].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                } else if(!reglas[posicionAtributo+1].esCondicion) {\n                                    contadorObjetosAGuardar++;\n                                    //crear reglas que sean de asignacion (esCondicion = falso) con el id de formula correcto\n                                    for (var i = 0; i < formulas[posicionAtributo+1].length; i++) {\n                                        if(i == reglas[posicionAtributo+1][0][0].formulaID) {\n                                            reglas[posicionAtributo+1][0][0].formulaID = formulas[posicionAtributo+1][i].ID;\n                                            break;\n                                        }\n                                    };\n                                    this.createVariableFieldRules(indicador, indicadorCampo, segmento, reglas[posicionAtributo+1][0][0], posicionAtributo+1, 0, 0, arregloReglasDeSegmentosALlamar, result.recordset[0].ID);\n                                }\n                            }*/ else {\n                                console.log('HOLA 5');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormula (indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        console.log('=============   1');\n        console.log('Crear Formula');\n        console.log('indicador');\n        console.log(indicador);\n        console.log('indicadorCampo');\n        console.log(indicadorCampo);\n        console.log('formula');\n        console.log(formula);\n        console.log('posicionAtributo');\n        console.log(posicionAtributo);\n        console.log('posicionFormula');\n        console.log(posicionFormula);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into FormulasIndicadoresCampos (indicadorID, indicadorCampoID, posicionFormulaEnCampo, formula, operacion) values (\"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+posicionFormula+\", '\"+formula.formula+\"', '\"+formula.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        this.getVariableFieldFormulaID(indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getVariableFieldFormulaID (indicador, indicadorCampo, formula, posicionAtributo, posicionFormula, arregloDeFormulasALlamar, arregloElementosDeFormulasALlamar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasIndicadoresCampos where indicadorID = \"+indicador.ID+\" and indicadorCampoID = \"+variableCampo.ID+\" and posicionFormulaEnCampo = \"+posicionFormula, (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var existenSegmentos = false;\n                            for (var i = 0; i < segmentoRegla.length; i++) {\n                                if (segmentoRegla[i].length > 0) {\n                                    existenSegmentos = true;\n                                }\n                            };\n                            for (var i = 0; i < elementosFormulas[posicionAtributo][posicionFormula].length; i++) {\n                                if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] == undefined)\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] = [];\n                                arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].push(i);\n                                contadorObjetosAGuardar++;\n                                this.createVariableFieldFormulaElement(indicador, indicadorCampo, result.recordset[0], elementosFormulas[posicionAtributo][posicionFormula][i], posicionAtributo, posicionFormula, i, arregloElementosDeFormulasALlamar, existenSegmentos);\n                            };\n                            formulas[posicionAtributo][posicionFormula].ID = result.recordset[0].ID;\n                            if (banderaEsObjeto) {\n                                formulasVariosAtributos = formulas;\n                            } else {\n                                formulasUnAtributo = formulas;\n                            }\n                            for (var i = 0; i < arregloDeFormulasALlamar[posicionAtributo].length; i++) {\n                                if (arregloDeFormulasALlamar[posicionAtributo][i] == posicionFormula) {\n                                    arregloDeFormulasALlamar[posicionAtributo].splice(i, 1);\n                                    if(arregloDeFormulasALlamar[posicionAtributo].length == 0)\n                                        arregloDeFormulasALlamar.splice(posicionAtributo, 1);\n                                    break;\n                                }\n                            };\n                            //validar que solo sea llamado una vez por cada atributo\n                            //llamado al final para que hasta que haya traido todos los ids de formula llamar crear segmento\n                            if(posicionFormula == 0) {\n                                var arregloDeSegmentosALlamar = [], arregloReglasDeSegmentosALlamar = [];\n                                for (var j = 0; j < segmentoRegla[posicionAtributo].length; j++) {\n                                    if(arregloDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloDeSegmentosALlamar[posicionAtributo] = [];\n                                    arregloDeSegmentosALlamar[posicionAtributo].push(j);\n                                    if(arregloReglasDeSegmentosALlamar[posicionAtributo] == undefined)\n                                        arregloReglasDeSegmentosALlamar[posicionAtributo] = [];\n                                    contadorObjetosAGuardar++;\n                                    segmentoRegla[posicionAtributo][j].posicionSegmentoEnCampo = j;\n                                    this.createVariableFieldRuleSegments(indicador, indicadorCampo, segmentoRegla[posicionAtributo][j], posicionAtributo, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                };\n                                /*for (var i = 0; i < segmentoRegla.length; i++) {\n                                    for (var j = 0; j < segmentoRegla[i].length; j++) {\n                                        if(arregloDeSegmentosALlamar[i] == undefined)\n                                            arregloDeSegmentosALlamar[i] = [];\n                                        arregloDeSegmentosALlamar[i].push(j);\n                                        if(arregloReglasDeSegmentosALlamar[i] == undefined)\n                                            arregloReglasDeSegmentosALlamar[i] = [];\n                                        contadorObjetosAGuardar++;\n                                        segmentoRegla[i][j].posicionSegmentoEnCampo = j;\n                                        this.createVariableFieldRuleSegments(indicador, indicadorCampo, segmentoRegla[i][j], i, j, arregloDeSegmentosALlamar, arregloReglasDeSegmentosALlamar);\n                                    };\n                                };*/\n                            }\n                            if( arregloDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                                console.log('HOLA 6');\n                                this.limpiarArreglos();\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createVariableFieldFormulaElement (indicador, indicadorCampo, formula, elemento, posicionAtributo, posicionFormula, posicionElemento, arregloElementosDeFormulasALlamar, existenSegmentos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into ElementoFormulasIndicadoresCampos (indicadorID, indicadorCampoID, formulaID, conexionTablaID, esFuenteDeDato, elementoVariableID, elementoVariableCampoID, nombreColumnaEnTabla, tipoColumnaEnTabla, nombreVariable, descripcion, operacion) values (\"+indicador.ID+\", \"+indicadorCampo.ID+\", \"+formula.ID+\", \"+elemento.conexionTablaID+\", '\"+elemento.esFuenteDeDato+\"', \"+elemento.elementoVariableID+\", \"+elemento.elementoVariableCampoID+\", '\"+elemento.nombreColumnaEnTabla+\"', '\"+elemento.tipoColumnaEnTabla+\"', '\"+elemento.nombreVariable+\"', '\"+elemento.descripcion+\"', '\"+elemento.operacion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        contadorObjetosGuardados++;\n                        this.limpiarArreglos();\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        contadorObjetosGuardados++;\n                        if(arregloElementosDeFormulasALlamar[posicionAtributo] != undefined && arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula] != undefined) {\n                            for (var i = 0; i < arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length; i++) {\n                                if (arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula][i] == posicionElemento) {\n                                    arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].splice(i, 1);\n                                    if(arregloElementosDeFormulasALlamar[posicionAtributo][posicionFormula].length == 0)\n                                        arregloElementosDeFormulasALlamar[posicionAtributo].splice(posicionFormula, 1);\n                                    break;\n                                }\n                            };\n                        }\n                        if( arregloElementosDeFormulasALlamar.length == 0 && !existenSegmentos ) {\n                            console.log('HOLA 7');\n                            this.limpiarArreglos();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    limpiarArreglos() {\n        if(contadorObjetosGuardados == contadorObjetosAGuardar) {\n            console.log(\"BORRRO\")\n            formulaG = '';\n            elementosFormulasG = [];\n            atributos = [];\n            nombreCampoNuevoAtributo = '';\n            reglas = [];\n            segmentoRegla = [];\n            elementosFormulas = [];\n            formulas = [];\n            posicionAtributoSeleccionado = -1;\n            nivelNuevoAtributo = 0;\n            tipoDeAsignacionSeleccionado = '';\n            operacionSeleccionada = '';\n            campoSeleccionado = {};\n            indiceSeleccionadoSegmentoReglas = -1;\n            indiceSeleccionadoReglas = -1;\n            tipoElementoSeleccionadoRegla = '';\n\n            this.setState({\n                atributos: [],\n                reglas: [],\n                tipoNuevaVariable: \"\"\n            });\n        }\n    }\n\n    goToCreateFormula () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Crear Frmula</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Frmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        banderaEsFormulaIndicador = true;\n        this.setState({\n            componenteActual: \"crearFormula\",\n            navbar: navbar\n        });\n    }\n\n    retornoCrearIndicador () {\n        this.setState({\n            componenteActual: \"crearIndicador\"\n        });\n    }\n\n    retornoCampoFormula (tipoVariable) {\n        tipoDeAsignacionSeleccionado = tipoVariable;\n    }\n\n    retornoCampoCondicion (campo) {\n        campoSeleccionado = campo;\n    }\n\n    retornarValor (campoNuevo, campoNuevoTexto) {\n        valorSeleccionado = campoNuevo;\n        valorSeleccionadoTexto = campoNuevoTexto;\n    }\n\n    retornoOperacion (operacion) {\n        operacionSeleccionada = operacion;\n    }\n\n    actualizarIndiceSeleccionadoReglas(indiceSegmento, indiceRegla, tipoElemento) {\n        indiceSeleccionadoSegmentoReglas = indiceSegmento;\n        indiceSeleccionadoReglas = indiceRegla;\n        tipoElementoSeleccionadoRegla = tipoElemento;\n    }\n\n    actualizarNivelNuevaRegla () {\n        //\n    }\n\n    goToCreateConditions (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Condiciones</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        posicionAtributoSeleccionado = indice;\n        //tipoElementoSeleccionado = tipoIndice;\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        if(formulas[posicionSel] == undefined)\n            formulas[posicionSel] = [];\n        if(reglas[posicionSel] == undefined)\n            reglas[posicionSel] = [];\n        this.setState({\n            componenteActual: \"variableCondiciones\",\n            navbar: navbar,\n            formulas: formulas[posicionSel],\n            reglas: reglas[posicionSel]\n        });\n    }\n\n    goToCreateConditionsClickNavBarFormula () {\n        this.goToCreateConditions(posicionAtributoSeleccionado);\n    }\n\n    goToCreateFormulaCampo (indice) {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Condiciones</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornoCrearIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Crear Indicador</a></li>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.goToCreateConditionsClickNavBarFormula}><a href=\"#\" className={\"breadcrumb-link\"}>Condiciones</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear F&oacute;rmula</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        //deseleccionado regla seleccionada\n        banderaEsFormulaIndicador = false;\n        indiceSeleccionadoReglas = -1;\n        indiceSeleccionadoFormula = indice;\n        this.setState({\n            componenteActual: \"variableFormula\",\n            navbar: navbar\n        });\n    }\n\n    actualizarNombreCampoNuevoAtributo () {\n        var nombreCampo = $(\"#nombreAtributoNuevoCampo\").val();\n        nombreCampoNuevoAtributo = nombreCampo;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"ASIG\") == 0) {\n            return \"ASIGNAR\";\n        }\n        if(codigo.localeCompare(\"COUNT\") == 0) {\n            return \"CONTAR\";\n        }\n        if(codigo.localeCompare(\"PROM\") == 0) {\n            return \"PROMEDIAR\";\n        }\n        if(codigo.localeCompare(\"MAX\") == 0) {\n            return \"MXIMO\";\n        }\n        if(codigo.localeCompare(\"MIN\") == 0) {\n            return \"MNIMO\";\n        }\n        if(codigo.localeCompare(\"SUM\") == 0) {\n            return \"SUMAR\";\n        }\n        if(codigo.localeCompare(\"FORMULA\") == 0) {\n            return \"FORMULA\";\n        }\n    }\n\n    verificarNoExisteNombreCampo (nombre) {\n        var noExiste = true;\n        if (banderaEsInstruccionSQL) {\n            for (var i = 0; i < atributos.length; i++) {\n                if (atributos[i].nombre.toLowerCase().localeCompare(nombre.toLowerCase()) == 0) {\n                    noExiste = false;\n                    break;\n                }\n            };\n        }\n        return noExiste;\n    }\n\n    crearAtributoVariable () {              //agrega valor a arreglo, pero no guarda en base de datos\n        var nombreAtributo = $(\"#nombreAtributoNuevoCampo\").val();\n        if(nombreAtributo.length > 0) {\n            if(this.verificarNoExisteNombreCampo(nombreAtributo)) {\n                if(tipoDeAsignacionSeleccionado != undefined && tipoDeAsignacionSeleccionado.length > 0) {\n                    //seleccionar arreglo a insertar, si de varios atributos o unico\n                    var arreglo, nivel;\n                    arreglo = atributos;\n                    nivel = nivelNuevoAtributo;\n                    var nuevoAtributo = {nombre: nombreAtributo, tipo: tipoDeAsignacionSeleccionado, nivel: nivel};\n                    arreglo.push(nuevoAtributo);\n                    this.setState({\n                        atributos: arreglo,\n                        tipoNuevaVariable: \"\"\n                    });\n                    nivelNuevoAtributo = 0;\n                    nombreCampoNuevoAtributo = '';\n                    $(\"#nombreAtributoNuevoCampo\").val(\"\");\n                    alert(\"Campo creado.\");\n                } else {\n                    alert(\"Seleccione un tipo de asignacin.\");\n                }\n            } else {\n                alert(\"El nombre del campo debe ser unico.\");\n            }\n        } else {\n            alert(\"Ingrese un valor para el nombre del atributo.\");\n        }\n    }\n\n    anadirRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        var posicionAtributo = posicionAtributoSeleccionado;\n        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributo == -1) {\n            posicionAtributo = this.state.atributos.length;\n        }\n        //viendo si regla condicion ya tiene regla sino\n        //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n        var banderaSinoReglaValido = true;\n        if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n            var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n            if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                    if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                        banderaSinoReglaValido = false;\n                    }\n                };\n            }\n        }\n        var reglaEsValida = true;\n        if(!esFormula) {\n            if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                reglaEsValida = false;\n            }\n            if(valorSeleccionado.length == 0) {\n                reglaEsValida = false;\n            }\n            if(operacionSeleccionada.operacion == undefined) {\n                reglaEsValida = false;\n            }\n            if(campoSeleccionado.tipo != undefined) {\n                if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                    if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                    if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                    if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                    if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                        reglaEsValida = false;\n                    }\n                }\n            }\n        } else {\n            if(formulaSeleccionada.formula == undefined) {\n                reglaEsValida = false;\n            }\n        }\n        //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n        if(banderaSinoReglaValido && reglaEsValida) {\n            if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                var entrarACrearRegla = false;\n                if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                    //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                    if(!esFormula) {\n                        if(campoSeleccionado.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == campoSeleccionado.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(campoSeleccionado.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(campoSeleccionado.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    } else {\n                        if(formulaSeleccionada.tablaID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.variableID != undefined) {\n                            if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                entrarACrearRegla = true;\n                            }\n                            //viendo si variable seleccionada es objeto\n                            var variableSel = this.state.variables.filter(function (object) {\n                                return object.ID == formulaSeleccionada.variableID;\n                            });\n                            if(variableSel.length > 0) {\n                                if(!variableSel[0].esObjeto)\n                                    entrarACrearRegla = true;\n                            }\n                        } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                            entrarACrearRegla = true;\n                        } else if(formulaSeleccionada.formaVariableID != undefined) {\n                            entrarACrearRegla = true;\n                        }\n                    }\n                } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                    entrarACrearRegla = true;\n                }\n                if(entrarACrearRegla) {\n                    if(!esFormula) {\n                        var valor = $(\"#valor\").val();\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        if(reglas[posicionSel] == undefined) {\n                            [];\n                        }\n                        if(segmentoRegla.length == undefined)\n                            segmentoRegla = [];\n                        if(segmentoRegla[posicionSel] == undefined)\n                            segmentoRegla[posicionSel] = [];\n                        var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1, nombreColumnaEnTabla = '';\n                        if(campoSeleccionado.tablaID != -1) {\n                            conexionTablaID = campoSeleccionado.tablaID;\n                            esConexionTabla = true;\n                            nombreColumnaEnTabla = campoSeleccionado.valor;\n                        } else {\n                            variableID = campoSeleccionado.variableID;\n                        }\n                        var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                        if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                            var segmentoReglaIndex = 0;\n                            if(segmentoRegla[posicionSel].length > 0) {\n                                segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                            }\n                            segmentoRegla[posicionSel].push({conexionTablaID: conexionTablaID, variableID: variableID, esConexionTabla: esConexionTabla, nivelMax: nivelMax, segmentoReglaIndex: segmentoReglaIndex});\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                        } else {\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                        }\n                        if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                            reglas[posicionInsertarReglaAtributo] = [];\n                        }\n                        if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                        }\n                        var esCondicion = !esFormula;\n                        var segmentoReglaIndex = 0;\n                        if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                            //cuando se esta aadiendo una regla a un segmento existente\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                        } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                            //cuando se esta aadiendo una regla a un nuevo segmento\n                            segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                        }\n                        var nuevoNivel = 0;\n                        var nuevaRegla = {\n                                            segmentoReglaID: segmentoReglaIndex,\n                                            conexionTablaID: conexionTablaID,\n                                            nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                            formulaID: -1,\n                                            variableID: -1,\n                                            variableCampoID: -1,\n                                            reglaPadreID: -1,\n                                            tipoCampoObjetivo: campoSeleccionado.tipo,\n                                            esCondicion: esCondicion,\n                                            esConexionTabla: esConexionTabla,\n                                            operacion: operacionSeleccionada.operacion,\n                                            operacionTexto: operacionSeleccionada.operacionTexto,\n                                            valor: valor,\n                                            texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                            nivel: nuevoNivel,\n                                            posicionSegmentoEnCampo: segmentoReglaIndex\n                                        };\n                        if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                            //cuando no existe regla creada para el campo\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                        } else {\n                            //el campo ya tiene una regla o mas creada\n\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked') ) {\n                                //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                //se pone de regla padre a la regla seleccionada\n                                nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                var posicionAInsertar = -1;\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                            posicionAInsertar = i;\n                                        }\n                                    };\n                                }\n                                if(posicionAInsertar != -1) {\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                } else {\n                                    //insertar al final del segmento\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                }\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                nuevaRegla.reglaPadreID = -1;\n                                nuevaRegla.nivel = -1;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                        if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                        }\n                                    };\n                                }\n                            }\n                            //la condicion es anidada, o sea dentro de la condicion padre\n                        }\n                        //deseleccionado regla seleccionada\n                        indiceSeleccionadoReglas = -1;\n                        this.setState({\n                            reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                        });\n                        //reglas[posicionSel].push(nuevaRegla);\n                        campoSeleccionado = null;\n                        valorSeleccionado = '';\n                    } else {\n                        //es regla formula\n                        var posicionSel = posicionAtributoSeleccionado;\n                        //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                        //cuando se presiona NavBar indice es igual indice anterior\n                        //cuando se selecciona un campo existente indice = posicion campo\n                        if(posicionAtributoSeleccionado == -1) {\n                            posicionSel = this.state.atributos.length;\n                        }\n                        //verificando que campo de formula seleccionado es mismo tipo variable\n                        //tipoDeAsignacionSeleccionado\n                        if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                            var nuevoNivel = 0;\n                            if(segmentoRegla.length == undefined)\n                                segmentoRegla = [];\n                            if(segmentoRegla[posicionSel] == undefined)\n                                segmentoRegla[posicionSel] = [];\n                            var conexionTablaID = -1, variableID = -1, esConexionTabla = false, nivelMax = 1;\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            var posicionSegmentoEnCampo = -1; //bandera para saber a que segmento pertenece la regla, utilizado para elegir color fondo reglas\n                            if(formulaSeleccionada.tablaID != -1) {\n                                conexionTablaID = formulaSeleccionada.tablaID;\n                                esConexionTabla = true;\n                            } else {\n                                variableID = formulaSeleccionada.variableID;\n                            }\n                            if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 || (indiceSeleccionadoReglas == -1 && tipoElementoSeleccionadoRegla.length == 0) || segmentoRegla[posicionSel].length == 0) {\n                                var segmentoReglaIndex = 0;\n                                if(segmentoRegla[posicionSel].length > 0) {\n                                    segmentoReglaIndex = segmentoRegla[posicionSel].length;\n                                }\n                                segmentoRegla[posicionSel].push({conexionTablaID: conexionTablaID, variableID: variableID, esConexionTabla: esConexionTabla, nivelMax: nivelMax, segmentoReglaIndex: segmentoReglaIndex});\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = segmentoRegla[posicionSel].length-1;\n                            } else {\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            }\n                            if(reglas[posicionInsertarReglaAtributo] == undefined) {\n                                reglas[posicionInsertarReglaAtributo] = [];\n                            }\n                            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined) {\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] = [];\n                            }\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: '',\n                                                formulaID: posicionFormulaSeleccionada,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                tipoCampoObjetivo: tipoDeAsignacionSeleccionado,\n                                                operacion: formulaSeleccionada.operacion,\n                                                operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                valor: formulaSeleccionada.operacion,\n                                                texto: formulaSeleccionada.formula,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            if(reglas.length == 0 || reglas[posicionInsertarReglaAtributo].length == 0 || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                                //cuando no existe regla creada para el campo\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                            } else {\n                                //el campo ya tiene una regla o mas creada\n\n                                if( (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#siRADIO\").is(':checked')) || (tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !$(\"#siRADIO\").is(':checked') && !$(\"#sinoRADIO\").is(':checked')) ) {\n                                    //se seleciona el indice de la posicion de la regla dentro del arreglo, para que despues se pueda sacar el ID a base de la posicion\n                                    //se pone de regla padre a la regla seleccionada\n                                    nuevaRegla.reglaPadreID = indiceSeleccionadoReglas;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel+1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas+1, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+2] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+2; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && $(\"#sinoRADIO\").is(':checked') ) {\n                                    var posicionAInsertar = -1;\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel > reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel){\n                                                posicionAInsertar = i;\n                                            }\n                                        };\n                                    }\n                                    if(posicionAInsertar != -1) {\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(posicionAInsertar, 0, nuevaRegla);\n                                    } else {\n                                        //insertar al final del segmento\n                                        reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                    }\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    nuevaRegla.reglaPadreID = -1;\n                                    nuevaRegla.nivel = -1;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].push(nuevaRegla);\n                                } else if(tipoElementoSeleccionadoRegla.localeCompare(\"arriba\") == 0) {\n                                    nuevaRegla.reglaPadreID = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].reglaPadreID;\n                                    nuevaRegla.nivel = reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas].nivel;\n                                    reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 0, nuevaRegla);\n                                    if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][indiceSeleccionadoReglas+1] != undefined) {\n                                        for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length; i++) {\n                                            if(nuevaRegla.nivel <= reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel) {\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].reglaPadreID = i-1;\n                                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento][i].nivel++;\n                                            }\n                                        };\n                                    }\n                                }\n                                //la condicion es anidada, o sea dentro de la condicion padre\n                            }\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            if(this.state.tipoNuevaVariable.length == 0) {\n                                this.setState({\n                                    tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                });\n                            }\n                            formulaSeleccionada = null;\n                            //tipoDeAsignacionSeleccionado = '';\n                        } else {\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                            }\n                        }\n                    }\n                } else {\n                    var texto2 = 'variable';\n                    if(campoSeleccionado.tablaID != undefined)\n                        texto2 = 'tabla';\n                    var texto = 'formula';\n                    if(!esFormula)\n                        texto = 'comparacin';\n                    alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                }\n            } else {\n                alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n            }\n        } else {\n            if(!reglaEsValida && !esFormula)\n                alert(\"Ingrese todos los campos necesarios para la condicion.\");\n            else if(!reglaEsValida && esFormula)\n                alert(\"Seleccione una formula.\");\n            alert(\"La comparacin ya tiene una clausula 'SINO'\");\n        }\n    }\n\n    revisarTipoAnadirFormula (formula, formulaArreglo) {\n        console.log('banderaEsFormulaIndicador')\n        console.log(banderaEsFormulaIndicador)\n        if(banderaEsFormulaIndicador)\n            this.anadirFormulaIndicador(formula, formulaArreglo);\n        else\n            this.anadirFormula(formula, formulaArreglo);\n    }\n\n    anadirFormulaIndicador (formula, formulaArreglo) {\n        formulaG = formula.formula;\n        console.log('formula')\n        console.log(formula)\n        console.log('formulaArreglo')\n        console.log(formulaArreglo)\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        elementosFormulasG = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulasG = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulasG.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n        console.log('elementosFormulasG')\n        console.log(elementosFormulasG)\n    }\n\n    anadirFormula(formula, formulaArreglo) {\n        // 1. Make a shallow copy of the items\n        //let campos = [...this.state.camposDeTabla];\n        // 2. Make a shallow copy of the item you want to mutate\n        //let campo = [...campos[index]];\n        // 3. Replace the property you're intested in\n        //campo = {ID: campo.ID, idTabla: idTabla, nombre: campoNombre, tipo: tipoCampo, guardar: guardarCampo};\n        // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\n        //campos[index] = campo;\n        // 5. Set the state to our new copy\n        var posicionSel = posicionAtributoSeleccionado;\n        //indice = -1 cuando se va a condiciones de un campo nuevo\n        //cuando se presiona NavBar indice es igual indice anterior\n        //cuando se selecciona un campo existente indice = posicion campo\n        if(posicionAtributoSeleccionado == -1) {\n            posicionSel = this.state.atributos.length;\n        }\n        //copia antigua formulas\n        var copiaAntiguaFormulas = formulas;\n        if(copiaAntiguaFormulas[posicionSel] == undefined)\n            copiaAntiguaFormulas[posicionSel] = [];\n        formula.numeroDeFormulaDeVariable = copiaAntiguaFormulas[posicionSel].length;\n        copiaAntiguaFormulas[posicionSel].push(formula);\n        this.setState({\n            formulas: copiaAntiguaFormulas[posicionSel]\n        });\n        if(elementosFormulas[posicionSel] == undefined)\n            elementosFormulas[posicionSel] = [];\n        var posicionFormulaEnCampo = 0;\n        if (copiaAntiguaFormulas[posicionSel].length > 0 )\n            posicionFormulaEnCampo = copiaAntiguaFormulas[posicionSel].length-1;\n        //indiceSeleccionadoFormula es el indice de la formula seleccionada, las formula se asocian por campo (1 campo => muchas formulas)\n        if(elementosFormulas[posicionSel][posicionFormulaEnCampo] == undefined)\n            elementosFormulas[posicionSel][posicionFormulaEnCampo] = [];\n        var arregloDeElementos = [];\n        this.getElementsFromFormula(formulaArreglo, arregloDeElementos);\n        elementosFormulas[posicionSel][posicionFormulaEnCampo] = arregloDeElementos;\n        /*for (var i = 0; i < formulaArreglo.length; i++) {\n            if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                elementosFormulas[posicionSel][posicionFormulaEnCampo].push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };*/\n    }\n\n    getElementsFromFormula (formulaArreglo, array) {\n        for (var i = 0; i < formulaArreglo.length; i++) {\n            console.log('formulaArreglo[i]')\n            console.log(formulaArreglo[i])\n            if(Array.isArray(formulaArreglo[i].valor)) {\n                this.getElementsFromFormula(formulaArreglo[i].valor, array);\n            } else if(formulaArreglo[i].tipo.localeCompare(\"variable\") == 0) {\n                var conexionTablaID = -1;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    conexionTablaID = formulaArreglo[i].tablaID;\n                var esFuenteDeDato = false;\n                if(formulaArreglo[i].esFuenteDato != undefined && formulaArreglo[i].esFuenteDato)\n                    esFuenteDeDato = true;\n                var excelArchivoID = -1;\n                if(formulaArreglo[i].excelArchivoID != undefined)\n                    excelArchivoID = formulaArreglo[i].excelArchivoID;\n                var excelVariableID = -1;\n                if(formulaArreglo[i].excelVariableID != undefined)\n                    excelVariableID = formulaArreglo[i].excelVariableID;\n                var formaVariableID = -1;\n                if(formulaArreglo[i].formaVariableID != undefined)\n                    formaVariableID = formulaArreglo[i].formaVariableID;\n                var elementoVariableID = -1;\n                if(formulaArreglo[i].variableID != undefined)\n                    elementoVariableID = formulaArreglo[i].variableID;\n                var elementoVariableCampoID = -1;\n                if(formulaArreglo[i].variableCampoID != undefined)\n                    elementoVariableCampoID = formulaArreglo[i].variableCampoID;\n                array.push({\n                    variableID: -1,\n                    variableCampoID: -1,\n                    formulaID: -1,\n                    conexionTablaID: conexionTablaID,\n                    esFuenteDeDato: esFuenteDeDato,\n                    excelArchivoID: excelArchivoID,\n                    excelVariableID: excelVariableID,\n                    formaVariableID: formaVariableID,\n                    elementoVariableID: elementoVariableID,\n                    elementoVariableCampoID: elementoVariableCampoID,\n                    nombreColumnaEnTabla: formulaArreglo[i].valor,\n                    tipoColumnaEnTabla: tipoDeAsignacionSeleccionado,\n                    nombreVariable: formulaArreglo[i].valor,\n                    descripcion: '',\n                    operacion: formulaArreglo[i].operacion\n                });\n            }\n        };\n    }\n\n    modificarRegla (esFormula, formulaSeleccionada, posicionFormulaSeleccionada) {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionAtributo = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributo == -1) {\n                posicionAtributo = this.state.atributos.length;\n            }\n            //viendo si regla condicion ya tiene regla sino\n            //comparando si la regla seleccionada es otra regla, y si la nueva regla a insertar no es formula\n            var banderaSinoReglaValido = true;\n            if(tipoElementoSeleccionadoRegla.localeCompare(\"esOtraRegla\") == 0 && !esFormula && $(\"#sinoRADIO\").is(':checked')) {\n                var nivelABuscar = reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][indiceSeleccionadoReglas].nivel;\n                if(indiceSeleccionadoReglas+1 < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length) {\n                    for (var i = indiceSeleccionadoReglas+1; i < reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas].length; i++) {\n                        if (nivelABuscar == reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].nivel && reglas[posicionAtributo][indiceSeleccionadoSegmentoReglas][i].operacion.localeCompare(\"ELSE\") == 0) {\n                            banderaSinoReglaValido = false;\n                        }\n                    };\n                }\n            }\n            var reglaEsValida = true;\n            if(!esFormula) {\n                if(campoSeleccionado == undefined || campoSeleccionado.valor == undefined) {\n                    reglaEsValida = false;\n                }\n                if(valorSeleccionado.length == 0) {\n                    reglaEsValida = false;\n                }\n                if(operacionSeleccionada.operacion == undefined) {\n                    reglaEsValida = false;\n                }\n                if(campoSeleccionado.tipo != undefined) {\n                    if(campoSeleccionado.tipo.localeCompare(\"int\") == 0 || campoSeleccionado.tipo.localeCompare(\"decimal\") == 0) {\n                        if(valorSeleccionado.indexOf(\"NUMERO\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"bool\") == 0) {\n                        if(valorSeleccionado.indexOf(\"BOOL\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"date\") == 0) {\n                        if(valorSeleccionado.indexOf(\"FECHA\") == -1 && valorSeleccionado.indexOf(\"TIME\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    } else if(campoSeleccionado.tipo.localeCompare(\"varchar\") == 0) {\n                        if(valorSeleccionado.indexOf(\"VARCHAR\") == -1 && valorSeleccionado.indexOf(\"LISTAID\") == -1) {\n                            reglaEsValida = false;\n                        }\n                    }\n                }\n            } else {\n                if(formulaSeleccionada.formula == undefined) {\n                    reglaEsValida = false;\n                }\n            }\n            //si es formula, viendo que no haya regla debajo, formulas solo se pueden agregar al final\n            if(banderaSinoReglaValido && reglaEsValida) {\n                if(indiceSeleccionadoReglas != -1 || ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) ) {\n                    var entrarACrearRegla = false;\n                    if(indiceSeleccionadoReglas != -1 && tipoElementoSeleccionadoRegla.length > 0 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0 && segmentoRegla[posicionAtributo] != undefined) {\n                        //validando nueva regla tenga la misma variable o conexion tabla del mismo segmento\n                        if(!esFormula) {\n                            if(campoSeleccionado.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == campoSeleccionado.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == campoSeleccionado.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == campoSeleccionado.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(campoSeleccionado.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(campoSeleccionado.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        } else {\n                            if(formulaSeleccionada.tablaID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].conexionTablaID == formulaSeleccionada.tablaID) {\n                                    entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.variableID != undefined) {\n                                if (segmentoRegla[posicionAtributo][indiceSeleccionadoSegmentoReglas].variableID == formulaSeleccionada.variableID) {\n                                    entrarACrearRegla = true;\n                                }\n                                if(indiceSeleccionadoSegmentoReglas == 0)\n                                    entrarACrearRegla = true;\n                                //viendo si variable seleccionada es objeto\n                                var variableSel = this.state.variables.filter(function (object) {\n                                    return object.ID == formulaSeleccionada.variableID;\n                                });\n                                if(variableSel.length > 0) {\n                                    if(!variableSel[0].esObjeto)\n                                        entrarACrearRegla = true;\n                                }\n                            } else if(formulaSeleccionada.excelArchivoID != undefined) {\n                                entrarACrearRegla = true;\n                            } else if(formulaSeleccionada.formaVariableID != undefined) {\n                                entrarACrearRegla = true;\n                            }\n                        }\n                    } else if( ( indiceSeleccionadoReglas == -1 && (reglas.length == 0 || (reglas[posicionAtributo] != undefined && reglas[posicionAtributo].length == 0) )) || tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0 ||  segmentoRegla[posicionAtributo] == undefined) {\n                        entrarACrearRegla = true;\n                    }\n                    if(entrarACrearRegla) {\n                        if(!esFormula) {\n                            var valor = $(\"#valor\").val();\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                            segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                            posicionInsertarReglaAtributo = posicionSel;\n                            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                            var esCondicion = !esFormula;\n                            var segmentoReglaIndex = 0;\n                            if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                //cuando se esta aadiendo una regla a un segmento existente\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                            } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                //cuando se esta aadiendo una regla a un nuevo segmento\n                                segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                            }\n                            var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                            if(campoSeleccionado.tablaID != undefined) {\n                                conexionTablaID = campoSeleccionado.tablaID;\n                                esConexionTabla = true;\n                                nombreColumnaEnTabla = campoSeleccionado.valor;\n                            }\n                            var nuevoNivel = 0;\n                            var nuevaRegla = {\n                                                segmentoReglaID: segmentoReglaIndex,\n                                                conexionTablaID: conexionTablaID,\n                                                nombreColumnaEnTabla: nombreColumnaEnTabla,\n                                                formulaID: -1,\n                                                variableID: -1,\n                                                variableCampoID: -1,\n                                                reglaPadreID: -1,\n                                                tipoCampoObjetivo: campoSeleccionado.tipo,\n                                                esCondicion: esCondicion,\n                                                esConexionTabla: esConexionTabla,\n                                                operacion: operacionSeleccionada.operacion,\n                                                operacionTexto: operacionSeleccionada.operacionTexto,\n                                                valor: valor,\n                                                texto: campoSeleccionado.valor+\" \"+operacionSeleccionada.operacionTexto+\" \"+valor,\n                                                nivel: nuevoNivel,\n                                                posicionSegmentoEnCampo: segmentoReglaIndex\n                                            };\n                            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                            //deseleccionado regla seleccionada\n                            indiceSeleccionadoReglas = -1;\n                            this.setState({\n                                reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                            });\n                            campoSeleccionado = null;\n                            valorSeleccionado = '';\n                            //reglas[posicionSel].push(nuevaRegla);\n                        } else {\n                            //es regla formula\n                            var posicionSel = posicionAtributoSeleccionado;\n                            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n                            //cuando se presiona NavBar indice es igual indice anterior\n                            //cuando se selecciona un campo existente indice = posicion campo\n                            if(posicionAtributoSeleccionado == -1) {\n                                posicionSel = this.state.atributos.length;\n                            }\n                            //verificando que campo de formula seleccionado es mismo tipo variable\n                            //tipoDeAsignacionSeleccionado\n                            if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) == 0 || this.state.tipoNuevaVariable.length == 0 ) {\n                                var nuevoNivel = nivelNuevoAtributo;\n                                var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n                                segmentoRegla[posicionSel][indiceSeleccionadoSegmentoReglas].nivelMax++;\n                                posicionInsertarReglaAtributo = posicionSel;\n                                posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n                                var esCondicion = !esFormula;\n                                var segmentoReglaIndex = 0;\n                                if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") != 0) {\n                                    //cuando se esta aadiendo una regla a un segmento existente\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas;\n                                } else if(indiceSeleccionadoSegmentoReglas != -1 && tipoElementoSeleccionadoRegla.localeCompare(\"abajo\") == 0) {\n                                    //cuando se esta aadiendo una regla a un nuevo segmento\n                                    segmentoReglaIndex = indiceSeleccionadoSegmentoReglas+1;\n                                }\n                                var conexionTablaID = -1, esConexionTabla = false, nombreColumnaEnTabla = '';\n                                if(campoSeleccionado.tablaID != undefined) {\n                                    conexionTablaID = campoSeleccionado.tablaID;\n                                    esConexionTabla = true;\n                                    nombreColumnaEnTabla = campoSeleccionado.valor;\n                                }\n                                var nuevaRegla = {\n                                                    segmentoReglaID: segmentoReglaIndex,\n                                                    conexionTablaID: conexionTablaID,\n                                                    nombreColumnaEnTabla: '',\n                                                    formulaID: posicionFormulaSeleccionada,\n                                                    variableID: -1,\n                                                    variableCampoID: -1,\n                                                    reglaPadreID: -1,\n                                                    esCondicion: esCondicion,\n                                                    esConexionTabla: esConexionTabla,\n                                                    operacion: formulaSeleccionada.operacion,\n                                                    operacionTexto: this.retornarCodigoOperacion(formulaSeleccionada.operacion),\n                                                    valor: formulaSeleccionada.operacion,\n                                                    texto: formulaSeleccionada.formula,\n                                                    nivel: nuevoNivel,\n                                                    posicionSegmentoEnCampo: segmentoReglaIndex\n                                                };\n                                reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1, nuevaRegla);\n                                //deseleccionado regla seleccionada\n                                //indiceSeleccionadoReglas = -1;\n                                var tempNewCopy = [...reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]];\n                                this.setState({\n                                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                                });\n                                formulaSeleccionada = null;\n                                var self = this;\n                                setTimeout(function(){\n                                    console.log(self.state.reglas)\n                                }, 2000);\n                                if(this.state.tipoNuevaVariable.length == 0) {\n                                    this.setState({\n                                        tipoNuevaVariable: tipoDeAsignacionSeleccionado\n                                    });\n                                }\n                                //tipoDeAsignacionSeleccionado = '';\n                            } else {\n                                if(this.state.tipoNuevaVariable.localeCompare(tipoDeAsignacionSeleccionado) != 0) {\n                                    alert(\"El tipo de asignacion de formula no coincide el tipo de campo.\");\n                                }\n                            }\n                        }\n                    } else {\n                        var texto2 = 'variable';\n                        if(campoSeleccionado.tablaID != undefined)\n                            texto2 = 'tabla';\n                        var texto = 'formula';\n                        if(!esFormula)\n                            texto = 'comparacin';\n                        alert(\"La \"+texto+\" ingresada no pertenece a la misma \"+texto2+\".\");\n                    }\n                } else {\n                    alert(\"Seleccione una posicin en la 'Lgica para el clculo'\");\n                }\n            } else {\n                if(!reglaEsValida && !esFormula)\n                    alert(\"Ingrese todos los campos necesarios para la condicion.\");\n                else if(!reglaEsValida && esFormula)\n                    alert(\"Seleccione una formula.\");\n                else\n                    alert(\"La comparacin ya tiene una clausula 'SINO'\");\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    eliminarRegla () {\n        if(reglas[0].length > 0 || (reglas[0][0] != undefined && reglas[0][0].length > 0)) {\n            var posicionSel = posicionAtributoSeleccionado;\n            //posicionAtributoSeleccionado = -1 cuando se va a condiciones de un campo nuevo\n            //cuando se presiona NavBar indice es igual indice anterior\n            //cuando se selecciona un campo existente indice = posicion campo\n            if(posicionAtributoSeleccionado == -1) {\n                posicionSel = this.state.atributos.length;\n            }\n            var posicionInsertarReglaAtributo = 0, posicionInsertarReglaSegmento = 0;\n            posicionInsertarReglaAtributo = posicionSel;\n            posicionInsertarReglaSegmento = indiceSeleccionadoSegmentoReglas;\n            reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].splice(indiceSeleccionadoReglas, 1);\n            indiceSeleccionadoReglas = -1;\n            if(reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                reglas[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n                segmentoRegla[posicionInsertarReglaAtributo].splice(posicionInsertarReglaSegmento, 1);\n            }\n            if(reglas[posicionInsertarReglaAtributo] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento] == undefined || reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento].length == 0) {\n                this.setState({\n                    reglas: []\n                });\n            } else {\n                this.setState({\n                    reglas: reglas[posicionInsertarReglaAtributo][posicionInsertarReglaSegmento]\n                });\n            }\n        } else {\n            alert(\"Cree una comparacin primero\");\n        }\n    }\n\n    updateNombreIndicador() {\n        nombreIndicador = $(\"#nombreIndicador\").val();\n    }\n\n    updateCodigoIndicador() {\n        codigoIndicador = $(\"#codigo\").val();\n    }\n\n    updateValorIdealIndicador() {\n        valorIdealIndicador = $(\"#valorIdeal\").val();\n    }\n\n    updateTipoValorIdealIndicador() {\n        tipoValorIdealIndicador = $(\"#tipoValorIdeal\").val();\n        if(tipoValorIdealIndicador.localeCompare(\"numerico\") == 0) {\n            mostrarToleranciaPorcentaje = false;\n        } else {\n            mostrarToleranciaPorcentaje = true;\n        }\n        this.setState({\n            mostrarToleranciaPorcentaje: mostrarToleranciaPorcentaje\n        });\n    }\n\n    updateToleranciaIndicador() {\n        toleranciaIndicador = $(\"#tolerancia\").val();\n    }\n\n    updatePeriodicidadIndicador() {\n        periodicidadIndicador = $(\"#periodicidad\").val();\n        this.setState({\n            periodicidadIndicador: periodicidadIndicador\n        }, this.cargarDatePicker );\n    }\n\n    cargarDatePicker () {\n        $('#fecha').datepicker({\n            format: \"dd-mm-yyyy\",\n            todayHighlight: true,\n            viewMode: \"days\", \n            minViewMode: \"days\",\n            language: 'es'\n        });\n        if(this.isValidDate(fecha)) {\n            $(\"#fecha\").datepicker(\"setDate\", fecha);\n        }\n        var self = this;\n        $('#fecha').datepicker().on('changeDate', function () {\n            if(self.isValidDate(fecha)) {\n                fecha = $(\"#fecha\").datepicker('getDate');\n            }\n        });\n    }\n\n    updateTipoIndicador() {\n        tipoIndicador = $(\"#tipoIndicador\").val();\n    }\n\n    updateNombreEncargadoIndicador() {\n        nombreEncargadoIndicador = $(\"#analista\").val();\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Crear Indicador</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionIndicador}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Riesgo</a></li>\n                                            <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Indicador</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"card influencer-profile-data\"}>\n                                <div className={\"card-body\"}>\n                                    <div className={\"border-top border-bottom addPaddingToConfig\"} style={{width: \"100%\"}}>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"nombreIndicador\" className=\"col-form-label\">Nombre Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"nombreIndicador\" defaultValue={nombreIndicador} onKeyUp={this.updateNombreIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"codigo\" className=\"col-form-label\">Codigo</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"codigo\" defaultValue={codigoIndicador} onKeyUp={this.updateCodigoIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"peso\" className=\"col-form-label\">Peso</label>\n                                            </div>\n                                            <div className={\"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-8 form-group\"}>\n                                                <Slider\n                                                    axis=\"x\"\n                                                    xstep={1}\n                                                    xmin={0}\n                                                    xmax={this.props.pesoDisponibleRiesgo}\n                                                    x={this.state.x}\n                                                    onChange={({ x }) => this.setState({ x: x }) }\n                                                    style={{width: \"100%\", marginTop: \"10px\"}}/>\n                                            </div>\n                                            <div className={\"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1 form-group\"}>\n                                                <label id=\"pesoLabel\" className=\"col-form-label\">{this.state.x}</label>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"valorIdeal\" className=\"col-form-label\">Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"valorIdeal\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={valorIdealIndicador} onChange={this.updateValorIdealIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoValorIdeal\" className=\"col-form-label\">Tipo de Valor Ideal</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"tipoValorIdeal\" defaultValue={tipoValorIdealIndicador} onChange={this.updateTipoValorIdealIndicador} className=\"form-control\">\n                                                    <option value=\"numerico\">Numrico</option>\n                                                    <option value=\"porcentual\">Porcentual</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tolerancia\" className=\"col-form-label\">Tolerancia</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.state.mostrarToleranciaPorcentaje\n                                                    ? <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", background: \"url(../assets/percentage.png) no-repeat left\", backgroundSize: \"10px\", backgroundPosition: \"right center\", width: \"100%\"}}/>\n                                                    : <input id=\"tolerancia\" name=\"tolerancia\" step=\"1\" min=\"0\" type=\"number\" defaultValue={toleranciaIndicador} onChange={this.updateToleranciaIndicador} style={{textAlign: \"left\", width: \"100%\"}}/>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"periodicidad\" className=\"col-form-label\">Periodicidad</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <select id=\"periodicidad\" defaultValue={periodicidadIndicador} onChange={this.updatePeriodicidadIndicador} className=\"form-control\">\n                                                    <option value=\"-1\">Ninguno</option>\n                                                    {periodicidad.map((periodicidad, i) =>\n                                                        <option value={periodicidad.nombre} key={periodicidad.nombre}>{periodicidad.nombre}</option>\n                                                    )}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        {this.state.periodicidadIndicador.localeCompare(\"-1\") != 0\n                                            ?\n                                                <div className={\"row\"} style={{width: \"100%\"}}>\n                                                    <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                        <label htmlFor=\"fecha\" className=\"col-form-label\">Fecha de Inicio de Clculo:</label>\n                                                    </div>\n                                                    <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                        <input type=\"text\" className=\"form-control\" id=\"fecha\"/>\n                                                    </div>\n                                                </div>\n                                            : null\n                                        }\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"tipoIndicador\" className=\"col-form-label\">Tipo Indicador</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('ambos') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                            <option value=\"calidadGestion\">Calidad de Gestin</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('calidadGestin') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"calidadGestion\">Calidad de Gestin</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                                {\n                                                    this.props.formulaRiesgo.localeCompare('riesgoInherente') == 0\n                                                    ?   <select id=\"tipoIndicador\" defaultValue={tipoIndicador} onChange={this.updateTipoIndicador} className=\"form-control\">\n                                                            <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                        </select>\n                                                    : null\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                                <label htmlFor=\"analista\" className=\"col-form-label\">Nombre Encargado</label>\n                                            </div>\n                                            <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                                <input id=\"analista\" defaultValue={nombreEncargadoIndicador} onKeyUp={this.updateNombreEncargadoIndicador} type=\"text\" className=\"form-control form-control-sm\"/>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <div className={\"row\"} style={{width: \"100%\"}}>\n                                            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                                                <a className={\"btn btn-secondary btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.goToCreateFormula}>Crear Frmula</a>\n                                            </div>\n                                        </div>\n                                        <br/>\n                                        <hr/>\n                                        <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            <a className={\"btn btn-brand btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.crearIndicador}>Crear Indicador</a>\n                                        </div>\n                                        <br/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"crearFormula\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <Formula pool={this.props.pool}\n                                            anadirFormula={this.revisarTipoAnadirFormula}\n                                            retornoCampo={this.retornoCampoFormula}\n                                            retornoOperacion={this.retornoOperacion}\n                                            actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                            navbar={this.state.navbar}>\n                    </Formula>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"variableCondiciones\") == 0) {\n            return (\n                <div style={{width: \"100%\", height: \"100%\"}}>\n                    <InstruccionVariable pool={this.props.pool} retornarCampo={this.retornarCampo}\n                                                campos={this.props.columnas}\n                                                camposDropdown={[{valor: this.props.nombreTablaSeleccionada}]}\n                                                valoresDropdown={this.props.columnas}\n                                                asignaciones={this.state.formulas}\n                                                callbackCrearRegla={this.anadirRegla}\n                                                callbackModificarRegla={this.modificarRegla}\n                                                callbackEliminarRegla={this.eliminarRegla}\n                                                retornarIndiceSeleccionado={this.actualizarIndiceSeleccionadoReglas}\n                                                retornarEstadoVistaEsCondicion={() => {this.actualizarCondicion}}\n                                                retornoCampo={this.retornoCampoCondicion}\n                                                retornarValor={this.retornarValor}\n                                                retornoOperacion={this.retornoOperacion}\n                                                reglas={this.state.reglas}\n                                                navbar={this.state.navbar}\n                                                goToCreateFormula={this.goToCreateFormulaCampo}\n                                                configuracionHome={this.props.configuracionHome}\n                                                goOptions={this.props.goOptions}\n                                                actualizarNivelNuevaRegla={this.actualizarNivelNuevaRegla}\n                                                retornoSeleccionVariables={this.props.retornoSeleccionVariables}>\n                    </InstruccionVariable>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CrearIndicador.js"}