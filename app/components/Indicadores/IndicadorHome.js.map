{"version":3,"sources":["components/Indicadores/IndicadorHome.js"],"names":["IndicadorHome","props","state","componenteAMostrar","idIndicadorSeleccionado","nombreIndicadorSeleccionada","codigoIndicadorSeleccionada","formulaIndicadorSeleccionada","pesoIndicadorSeleccionada","toleranciaIndicadorSeleccionada","tipoValorIdealIndicadorSeleccionada","valorIdealIndicadorSeleccionada","periodicidadIndicadorSeleccionada","tipoIndicadorIndicadorSeleccionada","analistaIndicadorSeleccionada","fechaInicioCalculoSeleccionada","idRiesgoPadreSeleccionado","formulaRiesgo","pesoDisponibleRiesgo","indicadores","terminoSeleccionIndicador","bind","retornoSeleccionIndicador","goCrearIndicador","goEditarIndicador","terminoCrearIndicadorPasarAEdit","id","formula","setState","idRiesgo","pesoDisponible","idIndicador","nombreIndicador","codigoIndicador","formulaIndicador","pesoIndicador","toleranciaIndicador","tipoValorIdealIndicador","valorIdealIndicador","periodicidadIndicador","tipoIndicadorIndicador","analistaIndicador","fechaInicioCalculo","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","length","ID","nombre","codigo","peso","tolerancia","tipoValorIdeal","periodicidad","tipoIndicador","analista","localeCompare","configuracionHome","showRiesgos","updateBanderaCrearRiesgoTrue","showCondicionVar","showFormula","tipoToleranciaIndicadorSeleccionada","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarIndicador from './SeleccionarIndicador.js';\nimport CrearIndicador from './CrearIndicador/CrearIndicador.js';\nimport EditarIndicador from './EditarIndicador/EditarIndicador.js';\n\nexport default class IndicadorHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            nombreIndicadorSeleccionada: \"\",\n            codigoIndicadorSeleccionada: \"\",\n            formulaIndicadorSeleccionada: \"\",\n            pesoIndicadorSeleccionada: \"\",\n            toleranciaIndicadorSeleccionada: \"\",\n            tipoValorIdealIndicadorSeleccionada: \"\",\n            valorIdealIndicadorSeleccionada: \"\",\n            periodicidadIndicadorSeleccionada: \"\",\n            tipoIndicadorIndicadorSeleccionada: \"\",\n            analistaIndicadorSeleccionada: \"\",\n            fechaInicioCalculoSeleccionada: \"\",\n            idRiesgoPadreSeleccionado: -1,\n            formulaRiesgo: \"\",\n            pesoDisponibleRiesgo: 0,\n            indicadores: []\n        }\n        this.terminoSeleccionIndicador = this.terminoSeleccionIndicador.bind(this);\n        this.retornoSeleccionIndicador = this.retornoSeleccionIndicador.bind(this);\n        this.goCrearIndicador = this.goCrearIndicador.bind(this);\n        this.goEditarIndicador = this.goEditarIndicador.bind(this);\n        this.terminoCrearIndicadorPasarAEdit = this.terminoCrearIndicadorPasarAEdit.bind(this);\n    }\n\n    terminoSeleccionIndicador (id, formula) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idIndicadorSeleccionado: id,\n            formulaRiesgo: formula\n        });\n    }\n\n    retornoSeleccionIndicador () {\n        this.setState({\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            idRiesgoPadreSeleccionado: -1\n        });\n    }\n\n    goCrearIndicador (idRiesgo, formula, pesoDisponible) {\n        this.setState({\n            componenteAMostrar: \"crearIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible\n        });\n    }\n\n    goEditarIndicador (idRiesgo, formula, pesoDisponible, idIndicador, nombreIndicador, codigoIndicador, formulaIndicador, pesoIndicador, toleranciaIndicador, tipoValorIdealIndicador, valorIdealIndicador, periodicidadIndicador, tipoIndicadorIndicador, analistaIndicador, fechaInicioCalculo, indicadores) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible,\n            idIndicadorSeleccionado: idIndicador,\n            nombreIndicadorSeleccionada: nombreIndicador,\n            codigoIndicadorSeleccionada: codigoIndicador,\n            formulaIndicadorSeleccionada: formulaIndicador,\n            pesoIndicadorSeleccionada: pesoIndicador,\n            toleranciaIndicadorSeleccionada: toleranciaIndicador,\n            tipoValorIdealIndicadorSeleccionada: tipoValorIdealIndicador,\n            valorIdealIndicadorSeleccionada: valorIdealIndicador,\n            periodicidadIndicadorSeleccionada: periodicidadIndicador,\n            tipoIndicadorIndicadorSeleccionada: tipoIndicadorIndicador,\n            analistaIndicadorSeleccionada: analistaIndicador,\n            fechaInicioCalculoSeleccionada: fechaInicioCalculo,\n            indicadores: indicadores\n        });\n    }\n\n    terminoCrearIndicadorPasarAEdit (nombreIndicador) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Indicadores order by ID desc\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length) {\n                            this.goEditarIndicador(this.state.idRiesgoPadreSeleccionado, this.state.formulaRiesgo, this.state.pesoDisponibleRiesgo, result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].codigo, result.recordset[0].formula, result.recordset[0].peso, result.recordset[0].tolerancia, result.recordset[0].tipoValorIdeal, result.recordset[0].periodicidad, result.recordset[0].tipoIndicador, result.recordset[0].analista, result.recordset[0].fechaInicioCalculo);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteAMostrar.localeCompare(\"selIndicador\") == 0) {\n            return (\n                <div>\n                    <SeleccionarIndicador pool={this.props.pool}\n                                        configuracionHome={this.props.configuracionHome}\n                                        terminoSeleccionIndicador={this.terminoSeleccionIndicador}\n                                        goCrearIndicador={this.goCrearIndicador}\n                                        showRiesgos={this.props.showRiesgos}\n                                        showRiesgos={this.props.showRiesgos}\n                                        updateBanderaCrearRiesgoTrue={this.props.updateBanderaCrearRiesgoTrue}\n                                        goEditarIndicador={this.goEditarIndicador}></SeleccionarIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <CrearIndicador pool={this.props.pool}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    terminoCrearIndicadorPasarAEdit={this.terminoCrearIndicadorPasarAEdit}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}> </CrearIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"editIndicador\") == 0) {\n            return (\n                <div>\n                    <EditarIndicador pool={this.props.pool}\n                                    showFormula={this.props.showFormula}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}\n                                    idIndicadorSeleccionado={this.state.idIndicadorSeleccionado}\n                                    nombreIndicadorSeleccionada={this.state.nombreIndicadorSeleccionada}\n                                    codigoIndicadorSeleccionada={this.state.codigoIndicadorSeleccionada}\n                                    formulaIndicadorSeleccionada={this.state.formulaIndicadorSeleccionada}\n                                    pesoIndicadorSeleccionada={this.state.pesoIndicadorSeleccionada}\n                                    toleranciaIndicadorSeleccionada={this.state.toleranciaIndicadorSeleccionada}\n                                    tipoToleranciaIndicadorSeleccionada={this.state.tipoToleranciaIndicadorSeleccionada}\n                                    valorIdealIndicadorSeleccionada={this.state.valorIdealIndicadorSeleccionada}\n                                    periodicidadIndicadorSeleccionada={this.state.periodicidadIndicadorSeleccionada}\n                                    tipoIndicadorIndicadorSeleccionada={this.state.tipoIndicadorIndicadorSeleccionada}\n                                    analistaIndicadorSeleccionada={this.state.analistaIndicadorSeleccionada}\n                                    indicadores={this.state.indicadores}> </EditarIndicador>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"IndicadorHome.js"}