{"version":3,"sources":["components/Indicadores/IndicadorHome.js"],"names":["IndicadorHome","props","state","componenteAMostrar","idIndicadorSeleccionado","nombreIndicadorSeleccionada","codigoIndicadorSeleccionada","formulaIndicadorSeleccionada","pesoIndicadorSeleccionada","toleranciaIndicadorSeleccionada","tipoToleranciaIndicadorSeleccionada","valorIdealIndicadorSeleccionada","periodicidadIndicadorSeleccionada","tipoIndicadorIndicadorSeleccionada","analistaIndicadorSeleccionada","idRiesgoPadreSeleccionado","formulaRiesgo","pesoDisponibleRiesgo","terminoSeleccionIndicador","bind","retornoSeleccionIndicador","goCrearIndicador","terminoCrearIndicadorPasarAEdit","id","formula","setState","idRiesgo","pesoDisponible","idIndicador","nombreIndicador","codigoIndicador","formulaIndicador","pesoIndicador","toleranciaIndicador","tipoToleranciaIndicador","valorIdealIndicador","periodicidadIndicador","tipoIndicadorIndicador","analistaIndicador","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","length","ID","nombre","localeCompare","configuracionHome","showRiesgos","updateBanderaCrearRiesgoTrue","showCondicionVar","showFormula","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarIndicador from './SeleccionarIndicador.js';\nimport CrearIndicador from './CrearIndicador/CrearIndicador.js';\nimport EditarIndicador from './EditarIndicador.js';\n\nexport default class IndicadorHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            nombreIndicadorSeleccionada: \"\",\n            codigoIndicadorSeleccionada: \"\",\n            formulaIndicadorSeleccionada: \"\",\n            pesoIndicadorSeleccionada: \"\",\n            toleranciaIndicadorSeleccionada: \"\",\n            tipoToleranciaIndicadorSeleccionada: \"\",\n            valorIdealIndicadorSeleccionada: \"\",\n            periodicidadIndicadorSeleccionada: \"\",\n            tipoIndicadorIndicadorSeleccionada: \"\",\n            analistaIndicadorSeleccionada: \"\",\n            idRiesgoPadreSeleccionado: -1,\n            formulaRiesgo: \"\",\n            pesoDisponibleRiesgo: 0\n        }\n        this.terminoSeleccionIndicador = this.terminoSeleccionIndicador.bind(this);\n        this.retornoSeleccionIndicador = this.retornoSeleccionIndicador.bind(this);\n        this.goCrearIndicador = this.goCrearIndicador.bind(this);\n        this.terminoCrearIndicadorPasarAEdit = this.terminoCrearIndicadorPasarAEdit.bind(this);\n    }\n\n    terminoSeleccionIndicador (id, formula) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idIndicadorSeleccionado: id,\n            formulaRiesgo: formula\n        });\n    }\n\n    retornoSeleccionIndicador () {\n        this.setState({\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            idRiesgoPadreSeleccionado: -1\n        });\n    }\n\n    goCrearIndicador (idRiesgo, formula, pesoDisponible) {\n        this.setState({\n            componenteAMostrar: \"crearIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible\n        });\n    }\n\n    goEditarIndicador (idRiesgo, formula, pesoDisponible, idIndicador, nombreIndicador, codigoIndicador, formulaIndicador, pesoIndicador, toleranciaIndicador, tipoToleranciaIndicador, valorIdealIndicador, periodicidadIndicador, tipoIndicadorIndicador, analistaIndicador) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible,\n            idIndicadorSeleccionado: idIndicador,\n            nombreIndicadorSeleccionada: nombreIndicador,\n            codigoIndicadorSeleccionada: codigoIndicador,\n            formulaIndicadorSeleccionada: formulaIndicador,\n            pesoIndicadorSeleccionada: pesoIndicador,\n            toleranciaIndicadorSeleccionada: toleranciaIndicador,\n            tipoToleranciaIndicadorSeleccionada: tipoToleranciaIndicador,\n            valorIdealIndicadorSeleccionada: valorIdealIndicador,\n            periodicidadIndicadorSeleccionada: periodicidadIndicador,\n            tipoIndicadorIndicadorSeleccionada: tipoIndicadorIndicador,\n            analistaIndicadorSeleccionada: analistaIndicador\n        });\n    }\n\n    terminoCrearIndicadorPasarAEdit (nombreIndicador) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Indicadores where nombre = '\"+nombreIndicador+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length) {\n                            this.terminoSeleccionIndicador(result.recordset[0].ID, result.recordset[0].nombre);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteAMostrar.localeCompare(\"selIndicador\") == 0) {\n            return (\n                <div>\n                    <SeleccionarIndicador pool={this.props.pool}\n                                        configuracionHome={this.props.configuracionHome}\n                                        terminoSeleccionIndicador={this.terminoSeleccionIndicador}\n                                        goCrearIndicador={this.goCrearIndicador}\n                                        showRiesgos={this.props.showRiesgos}\n                                        showRiesgos={this.props.showRiesgos}\n                                        updateBanderaCrearRiesgoTrue={this.props.updateBanderaCrearRiesgoTrue}></SeleccionarIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <CrearIndicador pool={this.props.pool}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    terminoCrearIndicadorPasarAEdit={this.terminoCrearIndicadorPasarAEdit}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}> </CrearIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"editIndicador\") == 0) {\n            return (\n                <div>\n                    <EditarIndicador pool={this.props.pool}\n                                    showFormula={this.props.showFormula}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}\n                                    idIndicadorSeleccionado={this.state.idIndicadorSeleccionado}\n                                    nombreIndicadorSeleccionada={this.state.nombreIndicadorSeleccionada}\n                                    codigoIndicadorSeleccionada={this.state.codigoIndicadorSeleccionada}\n                                    formulaIndicadorSeleccionada={this.state.formulaIndicadorSeleccionada}\n                                    pesoIndicadorSeleccionada={this.state.pesoIndicadorSeleccionada}\n                                    toleranciaIndicadorSeleccionada={this.state.toleranciaIndicadorSeleccionada}\n                                    tipoToleranciaIndicadorSeleccionada={this.state.tipoToleranciaIndicadorSeleccionada}\n                                    valorIdealIndicadorSeleccionada={this.state.valorIdealIndicadorSeleccionada}\n                                    periodicidadIndicadorSeleccionada={this.state.periodicidadIndicadorSeleccionada}\n                                    tipoIndicadorIndicadorSeleccionada={this.state.tipoIndicadorIndicadorSeleccionada}\n                                    analistaIndicadorSeleccionada={this.state.analistaIndicadorSeleccionada}> </EditarIndicador>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"IndicadorHome.js"}