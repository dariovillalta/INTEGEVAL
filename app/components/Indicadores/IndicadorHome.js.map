{"version":3,"sources":["components/Indicadores/IndicadorHome.js"],"names":["IndicadorHome","props","state","componenteAMostrar","idIndicadorSeleccionado","nombreIndicadorSeleccionada","terminoSeleccionIndicador","bind","retornoSeleccionIndicador","goCrearIndicador","terminoCrearIndicadorPasarAEdit","id","nombre","setState","nombreTablaSeleccionada","nombreIndicador","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","length","ID","localeCompare","configuracionHome","showFormula","showCondicionVar","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarIndicador from './SeleccionarIndicador.js';\nimport CrearIndicador from './CrearIndicador.js';\n\nexport default class IndicadorHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            nombreIndicadorSeleccionada: \"\"\n        }\n        this.terminoSeleccionIndicador = this.terminoSeleccionIndicador.bind(this);\n        this.retornoSeleccionIndicador = this.retornoSeleccionIndicador.bind(this);\n        this.goCrearIndicador = this.goCrearIndicador.bind(this);\n        this.terminoCrearIndicadorPasarAEdit = this.terminoCrearIndicadorPasarAEdit.bind(this);\n    }\n\n    terminoSeleccionIndicador (id, nombre) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idIndicadorSeleccionado: id,\n            nombreTablaSeleccionada: nombre\n        });\n    }\n\n    retornoSeleccionIndicador () {\n        this.setState({\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            nombreTablaSeleccionada: \"\"\n        });\n    }\n\n    goCrearIndicador () {\n        this.setState({\n            componenteAMostrar: \"crearIndicador\"\n        });\n    }\n\n    terminoCrearIndicadorPasarAEdit (nombreIndicador) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Indicadores where nombre = '\"+nombreIndicador+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length) {\n                            this.terminoSeleccionIndicador(result.recordset[0].ID, result.recordset[0].nombre);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteAMostrar.localeCompare(\"selIndicador\") == 0) {\n            return (\n                <div>\n                    <SeleccionarIndicador pool={this.props.pool} configuracionHome={this.props.configuracionHome} terminoSeleccionIndicador={this.terminoSeleccionIndicador} goCrearIndicador={this.goCrearIndicador}> </SeleccionarIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <CrearIndicador pool={this.props.pool} showFormula={this.props.showFormula} showCondicionVar={this.props.showCondicionVar} retornoSeleccionIndicador={this.retornoSeleccionIndicador} configuracionHome={this.props.configuracionHome} terminoCrearIndicadorPasarAEdit={this.terminoCrearIndicadorPasarAEdit} riesgoPadre={-1}> </CrearIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"editIndicador\") == 0) {\n            return (\n                <div>\n                    <CrearIndicador pool={this.props.pool} showFormula={this.props.showFormula} showCondicionVar={this.props.showCondicionVar} retornoSeleccionIndicador={this.retornoSeleccionIndicador} configuracionHome={this.props.configuracionHome} idIndicadorSeleccionado={this.state.idIndicadorSeleccionado} nombreIndicadorSeleccionada={this.state.nombreIndicadorSeleccionada}> </CrearIndicador>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"IndicadorHome.js"}