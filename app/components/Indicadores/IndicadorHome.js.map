{"version":3,"sources":["components/Indicadores/IndicadorHome.js"],"names":["IndicadorHome","props","state","componenteAMostrar","idIndicadorSeleccionado","idFormulaIndicadorSeleccionada","nombreIndicadorSeleccionada","codigoIndicadorSeleccionada","formulaIndicadorSeleccionada","pesoIndicadorSeleccionada","toleranciaIndicadorSeleccionada","tipoValorIdealIndicadorSeleccionada","valorIdealIndicadorSeleccionada","periodicidadIndicadorSeleccionada","tipoIndicadorIndicadorSeleccionada","analistaIndicadorSeleccionada","fechaInicioCalculoSeleccionada","idRiesgoPadreSeleccionado","formulaRiesgo","pesoDisponibleRiesgo","indicadoresSeleccionados","riesgos","indicadores","getIndicators","bind","terminoSeleccionIndicador","retornoSeleccionIndicador","goCrearIndicador","goEditarIndicador","terminoCrearIndicadorPasarAEdit","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","arregloTemp","i","length","insertIndicator","ID","riesgoID","index","array","undefined","$","merge","id","formula","idRiesgo","pesoDisponible","idIndicador","idFormula","nombreIndicador","codigoIndicador","formulaIndicador","pesoIndicador","toleranciaIndicador","tipoValorIdealIndicador","valorIdealIndicador","periodicidadIndicador","tipoIndicadorIndicador","analistaIndicador","fechaInicioCalculo","nombre","codigo","peso","tolerancia","tipoValorIdeal","periodicidad","tipoIndicador","analista","localeCompare","configuracionHome","showRiesgos","updateBanderaCrearRiesgoTrue","permision","showCondicionVar","showFormula","tipoToleranciaIndicadorSeleccionada","userID","userName","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarIndicador from './SeleccionarIndicador.js';\nimport CrearIndicador from './CrearIndicador/CrearIndicador.js';\nimport EditarIndicador from './EditarIndicador/EditarIndicador.js';\n\nexport default class IndicadorHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            idFormulaIndicadorSeleccionada: \"\",\n            nombreIndicadorSeleccionada: \"\",\n            codigoIndicadorSeleccionada: \"\",\n            formulaIndicadorSeleccionada: \"\",\n            pesoIndicadorSeleccionada: \"\",\n            toleranciaIndicadorSeleccionada: \"\",\n            tipoValorIdealIndicadorSeleccionada: \"\",\n            valorIdealIndicadorSeleccionada: \"\",\n            periodicidadIndicadorSeleccionada: \"\",\n            tipoIndicadorIndicadorSeleccionada: \"\",\n            analistaIndicadorSeleccionada: \"\",\n            fechaInicioCalculoSeleccionada: \"\",\n            idRiesgoPadreSeleccionado: -1,\n            formulaRiesgo: \"\",\n            pesoDisponibleRiesgo: 0,\n            indicadoresSeleccionados: [],\n            riesgos: [],\n            indicadores: []\n        }\n        this.getIndicators = this.getIndicators.bind(this);\n        this.terminoSeleccionIndicador = this.terminoSeleccionIndicador.bind(this);\n        this.retornoSeleccionIndicador = this.retornoSeleccionIndicador.bind(this);\n        this.goCrearIndicador = this.goCrearIndicador.bind(this);\n        this.goEditarIndicador = this.goEditarIndicador.bind(this);\n        this.terminoCrearIndicadorPasarAEdit = this.terminoCrearIndicadorPasarAEdit.bind(this);\n    }\n\n    componentDidMount() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Riesgos\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            riesgos: result.recordset\n                        });\n                        this.getIndicators();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getIndicators() {\n        var arregloTemp = [];\n        for (var i = 0; i < this.state.riesgos.length; i++) {\n            this.insertIndicator(this.state.riesgos[i].ID, i, arregloTemp);\n        };\n    }\n\n    insertIndicator(riesgoID, index, array) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Indicadores where idRiesgoPadre = \"+riesgoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(array[index] == undefined) {\n                            array[index] = [];\n                        }\n                        array[index] = $.merge(array[index], result.recordset);\n                        this.setState({\n                            indicadores: array\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    terminoSeleccionIndicador (id, formula) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idIndicadorSeleccionado: id,\n            formulaRiesgo: formula\n        });\n    }\n\n    retornoSeleccionIndicador () {\n        this.setState({\n            componenteAMostrar: \"selIndicador\",\n            idIndicadorSeleccionado: -1,\n            idRiesgoPadreSeleccionado: -1\n        });\n    }\n\n    goCrearIndicador (idRiesgo, formula, pesoDisponible) {\n        this.setState({\n            componenteAMostrar: \"crearIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible\n        });\n    }\n\n    goEditarIndicador (idRiesgo, formula, pesoDisponible, idIndicador, idFormula, nombreIndicador, codigoIndicador, formulaIndicador, pesoIndicador, toleranciaIndicador, tipoValorIdealIndicador, valorIdealIndicador, periodicidadIndicador, tipoIndicadorIndicador, analistaIndicador, fechaInicioCalculo, indicadores) {\n        this.setState({\n            componenteAMostrar: \"editIndicador\",\n            idRiesgoPadreSeleccionado: idRiesgo,\n            formulaRiesgo: formula,\n            pesoDisponibleRiesgo: pesoDisponible,\n            idIndicadorSeleccionado: idIndicador,\n            idFormulaIndicadorSeleccionada: idFormula,\n            nombreIndicadorSeleccionada: nombreIndicador,\n            codigoIndicadorSeleccionada: codigoIndicador,\n            formulaIndicadorSeleccionada: formulaIndicador,\n            pesoIndicadorSeleccionada: pesoIndicador,\n            toleranciaIndicadorSeleccionada: toleranciaIndicador,\n            tipoValorIdealIndicadorSeleccionada: tipoValorIdealIndicador,\n            valorIdealIndicadorSeleccionada: valorIdealIndicador,\n            periodicidadIndicadorSeleccionada: periodicidadIndicador,\n            tipoIndicadorIndicadorSeleccionada: tipoIndicadorIndicador,\n            analistaIndicadorSeleccionada: analistaIndicador,\n            fechaInicioCalculoSeleccionada: fechaInicioCalculo,\n            indicadoresSeleccionados: indicadores\n        });\n    }\n\n    terminoCrearIndicadorPasarAEdit (nombreIndicador) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select top 1 * from Indicadores order by ID desc\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length) {\n                            var indicadores;\n                            for (var i = 0; i < this.state.riesgos.length; i++) {\n                                if (this.state.idRiesgoPadreSeleccionado === this.state.riesgos[i].ID) {\n                                    indicadores = this.state.indicadores[i];\n                                    break;\n                                }\n                            };\n                            this.goEditarIndicador(this.state.idRiesgoPadreSeleccionado, this.state.formulaRiesgo, this.state.pesoDisponibleRiesgo, result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].codigo, result.recordset[0].formula, result.recordset[0].peso, result.recordset[0].tolerancia, result.recordset[0].tipoValorIdeal, result.recordset[0].periodicidad, result.recordset[0].tipoIndicador, result.recordset[0].analista, result.recordset[0].fechaInicioCalculo, indicadores);\n                            this.getIndicators();\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        if(this.state.componenteAMostrar.localeCompare(\"selIndicador\") == 0) {\n            return (\n                <div>\n                    <SeleccionarIndicador pool={this.props.pool}\n                                        configuracionHome={this.props.configuracionHome}\n                                        terminoSeleccionIndicador={this.terminoSeleccionIndicador}\n                                        goCrearIndicador={this.goCrearIndicador}\n                                        showRiesgos={this.props.showRiesgos}\n                                        riesgos={this.state.riesgos}\n                                        indicadores={this.state.indicadores}\n                                        updateBanderaCrearRiesgoTrue={this.props.updateBanderaCrearRiesgoTrue}\n                                        goEditarIndicador={this.goEditarIndicador}\n                                        permision={this.props.permision}></SeleccionarIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"crearIndicador\") == 0) {\n            return (\n                <div>\n                    <CrearIndicador pool={this.props.pool}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    terminoCrearIndicadorPasarAEdit={this.terminoCrearIndicadorPasarAEdit}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}> </CrearIndicador>\n                </div>\n            );\n        } else if(this.state.componenteAMostrar.localeCompare(\"editIndicador\") == 0) {\n            return (\n                <div>\n                    <EditarIndicador pool={this.props.pool}\n                                    showFormula={this.props.showFormula}\n                                    showCondicionVar={this.props.showCondicionVar}\n                                    retornoSeleccionIndicador={this.retornoSeleccionIndicador}\n                                    configuracionHome={this.props.configuracionHome}\n                                    riesgoPadre={this.state.idRiesgoPadreSeleccionado}\n                                    formulaRiesgo={this.state.formulaRiesgo}\n                                    pesoDisponibleRiesgo={this.state.pesoDisponibleRiesgo}\n                                    idIndicadorSeleccionado={this.state.idIndicadorSeleccionado}\n                                    idFormulaIndicadorSeleccionada={this.state.idFormulaIndicadorSeleccionada}\n                                    nombreIndicadorSeleccionada={this.state.nombreIndicadorSeleccionada}\n                                    codigoIndicadorSeleccionada={this.state.codigoIndicadorSeleccionada}\n                                    formulaIndicadorSeleccionada={this.state.formulaIndicadorSeleccionada}\n                                    pesoIndicadorSeleccionada={this.state.pesoIndicadorSeleccionada}\n                                    toleranciaIndicadorSeleccionada={this.state.toleranciaIndicadorSeleccionada}\n                                    tipoToleranciaIndicadorSeleccionada={this.state.tipoToleranciaIndicadorSeleccionada}\n                                    valorIdealIndicadorSeleccionada={this.state.valorIdealIndicadorSeleccionada}\n                                    periodicidadIndicadorSeleccionada={this.state.periodicidadIndicadorSeleccionada}\n                                    tipoIndicadorIndicadorSeleccionada={this.state.tipoIndicadorIndicadorSeleccionada}\n                                    analistaIndicadorSeleccionada={this.state.analistaIndicadorSeleccionada}\n                                    indicadores={this.state.indicadoresSeleccionados}\n                                    permision={this.props.permision}\n                                    getIndicators={this.getIndicators}\n                                    userID={this.props.userID}\n                                    userName={this.props.userName} > </EditarIndicador>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"IndicadorHome.js"}