{"version":3,"sources":["components/CrearTipoCredito.js"],"names":["CrearTipoCredito","props","state","errorCreacionTipoCredito","campo","descripcion","mostrar","mensajeModal","mostrarMensaje","mensajeConfirmado","esError","esConfirmar","titulo","mensaje","guardarTipoCredito","bind","dismissTypeCreditNewError","showSuccesMessage","dismissMessageModal","nombre","$","val","length","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","tablaID","result","console","log","rollback","commit","descripcionN","setState","guardarCampo","self","setTimeout","showConfigurationComponent","retornoTablas","retornoSelCreditos","width","color","fontSize","fontWeight","confirmMessageModal","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport ErrorMessage from './ErrorMessage.js';\nimport MessageModal from './MessageModal.js';\n\nexport default class CrearTipoCredito extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            errorCreacionTipoCredito: {campo: \"\", descripcion: \"\", mostrar: false},\n            mensajeModal: {mostrarMensaje: false, mensajeConfirmado: false, esError: false, esConfirmar: false, titulo: \"\", mensaje: \"\"}\n        }\n        this.guardarTipoCredito = this.guardarTipoCredito.bind(this);\n        this.dismissTypeCreditNewError = this.dismissTypeCreditNewError.bind(this);\n        this.showSuccesMessage = this.showSuccesMessage.bind(this);\n        this.dismissMessageModal = this.dismissMessageModal.bind(this);\n    }\n\n    guardarTipoCredito() {\n        let nombre = $(\"#nombreTipoCredito\").val();\n        let descripcion = $(\"#descripcionTipoCredito\").val();\n        if(nombre.length > 0 && nombre.length < 41) {\n            if(descripcion.length < 701) {\n                const transaction = new sql.Transaction( this.props.pool );\n                transaction.begin(err => {\n                    var rolledBack = false;\n                    transaction.on('rollback', aborted => {\n                        rolledBack = true;\n                    });\n                    const request = new sql.Request(transaction);\n                    request.query(\"insert into TipoCredito (tablaID, nombre, descripcion) values (\"+this.props.tablaID+\", '\"+nombre+\"', '\"+descripcion+\"')\", (err, result) => {\n                        if (err) {\n                            if (!rolledBack) {\n                                console.log(err);\n                                transaction.rollback(err => {\n                                });\n                            }\n                        } else {\n                            transaction.commit(err => {\n                                this.showSuccesMessage(\"Exito\", \"Tipo de crédito creado con éxito.\");\n                            });\n                        }\n                    });\n                }); // fin transaction\n            } else {\n                let campo = \"Descripción\";\n                let descripcionN;\n                if(descripcion.length > 700)\n                    descripcionN = \"El campo debe tener una longitud menor a 700.\";\n                this.setState({\n                    errorCreacionTipoCredito: {campo: campo, descripcion: descripcionN, mostrar: true}\n                });\n            }\n        } else {\n            let campo = \"Nombre\";\n            let descripcion;\n            if(nombre.length == 0)\n                descripcion = \"El campo debe tener una longitud mayor a 0.\";\n            else if(guardarCampo.length > 700)\n                descripcion = \"El campo debe tener una longitud menor a 700.\";\n            this.setState({\n                errorCreacionTipoCredito: {campo: campo, descripcion: descripcion, mostrar: true}\n            });\n        }\n    }\n\n    dismissTypeCreditNewError() {\n        this.setState({\n            errorCreacionTipoCredito: {campo: \"\", descripcion: \"\", mostrar: false}\n        });\n    }\n\n    showSuccesMessage(titulo, mensaje) {\n        this.setState({\n            mensajeModal: {mostrarMensaje: true, mensajeConfirmado: false, esError: false, esConfirmar: false, titulo: titulo, mensaje: mensaje}\n        });\n        let self = this;\n        setTimeout(function(){\n            self.setState({\n                mensajeModal: {mostrarMensaje: false, mensajeConfirmado: false, esError: false, esConfirmar: false, titulo: \"\", mensaje: \"\"}\n            });\n        }, 850);\n    }\n\n    dismissMessageModal() {\n        this.setState({\n            mensajeModal: {mostrarMensaje: false, mensajeConfirmado: false, esError: false, esConfirmar: false, titulo: \"\", mensaje: \"\"}\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"page-header\"}>\n                            <h2 className={\"pageheader-title\"}>Configuraci&oacute;n</h2>\n                            <div className={\"page-breadcrumb\"}>\n                                <nav aria-label=\"breadcrumb\">\n                                    <ol className={\"breadcrumb\"}>\n                                        <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.showConfigurationComponent}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                        <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.retornoTablas}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Tabla</a></li>\n                                        <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.retornoSelCreditos}><a href=\"#\" className={\"breadcrumb-link\"}>Seleccionar Cr&eacute;dito</a></li>\n                                        <li className={\"breadcrumb-item active\"} aria-current=\"page\">Crear Cr&eacute;dito</li>\n                                    </ol>\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-12\"}>\n                        <div className={\"card\"} style={{width: \"100%\"}}>\n                            <div className={\"card-body\"} style={{width: \"100%\"}}>\n                                <div className={\"d-inline-block text-center form-group\"} style={{width: \"100%\"}}>\n                                    <h2 className=\"text-muted\">Nombre</h2>\n                                    <input id=\"nombreTipoCredito\" type=\"text\" style={{width: \"100%\"}} className={\"form-control\"}/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"col-xl-12 col-12\"}>\n                        <div className={\"card\"} style={{width: \"100%\"}}>\n                            <div className={\"card-body\"} style={{width: \"100%\"}}>\n                                <div className={\"d-inline-block text-center form-group\"} style={{width: \"100%\"}}>\n                                    <h2 className=\"text-muted\">Descripci&oacute;n</h2>\n                                    <textarea id=\"descripcionTipoCredito\" type=\"text\" style={{width: \"100%\"}} className={\"form-control\"}></textarea>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                { this.state.errorCreacionTipoCredito.mostrar ? (\n                    <ErrorMessage campo={this.state.errorCreacionTipoCredito.campo} descripcion={this.state.errorCreacionTipoCredito.descripcion} dismissTableError={this.dismissTypeCreditNewError}> </ErrorMessage>\n                ) : (\n                    <span></span>\n                )}\n                <div className={\"text-center\"}>\n                    <a onClick={this.guardarTipoCredito} className={\"btn btn-primary col-xs-6 col-6\"} style={{color: \"white\", fontSize: \"1.2em\", fontWeight: \"bold\"}}>Crear</a>\n                </div>\n                { this.state.mensajeModal.mostrarMensaje ? (\n                    <MessageModal esError={this.state.mensajeModal.esError} esConfirmar={this.state.mensajeModal.esConfirmar} dismissMessage={this.dismissMessageModal} confirmFunction={this.confirmMessageModal} titulo={this.state.mensajeModal.titulo} mensaje={this.state.mensajeModal.mensaje}> </MessageModal>\n                ) : (\n                    <span></span>\n                )}\n            </div>\n        );\n    }\n}\n"],"file":"CrearTipoCredito.js"}