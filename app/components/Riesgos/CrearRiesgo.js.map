{"version":3,"sources":["components/Riesgos/CrearRiesgo.js"],"names":["tipoCampos","nombre","CrearRiesgo","props","state","x","crearRiesgo","bind","$","val","formula","peso","tolerancia","parseInt","valorIdeal","riesgoPadre","nivel","undefined","console","log","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","rollback","commit","terminoCrearRiesgo","actualizarRiesgos","configuracionHome","retornoSeleccionRiesgo","width","pesoMaximo","setState","marginTop","riesgos","map","riesgo","i","ID","display","alignItems","justifyContent","color","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,GAAG,CAAE;AAACC,EAAAA,MAAM,EAAE;AAAT,CAAF,EAAqB;AAACA,EAAAA,MAAM,EAAE;AAAT,CAArB,EAA2C;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA3C,EAA8D;AAACA,EAAAA,MAAM,EAAE;AAAT,CAA9D,EAAkF;AAACA,EAAAA,MAAM,EAAE;AAAT,CAAlF,CAAnB;;IAEqBC,W;;;;;AACjB,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,qFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,CAAC,EAAE;AADM,KAAb;AAGA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB;AALe;AAMlB;;;;kCAEc;AAAA;;AACX,UAAIN,MAAM,GAAGO,CAAC,CAAC,eAAD,CAAD,CAAmBC,GAAnB,EAAb;AACA,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIC,IAAI,GAAG,KAAKP,KAAL,CAAWC,CAAtB;AACA,UAAIO,UAAU,GAAGC,QAAQ,CAACL,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAD,CAAzB;AACA,UAAIK,UAAU,GAAGD,QAAQ,CAACL,CAAC,CAAC,aAAD,CAAD,CAAiBC,GAAjB,EAAD,CAAzB;AACA,UAAIM,WAAW,GAAGF,QAAQ,CAAC,KAAKV,KAAL,CAAWY,WAAZ,CAA1B;AACA,UAAIC,KAAK,GAAG,CAAZ;;AACA,UAAG,KAAKb,KAAL,CAAWY,WAAX,IAA0BE,SAA1B,IAAuC,KAAKd,KAAL,CAAWY,WAAX,IAA0B,CAAC,CAArE,EAAwE;AACpEA,QAAAA,WAAW,GAAGF,QAAQ,CAACL,CAAC,CAAC,cAAD,CAAD,CAAkBC,GAAlB,EAAD,CAAtB;AACH;;AACDS,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYlB,MAAZ;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYT,OAAZ;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYP,UAAZ;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYL,UAAZ;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYJ,WAAZ;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACA,UAAMI,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKnB,KAAL,CAAWoB,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,kHAAgH9B,MAAhH,GAAuH,MAAvH,GAA8HS,OAA9H,GAAsI,KAAtI,GAA4IC,IAA5I,GAAiJ,IAAjJ,GAAsJC,UAAtJ,GAAiK,IAAjK,GAAsKE,UAAtK,GAAiL,IAAjL,GAAsLC,WAAtL,GAAkM,IAAlM,GAAuMC,KAAvM,GAA6M,GAA3N,EAAgO,UAACS,GAAD,EAAMO,MAAN,EAAiB;AAC7O,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbR,cAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACAL,cAAAA,WAAW,CAACa,QAAZ,CAAqB,UAAAR,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACc,MAAZ,CAAmB,UAAAT,GAAG,EAAI;AACtB,cAAA,MAAI,CAACtB,KAAL,CAAWgC,kBAAX;;AACA,cAAA,MAAI,CAAChC,KAAL,CAAWiC,iBAAX;AACH,aAHD;AAIH;AACJ,SAbD;AAcH,OApBD,EA1BW,CA8CP;AACP;;;6BAEQ;AAAA;;AACL,aACI,6CACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,wBADJ,EAEI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,sBAAW;AAAhB,SACI;AAAI,QAAA,SAAS,EAAE;AAAf,SACI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKjC,KAAL,CAAWkC;AAAlF,SAAqG;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,4BAArG,CADJ,EAEI;AAAI,QAAA,SAAS,EAAE,yBAAf;AAA0C,wBAAa,MAAvD;AAA8D,QAAA,OAAO,EAAE,KAAKlC,KAAL,CAAWmC;AAAlF,SAA0G;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAE;AAAvB,mBAA1G,CAFJ,EAGI;AAAI,QAAA,SAAS,EAAE,gCAAf;AAAiD,wBAAa;AAA9D,wBAHJ,CADJ,CADJ,CAFJ,CADJ,CADJ,CADJ,EAiBI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE,6CAAhB;AAA+D,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE;AAAR;AAAtE,SACI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,cAAf;AAA8B,QAAA,SAAS,EAAC;AAAxC,yBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,EAAE,EAAC,cAAV;AAAyB,QAAA,IAAI,EAAC,MAA9B;AAAqC,QAAA,SAAS,EAAC;AAA/C,QADJ,CAJJ,CADJ,EASI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,cAAf;AAA8B,QAAA,SAAS,EAAC;AAAxC,sBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAQ,QAAA,EAAE,EAAC,SAAX;AAAqB,QAAA,SAAS,EAAC;AAA/B,SACI;AAAQ,QAAA,KAAK,EAAC;AAAd,oDADJ,EAEI;AAAQ,QAAA,KAAK,EAAC;AAAd,4BAFJ,EAGI;AAAQ,QAAA,KAAK,EAAC;AAAd,iCAHJ,CADJ,CAJJ,CATJ,EAqBI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,MAAf;AAAsB,QAAA,SAAS,EAAC;AAAhC,gBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI,gCAAC,4BAAD;AACI,QAAA,IAAI,EAAC,GADT;AAEI,QAAA,KAAK,EAAE,CAFX;AAGI,QAAA,IAAI,EAAE,CAHV;AAII,QAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWqC,UAJrB;AAKI,QAAA,CAAC,EAAE,KAAKpC,KAAL,CAAWC,CALlB;AAMI,QAAA,QAAQ,EAAE;AAAA,cAAGA,CAAH,QAAGA,CAAH;AAAA,iBAAW,MAAI,CAACoC,QAAL,CAAc;AAAEpC,YAAAA,CAAC,EAAEA;AAAL,WAAd,CAAX;AAAA,SANd;AAOI,QAAA,KAAK,EAAE;AAACkC,UAAAA,KAAK,EAAE,MAAR;AAAgBG,UAAAA,SAAS,EAAE;AAA3B;AAPX,QADJ,CAJJ,EAcI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,EAAE,EAAC,WAAV;AAAsB,QAAA,SAAS,EAAC;AAAhC,SAAkD,KAAKtC,KAAL,CAAWC,CAA7D,CADJ,CAdJ,CArBJ,EAuCI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACkC,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,YAAf;AAA4B,QAAA,SAAS,EAAC;AAAtC,sBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,EAAE,EAAC,YAAV;AAAuB,QAAA,IAAI,EAAC,MAA5B;AAAmC,QAAA,SAAS,EAAC;AAA7C,QADJ,CAJJ,CAvCJ,EA+CI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,YAAf;AAA4B,QAAA,SAAS,EAAC;AAAtC,uBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,EAAE,EAAC,YAAV;AAAuB,QAAA,IAAI,EAAC,MAA5B;AAAmC,QAAA,SAAS,EAAC;AAA7C,QADJ,CAJJ,CA/CJ,EAuDI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAA9B,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAO,QAAA,OAAO,EAAC,aAAf;AAA6B,QAAA,SAAS,EAAC;AAAvC,wBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAQ,QAAA,EAAE,EAAC,aAAX;AAAyB,QAAA,SAAS,EAAC;AAAnC,SACI;AAAQ,QAAA,KAAK,EAAC;AAAd,mBADJ,EAEK,KAAKpC,KAAL,CAAWwC,OAAX,CAAmBC,GAAnB,CAAuB,UAACC,MAAD,EAASC,CAAT;AAAA,eACpB;AAAQ,UAAA,KAAK,EAAED,MAAM,CAACE,EAAtB;AAA0B,UAAA,GAAG,EAAEF,MAAM,CAACE;AAAtC,WAA2CF,MAAM,CAAC5C,MAAlD,CADoB;AAAA,OAAvB,CAFL,CADJ,CAJJ,CAvDJ,EAoEI,2CApEJ,EAqEI;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAAC+C,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,UAAU,EAAE,QAA9B;AAAwCC,UAAAA,cAAc,EAAE;AAAxD;AAA9B,SACI;AAAG,QAAA,SAAS,EAAE,sDAAd;AAAsE,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE;AAAR,SAA7E;AAAiG,QAAA,OAAO,EAAE,KAAK7C;AAA/G,iBADJ,CArEJ,EAwEI,2CAxEJ,CADJ,CADJ,CADJ,CADJ,CAjBJ,CADJ;AAsGH;;;;EAjKoC8C,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\nimport Slider from 'react-input-slider';\n\nconst tipoCampos = [ {nombre: \"texto\"}, {nombre: \"booleano\"}, {nombre: \"fecha\"}, {nombre: \"número\"}, {nombre: \"arreglo\"}];\n\nexport default class CrearRiesgo extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            x: 0\n        }\n        this.crearRiesgo = this.crearRiesgo.bind(this);\n    }\n\n    crearRiesgo () {\n        var nombre = $(\"#nombreRiesgo\").val();\n        var formula = '';\n        var peso = this.state.x;\n        var tolerancia = parseInt($(\"#tolerancia\").val());\n        var valorIdeal = parseInt($(\"#valorIdeal\").val());\n        var riesgoPadre = parseInt(this.props.riesgoPadre);\n        var nivel = 0;\n        if(this.props.riesgoPadre == undefined || this.props.riesgoPadre == -1) {\n            riesgoPadre = parseInt($(\"#riesgoPadre\").val());\n        }\n        console.log('nombre');\n        console.log(nombre);\n        console.log('formula');\n        console.log(formula);\n        console.log('peso');\n        console.log(peso);\n        console.log('tolerancia');\n        console.log(tolerancia);\n        console.log('valorIdeal');\n        console.log(valorIdeal);\n        console.log('riesgoPadre');\n        console.log(riesgoPadre);\n        console.log('nivel');\n        console.log(nivel);\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Riesgos (nombre, formula, peso, tolerancia, valorIdeal, idRiesgoPadre, nivelRiesgoHijo) values ('\"+nombre+\"', '\"+formula+\"', \"+peso+\", \"+tolerancia+\", \"+valorIdeal+\", \"+riesgoPadre+\", \"+nivel+\")\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.props.terminoCrearRiesgo();\n                        this.props.actualizarRiesgos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    render() {\n        return (\n            <div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"page-header\"}>\n                            <h2 className={\"pageheader-title\"}>Crear Riesgo</h2>\n                            <div className={\"page-breadcrumb\"}>\n                                <nav aria-label=\"breadcrumb\">\n                                    <ol className={\"breadcrumb\"}>\n                                        <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.configuracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                        <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.props.retornoSeleccionRiesgo}><a href=\"#\" className={\"breadcrumb-link\"}>Riesgos</a></li>\n                                        <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Crear Riesgo</li>\n                                    </ol>\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"card influencer-profile-data\"}>\n                            <div className={\"card-body\"}>\n                                <div className={\"border-top border-bottom addPaddingToConfig\"} style={{width: \"100%\"}}>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"nombreRiesgo\" className=\"col-form-label\">Nombre Riesgo</label>\n                                        </div>\n                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                            <input id=\"nombreRiesgo\" type=\"text\" className=\"form-control form-control-sm\"/>\n                                        </div>\n                                    </div>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"nombreRiesgo\" className=\"col-form-label\">Fórmula</label>\n                                        </div>\n                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                            <select id=\"formula\" className=\"form-control\">\n                                                <option value=\"ambos\">Calidad de Gestión + Riesgo Inherente</option>\n                                                <option value=\"riesgoInherente\">Riesgo Inherente</option>\n                                                <option value=\"calidadGestión\">Calidad de Gestión</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"peso\" className=\"col-form-label\">Peso</label>\n                                        </div>\n                                        <div className={\"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-8 form-group\"}>\n                                            <Slider\n                                                axis=\"x\"\n                                                xstep={1}\n                                                xmin={0}\n                                                xmax={this.props.pesoMaximo}\n                                                x={this.state.x}\n                                                onChange={({ x }) => this.setState({ x: x }) }\n                                                style={{width: \"100%\", marginTop: \"10px\"}}/>\n                                        </div>\n                                        <div className={\"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1 form-group\"}>\n                                            <label id=\"pesoLabel\" className=\"col-form-label\">{this.state.x}</label>\n                                        </div>\n                                    </div>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"tolerancia\" className=\"col-form-label\">Tolerancia</label>\n                                        </div>\n                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                            <input id=\"tolerancia\" type=\"text\" className=\"form-control form-control-sm\"/>\n                                        </div>\n                                    </div>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"valorIdeal\" className=\"col-form-label\">Valor Ideal</label>\n                                        </div>\n                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                            <input id=\"valorIdeal\" type=\"text\" className=\"form-control form-control-sm\"/>\n                                        </div>\n                                    </div>\n                                    <div className={\"row\"} style={{width: \"100%\"}}>\n                                        <div className={\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 form-group\"}>\n                                            <label htmlFor=\"riesgoPadre\" className=\"col-form-label\">Riesgo Padre</label>\n                                        </div>\n                                        <div className={\"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 form-group\"}>\n                                            <select id=\"riesgoPadre\" className=\"form-control\">\n                                                <option value=\"-1\">Ninguno</option>\n                                                {this.props.riesgos.map((riesgo, i) =>\n                                                    <option value={riesgo.ID} key={riesgo.ID}>{riesgo.nombre}</option>\n                                                )}\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <br/>\n                                    <div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                        <a className={\"btn btn-primary btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.crearRiesgo}>Crear</a>\n                                    </div>\n                                    <br/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n"],"file":"CrearRiesgo.js"}