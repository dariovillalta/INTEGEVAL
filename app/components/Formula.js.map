{"version":3,"sources":["components/Formula.js"],"names":["operaciones","valor","tipo","variables","objetos","camposDeObjetos","anchuraSeccionFormula","variableSeleccionada","operacionSeleccionada","posicionDeIndicadorSeleccionadoEnFormula","posicionIndicador","Formula","props","state","formula","tablas","camposTablas","clickEnFormula","bind","retornoClickLista","agregarAFormula","updateFormulaState","getFormula","crearArregloDeFormula","esOperacionAritmetica","esOperacionCompleja","getPalabraFormula","agregarFormulaAnchuraYAltura","findVariableInFormula","iniciarGuardarVariable","guardarVariable","loadTablas","initLoadTablasCampos","loadTablasCampos","arreglo","variable","posicionEnArreglo","i","length","Array","isArray","localeCompare","e","posicion","nombre","index","$","removeClass","addClass","console","log","temp","tempVar","eval","activa","splice","setState","hasClass","esOperacionLista","variablesNuevas","formulaTemp","concat","posicionArreglo","ultimoIndice","noHaLeidoUltimoIndice","charAt","parseInt","alert","nuevaFormula","validarNuevaFormula","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","tablaVarEditar","idVarEditar","result","rollback","commit","recordset","nuevoArregloFormula","variableProcesarFormula","push","esVariable","caracter","posicionCaracter","palabra","campos","j","arregloFormula","esDivision","contadorIndicadoresNumerador","contadorIndicadoresDenominador","contadorSignosNumerador","contadorSignosDenominador","contadorVariablesNumerador","contadorVariablesDenominador","esDespuesDivision","widthNumerador","restaTotalIndicadoresNumerador","restaTotalSignosNumerador","widthDenominador","restaTotalIndicadoresDenominador","restaTotalSignosDenominador","width","height","arregloTemp","tabla","nombreTabla","array","nombreColumnas","COLUMN_NAME","undefined","merge","showVariables","display","alignItems","justifyContent","backgroundColor","color","overflowWrap","wordWrap","whiteSpace","borderRight","borderTop","borderBottom","padding","overflowY","scroll","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA,IAAMA,WAAW,GAAG,CAAC;AAACC,EAAAA,KAAK,EAAE,GAAR;AAAaC,EAAAA,IAAI,EAAE;AAAnB,CAAD,EAA8B;AAACD,EAAAA,KAAK,EAAE,GAAR;AAAaC,EAAAA,IAAI,EAAE;AAAnB,CAA9B,EAA2D;AAACD,EAAAA,KAAK,EAAE,GAAR;AAAaC,EAAAA,IAAI,EAAE;AAAnB,CAA3D,EAAuF;AAACD,EAAAA,KAAK,EAAE,GAAR;AAAaC,EAAAA,IAAI,EAAE;AAAnB,CAAvF,EAAoH;AAACD,EAAAA,KAAK,EAAE,OAAR;AAAiBC,EAAAA,IAAI,EAAE;AAAvB,CAApH,CAApB;AACA,IAAMC,SAAS,GAAG,EAAlB;AACA,IAAMC,OAAO,GAAG,EAAhB;AACA,IAAMC,eAAe,GAAG,EAAxB;AACA,IAAMC,qBAAqB,GAAG,CAAC,MAAD,EAAS,IAAT,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,IAAvE,CAA9B;AAEA,IAAIC,oBAAoB,GAAG,EAA3B;AAAA,IAA+BC,qBAAqB,GAAG,EAAvD;AAAA,IAA2DC,wCAAwC,GAAG,EAAtG;AAAA,IAA0GC,iBAAiB,GAAE,EAA7H;AAEA;;;;;;;;AAQA;AACA;AACA;;AACA;;;;;;;;;;;;;;IAaqBC,O;;;;;AACjB,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,iFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,EADA;AAETC,MAAAA,MAAM,EAAE,EAFC;AAGTC,MAAAA,YAAY,EAAE;AAHL,KAAb;AAKA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,+BAAtB;AACA,UAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBD,IAAvB,+BAAzB;AACA,UAAKE,eAAL,GAAuB,MAAKA,eAAL,CAAqBF,IAArB,+BAAvB;AACA,UAAKG,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBH,IAAxB,+BAA1B;AACA,UAAKI,UAAL,GAAkB,MAAKA,UAAL,CAAgBJ,IAAhB,+BAAlB;AACA,UAAKK,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BL,IAA3B,+BAA7B;AACA,UAAKM,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BN,IAA3B,+BAA7B;AACA,UAAKO,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBP,IAAzB,+BAA3B;AACA,UAAKQ,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBR,IAAvB,+BAAzB;AACA,UAAKS,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCT,IAAlC,+BAApC;AACA,UAAKU,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BV,IAA3B,+BAA7B;AACA,UAAKW,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BX,IAA5B,+BAA9B;AACA,UAAKY,eAAL,GAAuB,MAAKA,eAAL,CAAqBZ,IAArB,+BAAvB;AACA,UAAKa,UAAL,GAAkB,MAAKA,UAAL,CAAgBb,IAAhB,+BAAlB;AACA,UAAKc,oBAAL,GAA4B,MAAKA,oBAAL,CAA0Bd,IAA1B,+BAA5B;AACA,UAAKe,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBf,IAAtB,+BAAxB;AAtBe;AAuBlB;;;;wCAEmB;AAChB;;;;AAIA,WAAKI,UAAL;AACA,WAAKS,UAAL;AACH;;;0CAEsBG,O,EAASC,Q,EAAUC,iB,EAAmB;AACzD,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAI,CAACE,KAAK,CAACC,OAAN,CAAcN,OAAO,CAACG,CAAD,CAAP,CAAWpC,KAAzB,CAAD,IAAoCiC,OAAO,CAACG,CAAD,CAAP,CAAWpC,KAAX,CAAiBwC,aAAjB,CAA+BN,QAA/B,KAA4C,CAApF,EAAuF;AACnF1B,UAAAA,wCAAwC,GAAG2B,iBAAiB,GAAC,GAAlB,GAAsBC,CAAtB,GAAwB,GAAnE;AACH,SAFD,MAEO,IAAIE,KAAK,CAACC,OAAN,CAAcN,OAAO,CAACG,CAAD,CAAP,CAAWpC,KAAzB,CAAJ,EAAsC;AACzC,eAAK2B,qBAAL,CAA4BM,OAAO,CAACG,CAAD,CAAP,CAAWpC,KAAvC,EAA8CkC,QAA9C,EAAwDC,iBAAiB,GAAC,GAAlB,GAAsBC,CAAtB,GAAwB,SAAhF;AACH;AACJ;;AAAA;AACJ;;;mCAEeK,C,EAAGC,Q,EAAUC,M,EAAQC,K,EAAO;AACxC;;;;;;;;;;;;;;;;;AAiBA,WAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxB,KAAL,CAAWC,OAAX,CAAmBwB,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAChDS,QAAAA,CAAC,CAAC,wBAAsB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA7C,CAAD,CAAqD8C,WAArD,CAAiE,qBAAjE;AACAD,QAAAA,CAAC,CAAC,wBAAsB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA7C,CAAD,CAAqD8C,WAArD,CAAiE,OAAjE;AACAD,QAAAA,CAAC,CAAC,wBAAsB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA7C,CAAD,CAAqD+C,QAArD,CAA8D,4BAA9D;AACAF,QAAAA,CAAC,CAAC,sBAAoB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA3C,CAAD,CAAmD8C,WAAnD,CAA+D,qBAA/D;AACAD,QAAAA,CAAC,CAAC,sBAAoB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA3C,CAAD,CAAmD8C,WAAnD,CAA+D,OAA/D;AACAD,QAAAA,CAAC,CAAC,sBAAoB,KAAKjC,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAA3C,CAAD,CAAmD+C,QAAnD,CAA4D,4BAA5D;AACH;;AAAA;;AACD,UAAGL,QAAQ,IAAI,IAAf,EAAqB;AACjBM,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAL,CAAWC,OAAvB;AACAJ,QAAAA,iBAAiB,GAAG,EAApB;AACA,aAAKkB,qBAAL,CAA2B,KAAKf,KAAL,CAAWC,OAAtC,EAA+C8B,MAA/C,EAAuD,EAAvD;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYzC,wCAAZ;;AACA,YAAI0C,IAAI,sBAAO,KAAKtC,KAAL,CAAWC,OAAlB,CAAR;;AACAmC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,GAAC1C,wCAAjB;AACA,YAAI2C,OAAJ;AACAC,QAAAA,IAAI,CAAC,mBAAiB5C,wCAAlB,CAAJ;AACAwC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAWL,KAAvB;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYE,OAAO,CAACE,MAApB;AACAF,QAAAA,OAAO,CAACE,MAAR,GAAiB,CAACF,OAAO,CAACE,MAA1B;AACAH,QAAAA,IAAI,CAACI,MAAL,CAAYV,KAAZ,EAAmB,CAAnB,EAAsBO,OAAtB;AACA,aAAKI,QAAL,CAAc;AACV1C,UAAAA,OAAO,EAAEqC;AADC,SAAd,EAEGF,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAL,CAAWC,OAAvB,CAFH;AAGH,OAtBD,MAsBO,IAAI6B,QAAQ,CAACF,aAAT,CAAuB,WAAvB,KAAuC,CAA3C,EAA8C;AACjDQ,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAxC,QAAAA,iBAAiB,GAAG,WAApB;AACAoC,QAAAA,CAAC,CAAC,wBAAsBF,MAAvB,CAAD,CAAgCI,QAAhC,CAAyC,qBAAzC;AACAF,QAAAA,CAAC,CAAC,wBAAsBF,MAAvB,CAAD,CAAgCI,QAAhC,CAAyC,OAAzC;AACAF,QAAAA,CAAC,CAAC,wBAAsBF,MAAvB,CAAD,CAAgCG,WAAhC,CAA4C,4BAA5C;AACA,aAAKnB,qBAAL,CAA2B,KAAKf,KAAL,CAAWC,OAAtC,EAA+C8B,MAA/C,EAAuD,EAAvD;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYzC,wCAAZ;AACH,OATM,MASA,IAAIkC,QAAQ,CAACF,aAAT,CAAuB,SAAvB,KAAqC,CAAzC,EAA4C;AAC/CQ,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAxC,QAAAA,iBAAiB,GAAG,SAApB;AACAoC,QAAAA,CAAC,CAAC,sBAAoBF,MAArB,CAAD,CAA8BI,QAA9B,CAAuC,qBAAvC;AACAF,QAAAA,CAAC,CAAC,sBAAoBF,MAArB,CAAD,CAA8BI,QAA9B,CAAuC,OAAvC;AACAF,QAAAA,CAAC,CAAC,sBAAoBF,MAArB,CAAD,CAA8BG,WAA9B,CAA0C,4BAA1C;AACA,aAAKnB,qBAAL,CAA2B,KAAKf,KAAL,CAAWC,OAAtC,EAA+C8B,MAA/C,EAAuD,EAAvD;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYzC,wCAAZ;AACH,OATM,MASA,IAAIkC,QAAQ,CAACF,aAAT,CAAuB,OAAvB,KAAmC,CAAvC,EAA0C;AAC7C,YAAGK,CAAC,CAAC,wBAAD,CAAD,CAA4BW,QAA5B,CAAqC,qBAArC,CAAH,EAAgE;AAC5DX,UAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BC,WAA5B,CAAwC,OAAxC;AACAD,UAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BC,WAA5B,CAAwC,qBAAxC;AACH,SAHD,MAGO;AACHD,UAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BE,QAA5B,CAAqC,OAArC;AACAF,UAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BE,QAA5B,CAAqC,qBAArC;AACH;AACJ;AACJ;;;sCAEkBU,gB,EAAkBC,e,EAAiB;AAClD,UAAGD,gBAAH,EAAqB;AACjBlD,QAAAA,qBAAqB,GAAGmD,eAAxB;AACH,OAFD,MAEO;AACHpD,QAAAA,oBAAoB,GAAGoD,eAAvB;AACH;;AACDV,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY1C,qBAAZ;AACAyC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY3C,oBAAZ;AACH;;;sCAEkB;AACf,UAAG,KAAKM,KAAL,CAAWC,OAAX,CAAmBwB,MAAnB,IAA6B,CAA7B,IAAkCQ,CAAC,CAAC,KAAD,CAAD,CAASW,QAAT,CAAkB,qBAAlB,CAArC,EAA+E;AAAS;AACpF,YAAIG,WAAW,sBAAO,KAAK/C,KAAL,CAAWC,OAAlB,CAAf;;AACAP,QAAAA,oBAAoB,CAAC,CAAD,CAApB,CAAwB+C,MAAxB,GAAiC,KAAjC;AACA/C,QAAAA,oBAAoB,CAAC,CAAD,CAApB,CAAwBL,IAAxB,GAA+B,UAA/B;AACA0D,QAAAA,WAAW,GAAGA,WAAW,CAACC,MAAZ,CAAmBtD,oBAAnB,CAAd;AACA0C,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;AACA,aAAKjC,4BAAL,CAAkCiC,WAAlC,EAA+C,KAA/C;AACAX,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;AACA,aAAKJ,QAAL,CAAc;AACV1C,UAAAA,OAAO,EAAE8C;AADC,SAAd,EAEGX,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAL,CAAWC,OAAvB,CAFH;AAGH,OAbD,MAaO,IAAG,KAAKD,KAAL,CAAWC,OAAX,CAAmBwB,MAAnB,GAA4B,CAA5B,IAAiCQ,CAAC,CAAC,KAAD,CAAD,CAASW,QAAT,CAAkB,qBAAlB,CAApC,EAA8E;AAAS;AAC1F,YAAIG,WAAW,sBAAO,KAAK/C,KAAL,CAAWC,OAAlB,CAAf,CADiF,CAEjF;;;AACAP,QAAAA,oBAAoB,CAAC,CAAD,CAApB,CAAwB+C,MAAxB,GAAiC,KAAjC;AACA/C,QAAAA,oBAAoB,CAAC,CAAD,CAApB,CAAwBL,IAAxB,GAA+B,UAA/B;AACA,YAAI4D,eAAe,GAAG,EAAtB;AAAA,YAA0BC,YAAY,GAAG,EAAzC;AAAA,YAA6CC,qBAAqB,GAAG,IAArE;;AACA,aAAK,IAAI3B,CAAC,GAAG5B,wCAAwC,CAAC6B,MAAzC,GAAkD,CAA/D,EAAkED,CAAC,IAAI,CAAvE,EAA0EA,CAAC,EAA3E,EAA+E;AAC3E,cAAI,CAAC2B,qBAAL,EAA4B;AACxBF,YAAAA,eAAe,IAAIrD,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,CAAnB;AACH;;AACD,cAAI5B,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,EAAmDI,aAAnD,CAAiE,GAAjE,KAAyE,CAAzE,IAA8EhC,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,EAAmDI,aAAnD,CAAiE,GAAjE,KAAyE,CAAvJ,IAA4JuB,qBAAhK,EAAuL;AACnL,gBAAIvD,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,EAAmDI,aAAnD,CAAiE,GAAjE,KAAyE,CAAzE,IAA8EhC,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,EAAmDI,aAAnD,CAAiE,GAAjE,KAAyE,CAA3J,EACIsB,YAAY,IAAItD,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,CAAhB;;AACJ,gBAAG5B,wCAAwC,CAACwD,MAAzC,CAAgD5B,CAAhD,EAAmDI,aAAnD,CAAiE,GAAjE,KAAyE,CAA5E,EAA+E;AAC3EuB,cAAAA,qBAAqB,GAAG,KAAxB;AACH;AACJ;AACJ;;AAAA,SAjBgF,CAkBjF;AACA;;AACAf,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYY,eAAZ;AACAb,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYa,YAAZ;AACAd,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;;AACA,YAAGlD,iBAAiB,CAAC+B,aAAlB,CAAgC,SAAhC,KAA8C,CAAjD,EAAoD;AAChD,cAAGqB,eAAe,CAACxB,MAAhB,GAAyB,CAA5B,EAA+B;AAC3BsB,YAAAA,WAAW,CAACE,eAAD,CAAX,CAA6BP,MAA7B,CAAoCW,QAAQ,CAACH,YAAD,CAAR,GAAuB,CAA3D,EAA8D,CAA9D,EAAiExD,oBAAoB,CAAC,CAAD,CAArF;AACAqD,YAAAA,WAAW,CAACE,eAAD,CAAX,CAA6BP,MAA7B,CAAoCW,QAAQ,CAACH,YAAD,CAAR,GAAuB,CAA3D,EAA8D,CAA9D,EAAiEvD,qBAAqB,CAAC,CAAD,CAAtF;AACH,WAHD,MAGO;AACHoD,YAAAA,WAAW,CAACL,MAAZ,CAAmBW,QAAQ,CAACH,YAAD,CAAR,GAAuB,CAA1C,EAA6C,CAA7C,EAAgDxD,oBAAoB,CAAC,CAAD,CAApE;AACAqD,YAAAA,WAAW,CAACL,MAAZ,CAAmBW,QAAQ,CAACH,YAAD,CAAR,GAAuB,CAA1C,EAA6C,CAA7C,EAAgDvD,qBAAqB,CAAC,CAAD,CAArE;AACH,WAP+C,CAQhD;;AACH,SATD,MASO;AACH,cAAGsD,eAAe,CAACxB,MAAhB,GAAyB,CAA5B,EAA+B;AAC3BsB,YAAAA,WAAW,CAACE,eAAD,CAAX,CAA6BP,MAA7B,CAAoCW,QAAQ,CAACH,YAAD,CAA5C,EAA4D,CAA5D,EAA+DvD,qBAAqB,CAAC,CAAD,CAApF;AACAoD,YAAAA,WAAW,CAACE,eAAD,CAAX,CAA6BP,MAA7B,CAAoCW,QAAQ,CAACH,YAAD,CAA5C,EAA4D,CAA5D,EAA+DxD,oBAAoB,CAAC,CAAD,CAAnF;AACH,WAHD,MAGO;AACHqD,YAAAA,WAAW,CAACL,MAAZ,CAAmBW,QAAQ,CAACH,YAAD,CAA3B,EAA2C,CAA3C,EAA8CvD,qBAAqB,CAAC,CAAD,CAAnE;AACAoD,YAAAA,WAAW,CAACL,MAAZ,CAAmBW,QAAQ,CAACH,YAAD,CAA3B,EAA2C,CAA3C,EAA8CxD,oBAAoB,CAAC,CAAD,CAAlE;AACH;AACJ;;AACD0C,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;AACA,aAAKjC,4BAAL,CAAkCiC,WAAlC,EAA+C,KAA/C;AACAX,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;AACA,aAAKJ,QAAL,CAAc;AACV1C,UAAAA,OAAO,EAAE8C;AADC,SAAd,EAEGX,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAL,CAAWC,OAAvB,CAFH;AAGH,OApDM,MAoDA,IAAI,CAACgC,CAAC,CAAC,KAAD,CAAD,CAASW,QAAT,CAAkB,qBAAlB,CAAL,EAA+C;AAClDU,QAAAA,KAAK,CAAC,wCAAD,CAAL;AACH;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCH;;;uCAEmBC,Y,EAAc;AAC9B,UAAG,KAAKC,mBAAL,CAAyBD,YAAzB,CAAH,EAA2C;AACvC,aAAKZ,QAAL,CAAc;AACV1C,UAAAA,OAAO,EAAE,KAAKD,KAAL,CAAWC,OAAX,GAAqBsD;AADpB,SAAd;AAGH;AACJ;;;iCAEa;AAAA;;AACV,UAAME,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK5D,KAAL,CAAW6D,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAuB,MAAI,CAACrE,KAAL,CAAWsE,cAAlC,GAAiD,cAAjD,GAAgE,MAAI,CAACtE,KAAL,CAAWuE,WAAzF,EAAsG,UAACR,GAAD,EAAMS,MAAN,EAAiB;AACnH,cAAIT,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACb3B,cAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAGS,MAAM,CAACG,SAAP,CAAiBjD,MAAjB,GAA0B,CAA7B,EAAgC;AAC5B,gBAAA,MAAI,CAACf,qBAAL,CAA2B6D,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBzE,OAA/C;AACH;AACJ,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFU,CAuBN;AACP;;;0CAEsBA,O,EAAS;AAC5BmC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYpC,OAAZ;AACA,UAAI0E,mBAAmB,GAAG,EAA1B;;AACA,WAAK,IAAInD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvB,OAAO,CAACwB,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAIoD,uBAAuB,GAAG/D,iBAA9B;;AACA,YAAGZ,OAAO,CAACmD,MAAR,CAAe5B,CAAf,EAAkBI,aAAlB,CAAgC,GAAhC,KAAwC,CAAxC,IAA6C3B,OAAO,CAACmD,MAAR,CAAe5B,CAAf,EAAkBI,aAAlB,CAAgC,GAAhC,KAAwC,CAAxF,EAA2F;AACvF+C,UAAAA,mBAAmB,CAACE,IAApB,CAAyB;AAACzF,YAAAA,KAAK,EAAE;AAAR,WAAzB;AACH,SAFD,MAEO,IAAGa,OAAO,CAACmD,MAAR,CAAe5B,CAAf,EAAkBI,aAAlB,CAAgC,GAAhC,KAAwC,CAA3C,EAA8C,CACjD;AACH,SAFM,MAEA,IAAG,KAAKjB,qBAAL,CAA2BV,OAAO,CAACmD,MAAR,CAAe5B,CAAf,CAA3B,CAAH,EAAkD;AACrDmD,UAAAA,mBAAmB,CAACE,IAApB,CAAyB;AAACzF,YAAAA,KAAK,EAAEa,OAAO,CAACmD,MAAR,CAAe5B,CAAf;AAAR,WAAzB;AACH,SAFM,MAEA,IAAG,KAAKZ,mBAAL,CAAyBX,OAAzB,EAAkCuB,CAAlC,CAAH,EAAyC;AAC5C,cAAIO,MAAM,GAAG,KAAKlB,iBAAL,CAAuBZ,OAAvB,EAAgCuB,CAAhC,CAAb;AACAmD,UAAAA,mBAAmB,CAACE,IAApB,CAAyB;AAACzF,YAAAA,KAAK,EAAE2C;AAAR,WAAzB;AACH,SAHM,MAGA,IAAG,KAAK+C,UAAL,CAAgB7E,OAAhB,EAAyBuB,CAAzB,CAAH,EAAgC;AACnC,cAAIO,MAAM,GAAG,KAAKlB,iBAAL,CAAuBZ,OAAvB,EAAgCuB,CAAhC,CAAb;AACAmD,UAAAA,mBAAmB,CAACE,IAApB,CAAyB;AAACzF,YAAAA,KAAK,EAAE2C;AAAR,WAAzB;AACH;AACJ;;AAAA;AACD,WAAKjB,4BAAL,CAAkC6D,mBAAlC;AACH;;;0CAEsBI,Q,EAAU;AAC7B,UAAGA,QAAQ,CAACnD,aAAT,CAAuB,GAAvB,KAA+B,CAAlC,EAAqC;AACjC,eAAO,IAAP;AACH,OAFD,MAEO,IAAGmD,QAAQ,CAACnD,aAAT,CAAuB,GAAvB,KAA+B,CAAlC,EAAqC;AACxC,eAAO,IAAP;AACH,OAFM,MAEA,IAAGmD,QAAQ,CAACnD,aAAT,CAAuB,GAAvB,KAA+B,CAAlC,EAAqC;AACxC,eAAO,IAAP;AACH,OAFM,MAEA,IAAGmD,QAAQ,CAACnD,aAAT,CAAuB,GAAvB,KAA+B,CAAlC,EAAqC;AACxC,eAAO,IAAP;AACH,OAFM,MAEA,IAAGmD,QAAQ,CAACnD,aAAT,CAAuB,GAAvB,KAA+B,CAAlC,EAAqC;AACxC,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH;;;wCAEoB3B,O,EAAS+E,gB,EAAkB;AAC5C,UAAIC,OAAO,GAAG,KAAKpE,iBAAL,CAAuBZ,OAAvB,EAAgC+E,gBAAhC,CAAd;;AACA,UAAGC,OAAO,CAACrD,aAAR,CAAsB,MAAtB,KAAiC,CAApC,EAAuC;AACnC,eAAO,IAAP;AACH,OAFD,MAEO,IAAGqD,OAAO,CAACrD,aAAR,CAAsB,KAAtB,KAAgC,CAAnC,EAAsC;AACzC,eAAO,IAAP;AACH,OAFM,MAEA,IAAGqD,OAAO,CAACrD,aAAR,CAAsB,SAAtB,KAAoC,CAAvC,EAA0C;AAC7C,eAAO,IAAP;AACH,OAFM,MAEA,IAAGqD,OAAO,CAACrD,aAAR,CAAsB,OAAtB,KAAkC,CAArC,EAAwC;AAC3C,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH;;;sCAEkB3B,O,EAAS+E,gB,EAAkB;AAC1C,UAAI1D,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIE,CAAC,GAAGwD,gBAAb,EAA+BxD,CAAC,GAAGvB,OAAO,CAACwB,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;AACpD,YAAGvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAArB,IAA4BvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAAjD,IAAwDvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,IAA7E,IACCvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GADtB,IAC6BvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GADlD,IACyDvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAD9E,IAECvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAFtB,IAE6BvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAFlD,IAEyDvB,OAAO,CAACmD,MAAR,CAAe5B,CAAf,KAAqB,GAFjF,EAGIF,QAAQ,IAAErB,OAAO,CAACuB,CAAD,CAAjB,CAHJ,KAKI,OAAOF,QAAP;AACP;;AAAA;AACD,aAAOA,QAAP;AACH;;;+BAEWrB,O,EAAS+E,gB,EAAkB;AACnC,UAAIC,OAAO,GAAG,KAAKpE,iBAAL,CAAuBZ,OAAvB,EAAgC+E,gBAAhC,CAAd;;AACA,WAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0D,MAAM,CAACzD,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpC,YAAG0D,MAAM,CAAC1D,CAAD,CAAN,CAAUO,MAAV,CAAiBH,aAAjB,CAA+BqD,OAA/B,KAA2C,CAA9C,EAAiD;AAC7C,iBAAO,IAAP;AACH;AACJ;;AAAA;;AACD,WAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlC,SAAS,CAACmC,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,YAAGlC,SAAS,CAACkC,CAAD,CAAT,CAAaO,MAAb,CAAoBH,aAApB,CAAkCqD,OAAlC,KAA8C,CAAjD,EAAoD;AAChD,iBAAO,IAAP;AACH;AACJ;;AAAA;;AACD,WAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjC,OAAO,CAACkC,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,aAAK,IAAI2D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3F,eAAe,CAACgC,CAAD,CAAf,CAAmBC,MAAvC,EAA+C0D,CAAC,EAAhD,EAAoD;AAChD,cAAG3F,eAAe,CAACgC,CAAD,CAAf,CAAmB2D,CAAnB,EAAsBpD,MAAtB,CAA6BH,aAA7B,CAA2CqD,OAA3C,KAAuD,CAA1D,EAA6D;AACzD,mBAAO,IAAP;AACH;AACJ;;AAAA;AACJ;;AAAA;AACD,aAAO,KAAP;AACH;;;iDAE4BG,c,EAAgBC,U,EAAY;AACrD,UAAIC,4BAA4B,GAAG,CAAnC;AAAA,UAAsCC,8BAA8B,GAAG,CAAvE;AAAA,UAA0EC,uBAAuB,GAAG,CAApG;AAAA,UAAuGC,yBAAyB,GAAG,CAAnI;AAAA,UAAsIC,0BAA0B,GAAG,CAAnK;AAAA,UAAsKC,4BAA4B,GAAG,CAArM;AAAA,UAAwMC,iBAAiB,GAAG,KAA5N;;AACA,WAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,cAAc,CAAC3D,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC5C,YAAI,CAACE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2C,KAAKuB,qBAAL,CAA2ByE,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAA7C,CAA/C,EAAqG;AACjG,cAAG,CAACwG,iBAAJ,EAAuB;AACnBJ,YAAAA,uBAAuB;AAC1B,WAFD,MAEO;AACHC,YAAAA,yBAAyB;AAC5B;AACJ,SAND,MAMO,IAAK,CAAC/D,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2CgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,IAAtC,KAA+C,CAA1F,IAA+F,CAAC,KAAKjB,qBAAL,CAA2ByE,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAA7C,CAAhG,IAAuJgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,YAAtC,KAAuD,CAA/M,IAAqNF,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAzN,EAAkQ;AACrQ,cAAG,CAACwG,iBAAJ,EAAuB;AACnBF,YAAAA,0BAA0B;AAC7B,WAFD,MAEO;AACHC,YAAAA,4BAA4B;AAC/B;AACJ,SANM,MAMA,IAAI,CAACjE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2CgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,IAAtC,KAA+C,CAA9F,EAAkG;AACrG,cAAG,CAACgE,iBAAJ,EAAuB;AACnBN,YAAAA,4BAA4B;AAC/B,WAFD,MAEO;AACHC,YAAAA,8BAA8B;AACjC;AACJ;;AACD,YAAKH,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,YAAtC,KAAuD,CAA5D,EAAgE;AAC5DgE,UAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;;AAAA;AACD,UAAIC,cAAc,GAAG,GAArB,CA1BqD,CA2BrD;;AACA,UAAIC,8BAA8B,GAAGR,4BAA4B,GAAG,CAApE;AACAO,MAAAA,cAAc,IAAIC,8BAAlB;AACA,UAAIC,yBAAyB,GAAGP,uBAAuB,GAAG,CAA1D;AACAK,MAAAA,cAAc,IAAIE,yBAAlB;AACAF,MAAAA,cAAc,IAAIH,0BAAlB;AAEA,UAAIM,gBAAgB,GAAG,GAAvB;AACA,UAAIC,gCAAgC,GAAGV,8BAA8B,GAAG,CAAxE;AACAS,MAAAA,gBAAgB,IAAIC,gCAApB;AACA,UAAIC,2BAA2B,GAAGT,yBAAyB,GAAG,CAA9D;AACAO,MAAAA,gBAAgB,IAAIE,2BAApB;AACAF,MAAAA,gBAAgB,IAAIL,4BAApB;;AAEA,WAAK,IAAInE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,cAAc,CAAC3D,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC5C,YAAI,CAACE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2C,KAAKuB,qBAAL,CAA2ByE,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAA7C,CAA/C,EAAqG;AACjGgG,UAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB2E,KAAlB,GAA0B,IAA1B;AACH,SAFD,MAEO,IAAK,CAACzE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2CgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,IAAtC,KAA+C,CAA1F,IAA+F,CAAC,KAAKjB,qBAAL,CAA2ByE,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAA7C,CAAhG,IAAuJgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,YAAtC,KAAuD,CAA/M,IAAqNF,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAzN,EAAkQ;AACrQ,cAAG,CAACwG,iBAAJ,EAAuB;AACnBR,YAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB2E,KAAlB,GAA0BN,cAAc,GAAC,GAAzC;AACH,WAFD,MAEO;AACHT,YAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB2E,KAAlB,GAA0BH,gBAAgB,GAAC,GAA3C;AACH;AACJ,SANM,MAMA,IAAI,CAACtE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAD,IAA2CgG,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,IAAtC,KAA+C,CAA9F,EAAkG;AACrGwD,UAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB2E,KAAlB,GAA0B,IAA1B;AACH;;AACD,YAAKf,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAlB,CAAwBwC,aAAxB,CAAsC,YAAtC,KAAuD,CAA5D,EAAgE;AAC5DwD,UAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB4E,MAAlB,GAA2B,IAA3B;AACH,SAFD,MAEO;AACH,cAAGf,UAAH,EAAe;AACXD,YAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB4E,MAAlB,GAA2B,KAA3B;AACH,WAFD,MAEO;AACHhB,YAAAA,cAAc,CAAC5D,CAAD,CAAd,CAAkB4E,MAAlB,GAA2B,MAA3B;AACH;AACJ;AACJ;;AAAA;;AACD,WAAK,IAAI5E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,cAAc,CAAC3D,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC5C,YAAIE,KAAK,CAACC,OAAN,CAAcyD,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAAhC,CAAJ,EAA6C;AACzC,eAAK0B,4BAAL,CAAkCsE,cAAc,CAAC5D,CAAD,CAAd,CAAkBpC,KAApD;AACH;AACJ;AACD;;;;;;;;;;;AAUH;;;6CAEyB;AACtB,UAAIa,OAAO,GAAG,EAAd;;AACA,WAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxB,KAAL,CAAWC,OAAX,CAAmBwB,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAChDvB,QAAAA,OAAO,IAAI,KAAKD,KAAL,CAAWC,OAAX,CAAmBuB,CAAnB,EAAsBpC,KAAjC;AACH;;AAAA;AACDgD,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYpC,OAAZ,EANsB,CAOtB;AACH;;;oCAEgBA,O,EAAS;AAAA;;AACtB,UAAMwD,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK5D,KAAL,CAAW6D,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,YAAU,MAAI,CAACrE,KAAL,CAAWsE,cAArB,GAAoC,kBAApC,GAAuDpE,OAAvD,GAA+D,eAA/D,GAA+E,MAAI,CAACF,KAAL,CAAWuE,WAAxG,EAAqH,UAACR,GAAD,EAAMS,MAAN,EAAiB;AAClI,cAAIT,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACb3B,cAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI,CACzB,CADD;AAEH;AACJ,SAXD;AAYH,OAlBD,EAFsB,CAoBlB;AACP;;;iCAEa;AAAA;;AACV,UAAML,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK5D,KAAL,CAAW6D,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,sBAAd,EAAsC,UAACN,GAAD,EAAMS,MAAN,EAAiB;AACnD,cAAIT,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACb3B,cAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,cAAA,MAAI,CAACnB,QAAL,CAAc;AACVzC,gBAAAA,MAAM,EAAEqE,MAAM,CAACG;AADL,eAAd,EAEG,MAAI,CAACvD,oBAFR;AAGH,aAJD;AAKH;AACJ,SAdD;AAeH,OArBD,EAFU,CAuBN;AACP;;;2CAEsB;AACnB,UAAIkF,WAAW,GAAG,EAAlB;;AACA,WAAK,IAAI7E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxB,KAAL,CAAWE,MAAX,CAAkBuB,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AAC/C,aAAKJ,gBAAL,CAAsB,KAAKpB,KAAL,CAAWE,MAAX,CAAkBsB,CAAlB,EAAqB8E,KAA3C,EAAkD9E,CAAlD,EAAqD6E,WAArD;AACH;;AAAA;AACJ;;;qCAEiBE,W,EAAavE,K,EAAOwE,K,EAAO;AAAA;;AACzC,UAAM/C,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAK5D,KAAL,CAAW6D,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,kEAAgEmC,WAAhE,GAA4E,GAA1F,EAA+F,UAACzC,GAAD,EAAMS,MAAN,EAAiB;AAC5G,cAAIT,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACb3B,cAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAI2C,cAAc,GAAG,EAArB;;AACA,mBAAK,IAAIjF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,MAAM,CAACG,SAAP,CAAiBjD,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAC9CiF,gBAAAA,cAAc,CAAC5B,IAAf,CAAoB;AAACzF,kBAAAA,KAAK,EAAEmF,MAAM,CAACG,SAAP,CAAiBlD,CAAjB,EAAoBkF;AAA5B,iBAApB;AACH;;AAAA;;AACD,kBAAGF,KAAK,CAACxE,KAAD,CAAL,IAAgB2E,SAAnB,EAA8B;AAC1BH,gBAAAA,KAAK,CAACxE,KAAD,CAAL,GAAe,EAAf;AACH;;AACDwE,cAAAA,KAAK,CAACxE,KAAD,CAAL,GAAeC,CAAC,CAAC2E,KAAF,CAAQJ,KAAK,CAACxE,KAAD,CAAb,EAAsByE,cAAtB,CAAf;;AACA,cAAA,MAAI,CAAC9D,QAAL,CAAc;AACVxC,gBAAAA,YAAY,EAAEqG;AADJ,eAAd;AAGH,aAZD;AAaH;AACJ,SAtBD;AAuBH,OA7BD,EAFyC,CA+BrC;AACP;;;6BAEQ;AACL,aACI,6CACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE,aAAhB;AAA+B,QAAA,KAAK,EAAE;AAACL,UAAAA,KAAK,EAAE;AAAR;AAAtC,SACI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,mCAAtB;AAA0D,QAAA,OAAO,EAAE,KAAKpG,KAAL,CAAW8G;AAA9E,4BADJ,CADJ,CADJ,EAMI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE,aAAhB;AAA+B,QAAA,KAAK,EAAE;AAACV,UAAAA,KAAK,EAAE;AAAR;AAAtC,SACI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,iCAAtB;AAAwD,QAAA,OAAO,EAAE,KAAKpG,KAAL,CAAW8G;AAA5E,2BADJ,CADJ,CANJ,CADJ,EAaI,2CAbJ,EAcI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE;AAAhB,SACI;AAAK,QAAA,SAAS,EAAE,0BAAhB;AAA4C,QAAA,KAAK,EAAE;AAACV,UAAAA,KAAK,EAAE;AAAR;AAAnD,SACI;AAAK,QAAA,KAAK,EAAE;AAACA,UAAAA,KAAK,EAAE;AAAR;AAAZ,SACI;AAAK,QAAA,SAAS,EAAE,SAAhB;AAA2B,QAAA,KAAK;AAAGC,UAAAA,MAAM,EAAE,MAAX;AAAmBU,UAAAA,OAAO,EAAE,MAA5B;AAAoCC,UAAAA,UAAU,EAAE,QAAhD;AAA0DC,UAAAA,cAAc,EAAE,QAA1E;AAAoFC,UAAAA,eAAe,EAAE,SAArG;AAAgHC,UAAAA,KAAK,EAAE,OAAvH;AAAgIC,UAAAA,YAAY,EAAE,YAA9I;AAA4JC,UAAAA,QAAQ,EAAE,YAAtK;AAAoLC,UAAAA,UAAU,EAAE;AAAhM,yBAA6N,UAA7N;AAAhC,SACI,gCAAC,oBAAD;AAAU,QAAA,OAAO,EAAE,KAAKrH,KAAL,CAAWC,OAA9B;AAAuC,QAAA,cAAc,EAAE,KAAKG,cAA5D;AAA4E,QAAA,MAAM,EAAE,MAApF;AAA4F,QAAA,KAAK,EAAE,MAAnG;AAA2G,QAAA,UAAU,EAAE,IAAvH;AAA6H,QAAA,iBAAiB,EAAE;AAAhJ,QADJ,CADJ,CADJ,EAMI;AAAK,QAAA,KAAK,EAAE;AAAC+F,UAAAA,KAAK,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAE;AAAxB;AAAZ,SACI;AAAK,QAAA,KAAK,EAAE;AAACD,UAAAA,KAAK,EAAE,KAAR;AAAeC,UAAAA,MAAM,EAAE,MAAvB;AAA+B,mBAAO,MAAtC;AAA8CkB,UAAAA,WAAW,EAAE,iBAA3D;AAA8EC,UAAAA,SAAS,EAAE,iBAAzF;AAA4GC,UAAAA,YAAY,EAAE,iBAA1H;AAA6IC,UAAAA,OAAO,EAAE,OAAtJ;AAA+JC,UAAAA,SAAS,EAAE;AAA1K;AAAZ,SACI;AAAK,QAAA,SAAS,EAAE,SAAhB;AAA2B,QAAA,KAAK,EAAE;AAACvB,UAAAA,KAAK,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAE,KAAxB;AAA+BU,UAAAA,OAAO,EAAE,MAAxC;AAAgDC,UAAAA,UAAU,EAAE,QAA5D;AAAsEC,UAAAA,cAAc,EAAE;AAAtF;AAAlC,gCADJ,EAII;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACZ,UAAAA,MAAM,EAAE;AAAT;AAA9B,SACI,gCAAC,gDAAD;AAAsC,QAAA,WAAW,EAAE,KAAnD;AAA0D,QAAA,WAAW,EAAE,IAAvE;AAA8E,QAAA,MAAM,EAAE,KAAKpG,KAAL,CAAWE,MAAjG;AAAyG,QAAA,YAAY,EAAE,KAAKF,KAAL,CAAWG,YAAlI;AAAgJ,QAAA,SAAS,EAAEb,SAA3J;AAAsK,QAAA,OAAO,EAAEC,OAA/K;AAAwL,QAAA,eAAe,EAAEC,eAAzM;AAA0N,QAAA,mBAAmB,EAAE,KAA/O;AAAsP,QAAA,wBAAwB,EAAE,KAAKc;AAArR,QADJ,CAJJ,CADJ,EASI;AAAK,QAAA,KAAK,EAAE;AAAC6F,UAAAA,KAAK,EAAE,KAAR;AAAeC,UAAAA,MAAM,EAAE,MAAvB;AAA+B,mBAAO,OAAtC;AAA+CmB,UAAAA,SAAS,EAAE,iBAA1D;AAA6EC,UAAAA,YAAY,EAAE,iBAA3F;AAA8GC,UAAAA,OAAO,EAAE,OAAvH;AAAgIE,UAAAA,MAAM,EAAE;AAAxI;AAAZ,SACI;AAAK,QAAA,SAAS,EAAE,SAAhB;AAA2B,QAAA,KAAK,EAAE;AAACxB,UAAAA,KAAK,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAE,KAAxB;AAA+BU,UAAAA,OAAO,EAAE,MAAxC;AAAgDC,UAAAA,UAAU,EAAE,QAA5D;AAAsEC,UAAAA,cAAc,EAAE;AAAtF;AAAlC,iCADJ,EAII;AAAK,QAAA,SAAS,EAAE,KAAhB;AAAuB,QAAA,KAAK,EAAE;AAACZ,UAAAA,MAAM,EAAE;AAAT;AAA9B,SACI,gCAAC,gDAAD;AAAsC,QAAA,WAAW,EAAE,IAAnD;AAAyD,QAAA,WAAW,EAAE,KAAtE;AAA6E,QAAA,WAAW,EAAEjH,WAA1F;AAAuG,QAAA,mBAAmB,EAAE,KAA5H;AAAmI,QAAA,wBAAwB,EAAE,KAAKmB;AAAlK,QADJ,CAJJ,CATJ,CANJ,EAwBI,2CAxBJ,EAyBI;AAAK,QAAA,SAAS,EAAE,aAAhB;AAA+B,QAAA,KAAK,EAAE;AAAC6F,UAAAA,KAAK,EAAE;AAAR;AAAtC,SACI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,wBAAtB;AAA+C,QAAA,OAAO,EAAE,KAAK5F;AAA7D,gCADJ,CAzBJ,EA4BI,2CA5BJ,CADJ,CADJ,CADJ,CAdJ,EAkDI,2CAlDJ,EAmDI;AAAK,QAAA,SAAS,EAAE,aAAhB;AAA+B,QAAA,KAAK,EAAE;AAAC4F,UAAAA,KAAK,EAAE;AAAR;AAAtC,SACI;AAAG,QAAA,SAAS,EAAE,gEAAd;AAAgF,QAAA,KAAK,EAAE;AAACe,UAAAA,KAAK,EAAE;AAAR,SAAvF;AAA2G,QAAA,OAAO,EAAE,KAAKlG;AAAzH,8BADJ,CAnDJ,EAsDI,2CAtDJ,CADJ;AA0DH;;;;EArlBgC4G,kBAAMC,S","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport sql from 'mssql';\n\nimport Equacion from './Equacion.js';\nimport ListasSeleVariableContenedorVariable from './ListasSeleVariableContenedorVariable.js';\nimport ListasSeleVariableContenedorOperador from './ListasSeleVariableContenedorOperador.js';\n\n//const campos = [{valor: \"idCLiente\", tipo: \"variable\"}, {valor: \"saldoTotal\", tipo: \"variable\"}, {valor: \"tipoPersona\", tipo: \"variable\"}, {valor: \"impuestosTotal\", tipo: \"variable\"}, {valor: \"nombreCliente\", tipo: \"variable\"}, {valor: \"diasMora\", tipo: \"variable\"}, {valor: \"mesMora\", tipo: \"variable\"}];\n//var tablas = [], camposTablas = [];\nconst operaciones = [{valor: \"+\", tipo: \"signo\"}, {valor: \"-\", tipo: \"signo\"}, {valor: \"*\", tipo: \"signo\"},{valor: \"/\", tipo: \"signo\"}, {valor: \"COUNT\", tipo: \"signo\"}];\nconst variables = [];\nconst objetos = [];\nconst camposDeObjetos = [];\nconst anchuraSeccionFormula = [\"100%\", \"50\", \"33%\", \"25%\", \"25%\", \"17%\", \"15%\", \"13%\", \"11%\", \"10%\", \"9%\"];\n\nvar variableSeleccionada = [], operacionSeleccionada = [], posicionDeIndicadorSeleccionadoEnFormula = '', posicionIndicador ='';\n\n/*var arrregloPrueba = [  {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"},\n                        {valor: [{valor: \"a\", width: \"100%\", height: \"49%\", tipo: \"variable\"},\n                            {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                            {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}],\n                        width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"},\n                        {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\nX = (SALDOS_MAYO)/(CLIENTES_RIESGOS)    |     (SONDEO_FINAL)/((CLIENTES_RIESGOS+FINALES_X)-B)\nINPUT: NOMBRE VARIABLE, CADA TECLA SE METE A ARREGLO A MOSTRAR, QUE ES INPUT EN MAYUSCULA SI ES LETRA, CADA ESPACIO ES _*/\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: [{valor: \"a\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"m\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"}, {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}], width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: [{valor: \"a\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"m\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"}, {valor: \"b\", width: \"32%\", height: \"49%\", tipo: \"variable\"}, {valor: \"+\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"zsasasas\", width: \"32%\", height: \"49%\", tipo: \"variable\"}, {valor: \"*\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"d\", width: \"32%\", height: \"49%\", tipo: \"variable\"}], width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: \"a\", width: \"90%\", height: \"100%\", tipo: \"variable\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n/*var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, \n                        {valor: [{valor: \"a\", width: \"44%\", height: \"49%\", tipo: \"variable\"},\n                            {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"},\n                            {valor: \"\\\\\", width: \"5%\", height: \"49%\", tipo: \"indicador\", posicion: \"izquierda\"},\n                            {valor: [{valor: \"saldo\", width: \"100%\", height: \"49%\", tipo: \"variable\"},\n                                {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                                {valor: \"local\", width: \"100%\", height: \"49%\", tipo: \"variable\"}]\n                            , width: \"44%\", height: \"49%\", tipo: \"contenedorDivision\"},\n                            {valor: \"\\\\\", width: \"5%\", height: \"49%\", tipo: \"indicador\", posicion: \"derecha\"},\n                            {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                            {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}]\n                        , width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"},\n                        {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];*/\nexport default class Formula extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            formula: [],\n            tablas: [],\n            camposTablas: []\n        }\n        this.clickEnFormula = this.clickEnFormula.bind(this);\n        this.retornoClickLista = this.retornoClickLista.bind(this);\n        this.agregarAFormula = this.agregarAFormula.bind(this);\n        this.updateFormulaState = this.updateFormulaState.bind(this);\n        this.getFormula = this.getFormula.bind(this);\n        this.crearArregloDeFormula = this.crearArregloDeFormula.bind(this);\n        this.esOperacionAritmetica = this.esOperacionAritmetica.bind(this);\n        this.esOperacionCompleja = this.esOperacionCompleja.bind(this);\n        this.getPalabraFormula = this.getPalabraFormula.bind(this);\n        this.agregarFormulaAnchuraYAltura = this.agregarFormulaAnchuraYAltura.bind(this);\n        this.findVariableInFormula = this.findVariableInFormula.bind(this);\n        this.iniciarGuardarVariable = this.iniciarGuardarVariable.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.loadTablas = this.loadTablas.bind(this);\n        this.initLoadTablasCampos = this.initLoadTablasCampos.bind(this);\n        this.loadTablasCampos = this.loadTablasCampos.bind(this);\n    }\n\n    componentDidMount() {\n        /*console.log('arrregloPrueba');\n        console.log(arrregloPrueba);\n        this.findVariableInFormula(arrregloPrueba, \"b\", '');\n        console.log( posicionDeIndicadorSeleccionadoEnFormula );*/\n        this.getFormula();\n        this.loadTablas();\n    }\n\n    findVariableInFormula (arreglo, variable, posicionEnArreglo) {\n        for (var i = 0; i < arreglo.length; i++) {\n            if( !Array.isArray(arreglo[i].valor) && arreglo[i].valor.localeCompare(variable) == 0) {\n                posicionDeIndicadorSeleccionadoEnFormula = posicionEnArreglo+'['+i+']';\n            } else if( Array.isArray(arreglo[i].valor) ) {\n                this.findVariableInFormula (arreglo[i].valor, variable, posicionEnArreglo+'['+i+'].valor');\n            }\n        };\n    }\n\n    clickEnFormula (e, posicion, nombre, index) {\n        /*e.stopPropagation()\n        console.log(e)\n        console.log(e.target.className);\n        var test = (e.clientX-this.offsetLeft) / this.offsetWidth * 100;\n        var test1 = e.clientX;\n        var test2 = e.offsetX;\n        var elm = $(this);\n        console.log(test);\n        console.log(test1);\n        console.log(test2);\n        console.log(elm);\n        var node = ReactDOM.findDOMNode(this);\n        console.log(window.getComputedStyle(node).offset);\n        console.log(node.getBoundingClientRect());\n        var nueva = e.nativeEvent.offsetY;\n        console.log('nueva');\n        console.log(nueva);*/\n        for (var i = 0; i < this.state.formula.length; i++) {\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor).removeClass(\"colorPunteroFormula\");\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor).removeClass(\"blink\");\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor).addClass(\"highlightFormulaBackground\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor).removeClass(\"colorPunteroFormula\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor).removeClass(\"blink\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor).addClass(\"highlightFormulaBackground\");\n        };\n        if(posicion == null) {\n            console.log('1');\n            console.log(this.state.formula);\n            posicionIndicador = '';\n            this.findVariableInFormula(this.state.formula, nombre, '');\n            console.log('posicionDeIndicadorSeleccionadoEnFormula');\n            console.log(posicionDeIndicadorSeleccionadoEnFormula);\n            var temp = [...this.state.formula];\n            console.log('temp');\n            console.log(temp);\n            console.log(temp+posicionDeIndicadorSeleccionadoEnFormula);\n            var tempVar;\n            eval(\"tempVar = temp\"+posicionDeIndicadorSeleccionadoEnFormula);\n            console.log('index = '+index);\n            console.log('tempVar');\n            console.log(tempVar);\n            console.log(tempVar.activa);\n            tempVar.activa = !tempVar.activa;\n            temp.splice(index, 1, tempVar);\n            this.setState({\n                formula: temp\n            }, console.log(this.state.formula));\n        } else if (posicion.localeCompare(\"izquierda\") == 0) {\n            console.log('2');\n            posicionIndicador = 'izquierda';\n            $(\"#indicadorIzquierda\"+nombre).addClass(\"colorPunteroFormula\");\n            $(\"#indicadorIzquierda\"+nombre).addClass(\"blink\");\n            $(\"#indicadorIzquierda\"+nombre).removeClass(\"highlightFormulaBackground\");\n            this.findVariableInFormula(this.state.formula, nombre, '');\n            console.log('posicionDeIndicadorSeleccionadoEnFormula');\n            console.log(posicionDeIndicadorSeleccionadoEnFormula);\n        } else if (posicion.localeCompare(\"derecha\") == 0) {\n            console.log('3');\n            posicionIndicador = 'derecha';\n            $(\"#indicadorDerecha\"+nombre).addClass(\"colorPunteroFormula\");\n            $(\"#indicadorDerecha\"+nombre).addClass(\"blink\");\n            $(\"#indicadorDerecha\"+nombre).removeClass(\"highlightFormulaBackground\");\n            this.findVariableInFormula(this.state.formula, nombre, '');\n            console.log('posicionDeIndicadorSeleccionadoEnFormula');\n            console.log(posicionDeIndicadorSeleccionadoEnFormula);\n        } else if (posicion.localeCompare(\"empty\") == 0) {\n            if($(\"#indicadorFormulaVacia\").hasClass(\"colorPunteroFormula\")) {\n                $(\"#indicadorFormulaVacia\").removeClass(\"blink\");\n                $(\"#indicadorFormulaVacia\").removeClass(\"colorPunteroFormula\");\n            } else {\n                $(\"#indicadorFormulaVacia\").addClass(\"blink\");\n                $(\"#indicadorFormulaVacia\").addClass(\"colorPunteroFormula\");\n            }\n        }\n    }\n\n    retornoClickLista (esOperacionLista, variablesNuevas) {\n        if(esOperacionLista) {\n            operacionSeleccionada = variablesNuevas;\n        } else {\n            variableSeleccionada = variablesNuevas;\n        }\n        console.log('operacionSeleccionada')\n        console.log(operacionSeleccionada)\n        console.log('variableSeleccionada')\n        console.log(variableSeleccionada)\n    }\n\n    agregarAFormula () {\n        if(this.state.formula.length == 0 && $(\"div\").hasClass(\"colorPunteroFormula\")) {        //caso inicial, agregar primera variable\n            var formulaTemp = [...this.state.formula];\n            variableSeleccionada[0].activa = false;\n            variableSeleccionada[0].tipo = \"variable\";\n            formulaTemp = formulaTemp.concat(variableSeleccionada);\n            console.log('formulaTemp 1');\n            console.log(formulaTemp);\n            this.agregarFormulaAnchuraYAltura(formulaTemp, false);\n            console.log('formulaTemp 2');\n            console.log(formulaTemp);\n            this.setState({\n                formula: formulaTemp\n            }, console.log(this.state.formula) );\n        } else if(this.state.formula.length > 0 && $(\"div\").hasClass(\"colorPunteroFormula\")) {        //caso inicial, agregar primera variable\n            var formulaTemp = [...this.state.formula];\n            //var formulaTemp = this.state.formula.slice();\n            variableSeleccionada[0].activa = false;\n            variableSeleccionada[0].tipo = \"variable\";\n            var posicionArreglo = '', ultimoIndice = '', noHaLeidoUltimoIndice = true;\n            for (var i = posicionDeIndicadorSeleccionadoEnFormula.length - 1; i >= 0; i--) {\n                if (!noHaLeidoUltimoIndice) {\n                    posicionArreglo += posicionDeIndicadorSeleccionadoEnFormula.charAt(i);\n                }\n                if (posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') != 0 && posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare(']') != 0 && noHaLeidoUltimoIndice) {\n                    if( posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') != 0 && posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare(']') != 0 )\n                        ultimoIndice += posicionDeIndicadorSeleccionadoEnFormula.charAt(i);\n                    if(posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') == 0) {\n                        noHaLeidoUltimoIndice = false;\n                    }\n                }\n            };\n            //var tempVar;\n            //eval(\"tempVar = temp\"+posicionArreglo);\n            console.log('posicionArreglo');\n            console.log(posicionArreglo);\n            console.log('ultimoIndice');\n            console.log(ultimoIndice);\n            console.log('formulaTemp');\n            console.log(formulaTemp);\n            if(posicionIndicador.localeCompare(\"derecha\") == 0) {\n                if(posicionArreglo.length > 0) {\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada[0]);\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, operacionSeleccionada[0]);\n                } else {\n                    formulaTemp.splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada[0]);\n                    formulaTemp.splice(parseInt(ultimoIndice)+1, 0, operacionSeleccionada[0]);\n                }\n                //eval(\"formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada[0])\");\n            } else {\n                if(posicionArreglo.length > 0) {\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice), 0, operacionSeleccionada[0]);\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice), 0, variableSeleccionada[0]);\n                } else {\n                    formulaTemp.splice(parseInt(ultimoIndice), 0, operacionSeleccionada[0]);\n                    formulaTemp.splice(parseInt(ultimoIndice), 0, variableSeleccionada[0]);\n                }\n            }\n            console.log('formulaTemp 1');\n            console.log(formulaTemp);\n            this.agregarFormulaAnchuraYAltura(formulaTemp, false);\n            console.log('formulaTemp 2');\n            console.log(formulaTemp);\n            this.setState({\n                formula: formulaTemp\n            }, console.log(this.state.formula) );\n        } else if( !$(\"div\").hasClass(\"colorPunteroFormula\") ){\n            alert(\"Seleccione una posición en la fórmula.\");\n        }\n        /*var formulaTemp = [...this.state.formula];\n        variableSeleccionada[0].activa = false;\n        if(ladoIndice.localeCompare(\"centro\") == 0) {\n            if(formulaTemp.length >= 3)\n                formulaTemp = [];\n            formulaTemp = formulaTemp.concat(variableSeleccionada);\n            ladoIndice = \"izquierda\";\n        } else if(ladoIndice.localeCompare(\"izquierda\") == 0) {\n            if(formulaTemp.length >= 3)\n                formulaTemp = [];\n            formulaTemp.splice(0, 0, operacionSeleccionada[0]);\n            formulaTemp.splice(0, 0, variableSeleccionada[0]);\n        } else if(ladoIndice.localeCompare(\"derecha\") == 0) {\n            if(formulaTemp.length >= 3)\n                formulaTemp = [];\n            formulaTemp = formulaTemp.concat(operacionSeleccionada);\n            formulaTemp = formulaTemp.concat(variableSeleccionada);\n        }\n        console.log('formulaTemp')\n        console.log(formulaTemp)\n        var width;\n        if(formulaTemp < anchuraSeccionFormula.length) {\n            width = anchuraSeccionFormula[formulaTemp.length-1];\n        } else {\n            width = anchuraSeccionFormula[anchuraSeccionFormula.length%formulaTemp.length];\n        }\n        this.setState({\n            formula: formulaTemp,\n            anchuraSeccionFormula: width\n        }, console.log(this.state.formula) );\n        console.log('this.state.formula')\n        console.log(this.state.formula)*/\n    }\n\n    updateFormulaState (nuevaFormula) {\n        if(this.validarNuevaFormula(nuevaFormula)) {\n            this.setState({\n                formula: this.state.formula + nuevaFormula\n            });\n        }\n    }\n\n    getFormula () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select formula from \"+this.props.tablaVarEditar+\" where ID = \"+this.props.idVarEditar, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.crearArregloDeFormula(result.recordset[0].formula);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearArregloDeFormula (formula) {\n        console.log('formula');\n        console.log(formula);\n        var nuevoArregloFormula = [];\n        for (var i = 0; i < formula.length; i++) {\n            var variableProcesarFormula = getPalabraFormula\n            if(formula.charAt(i).localeCompare('(') == 0 || formula.charAt(i).localeCompare(')') == 0) {\n                nuevoArregloFormula.push({valor: \"seleccion\"});\n            } else if(formula.charAt(i).localeCompare('[') == 0) {\n                //\n            } else if(this.esOperacionAritmetica(formula.charAt(i))) {\n                nuevoArregloFormula.push({valor: formula.charAt(i)});\n            } else if(this.esOperacionCompleja(formula, i)) {\n                var nombre = this.getPalabraFormula(formula, i);\n                nuevoArregloFormula.push({valor: nombre});\n            } else if(this.esVariable(formula, i)) {\n                var nombre = this.getPalabraFormula(formula, i);\n                nuevoArregloFormula.push({valor: nombre});\n            }\n        };\n        this.agregarFormulaAnchuraYAltura(nuevoArregloFormula);\n    }\n\n    esOperacionAritmetica (caracter) {\n        if(caracter.localeCompare('+') == 0) {\n            return true;\n        } else if(caracter.localeCompare('-') == 0) {\n            return true;\n        } else if(caracter.localeCompare('/') == 0) {\n            return true;\n        } else if(caracter.localeCompare('*') == 0) {\n            return true;\n        } else if(caracter.localeCompare('x') == 0) {\n            return true;\n        }\n        return false;\n    }\n\n    esOperacionCompleja (formula, posicionCaracter) {\n        var palabra = this.getPalabraFormula(formula, posicionCaracter);\n        if(palabra.localeCompare('RAND') == 0) {\n            return true;\n        } else if(palabra.localeCompare('DIA') == 0) {\n            return true;\n        } else if(palabra.localeCompare('AVERAJE') == 0) {\n            return true;\n        } else if(palabra.localeCompare('MEDIA') == 0) {\n            return true;\n        }\n        return false;\n    }\n\n    getPalabraFormula (formula, posicionCaracter) {\n        var variable = '';\n        for (var i = posicionCaracter; i < formula.length; i++) {\n            if(formula.charAt(i) != \"(\" && formula.charAt(i) != \")\" && formula.charAt(i) != \"\\\\\" && \n                formula.charAt(i) != \"/\" && formula.charAt(i) != \"*\" && formula.charAt(i) != \"[\" && \n                formula.charAt(i) != \"√\" && formula.charAt(i) != \"+\" && formula.charAt(i) != \"-\")\n                variable+=formula[i];\n            else\n                return variable;\n        };\n        return variable;\n    }\n\n    esVariable (formula, posicionCaracter) {\n        var palabra = this.getPalabraFormula(formula, posicionCaracter);\n        for (var i = 0; i < campos.length; i++) {\n            if(campos[i].nombre.localeCompare(palabra) == 0) {\n                return true;\n            }\n        };\n        for (var i = 0; i < variables.length; i++) {\n            if(variables[i].nombre.localeCompare(palabra) == 0) {\n                return true;\n            }\n        };\n        for (var i = 0; i < objetos.length; i++) {\n            for (var j = 0; j < camposDeObjetos[i].length; j++) {\n                if(camposDeObjetos[i][j].nombre.localeCompare(palabra) == 0) {\n                    return true;\n                }\n            };\n        };\n        return false;\n    }\n\n    agregarFormulaAnchuraYAltura(arregloFormula, esDivision) {\n        var contadorIndicadoresNumerador = 0, contadorIndicadoresDenominador = 0, contadorSignosNumerador = 0, contadorSignosDenominador = 0, contadorVariablesNumerador = 0, contadorVariablesDenominador = 0, esDespuesDivision = false;\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( !Array.isArray(arregloFormula[i].valor) && this.esOperacionAritmetica(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    contadorSignosNumerador++;\n                } else {\n                    contadorSignosDenominador++;\n                }\n            } else if( (!Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") != 0 && !this.esOperacionAritmetica(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"division\\\\\") != 0) || Array.isArray(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    contadorVariablesNumerador++;\n                } else {\n                    contadorVariablesDenominador++;\n                }\n            } else if( !Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") == 0 ) {\n                if(!esDespuesDivision) {\n                    contadorIndicadoresNumerador++;\n                } else {\n                    contadorIndicadoresDenominador++;\n                }\n            }\n            if ( arregloFormula[i].valor.localeCompare(\"division\\\\\") == 0 ) {\n                esDespuesDivision = true;\n            }\n        };\n        var widthNumerador = 100;\n        //var height = 100;\n        var restaTotalIndicadoresNumerador = contadorIndicadoresNumerador * 5;\n        widthNumerador -= restaTotalIndicadoresNumerador;\n        var restaTotalSignosNumerador = contadorSignosNumerador * 2;\n        widthNumerador -= restaTotalSignosNumerador;\n        widthNumerador /= contadorVariablesNumerador;\n\n        var widthDenominador = 100;\n        var restaTotalIndicadoresDenominador = contadorIndicadoresDenominador * 5;\n        widthDenominador -= restaTotalIndicadoresDenominador;\n        var restaTotalSignosDenominador = contadorSignosDenominador * 2;\n        widthDenominador -= restaTotalSignosDenominador;\n        widthDenominador /= contadorVariablesDenominador;\n\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( !Array.isArray(arregloFormula[i].valor) && this.esOperacionAritmetica(arregloFormula[i].valor) ) {\n                arregloFormula[i].width = \"2%\";\n            } else if( (!Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") != 0 && !this.esOperacionAritmetica(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"division\\\\\") != 0) || Array.isArray(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    arregloFormula[i].width = widthNumerador+\"%\";\n                } else {\n                    arregloFormula[i].width = widthDenominador+\"%\";\n                }\n            } else if( !Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") == 0 ) {\n                arregloFormula[i].width = \"5%\";\n            }\n            if ( arregloFormula[i].valor.localeCompare(\"division\\\\\") == 0 ) {\n                arregloFormula[i].height = \"2%\";\n            } else {\n                if(esDivision) {\n                    arregloFormula[i].height = \"49%\";\n                } else {\n                    arregloFormula[i].height = \"100%\";\n                }\n            }\n        };\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( Array.isArray(arregloFormula[i].valor) ) {\n                this.agregarFormulaAnchuraYAltura(arregloFormula[i].valor);\n            }\n        }\n        /*var width = 0, posicionX = 0, posicionY = 0;\n        for (var i = 0; i < nuevoArregloFormula.length; i++) {\n            if (nuevoArregloFormula[i].length == undefined) {\n                //\n            }\n        };\n        this.setState({\n            formula: formulaTemp,\n            anchuraSeccionFormula: width\n        }, console.log(this.state.formula) );*/\n    }\n\n    iniciarGuardarVariable () {\n        var formula = '';\n        for (var i = 0; i < this.state.formula.length; i++) {\n            formula += this.state.formula[i].valor;\n        };\n        console.log('formula');\n        console.log(formula);\n        //this.guardarVariable(formula);\n    }\n\n    guardarVariable (formula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update \"+this.props.tablaVarEditar+\" set formula = '\"+formula+\"' where ID = \"+this.props.idVarEditar, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadTablas () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Tablas\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            tablas: result.recordset\n                        }, this.initLoadTablasCampos );\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    initLoadTablasCampos() {\n        var arregloTemp = [];\n        for (var i = 0; i < this.state.tablas.length; i++) {\n            this.loadTablasCampos(this.state.tablas[i].tabla, i, arregloTemp);\n        };\n    }\n\n    loadTablasCampos (nombreTabla, index, array) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = '\"+nombreTabla+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var nombreColumnas = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            nombreColumnas.push({valor: result.recordset[i].COLUMN_NAME});\n                        };\n                        if(array[index] == undefined) {\n                            array[index] = [];\n                        }\n                        array[index] = $.merge(array[index], nombreColumnas);\n                        this.setState({\n                            camposTablas: array\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    \n    render() {\n        return (\n            <div>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6\"}>\n                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                            <a href=\"#\" className=\"btn btn-primary font-bold font-20\" onClick={this.props.showVariables}>Ir a Condiciones</a>\n                        </div>\n                    </div>\n                    <div className={\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6\"}>\n                        <div className={\"text-center\"} style={{width: \"100%\"}}>\n                            <a href=\"#\" className=\"btn btn-brand font-bold font-20\" onClick={this.props.showVariables}>Crear Variables</a>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"card\"}>\n                            <div className={\"border-top border-bottom\"} style={{width: \"100%\"}}>\n                                <div style={{width: \"100%\"}}>\n                                    <div className={\"font-20\"} style={{height: \"45vh\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", backgroundColor: \"#e6e6f2\", color: \"black\", overflowWrap: \"break-word\", wordWrap: \"break-word\", whiteSpace: \"-moz-pre-wrap\", whiteSpace: \"pre-wrap\"}}>\n                                        <Equacion formula={this.state.formula} clickEnFormula={this.clickEnFormula} height={\"100%\"} width={\"100%\"} isFirstRow={true} posicionEnArreglo={\"0\"}></Equacion>\n                                    </div>\n                                </div>\n                                <div style={{width: \"100%\", height: \"250px\"}}>\n                                    <div style={{width: \"50%\", height: \"100%\", float: \"left\", borderRight: \"1px solid black\", borderTop: \"1px solid black\", borderBottom: \"1px solid black\", padding: \"0% 1%\", overflowY: \"scroll\"}}>\n                                        <div className={\"font-18\"} style={{width: \"100%\", height: \"20%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            Seleccionar Variable\n                                        </div>\n                                        <div className={\"row\"} style={{height: \"100%\"}}>\n                                            <ListasSeleVariableContenedorVariable esOperacion={false} mostrarRosa={true}  tablas={this.state.tablas} camposTablas={this.state.camposTablas} variables={variables} objetos={objetos} camposDeObjetos={camposDeObjetos} seleccionarMultiple={false} retornoSeleccionVariable={this.retornoClickLista}></ListasSeleVariableContenedorVariable>\n                                        </div>\n                                    </div>\n                                    <div style={{width: \"50%\", height: \"100%\", float: \"right\", borderTop: \"1px solid black\", borderBottom: \"1px solid black\", padding: \"0% 1%\", scroll: \"auto\"}}>\n                                        <div className={\"font-18\"} style={{width: \"100%\", height: \"20%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            Seleccionar Operacion\n                                        </div>\n                                        <div className={\"row\"} style={{height: \"100%\"}}>\n                                            <ListasSeleVariableContenedorOperador esOperacion={true} mostrarRosa={false} operaciones={operaciones} seleccionarMultiple={false} retornoSeleccionVariable={this.retornoClickLista}></ListasSeleVariableContenedorOperador>\n                                        </div>\n                                    </div>\n                                </div>\n                                <br/>\n                                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                    <a href=\"#\" className=\"btn btn-primary active\" onClick={this.agregarAFormula}>Agregar a Fórmula</a>\n                                </div>\n                                <br/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                    <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.iniciarGuardarVariable}>Guardar Fórmula</a>\n                </div>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"Formula.js"}