{"version":3,"sources":["components/Formula.js"],"names":["operaciones","valor","tipo","operacionesNumero","operacionesFecha","operacionesBoolean","operacionesCadena","variablesEscalares","objetos","camposDeObjetos","anchuraSeccionFormula","variableSeleccionada","operacionSeleccionada","posicionDeIndicadorSeleccionadoEnFormula","posicionIndicador","Formula","props","state","formula","tablas","camposTablas","variables","camposVariables","clickEnFormula","bind","retornoSeleccionCampo","retornoSeleccionOperacion","existeReglaAsignacion","retornarCodigoOperacion","agregarAFormula","updateFormulaState","getFormula","crearArregloDeFormula","esOperacionAritmetica","esOperacionCompleja","getPalabraFormula","agregarFormulaAnchuraYAltura","findVariableInFormula","iniciarGuardarFormula","guardarVariable","loadTablas","initLoadTablasCampos","loadTablasCampos","loadScalarVariables","loadScalarVariablesFields","loadVariables","initLoadVariablesCampos","loadVariablesCampos","arreglo","variable","posicionEnArreglo","i","length","Array","isArray","localeCompare","e","posicion","nombre","index","$","removeClass","addClass","temp","tempVar","eval","activa","splice","setState","console","log","hasClass","esOperacion","posicionTabla","columnaSeleccionada","tipoVariable","retornoCampo","operacion","retornoOperacion","codigo","formulaTemp","texto","concat","self","setTimeout","posicionArreglo","ultimoIndice","noHaLeidoUltimoIndice","charAt","parseInt","alert","nuevaFormula","validarNuevaFormula","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","tablaVarEditar","idVarEditar","result","rollback","commit","recordset","nuevoArregloFormula","variableProcesarFormula","push","esVariable","caracter","posicionCaracter","palabra","campos","j","arregloFormula","esDivision","contadorIndicadoresNumerador","contadorIndicadoresDenominador","contadorSignosNumerador","contadorSignosDenominador","contadorVariablesNumerador","contadorVariablesDenominador","esDespuesDivision","widthNumerador","restaTotalIndicadoresNumerador","restaTotalSignosNumerador","widthDenominador","restaTotalIndicadoresDenominador","restaTotalSignosDenominador","width","height","anadirFormula","arregloTemp","tabla","nombreTabla","array","nombreColumnas","COLUMN_NAME","DATA_TYPE","esFuenteDato","idConexionTabla","ID","undefined","merge","variableID","navbar","display","alignItems","justifyContent","backgroundColor","color","overflowWrap","wordWrap","whiteSpace","borderRight","borderTop","borderBottom","padding","overflowY","scroll","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport sql from 'mssql';\n\nimport Equacion from './Equacion.js';\nimport ListasSeleVariableContenedorVariable from './ListasSeleVariableContenedorVariable.js';\nimport ListasSeleVariableContenedorOperador from './ListasSeleVariableContenedorOperador.js';\n\n//const campos = [{valor: \"idCLiente\", tipo: \"variable\"}, {valor: \"saldoTotal\", tipo: \"variable\"}, {valor: \"tipoPersona\", tipo: \"variable\"}, {valor: \"impuestosTotal\", tipo: \"variable\"}, {valor: \"nombreCliente\", tipo: \"variable\"}, {valor: \"diasMora\", tipo: \"variable\"}, {valor: \"mesMora\", tipo: \"variable\"}];\n//var tablas = [], camposTablas = [];\nconst operaciones = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}];\nconst operacionesNumero = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Calcular Promedio\", tipo: \"signo\"}, {valor: \"Máximo\", tipo: \"signo\"}, {valor: \"Mínimo\", tipo: \"signo\"}, {valor: \"+\", tipo: \"signo\"}, {valor: \"-\", tipo: \"signo\"}, {valor: \"*\", tipo: \"signo\"}, {valor: \"/\", tipo: \"signo\"}];\nconst operacionesFecha = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}];\nconst operacionesBoolean = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}];\nconst operacionesCadena = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"+\", tipo: \"signo\"}];\n/*const operaciones = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Único Si\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples Si\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Contar Si\", tipo: \"signo\"}];\nconst operacionesNumero = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Único Si\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples Si\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Contar Si\", tipo: \"signo\"}, {valor: \"Calcular Promedio\", tipo: \"signo\"}, {valor: \"Máximo\", tipo: \"signo\"}, {valor: \"Mínimo\", tipo: \"signo\"}, {valor: \"+\", tipo: \"signo\"}, {valor: \"-\", tipo: \"signo\"}, {valor: \"*\", tipo: \"signo\"}, {valor: \"/\", tipo: \"signo\"}];\nconst operacionesFecha = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Único Si\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples Si\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Contar Si\", tipo: \"signo\"}];\nconst operacionesBoolean = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Único Si\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples Si\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Contar Si\", tipo: \"signo\"}];\nconst operacionesCadena = [{valor: \"Asignar Valor Único\", tipo: \"signo\"}, {valor: \"Asignar Valor Único Si\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples\", tipo: \"signo\"}, {valor: \"Asignar Valor Multiples Si\", tipo: \"signo\"}, {valor: \"Contar\", tipo: \"signo\"}, {valor: \"Contar Si\", tipo: \"signo\"}, {valor: \"+\", tipo: \"signo\"}];*/\n\nconst variablesEscalares = [];\nconst objetos = [];\nconst camposDeObjetos = [];\nconst anchuraSeccionFormula = [\"100%\", \"50\", \"33%\", \"25%\", \"25%\", \"17%\", \"15%\", \"13%\", \"11%\", \"10%\", \"9%\"];\n\nvar variableSeleccionada = [], operacionSeleccionada = [], posicionDeIndicadorSeleccionadoEnFormula = '', posicionIndicador ='';\n\n/*var arrregloPrueba = [  {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"},\n                        {valor: [{valor: \"a\", width: \"100%\", height: \"49%\", tipo: \"variable\"},\n                            {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                            {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}],\n                        width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"},\n                        {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\nX = (SALDOS_MAYO)/(CLIENTES_RIESGOS)    |     (SONDEO_FINAL)/((CLIENTES_RIESGOS+FINALES_X)-B)\nINPUT: NOMBRE VARIABLE, CADA TECLA SE METE A ARREGLO A MOSTRAR, QUE ES INPUT EN MAYUSCULA SI ES LETRA, CADA ESPACIO ES _*/\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: [{valor: \"a\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"m\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"}, {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}], width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: [{valor: \"a\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"m\", width: \"49%\", height: \"49%\", tipo: \"variable\"}, {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"}, {valor: \"b\", width: \"32%\", height: \"49%\", tipo: \"variable\"}, {valor: \"+\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"zsasasas\", width: \"32%\", height: \"49%\", tipo: \"variable\"}, {valor: \"*\", width: \"2%\", height: \"49%\", tipo: \"signo\"}, {valor: \"d\", width: \"32%\", height: \"49%\", tipo: \"variable\"}], width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n//var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, {valor: \"a\", width: \"90%\", height: \"100%\", tipo: \"variable\"}, {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];\n/*var arrregloPrueba = [{valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"izquierda\"}, \n                        {valor: [{valor: \"a\", width: \"44%\", height: \"49%\", tipo: \"variable\"},\n                            {valor: \"-\", width: \"2%\", height: \"49%\", tipo: \"signo\"},\n                            {valor: \"\\\\\", width: \"5%\", height: \"49%\", tipo: \"indicador\", posicion: \"izquierda\"},\n                            {valor: [{valor: \"saldo\", width: \"100%\", height: \"49%\", tipo: \"variable\"},\n                                {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                                {valor: \"local\", width: \"100%\", height: \"49%\", tipo: \"variable\"}]\n                            , width: \"44%\", height: \"49%\", tipo: \"contenedorDivision\"},\n                            {valor: \"\\\\\", width: \"5%\", height: \"49%\", tipo: \"indicador\", posicion: \"derecha\"},\n                            {valor: \"division\\\\\", width: \"100%\", height: \"2%\", tipo: \"division\\\\\"},\n                            {valor: \"b\", width: \"100%\", height: \"49%\", tipo: \"variable\"}]\n                        , width: \"90%\", height: \"100%\", tipo: \"contenedorDivision\"},\n                        {valor: \"\\\\\", width: \"5%\", height: \"100%\", tipo: \"indicador\", posicion: \"derecha\"}];*/\nexport default class Formula extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            formula: [],\n            tablas: [],\n            camposTablas: [],\n            variablesEscalares: [],\n            variables: [],\n            camposVariables: [],\n            operaciones: operacionesCadena,\n        }\n        this.clickEnFormula = this.clickEnFormula.bind(this);\n        this.retornoSeleccionCampo = this.retornoSeleccionCampo.bind(this);\n        this.retornoSeleccionOperacion = this.retornoSeleccionOperacion.bind(this);\n        this.existeReglaAsignacion = this.existeReglaAsignacion.bind(this);\n        this.retornarCodigoOperacion = this.retornarCodigoOperacion.bind(this);\n        this.agregarAFormula = this.agregarAFormula.bind(this);\n        this.updateFormulaState = this.updateFormulaState.bind(this);\n        this.getFormula = this.getFormula.bind(this);\n        this.crearArregloDeFormula = this.crearArregloDeFormula.bind(this);\n        this.esOperacionAritmetica = this.esOperacionAritmetica.bind(this);\n        this.esOperacionCompleja = this.esOperacionCompleja.bind(this);\n        this.getPalabraFormula = this.getPalabraFormula.bind(this);\n        this.agregarFormulaAnchuraYAltura = this.agregarFormulaAnchuraYAltura.bind(this);\n        this.findVariableInFormula = this.findVariableInFormula.bind(this);\n        this.iniciarGuardarFormula = this.iniciarGuardarFormula.bind(this);\n        this.guardarVariable = this.guardarVariable.bind(this);\n        this.loadTablas = this.loadTablas.bind(this);\n        this.initLoadTablasCampos = this.initLoadTablasCampos.bind(this);\n        this.loadTablasCampos = this.loadTablasCampos.bind(this);\n        this.loadScalarVariables = this.loadScalarVariables.bind(this);\n        this.loadScalarVariablesFields = this.loadScalarVariablesFields.bind(this);\n        this.loadVariables = this.loadVariables.bind(this);\n        this.initLoadVariablesCampos = this.initLoadVariablesCampos.bind(this);\n        this.loadVariablesCampos = this.loadVariablesCampos.bind(this);\n    }\n\n    componentDidMount() {\n        /*console.log('arrregloPrueba');\n        console.log(arrregloPrueba);\n        this.findVariableInFormula(arrregloPrueba, \"b\", '');\n        console.log( posicionDeIndicadorSeleccionadoEnFormula );*/\n        //this.getFormula();\n        this.loadTablas();\n        this.loadScalarVariables();\n        this.loadVariables();\n    }\n\n    findVariableInFormula (arreglo, variable, posicionEnArreglo) {\n        for (var i = 0; i < arreglo.length; i++) {\n            if( !Array.isArray(arreglo[i].valor) && arreglo[i].valor.localeCompare(variable) == 0) {\n                posicionDeIndicadorSeleccionadoEnFormula = posicionEnArreglo+'['+i+']';\n            } else if( Array.isArray(arreglo[i].valor) ) {\n                this.findVariableInFormula (arreglo[i].valor, variable, posicionEnArreglo+'['+i+'].valor');\n            }\n        };\n    }\n\n    clickEnFormula (e, posicion, nombre, index) {\n        /*e.stopPropagation()\n        console.log(e)\n        console.log(e.target.className);\n        var test = (e.clientX-this.offsetLeft) / this.offsetWidth * 100;\n        var test1 = e.clientX;\n        var test2 = e.offsetX;\n        var elm = $(this);\n        console.log(test);\n        console.log(test1);\n        console.log(test2);\n        console.log(elm);\n        var node = ReactDOM.findDOMNode(this);\n        console.log(window.getComputedStyle(node).offset);\n        console.log(node.getBoundingClientRect());\n        var nueva = e.nativeEvent.offsetY;\n        console.log('nueva');\n        console.log(nueva);*/\n        for (var i = 0; i < this.state.formula.length; i++) {\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor+i).removeClass(\"colorPunteroFormula\");\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor+i).removeClass(\"blink\");\n            $(\"#indicadorIzquierda\"+this.state.formula[i].valor+i).addClass(\"highlightFormulaBackground\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor+i).removeClass(\"colorPunteroFormula\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor+i).removeClass(\"blink\");\n            $(\"#indicadorDerecha\"+this.state.formula[i].valor+i).addClass(\"highlightFormulaBackground\");\n        };\n        if(posicion == null) {\n            posicionIndicador = '';\n            this.findVariableInFormula(this.state.formula, nombre, '');\n            var temp = [...this.state.formula];\n            var tempVar;\n            eval(\"tempVar = temp\"+posicionDeIndicadorSeleccionadoEnFormula);\n            tempVar.activa = !tempVar.activa;\n            temp.splice(index, 1, tempVar);\n            this.setState({\n                formula: temp\n            }, console.log(this.state.formula));\n        } else if (posicion.localeCompare(\"izquierda\") == 0) {\n            console.log('2');\n            posicionIndicador = 'izquierda';\n            $(\"#indicadorIzquierda\"+nombre+index).addClass(\"colorPunteroFormula\");\n            $(\"#indicadorIzquierda\"+nombre+index).addClass(\"blink\");\n            $(\"#indicadorIzquierda\"+nombre+index).removeClass(\"highlightFormulaBackground\");\n            this.findVariableInFormula(this.state.formula, nombre, '');\n        } else if (posicion.localeCompare(\"derecha\") == 0) {\n            console.log('3');\n            posicionIndicador = 'derecha';\n            $(\"#indicadorDerecha\"+nombre+index).addClass(\"colorPunteroFormula\");\n            $(\"#indicadorDerecha\"+nombre+index).addClass(\"blink\");\n            $(\"#indicadorDerecha\"+nombre+index).removeClass(\"highlightFormulaBackground\");\n            this.findVariableInFormula(this.state.formula, nombre, '');\n        } else if (posicion.localeCompare(\"empty\") == 0) {\n            if($(\"#indicadorFormulaVacia\").hasClass(\"colorPunteroFormula\")) {\n                $(\"#indicadorFormulaVacia\").removeClass(\"blink\");\n                $(\"#indicadorFormulaVacia\").removeClass(\"colorPunteroFormula\");\n            } else {\n                $(\"#indicadorFormulaVacia\").addClass(\"blink\");\n                $(\"#indicadorFormulaVacia\").addClass(\"colorPunteroFormula\");\n            }\n        }\n    }\n\n    retornoSeleccionCampo (esOperacion, variable, posicionTabla) {\n        if(variable[0].valor.length > 0) {\n            var columnaSeleccionada = variable[0];\n            variableSeleccionada = variable[0];\n            console.log('variableSeleccionada');\n            console.log(variableSeleccionada);\n            var tipoVariable = '';\n            if(columnaSeleccionada.tipo.localeCompare(\"int\") == 0 || columnaSeleccionada.tipo.localeCompare(\"decimal\") == 0) {\n                tipoVariable = 'Número';\n                this.setState({\n                    operaciones: operacionesNumero\n                });\n            } else if(columnaSeleccionada.tipo.localeCompare(\"varchar\") == 0) {\n                tipoVariable = 'Cadena';\n                this.setState({\n                    operaciones: operacionesCadena\n                });\n            } else if(columnaSeleccionada.tipo.localeCompare(\"date\") == 0) {\n                tipoVariable = 'Fecha';\n                this.setState({\n                    operaciones: operacionesFecha\n                });\n            } else if(columnaSeleccionada.tipo.localeCompare(\"bit\") == 0) {\n                tipoVariable = 'Booleano';\n                this.setState({\n                    operaciones: operacionesBoolean\n                });\n            }\n            this.props.retornoCampo(columnaSeleccionada, tipoVariable, posicionTabla);\n        }\n    }\n\n    retornoSeleccionOperacion (esOperacion, operacion) {\n        if(operacion[0].valor.length > 0) {\n            operacionSeleccionada = operacion[0];\n            this.props.retornoOperacion(operacionSeleccionada);\n        }\n    }\n\n    existeReglaAsignacion (operacion) {\n        for (var i = 0; i < this.state.operaciones.length; i++) {\n            if( (this.state.operaciones[i].valor.localeCompare(\"Asignar Valor Único\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Asignar Valor Único Si\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Asignar Valor Multiples\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Asignar Valor Multiples Si\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Contar\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Contar Si\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Calcular Promedio\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Máximo\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) || \n                (this.state.operaciones[i].valor.localeCompare(\"Mínimo\") == 0 && this.state.operaciones[i].valor.localeCompare(operacion) == 0) /*|| \n                this.state.operaciones[i].valor.localeCompare(\"Sumar\") == 0*/) {\n                return true;\n            }\n        };\n        return false;\n    }\n\n    retornarCodigoOperacion (codigo) {\n        if(codigo.localeCompare(\"Asignar Valor Único\") == 0) {\n            return \"ASIGUNI\";\n        }\n        if(codigo.localeCompare(\"Asignar Valor Único Si\") == 0) {\n            return \"ASIGUNI\";\n        }\n        if(codigo.localeCompare(\"Asignar Valor Multiples\") == 0) {\n            return \"ASIGMUL\";\n        }\n        if(codigo.localeCompare(\"Asignar Valor Multiples Si\") == 0) {\n            return \"ASIGMUL\";\n        }\n        if(codigo.localeCompare(\"Contar\") == 0) {\n            return \"COUNT\";\n        }\n        if(codigo.localeCompare(\"Contar Si\") == 0) {\n            return \"COUNT\";\n        }\n        if(codigo.localeCompare(\"Calcular Promedio\") == 0) {\n            return \"PROM\";\n        }\n        if(codigo.localeCompare(\"Máximo\") == 0) {\n            return \"MAX\";\n        }\n        if(codigo.localeCompare(\"Mínimo\") == 0) {\n            return \"MIN\";\n        }\n        if(codigo.localeCompare(\"Sumar\") == 0) {\n            return \"SUM\";\n        }\n    }\n\n    agregarAFormula () {\n        console.log('this.state.formula')\n        console.log(this.state.formula)\n        if(this.state.formula.length == 0 && $(\"div\").hasClass(\"colorPunteroFormula\")) {        //caso inicial, agregar primera variable\n            var formulaTemp = [...this.state.formula];\n            variableSeleccionada.activa = false;\n            variableSeleccionada.tipo = \"variable\";\n            variableSeleccionada.texto = variableSeleccionada.valor;\n            variableSeleccionada.operacion = '';\n            if(this.existeReglaAsignacion(operacionSeleccionada.valor)) {\n                variableSeleccionada.texto = this.retornarCodigoOperacion(operacionSeleccionada.valor) + \"(\" + variableSeleccionada.valor + \")\";\n                variableSeleccionada.operacion = this.retornarCodigoOperacion(operacionSeleccionada.valor);\n            }\n            formulaTemp = formulaTemp.concat(variableSeleccionada);\n            this.agregarFormulaAnchuraYAltura(formulaTemp, false);\n            this.setState({\n                formula: formulaTemp\n            }, this.iniciarGuardarFormula );\n            var self = this;\n            setTimeout(function(){\n                console.log(self.state.formula)\n            }, 2000);\n        } else if(this.state.formula.length > 0 && $(\"div\").hasClass(\"colorPunteroFormula\")) {        //caso inicial, agregar primera variable\n            var formulaTemp = [...this.state.formula];\n            //var formulaTemp = this.state.formula.slice();\n            variableSeleccionada.activa = false;\n            variableSeleccionada.tipo = \"variable\";\n            variableSeleccionada.texto = variableSeleccionada.valor;\n            variableSeleccionada.operacion = '';\n            if(this.existeReglaAsignacion(operacionSeleccionada.valor)) {\n                variableSeleccionada.texto = this.retornarCodigoOperacion(operacionSeleccionada.valor) + \"(\" + variableSeleccionada.valor + \")\";\n                variableSeleccionada.operacion = this.retornarCodigoOperacion(operacionSeleccionada.valor);\n            }\n            var posicionArreglo = '', ultimoIndice = '', noHaLeidoUltimoIndice = true;\n            for (var i = posicionDeIndicadorSeleccionadoEnFormula.length - 1; i >= 0; i--) {\n                if (!noHaLeidoUltimoIndice) {\n                    posicionArreglo += posicionDeIndicadorSeleccionadoEnFormula.charAt(i);\n                }\n                if (posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') != 0 && posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare(']') != 0 && noHaLeidoUltimoIndice) {\n                    if( posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') != 0 && posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare(']') != 0 )\n                        ultimoIndice += posicionDeIndicadorSeleccionadoEnFormula.charAt(i);\n                    if(posicionDeIndicadorSeleccionadoEnFormula.charAt(i).localeCompare('[') == 0) {\n                        noHaLeidoUltimoIndice = false;\n                    }\n                }\n            };\n            //var tempVar;\n            //eval(\"tempVar = temp\"+posicionArreglo);\n            console.log('variableSeleccionada');\n            console.log(variableSeleccionada);\n            console.log('operacionSeleccionada');\n            console.log(operacionSeleccionada);\n            if(posicionIndicador.localeCompare(\"derecha\") == 0) {\n                if(posicionArreglo.length > 0) {\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada);\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, operacionSeleccionada);\n                } else {\n                    formulaTemp.splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada);\n                    formulaTemp.splice(parseInt(ultimoIndice)+1, 0, operacionSeleccionada);\n                }\n                //eval(\"formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice)+1, 0, variableSeleccionada[0])\");\n            } else {\n                if(posicionArreglo.length > 0) {\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice), 0, operacionSeleccionada);\n                    formulaTemp[posicionArreglo].splice(parseInt(ultimoIndice), 0, variableSeleccionada);\n                } else {\n                    formulaTemp.splice(parseInt(ultimoIndice), 0, operacionSeleccionada);\n                    formulaTemp.splice(parseInt(ultimoIndice), 0, variableSeleccionada);\n                }\n            }\n            this.agregarFormulaAnchuraYAltura(formulaTemp, false);\n            this.setState({\n                formula: formulaTemp\n            }, this.iniciarGuardarFormula );\n            var self = this;\n            setTimeout(function(){\n                console.log(self.state.formula)\n            }, 2000);\n        } else if( !$(\"div\").hasClass(\"colorPunteroFormula\") ){\n            alert(\"Seleccione una posición en la fórmula.\");\n        }\n    }\n\n    updateFormulaState (nuevaFormula) {\n        if(this.validarNuevaFormula(nuevaFormula)) {\n            this.setState({\n                formula: this.state.formula + nuevaFormula\n            });\n        }\n    }\n\n    getFormula () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select formula from \"+this.props.tablaVarEditar+\" where ID = \"+this.props.idVarEditar, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            this.crearArregloDeFormula(result.recordset[0].formula);\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    crearArregloDeFormula (formula) {\n        console.log('formula');\n        console.log(formula);\n        var nuevoArregloFormula = [];\n        for (var i = 0; i < formula.length; i++) {\n            var variableProcesarFormula = getPalabraFormula\n            if(formula.charAt(i).localeCompare('(') == 0 || formula.charAt(i).localeCompare(')') == 0) {\n                nuevoArregloFormula.push({valor: \"seleccion\"});\n            } else if(formula.charAt(i).localeCompare('[') == 0) {\n                //\n            } else if(this.esOperacionAritmetica(formula.charAt(i))) {\n                nuevoArregloFormula.push({valor: formula.charAt(i)});\n            } else if(this.esOperacionCompleja(formula, i)) {\n                var nombre = this.getPalabraFormula(formula, i);\n                nuevoArregloFormula.push({valor: nombre});\n            } else if(this.esVariable(formula, i)) {\n                var nombre = this.getPalabraFormula(formula, i);\n                nuevoArregloFormula.push({valor: nombre});\n            }\n        };\n        this.agregarFormulaAnchuraYAltura(nuevoArregloFormula);\n    }\n\n    esOperacionAritmetica (caracter) {\n        if(caracter.localeCompare('+') == 0) {\n            return true;\n        } else if(caracter.localeCompare('-') == 0) {\n            return true;\n        } else if(caracter.localeCompare('/') == 0) {\n            return true;\n        } else if(caracter.localeCompare('*') == 0) {\n            return true;\n        } else if(caracter.localeCompare('x') == 0) {\n            return true;\n        }\n        return false;\n    }\n\n    esOperacionCompleja (formula, posicionCaracter) {\n        var palabra = this.getPalabraFormula(formula, posicionCaracter);\n        if(palabra.localeCompare('RAND') == 0) {\n            return true;\n        } else if(palabra.localeCompare('DIA') == 0) {\n            return true;\n        } else if(palabra.localeCompare('AVERAJE') == 0) {\n            return true;\n        } else if(palabra.localeCompare('MEDIA') == 0) {\n            return true;\n        }\n        return false;\n    }\n\n    getPalabraFormula (formula, posicionCaracter) {\n        var variable = '';\n        for (var i = posicionCaracter; i < formula.length; i++) {\n            if(formula.charAt(i) != \"(\" && formula.charAt(i) != \")\" && formula.charAt(i) != \"\\\\\" && \n                formula.charAt(i) != \"/\" && formula.charAt(i) != \"*\" && formula.charAt(i) != \"[\" && \n                formula.charAt(i) != \"√\" && formula.charAt(i) != \"+\" && formula.charAt(i) != \"-\")\n                variable+=formula[i];\n            else\n                return variable;\n        };\n        return variable;\n    }\n\n    esVariable (formula, posicionCaracter) {\n        var palabra = this.getPalabraFormula(formula, posicionCaracter);\n        for (var i = 0; i < campos.length; i++) {\n            if(campos[i].nombre.localeCompare(palabra) == 0) {\n                return true;\n            }\n        };\n        for (var i = 0; i < variables.length; i++) {\n            if(variables[i].nombre.localeCompare(palabra) == 0) {\n                return true;\n            }\n        };\n        for (var i = 0; i < objetos.length; i++) {\n            for (var j = 0; j < camposDeObjetos[i].length; j++) {\n                if(camposDeObjetos[i][j].nombre.localeCompare(palabra) == 0) {\n                    return true;\n                }\n            };\n        };\n        return false;\n    }\n\n    agregarFormulaAnchuraYAltura(arregloFormula, esDivision) {\n        var contadorIndicadoresNumerador = 0, contadorIndicadoresDenominador = 0, contadorSignosNumerador = 0, contadorSignosDenominador = 0, contadorVariablesNumerador = 0, contadorVariablesDenominador = 0, esDespuesDivision = false;\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( !Array.isArray(arregloFormula[i].valor) && this.esOperacionAritmetica(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    contadorSignosNumerador++;\n                } else {\n                    contadorSignosDenominador++;\n                }\n            } else if( (!Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") != 0 && !this.esOperacionAritmetica(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"division\\\\\") != 0) || Array.isArray(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    contadorVariablesNumerador++;\n                } else {\n                    contadorVariablesDenominador++;\n                }\n            } else if( !Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") == 0 ) {\n                if(!esDespuesDivision) {\n                    contadorIndicadoresNumerador++;\n                } else {\n                    contadorIndicadoresDenominador++;\n                }\n            }\n            if ( arregloFormula[i].valor.localeCompare(\"division\\\\\") == 0 ) {\n                esDespuesDivision = true;\n            }\n        };\n        var widthNumerador = 100;\n        //var height = 100;\n        var restaTotalIndicadoresNumerador = contadorIndicadoresNumerador * 5;\n        widthNumerador -= restaTotalIndicadoresNumerador;\n        var restaTotalSignosNumerador = contadorSignosNumerador * 2;\n        widthNumerador -= restaTotalSignosNumerador;\n        widthNumerador /= contadorVariablesNumerador;\n\n        var widthDenominador = 100;\n        var restaTotalIndicadoresDenominador = contadorIndicadoresDenominador * 5;\n        widthDenominador -= restaTotalIndicadoresDenominador;\n        var restaTotalSignosDenominador = contadorSignosDenominador * 2;\n        widthDenominador -= restaTotalSignosDenominador;\n        widthDenominador /= contadorVariablesDenominador;\n\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( !Array.isArray(arregloFormula[i].valor) && this.esOperacionAritmetica(arregloFormula[i].valor) ) {\n                arregloFormula[i].width = \"2%\";\n            } else if( (!Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") != 0 && !this.esOperacionAritmetica(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"division\\\\\") != 0) || Array.isArray(arregloFormula[i].valor) ) {\n                if(!esDespuesDivision) {\n                    arregloFormula[i].width = widthNumerador+\"%\";\n                } else {\n                    arregloFormula[i].width = widthDenominador+\"%\";\n                }\n            } else if( !Array.isArray(arregloFormula[i].valor) && arregloFormula[i].valor.localeCompare(\"\\\\\") == 0 ) {\n                arregloFormula[i].width = \"5%\";\n            }\n            if ( arregloFormula[i].valor.localeCompare(\"division\\\\\") == 0 ) {\n                arregloFormula[i].height = \"2%\";\n            } else {\n                if(esDivision) {\n                    arregloFormula[i].height = \"49%\";\n                } else {\n                    arregloFormula[i].height = \"100%\";\n                }\n            }\n        };\n        for (var i = 0; i < arregloFormula.length; i++) {\n            if( Array.isArray(arregloFormula[i].valor) ) {\n                this.agregarFormulaAnchuraYAltura(arregloFormula[i].valor);\n            }\n        }\n        /*var width = 0, posicionX = 0, posicionY = 0;\n        for (var i = 0; i < nuevoArregloFormula.length; i++) {\n            if (nuevoArregloFormula[i].length == undefined) {\n                //\n            }\n        };\n        this.setState({\n            formula: formulaTemp,\n            anchuraSeccionFormula: width\n        }, console.log(this.state.formula) );*/\n    }\n\n    iniciarGuardarFormula () {\n        var formula = '';\n        for (var i = 0; i < this.state.formula.length; i++) {\n            formula += this.state.formula[i].valor;\n        };\n        console.log('formula');\n        console.log(formula);\n        this.props.anadirFormula(formula, this.state.formula);\n        //this.guardarVariable(formula);\n    }\n\n    guardarVariable (formula) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"update \"+this.props.tablaVarEditar+\" set formula = '\"+formula+\"' where ID = \"+this.props.idVarEditar, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadTablas () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Tablas\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            tablas: result.recordset\n                        }, this.initLoadTablasCampos );\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    initLoadTablasCampos() {\n        var arregloTemp = [];\n        for (var i = 0; i < this.state.tablas.length; i++) {\n            this.loadTablasCampos(this.state.tablas[i].tabla, i, arregloTemp);\n        };\n    }\n\n    loadTablasCampos (nombreTabla, index, array) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = '\"+nombreTabla+\"'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var nombreColumnas = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            nombreColumnas.push({valor: result.recordset[i].COLUMN_NAME, tipo: result.recordset[i].DATA_TYPE, esFuenteDato: true, idConexionTabla: this.state.tablas[index].ID});\n                        };\n                        if(array[index] == undefined) {\n                            array[index] = [];\n                        }\n                        array[index] = $.merge(array[index], nombreColumnas);\n                        this.setState({\n                            camposTablas: array\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadScalarVariables () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where esObjeto = 'false'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            this.loadScalarVariablesFields(result.recordset[i]);\n                        };\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadScalarVariablesFields (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where variableID = \"+variable.ID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var temp = [...this.state.variablesEscalares];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            temp.push({valor: result.recordset[i].nombre, tipo: result.recordset[i], esFuenteDato: false})\n                        };\n                        this.setState({\n                            variablesEscalares: temp\n                        } );\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadVariables () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables where esObjeto = 'true'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            variables: result.recordset\n                        }, this.initLoadVariablesCampos );\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    initLoadVariablesCampos() {\n        var arregloTemp = [];\n        for (var i = 0; i < this.state.variables.length; i++) {\n            this.loadVariablesCampos(this.state.variables[i].ID, i, arregloTemp);\n        };\n    }\n\n    loadVariablesCampos (variableID, index, array) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where variableID = \"+variableID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var nombreColumnas = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            nombreColumnas.push({valor: result.recordset[i].nombre, tipo: result.recordset[i].tipo, esFuenteDato: false});\n                        };\n                        if(array[index] == undefined) {\n                            array[index] = [];\n                        }\n                        array[index] = $.merge(array[index], nombreColumnas);\n                        this.setState({\n                            camposVariables: array\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n    \n    render() {\n        return (\n            <div>\n                {this.props.navbar}\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <div className={\"card\"}>\n                            <div className={\"border-top border-bottom\"} style={{width: \"100%\"}}>\n                                <div style={{width: \"100%\"}}>\n                                    <div className={\"font-20\"} style={{height: \"45vh\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", backgroundColor: \"#e6e6f2\", color: \"black\", overflowWrap: \"break-word\", wordWrap: \"break-word\", whiteSpace: \"-moz-pre-wrap\", whiteSpace: \"pre-wrap\"}}>\n                                        <Equacion formula={this.state.formula} clickEnFormula={this.clickEnFormula} height={\"100%\"} width={\"100%\"} isFirstRow={true} posicionEnArreglo={\"0\"}></Equacion>\n                                    </div>\n                                </div>\n                                <div style={{width: \"100%\", height: \"250px\"}}>\n                                    <div style={{width: \"50%\", height: \"100%\", float: \"left\", borderRight: \"1px solid black\", borderTop: \"1px solid black\", borderBottom: \"1px solid black\", padding: \"0% 1%\", overflowY: \"scroll\"}}>\n                                        <div className={\"font-18\"} style={{width: \"100%\", height: \"20%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            Seleccionar Variable\n                                        </div>\n                                        <div className={\"row\"} style={{height: \"100%\"}}>\n                                            <ListasSeleVariableContenedorVariable esOperacion={false} mostrarRosa={true}  tablas={this.state.tablas} camposTablas={this.state.camposTablas} variables={this.state.variablesEscalares} objetos={this.state.variables} camposDeObjetos={this.state.camposVariables} seleccionarMultiple={false} retornoSeleccionVariable={this.retornoSeleccionCampo}></ListasSeleVariableContenedorVariable>\n                                        </div>\n                                    </div>\n                                    <div style={{width: \"50%\", height: \"100%\", float: \"right\", borderTop: \"1px solid black\", borderBottom: \"1px solid black\", padding: \"0% 1%\", scroll: \"auto\"}}>\n                                        <div className={\"font-18\"} style={{width: \"100%\", height: \"20%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n                                            Seleccionar Operacion\n                                        </div>\n                                        <div className={\"row\"} style={{height: \"100%\"}}>\n                                            <ListasSeleVariableContenedorOperador esOperacion={true} mostrarRosa={false} operaciones={this.state.operaciones} seleccionarMultiple={false} retornoSeleccionVariable={this.retornoSeleccionOperacion}></ListasSeleVariableContenedorOperador>\n                                        </div>\n                                    </div>\n                                </div>\n                                <br/>\n                                <div className={\"text-center\"} style={{width: \"100%\"}}>\n                                    <a href=\"#\" className=\"btn btn-primary active\" onClick={this.agregarAFormula}>Agregar Fórmula</a>\n                                </div>\n                                <br/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"Formula.js"}