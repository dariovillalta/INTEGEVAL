{"version":3,"sources":["components/ConfiguracionRiesgos.js"],"names":["nodemailer","require","c3","d3","transporter","createTransport","service","auth","user","pass","mailOptions","from","to","subject","text","ConfiguracionRiesgos","props","state","componenteActual","navbar","riesgos","getRiesgos","bind","showUmbralIntegral","retornarConfiguracionHome","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","localeCompare","color","showVariables","showIndicador","showRiesgos","showListas","showUsuarios","showBitacora","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport Umbral from './Umbral/Umbral.js';\n\nvar nodemailer = require('nodemailer');\nvar c3 = require(\"c3\");\nvar d3 = require(\"d3\");\nimport domtoimage from 'dom-to-image';\n\nvar transporter = nodemailer.createTransport({\n  service: 'gmail',\n    auth: {\n        user: 'riesgointegrallugon@gmail.com',\n        pass: 'r13sgo1nT3Gr4l'\n    }\n});\n\nvar mailOptions = {\n    from: 'riesgointegral@protonmail.com',\n    to: 'dario_villalta@hotmail.com',\n    subject: 'Sending Email using Node.js',\n    text: 'That was easy!'\n};\n\n//faltan warning\n//light\n\nexport default class ConfiguracionRiesgos extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: \"ConfiguracionRiesgos\",\n            navbar: \"\",\n            riesgos: []\n        }\n        this.getRiesgos = this.getRiesgos.bind(this);\n        this.showUmbralIntegral = this.showUmbralIntegral.bind(this);\n        this.retornarConfiguracionHome = this.retornarConfiguracionHome.bind(this);\n    }\n\n    componentDidMount() {\n        this.getRiesgos();\n        /*transporter.sendMail(mailOptions, function(error, info){\n            if (error) {\n                console.log(error);\n            } else {\n                console.log('Email sent: ' + info.response);\n            }\n        });*/\n        /*if ($('#c3chart_area').length) {\n            var chart = c3.generate({\n                bindto: \"#c3chart_area\",\n                data: {\n                    columns: [\n                        ['data1', 300, 350, 300, 0, 0, 0],\n                        ['data2', 130, 100, 140, 200, 150, 50]\n                    ],\n                    types: {\n                        data1: 'area',\n                        data2: 'area-spline'\n                    },\n                    colors: {\n                        data1: '#5969ff',\n                        data2: '#ff407b',\n\n                    }\n\n                },\n                axis: {\n\n                    y: {\n                        show: true\n\n\n\n\n                    },\n                    x: {\n                        show: true\n                    }\n                }\n\n            });\n        }\n        var svg = document.getElementById(\"c3chart_area\");\n        //var img = document.getElementById(\"fromcanvas\");\n\n        toDataURL(\"image/png\", {\n            callback: function(data) {\n                var img = new Image();\n                img.setAttribute(\"src\", data)\n                document.getElementById(\"cardID\").appendChild(img);\n            }\n        })*/\n        /*var SVGtopngDataURL = document.getElementById(\"c3chart_area\").toDataURL(\"image/png\");\n        var img = new Image();\n        img.src = SVGtopngDataURL;\n        document.getElementById(\"cardID\").appendChild(img);*/\n        /*//function exportChartToPng(chartID){\n            //fix weird back fill\n            d3.select('#c3chart_area').selectAll(\"path\").attr(\"fill\", \"none\");\n            //fix no axes\n            d3.select('#c3chart_area').selectAll(\"path.domain\").attr(\"stroke\", \"black\");\n            //fix no tick\n            d3.select('#c3chart_area').selectAll(\".tick line\").attr(\"stroke\", \"black\");\n            var svgElement = $('#c3chart_area').find('svg')[0];\n            console.log('svgElement')\n            console.log(svgElement)\n            //document.getElementById(\"cardID\").appendChild(svgElement);\n            //saveSvgAsPng(svgElement, chartID+'.png');\n        //}\n        // get svg data\n        var xml = new XMLSerializer().serializeToString(svgElement);\n        console.log('xml')\n        console.log(xml)\n\n        // make it base64\n        var svg64 = btoa(xml);\n        console.log('svg64')\n        console.log(svg64)\n        var b64Start = 'data:image/svg+xml;base64,';*/\n        /*console.log('b64Start')\n        console.log(b64Start)\n\n        // prepend a \"header\"\n        var image64 = b64Start + svg64;\n        var img = new Image();\n        img.src = image64;\n        document.getElementById(\"cardID\").appendChild(img);*/\n        /*var node = document.getElementById('c3chart_area');\n \n        domtoimage.toPng(node)\n          .then(function (dataUrl) {\n            var img = new Image();\n            img.src = dataUrl;\n            document.body.appendChild(img);\n            console.log('img')\n            console.log(img)\n            document.getElementById(\"cardID\").appendChild(img);\n          })\n          .catch(function (error) {\n            console.error('oops, something went wrong!', error);\n          });*/\n          /*setTimeout( function () {\n                htmlToImage.toPng(node)\n                  .then(function (dataUrl) {\n                    var img = new Image();\n                    img.src = dataUrl;\n                    document.body.appendChild(img);\n                    console.log('img')\n                    console.log(img)\n                  })\n                  .catch(function (error) {\n                    console.error('oops, something went wrong!', error);\n                  });\n          } , 3000);*/\n    }\n\n    getRiesgos () {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Riesgos\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            riesgos: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    showUmbralIntegral () {\n        var navbar = <div className={\"row\"}>\n            <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                <div className={\"page-header\"}>\n                    <h2 className={\"pageheader-title\"}>Configuraci&oacute;n</h2>\n                    <div className={\"page-breadcrumb\"}>\n                        <nav aria-label=\"breadcrumb\">\n                            <ol className={\"breadcrumb\"}>\n                                <li className={\"breadcrumb-item font-16\"} aria-current=\"page\" onClick={this.retornarConfiguracionHome}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Umbral Institucional</li>\n                            </ol>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>;\n        this.setState({\n            navbar: navbar,\n            componenteActual: \"RiesgoIntegral\"\n        });\n    }\n\n    retornarConfiguracionHome () {\n        this.setState({\n            componenteActual: \"ConfiguracionRiesgos\"\n        });\n    }\n\n    /*render() {\n        if(this.state.componenteActual.localeCompare(\"ConfiguracionRiesgos\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12\">\n                            <div className=\"card\">\n                                <h5 className=\"card-header\">Area Chart</h5>\n                                <div className=\"card-body\">\n                                    <div id=\"c3chart_area\"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12\">\n                            <div id=\"cardID\" className=\"card\">\n                                <canvas id=\"myCanvas\" width=\"200\" height=\"100\"></canvas>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    }*/\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"ConfiguracionRiesgos\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Identificar Riesgos</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item active font-16\"} aria-current=\"page\">Configuraci&oacute;n</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"card influencer-profile-data\"}>\n                                <div className={\"card-body\"}>\n                                    <div className={\"row border-top border-bottom addPaddingToConfig\"}>\n                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showVariables}>Variables</a>\n                                        <a className={\"btn btn-primary btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showIndicador}>Indicadores</a>\n                                        <a className={\"btn btn-brand btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showRiesgos}>Tipos de Riesgos</a>\n                                        <a className={\"btn btn-info btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.showUmbralIntegral}>Umbral del Riesgo Integral</a>\n                                        <a className={\"btn btn-dark btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showListas}>Administrar Listas</a>\n                                        <a className={\"btn btn-danger btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showUsuarios}>Administrar Usuarios</a>\n                                        <a className={\"btn btn-success btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.props.showBitacora}>Ver Bitacora</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if(this.state.componenteActual.localeCompare(\"RiesgoIntegral\") == 0) {\n            return (\n                <div>\n                    <Umbral navbar={this.state.navbar}\n                                    lista={this.state.riesgos}\n                                    idVariable={-99}\n                                    pool={this.props.pool}\n                                    tablaVariable={\"Institucional\"}\n                                    tituloUmbral={\"Institucional\"}>\n                    </Umbral>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"ConfiguracionRiesgos.js"}