{"version":3,"sources":["components/CriteriosClasificacion/SeleccionarComportamientoPago.js"],"names":["SeleccionarComportamientoPago","props","state","comportamientoPagos","comportamientoPagoSel","mostrarVista","loadComportamientoPago","bind","loadNombreTabla","goCreateComportamientoPago","returnChooseComportamientoPago","entrarEdit","returnEdit","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","i","length","prestamoTablaID","index","idTabla","copiaArr","copiaObj","nombreTablaPrestamos","nombre","splice","catClasN","localeCompare","showCriteriosClasificacion","showConfigurationComponent","color","fontSize","fontWeight","margin","display","map","comportamientoPago","ID","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport ComportamientoPago from './ComportamientoPago.js';\nimport EditarComportamientoPago from './EditarComportamientoPago.js';\n\nexport default class SeleccionarComportamientoPago extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            comportamientoPagos: [],\n            comportamientoPagoSel: {},\n            mostrarVista: \"selComportamientoPago\"\n        }\n        this.loadComportamientoPago = this.loadComportamientoPago.bind(this);\n        this.loadNombreTabla = this.loadNombreTabla.bind(this);\n        this.goCreateComportamientoPago = this.goCreateComportamientoPago.bind(this);\n        this.returnChooseComportamientoPago = this.returnChooseComportamientoPago.bind(this);\n        this.entrarEdit = this.entrarEdit.bind(this);\n        this.returnEdit = this.returnEdit.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadComportamientoPago();\n    }\n\n    loadComportamientoPago() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ComportamientoPago\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            comportamientoPagos: result.recordset\n                        });\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            this.loadNombreTabla(i, result.recordset[i].prestamoTablaID);\n                        };\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    loadNombreTabla(index, idTabla) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Tablas where ID = \"+idTabla, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            var copiaArr = [...this.state.comportamientoPagos];\n                            var copiaObj = copiaArr[index];\n                            copiaObj.nombreTablaPrestamos = result.recordset[0].nombre;\n                            copiaArr.splice(index, 1, copiaObj);\n                            this.setState({\n                                comportamientoPagos: copiaArr\n                            });\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    goCreateComportamientoPago() {\n        this.setState({\n            mostrarVista: \"crearComportamientoPago\"\n        });\n    }\n\n    returnChooseComportamientoPago() {\n        this.setState({\n            mostrarVista: \"selComportamientoPago\"\n        });\n        this.loadComportamientoPago();\n    }\n\n    entrarEdit(catClasN) {\n        this.setState({\n            comportamientoPagoSel: catClasN,\n            mostrarVista: \"editComportamientoPago\"\n        });\n    }\n\n    returnEdit() {\n        this.setState({\n            mostrarVista: \"editComportamientoPago\"\n        });\n    }\n\n    render() {\n        if(this.state.mostrarVista.localeCompare(\"crearComportamientoPago\") == 0) {\n            return (\n                <div>\n                    <ComportamientoPago pool={this.props.pool} showCriteriosClasificacion={this.props.showCriteriosClasificacion} returnChooseComportamientoPago={this.returnChooseComportamientoPago} showConfigurationComponent={this.props.showConfigurationComponent}> </ComportamientoPago>\n                </div>\n            );\n        } else if(this.state.mostrarVista.localeCompare(\"editComportamientoPago\") == 0) {\n            return (\n                <div>\n                    <EditarComportamientoPago comportamientoPagoSel={this.state.comportamientoPagoSel} pool={this.props.pool} returnChooseComportamientoPago={this.returnChooseComportamientoPago} showConfigurationComponent={this.props.showConfigurationComponent}> </EditarComportamientoPago>\n                </div>\n            );\n        } else if(this.state.mostrarVista.localeCompare(\"selComportamientoPago\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Configuraci&oacute;n</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.showConfigurationComponent}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.showCriteriosClasificacion}><a href=\"#\" className={\"breadcrumb-link\"}>Criterios de Clasificaci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item active\"} aria-current=\"page\">Seleccionar Comportamiento de Pago</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <button onClick={this.goCreateComportamientoPago} className={\"btn btn-success btn-block col-xl-10 col-10\"} style={{color: \"white\", fontSize: \"1.2em\", fontWeight: \"bold\", margin: \"0 auto\", display: \"block\"}}>Crear</button>\n                    </div>\n                    <br/>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"card influencer-profile-data\"}>\n                                <div className={\"card-body\"}>\n                                    <div className={\"row border-top border-bottom addPaddingToConfig\"}>\n                                        {this.state.comportamientoPagos.map((comportamientoPago, i) =>\n                                            <a className={\"btn btn-outline-info btn-block btnWhiteColorHover fontSize1EM\"} onClick={() => this.entrarEdit(comportamientoPago)} key={comportamientoPago.ID}>{\"Tabla de préstamos: \"+comportamientoPago.nombreTablaPrestamos}</a>\n                                        )}\n                                        { this.state.comportamientoPagos.length == 0 ? (\n                                            <a className={\"btn btn-outline-dark btn-block btnWhiteColorHover fontSize1EM\"}>No existen comportamientos de pagos creados</a>\n                                        ) : (\n                                            <span></span>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"SeleccionarComportamientoPago.js"}