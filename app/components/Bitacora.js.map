{"version":3,"sources":["components/bitacora.js"],"names":["saveBitacora","sqlCon","usuarioID","nombreUsuario","fecha","descripcion","sql","Transaction","transaction","begin","err","rolledBack","on","aborted","request","Request","query","getFullYear","getMonth","getDate","result","console","log","rollback","commit"],"mappings":";;;;;;;AAAA;;;;;;;;SAEsBA,Y;;;;;;;0BAAf,iBAA6BC,MAA7B,EAAqCC,SAArC,EAAgDC,aAAhD,EAA+DC,KAA/D,EAAsEC,WAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEwB,IAAIC,kBAAIC,WAAR,CAAqBN,MAArB,CAFxB;;AAAA;AAEIO,YAAAA,WAFJ;AAGCA,YAAAA,WAAW,CAACC,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,kBAAIC,UAAU,GAAG,KAAjB;AACAH,cAAAA,WAAW,CAACI,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,gBAAAA,UAAU,GAAG,IAAb;AACH,eAFD;AAGA,kBAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBP,WAAhB,CAAhB;AACAM,cAAAA,OAAO,CAACE,KAAR,CAAc,iFAA+Ed,SAA/E,GAAyF,KAAzF,GAA+FC,aAA/F,GAA6G,MAA7G,GAAoHC,KAAK,CAACa,WAAN,EAApH,GAAwI,GAAxI,IAA6Ib,KAAK,CAACc,QAAN,KAAiB,CAA9J,IAAiK,GAAjK,GAAqKd,KAAK,CAACe,OAAN,EAArK,GAAqL,MAArL,GAA4Ld,WAA5L,GAAwM,IAAtN,EAA4N,UAACK,GAAD,EAAMU,MAAN,EAAiB;AACzO,oBAAIV,GAAJ,EAAS;AACLW,kBAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;;AACA,sBAAI,CAACC,UAAL,EAAiB;AACbH,oBAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAb,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,iBAND,MAMO;AACHF,kBAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAd,GAAG,EAAI,CACzB,CADD;AAEH;AACJ,eAXD;AAYH,aAlBD,EAHD,CAqBK;;AArBL;AAAA;;AAAA;AAAA;AAAA;AAuBCW,YAAAA,OAAO,CAACC,GAAR;;AAvBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import sql from 'mssql';\n\nexport async function saveBitacora (sqlCon, usuarioID, nombreUsuario, fecha, descripcion) {\n    try {\n    \tconst transaction = await new sql.Transaction( sqlCon );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"insert into Bitacora (usuarioID, nombreUsuario, fecha, descripcion) values (\"+usuarioID+\", '\"+nombreUsuario+\"', '\"+fecha.getFullYear()+\"-\"+(fecha.getMonth()+1)+\"-\"+fecha.getDate()+\"', '\"+descripcion+\"')\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                    });\n                }\n            });\n        }); // fin transaction\n    } catch (err) {\n        console.log(err);\n    }\n}"],"file":"bitacora.js"}