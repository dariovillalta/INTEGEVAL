{"version":3,"sources":["components/TimelineVariable.js"],"names":["tipoCampos","nombre","variablesSeccionesDashboard","banderaImportacionInicio","banderaImportacionFin","TimelineVariable","props","state","html","resultados","getResultsVariables","bind","getResultsVariablesFieldsInit","getFieldAttributes","getFieldResults","finImportacion","insertarValorEnColeccion","crearHTML","styleDate","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","tablaInstruccion","result","console","log","rollback","commit","recordset","length","arregloTemp","i","push","resultado","index","array","nombreVariable","esVariable","esIndicador","nombreIndicador","nombreRiesgo","inicioVigencia","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","arrTemp","COLUMN_NAME","tipo","DATA_TYPE","atributos","setState","copyResultados","sort","a","b","f3ch4Gu4rd4do","variable","esColeccion","newCopy","valorAInsertar","arregloAInsertar","inserto","j","getTime","htmlContent","htmlRow","htmlObjectDesc","k","localeCompare","divObj","clear","display","overflow","width","fontWeight","date","navbar","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\nimport Slider from 'react-input-slider';\n\nconst tipoCampos = [ {nombre: \"texto\"}, {nombre: \"booleano\"}, {nombre: \"fecha\"}, {nombre: \"número\"}, {nombre: \"arreglo\"}];\n\nvar variablesSeccionesDashboard = [];\n\nvar banderaImportacionInicio = 0, banderaImportacionFin = 0;\n\nexport default class TimelineVariable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            html: [],\n            resultados: []\n        }\n        this.getResultsVariables = this.getResultsVariables.bind(this);\n        this.getResultsVariablesFieldsInit = this.getResultsVariablesFieldsInit.bind(this);\n        this.getFieldAttributes = this.getFieldAttributes.bind(this);\n        this.getFieldResults = this.getFieldResults.bind(this);\n        this.finImportacion = this.finImportacion.bind(this);\n        this.insertarValorEnColeccion = this.insertarValorEnColeccion.bind(this);\n        this.crearHTML = this.crearHTML.bind(this);\n        this.styleDate = this.styleDate.bind(this);\n    }\n\n    componentDidMount () {\n        this.getResultsVariables();\n    }\n\n    getResultsVariables () {\n        //OBTENER LA LISTA DE POSIBLES VARIABLES A VISUALIZAR\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from \"+this.props.tablaInstruccion+\" and finVigencia = '1964-05-28'\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                        return [];\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0)\n                            this.getResultsVariablesFieldsInit(result.recordset);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getResultsVariablesFieldsInit (resultados) {\n        var arregloTemp = [];\n        banderaImportacionInicio = 0;\n        banderaImportacionFin = 0;\n        for (var i = 0; i < resultados.length; i++) {\n            banderaImportacionFin+=2;\n            arregloTemp.push(resultados[i]);\n            this.getFieldAttributes(resultados[i], i, arregloTemp);\n            this.getFieldResults(resultados[i], i, arregloTemp);\n        };\n    }\n\n    getFieldAttributes(resultado, index, array) {\n        let nombreVariable = '';\n        if(this.props.esVariable)\n            nombreVariable = resultado.nombreVariable;\n        else if(this.props.esIndicador)\n            nombreVariable = resultado.nombreIndicador;\n        else\n            nombreVariable = resultado.nombreRiesgo;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = '\"+nombreVariable+'_'+resultado.inicioVigencia.getFullYear()+'_'+(resultado.inicioVigencia.getMonth()+1)+'_'+resultado.inicioVigencia.getDate()+'_'+resultado.inicioVigencia.getHours()+'_'+resultado.inicioVigencia.getMinutes()+'_'+resultado.inicioVigencia.getSeconds()+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        var arrTemp = [];\n                        for (var i = 0; i < result.recordset.length; i++) {\n                            arrTemp.push({nombre: result.recordset[i].COLUMN_NAME, tipo: result.recordset[i].DATA_TYPE});\n                        };\n                        array[index].atributos = arrTemp;\n                        banderaImportacionInicio++;\n                        this.setState({\n                            resultados: array\n                        }, this.finImportacion);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    getFieldResults(resultado, index, array) {\n        let nombreVariable = '';\n        if(this.props.esVariable)\n            nombreVariable = resultado.nombreVariable;\n        else if(this.props.esIndicador)\n            nombreVariable = resultado.nombreIndicador;\n        else\n            nombreVariable = resultado.nombreRiesgo;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from \"+nombreVariable+'_'+resultado.inicioVigencia.getFullYear()+'_'+(resultado.inicioVigencia.getMonth()+1)+'_'+resultado.inicioVigencia.getDate()+'_'+resultado.inicioVigencia.getHours()+'_'+resultado.inicioVigencia.getMinutes()+'_'+resultado.inicioVigencia.getSeconds(), (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        array[index].resultados = result.recordset;\n                        console.log('result.recordset')\n                        console.log(result.recordset)\n                        banderaImportacionInicio++;\n                        //this.finImportacion();\n                        this.setState({\n                            resultados: array\n                        }, this.finImportacion);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    finImportacion() {\n        if(banderaImportacionInicio == banderaImportacionFin) {\n            var copyResultados = [...this.state.resultados];\n            copyResultados.sort(function(a, b){\n                return a.f3ch4Gu4rd4do-b.f3ch4Gu4rd4do;\n            });\n            if(this.props.esVariable) {\n                if(this.props.variable.esColeccion) {\n                    var newCopy = [];\n                    for (var i = 0; i < copyResultados.length; i++) {\n                        this.insertarValorEnColeccion(copyResultados[i], newCopy);\n                    };\n                    copyResultados = newCopy;\n                }\n            }\n            this.setState({\n                resultados: copyResultados\n            }, this.crearHTML );\n        }\n    }\n\n    insertarValorEnColeccion (valorAInsertar, arregloAInsertar) {\n        var inserto = false;\n        for (var i = 0; i < arregloAInsertar.length; i++) {\n            for (var j = 0; j < arregloAInsertar[i].length; j++) {\n                if (arregloAInsertar[i][j].f3ch4Gu4rd4do.getTime() == valorAInsertar.f3ch4Gu4rd4do.getTime()) {\n                    inserto = true;\n                    arregloAInsertar[i].push(valorAInsertar);\n                    return;\n                }\n            };\n        };\n        if(!inserto) {\n            arregloAInsertar.push([valorAInsertar]);\n            return;\n        }\n    }\n\n    crearHTML() {\n        /*var html = <section className=\"cd-timeline js-cd-timeline\">;\n                html += <div className=\"cd-timeline__container\">;\n                for (var i = 0; i < this.state.resultados[0].resultados.length; i++) {\n                    html += <div className=\"cd-timeline__block js-cd-block\">;\n                        html += <div className=\"cd-timeline__img cd-timeline__img--picture js-cd-img\">;\n                            html += <img src=\"../assets/edit.png\" alt=\"Picture\">;\n                        html += </div>;\n                        html += <div className=\"cd-timeline__content js-cd-content\">;\n                            html += <h3>{this.state.resultados[i].nombre}</h3>;\n                        if(this.props.esVariable && this.props.variable.esColeccion) {\n                            html += <a className=\"btn btn-primary btn-lg\" >Ver Resultados</a>;\n                        } else if(this.props.esVariable && !this.props.variable.esColeccion) {\n                            for (var k = 0; k < this.state.resultados[0].atributos.length; k++) {\n                                if(this.state.resultados[0].atributos[k].nombre.localeCompare(\"f3ch4Gu4rd4do\") != 0) {\n                                    html += <span style=\"font-weight: bold;\">{this.state.resultados[0].atributos[k].nombre}</span>;\n                                    html += <span>{this.state.resultados[0].resultados[i][this.state.resultados[0].atributos[k].nombre]}</span>;\n                                }\n                            };\n                        }\n                            html += '<span class=\"cd-timeline__date\">'+this.state.resultados[0].resultados[i].f3ch4Gu4rd4do+'</span>'\n                        html += '</div>';\n                    html += '</div>';\n                };\n                html += '</div>';\n            html += '</section>';*/\n\n\n        var htmlContent = [];\n        for (var i = 0; i < this.state.resultados[0].resultados.length; i++) {\n            if(this.props.esVariable && this.props.variable.esColeccion) {\n                var htmlRow = <div key={i} className=\"cd-timeline__block js-cd-block\">\n                                    <div className=\"cd-timeline__img cd-timeline__img--picture js-cd-img\">\n                                        <img src=\"../assets/edit.png\" alt=\"Picture\"/>\n                                    </div>\n                                    <div className=\"cd-timeline__content js-cd-content\">\n                                        <a className=\"btn btn-primary btn-lg\" >Ver Resultados</a>\n                                        <span className=\"cd-timeline__date\">{this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getFullYear()+\"-\"+this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getMonth()+\"-\"+this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getDate()}</span>\n                                    </div>\n                                </div>;\n                htmlContent.push(htmlRow);\n            } else /*if(this.props.esVariable && !this.props.variable.esColeccion)*/ {\n                var htmlObjectDesc = [];\n                for (var k = 0; k < this.state.resultados[0].atributos.length; k++) {\n                    if(this.state.resultados[0].atributos[k].nombre.localeCompare(\"f3ch4Gu4rd4do\") != 0) {\n                        var divObj =    <div key={i+\"\"+k+\"z\"} className=\"row border-bottom\" style={{clear: \"both\", display: \"block\", overflow: \"auto\", width: \"100%\"}}>\n                                            <span key={i+\"\"+k+\"a\"} style={{fontWeight: \"bold\", float: \"left\"}}>{this.state.resultados[0].atributos[k].nombre} :</span>\n                                            <span key={i+\"\"+k+\"b\"} style={{float: \"right\"}}>\n                                                {\n                                                    this.state.resultados[0].atributos[k].tipo.localeCompare(\"date\") == 0\n                                                    ?   this.styleDate(this.state.resultados[0].resultados[i][this.state.resultados[0].atributos[k].nombre])\n                                                    :   this.state.resultados[0].resultados[i][this.state.resultados[0].atributos[k].nombre]\n                                                }\n                                            </span>\n                                        </div>;\n                        htmlObjectDesc.push(divObj);\n                        /*htmlObjectDesc.push(<span key={i+\"\"+k+\"a\"} style={{fontWeight: \"bold\"}}>{this.state.resultados[0].atributos[k].nombre}</span>);\n                        htmlObjectDesc.push(<span key={i+\"\"+k+\"b\"}>{this.state.resultados[0].resultados[i][this.state.resultados[0].atributos[k].nombre]}</span>);*/\n                    }\n                };\n                var htmlRow = <div key={i} className=\"cd-timeline__block js-cd-block\">\n                                    <div className=\"cd-timeline__img cd-timeline__img--picture js-cd-img\">\n                                        <img src=\"../assets/edit.png\" alt=\"Picture\"/>\n                                    </div>\n                                    <div className=\"cd-timeline__content js-cd-content\">\n                                        {htmlObjectDesc}\n                                        <span className=\"cd-timeline__date\">{this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getFullYear()+\"-\"+(this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getMonth()+1)+\"-\"+this.state.resultados[0].resultados[i].f3ch4Gu4rd4do.getDate()}</span>\n                                    </div>\n                                </div>;\n                htmlContent.push(htmlRow);\n            }\n        };\n        var html = <section key={\"hh\"} className=\"cd-timeline js-cd-timeline\">\n                        <div className=\"cd-timeline__container\">\n                            {htmlContent}\n                        </div>\n                    </section>;\n        this.setState({\n            html: html\n        });\n    }\n\n    styleDate (date) {\n        return date.getDate()+'-'+(date.getMonth()+1)+'-'+date.getFullYear();\n    }\n\n    render() {\n        return (\n            <div>\n                {this.props.navbar}\n                \n                {this.state.html}\n                \n            </div>\n        );\n    }\n}\n\n/*\n<br/>\n<div className={\"row\"} style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n    <a className={\"btn btn-brand btnWhiteColorHover font-bold font-20\"} onClick={this.crearRiesgo}>Realizar Cálculo</a>\n</div>\n<br/>\n*/"],"file":"TimelineVariable.js"}