{"version":3,"sources":["components/Filtros/FilterValor.js"],"names":["FilterValor","props","state","listas","variablesDeLista","updateVariableList","bind","getLists","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","listaID","$","val","length","localeCompare","arrTemp","i","campos","push","ID","nombre","tipo","esNumero","map","lista","margin","variable","indexOf","valor","esBoolean","height","width","esFecha","esTexto","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nexport default class FilterValor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            listas: [],\n            variablesDeLista: []\n        }\n        this.updateVariableList = this.updateVariableList.bind(this);\n        this.getLists = this.getLists.bind(this);\n    }\n\n    componentDidMount() {\n        this.getLists();\n    }\n\n    getLists() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Listas\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            listas: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    updateVariableList() {\n        let listaID = $(\"#selectLista\").val();\n        if (listaID.length > 0) {\n            if (listaID.localeCompare(\"table\") != 0) {\n                console.log(listaID)\n                const transaction = new sql.Transaction( this.props.pool );\n                transaction.begin(err => {\n                    var rolledBack = false;\n                    transaction.on('rollback', aborted => {\n                        rolledBack = true;\n                    });\n                    const request = new sql.Request(transaction);\n                    request.query(\"select * from VariablesdeLista where listaID = \"+listaID, (err, result) => {\n                        if (err) {\n                            if (!rolledBack) {\n                                console.log(err);\n                                transaction.rollback(err => {\n                                });\n                            }\n                        } else {\n                            transaction.commit(err => {\n                                /*let arrTemp = [];\n                                for (var i = 0; i < result.recordset.length; i++) {\n                                    arrTemp.push({ID: result.recordset[i].ID, nombre: result.recordset[i].nombre, tipo: result.recordset[i].tipo});\n                                };*/\n                                this.setState({\n                                    variablesDeLista: result.recordset\n                                });\n                                //console.log(arrTemp)\n                            });\n                        }\n                    });\n                }); // fin transaction\n            } else {\n                let arrTemp = [];\n                for (var i = 0; i < this.props.campos.length; i++) {\n                    arrTemp.push({ID: this.props.campos[i].ID, nombre: this.props.campos[i].nombre, tipo: this.props.campos[i].tipo});\n                };\n                this.setState({\n                    variablesDeLista: arrTemp\n                });\n            }\n        } else {\n            this.setState({\n                variablesDeLista: []\n            });\n        }\n    }\n\n    render() {\n        if(this.props.esNumero) {\n            return (\n                <div className={\"row\"}>\n\t            \t<div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n\t                        <h3>Seleccionar Campo</h3>\n\t                        <div>\n\t                            <div className={\"form-group\"}>\n\t                                <select id=\"selectLista\" className={\"form-control form-control-lg\"} onChange={this.updateVariableList}>\n\t                                    <option value=\"\">Seleccione una lista...</option>\n\t                                    <option value=\"table\">Campos de tabla</option>\n                                        {this.state.listas.map((lista, i) =>\n                                            <option value={lista.ID} key={lista.ID}>{lista.nombre}</option>\n                                        )}\n\t                                </select>\n\t                            </div>\n\t                        </div>\n\n\t                        <h5 style={{margin: \"0px\"}}></h5>\n\t                        <h4>Seleccionar Elementos</h4>\n\t                        <div>\n\t                            <div className={\"form-group\"}>\n\t                                <select id=\"camposDeLista\" className={\"form-control form-control-lg\"} multiple>\n                                        {this.state.variablesDeLista.map((variable, i) => {\n                                                if (variable.tipo.indexOf(\"int\") == 0) {\n                                                    return <option value={variable.valor} key={variable.ID}>{variable.nombre}</option>\n                                                } else {\n                                                    return null;\n                                                }\n                                            }\n                                        )}\n\t                                </select>\n\t                            </div>\n\t                        </div>\n\n\t                </div>\n\t            </div>\n            );\n        } else if(this.props.esBoolean) {\n            return (\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <h3>Seleccionar Operacion</h3>\n                        <div>\n                            <div className={\"text-center\"}>\n                                <label className={\"custom-control custom-radio custom-control-inline\"}>\n                                    <input type=\"radio\" name=\"radio-inline\" className={\"custom-control-input\"}/>\n                                    <span className={\"custom-control-label\"}>\n                                        <img src=\"./assets/varCreation/Verdadero.png\" alt=\"\" style={{height: \"30px\", width: \"auto\"}}/>\n                                    </span>\n                                </label>\n                                <label className={\"custom-control custom-radio custom-control-inline\"}>\n                                    <input type=\"radio\" name=\"radio-inline\" className={\"custom-control-input\"}/>\n                                    <span className={\"custom-control-label\"}>\n                                        <img src=\"./assets/varCreation/Falso.png\" alt=\"\" style={{height: \"30px\", width: \"auto\"}}/>\n                                    </span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if(this.props.esFecha) {\n            return (\n                <div>\n                </div>\n            );\n        } else if(this.props.esTexto) {\n            return (\n                <div className={\"row\"}>\n                    <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                        <h3>Seleccionar Campo</h3>\n                        <div className={\"form-group\"}>\n                            <select id=\"selectLista\" className={\"form-control form-control-lg\"} onChange={this.updateVariableList}>\n                                <option value=\"\">Seleccione una lista...</option>\n                                <option value=\"table\">Campos de tabla</option>\n                                {this.state.listas.map((lista, i) =>\n                                    <option value={lista.ID} key={lista.ID}>{lista.nombre}</option>\n                                )}\n                            </select>\n                        </div>\n\n                        <h5 style={{margin: \"0px\"}}></h5>\n                        <h4>Seleccionar Elementos</h4>\n                        <div className={\"form-group\"}>\n                            <select id=\"camposDeLista\" className={\"form-control form-control-lg\"} multiple>\n                                {this.state.variablesDeLista.map((variable, i) => {\n                                        if (variable.tipo.indexOf(\"varchar\") == 0) {\n                                            return <option value={variable.valor} key={variable.ID}>{variable.nombre}</option>\n                                        } else {\n                                            return null;\n                                        }\n                                    }\n                                )}\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"FilterValor.js"}