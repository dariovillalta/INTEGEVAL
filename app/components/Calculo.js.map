{"version":3,"sources":["components/Calculo.js"],"names":["nivelMaximoVariables","arregloDeFuentesDeDatos","window","arregloDeVariables","arregloDeReglas","arregloDeFormulas","arregloDeElementosDeFormulas","arregloConexionesATablas","arregloResultadosDeTablas","banderaImportacionCamposVariablesINICIO","banderaImportacionCamposVariablesFIN","banderaImportacionSegmentosCamposVariablesINICIO","banderaImportacionSegmentosCamposVariablesFIN","banderaImportacionReglasSegmentosCamposVariablesINICIO","banderaImportacionReglasSegmentosCamposVariablesFIN","banderaImportacionFormulasCamposVariablesINICIO","banderaImportacionFormulasCamposVariablesFIN","banderaImportacionElementosFormulasCamposVariablesINICIO","banderaImportacionElementosFormulasCamposVariablesFIN","banderaImportacionConecionesATablasINICIO","banderaImportacionConecionesATablasFIN","banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO","banderaImportacionValoresDeTablasDeFuenteDeDatosFIN","myWorker","Worker","Calculo","props","iniciarCalculo","bind","getNivelMaximoVariables","traerVariables","traerAtributosVariables","revisarFinImportacionCamposVariables","inicioTraerSegmentosDeCampos","traerSegmentosDeCampos","revisarFinImportacionSegmentosCampos","inicioTraerReglasDeSegmentos","traerReglasDeSegmentos","revisarFinImportacionReglasSegmentos","inicioTraerFormulasDeCampos","traerFormulasDeCampos","revisarFinImportacionFormulasCampos","inicioTraerElementosFormulasDeCampos","traerElementosFormulasDeCampos","revisarFinImportacionElementosFormulasCampos","inicioTraerConeccionesATablas","noHaSidoImportadaConeccion","traerConeccionesATablas","finTraerConeccionesATablas","inicioTraerResultadosDeFuenteDeDatos","traerResultadosDeFuenteDeDatos","finTraerResultadosDeFuenteDeDatos","iniciarHilo","codigoIniciacion","iniciacionElementosFormula","iniciacionVariable","iniciacionCampo","crearCodigoFuenteDato","crearCodigoReglas","arregloCodigoRegla","agregarCodigoGuardarVariable","crearNivel","isValidDate","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","length","nivel","i","ID","alert","variableID","index","atributos","j","variableCampoID","segmentoReglas","k","segmentoCampoID","reglas","formulas","idFormula","fuenteDeDatos","l","push","conexionTablaID","fuenteDeDato","tablaID","indexARemplazar","tabla","ConnectionPool","user","usuario","password","contrasena","server","servidor","database","baseDatos","stream","connectionTimeout","requestTimeout","max","min","idleTimeoutMillis","options","useUTC","connect","undefined","splice","arregloAgrupacionElementosFormulaPorConexionATabla","m","fuenteDato","variable","atributo","codigo","llamarSiguienteNivel","Function","a","nombre","tipoVariable","tabsText","localeCompare","tipoColumnaEnTabla","toLowerCase","operacion","nombreColumnaEnTabla","idConexionTabla","existeOperacion","esObjeto","campo","tipo","b","c","d","p","formulaID","tabs","posicionVariable","posicionCampo","n","reglaPadreID","resultado","elementoFormula","tabSpaces","objetoEnTabla","instanciacion","columnasDeTablaSeleccionadas","getColumnasDeTablaSeleccionadas","codigoElementosFormulaAsignacion","codigoElementosFormulaAsignacionOperacion","codigoElementosFormulaGlobal","cadenaRetorno","regla","arreglo","posicionesIF","esCondicion","indexOf","formula","filter","arregloValoresAComparar","copiaReglaOriginal","$","extend","tamArreglo","arregloLista","textoFinal","campoObjetivo","split","valor","getListValue","copiaRegla","noAgregarFactor","noAgregarFecha","cuerpo","object","reglaPadre","arregloCuerpo","cuantasTabs","retorno","merge","filtro","fecha","Object","prototype","toString","call","isNaN","getTime","state","operaciones","color","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nvar nivelMaximoVariables = 0;\nvar arregloDeFuentesDeDatos = [];                           //Arreglo con las fuentes de datos\n        //objeto: {tablaID, nombre, descripcion, esObjeto, objetoPadreID, guardar, nivel, [arreglo de atributos]}\n            //objeto arreglo de atributos: {nombre, tipo, formula}\nwindow.arregloDeVariables = [];                                //Arreglo con las variables\n        //objeto: {nombre, descripcion, esObjeto, objetoPadreID, guardar, nivel, [arreglo de atributos]}\n            //objeto arreglo de atributos: {nombre, tipo, formula}\nwindow.arregloDeReglas = [];                   //Arreglo con las reglas / instrucciones correspondientes a la posicion del atributo\nwindow.arregloDeFormulas = [];                 //Arreglo con las formulas / asignaciones correspondientes a la posicion del atributo\nwindow.arregloDeElementosDeFormulas = [];      //Arreglo con las fuentes de datos correspondientes a la posicion de la formula\nwindow.arregloConexionesATablas = [];          //Arreglo con los valores para poder conectarse a las tablas\nwindow.arregloResultadosDeTablas = [];         //Arreglo con los valores obtenidos despues de conectarse a las tablas\n\nvar banderaImportacionCamposVariablesINICIO = 0;                    //Bandera para saber si termino de importar los campos de las variables\nvar banderaImportacionCamposVariablesFIN = 0;                       //Bandera para saber si termino de importar los campos de las variables\nvar banderaImportacionSegmentosCamposVariablesINICIO = 0;           //Bandera para saber si termino de importar los segmentos de reglas de los campos de las variables\nvar banderaImportacionSegmentosCamposVariablesFIN = 0;              //Bandera para saber si termino de importar los segmentos de reglas de los campos de las variables\nvar banderaImportacionReglasSegmentosCamposVariablesINICIO = 0;     //Bandera para saber si termino de importar las reglas de los segmentos de los campos de las variables\nvar banderaImportacionReglasSegmentosCamposVariablesFIN = 0;        //Bandera para saber si termino de importar las reglas de los segmentos de los campos de las variables\nvar banderaImportacionFormulasCamposVariablesINICIO = 0;            //Bandera para saber si termino de importar las formulas de los campos de las variables\nvar banderaImportacionFormulasCamposVariablesFIN = 0;               //Bandera para saber si termino de importar las formulas de los campos de las variables\nvar banderaImportacionElementosFormulasCamposVariablesINICIO = 0;   //Bandera para saber si termino de importar los elementos de las formulas de los campos de las variables\nvar banderaImportacionElementosFormulasCamposVariablesFIN = 0;      //Bandera para saber si termino de importar los elementos de las formulas de los campos de las variables\nvar banderaImportacionConecionesATablasINICIO = 0;                  //Bandera para saber si termino de importar los valores para poder conetarse a las tablas\nvar banderaImportacionConecionesATablasFIN = 0;                     //Bandera para saber si termino de importar los valores para poder conetarse a las tablas\nvar banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO = 0;     //Bandera para saber si termino de importar los valores de las tablas de fuentes de datos\nvar banderaImportacionValoresDeTablasDeFuenteDeDatosFIN = 0;        //Bandera para saber si termino de importar los valores de las tablas de fuentes de datos\n\nconst myWorker = new Worker(\"./components/CalculoVariablesWorker.js\");\n\nexport default class Calculo extends React.Component {\n    constructor(props) {\n        super(props);\n        /*this.state = {\n            showLoadingScreen: false,\n            mensajeLoadingScreen: ''\n        }*/\n        this.iniciarCalculo = this.iniciarCalculo.bind(this);\n        this.getNivelMaximoVariables = this.getNivelMaximoVariables.bind(this);\n        this.traerVariables = this.traerVariables.bind(this);\n        this.traerAtributosVariables = this.traerAtributosVariables.bind(this);\n        this.revisarFinImportacionCamposVariables = this.revisarFinImportacionCamposVariables.bind(this);\n        this.inicioTraerSegmentosDeCampos = this.inicioTraerSegmentosDeCampos.bind(this);\n        this.traerSegmentosDeCampos = this.traerSegmentosDeCampos.bind(this);\n        this.revisarFinImportacionSegmentosCampos = this.revisarFinImportacionSegmentosCampos.bind(this);\n        this.inicioTraerReglasDeSegmentos = this.inicioTraerReglasDeSegmentos.bind(this);\n        this.traerReglasDeSegmentos = this.traerReglasDeSegmentos.bind(this);\n        this.revisarFinImportacionReglasSegmentos = this.revisarFinImportacionReglasSegmentos.bind(this);\n        this.inicioTraerFormulasDeCampos = this.inicioTraerFormulasDeCampos.bind(this);\n        this.traerFormulasDeCampos = this.traerFormulasDeCampos.bind(this);\n        this.revisarFinImportacionFormulasCampos = this.revisarFinImportacionFormulasCampos.bind(this);\n        this.inicioTraerElementosFormulasDeCampos = this.inicioTraerElementosFormulasDeCampos.bind(this);\n        this.traerElementosFormulasDeCampos = this.traerElementosFormulasDeCampos.bind(this);\n        this.revisarFinImportacionElementosFormulasCampos = this.revisarFinImportacionElementosFormulasCampos.bind(this);\n        this.inicioTraerConeccionesATablas = this.inicioTraerConeccionesATablas.bind(this);\n        this.noHaSidoImportadaConeccion = this.noHaSidoImportadaConeccion.bind(this);\n        this.traerConeccionesATablas = this.traerConeccionesATablas.bind(this);\n        this.finTraerConeccionesATablas = this.finTraerConeccionesATablas.bind(this);\n        this.inicioTraerResultadosDeFuenteDeDatos = this.inicioTraerResultadosDeFuenteDeDatos.bind(this);\n        this.traerResultadosDeFuenteDeDatos = this.traerResultadosDeFuenteDeDatos.bind(this);\n        this.finTraerResultadosDeFuenteDeDatos = this.finTraerResultadosDeFuenteDeDatos.bind(this);\n        this.iniciarHilo = this.iniciarHilo.bind(this);\n        this.codigoIniciacion = this.codigoIniciacion.bind(this);\n        this.iniciacionElementosFormula = this.iniciacionElementosFormula.bind(this);\n        this.iniciacionVariable = this.iniciacionVariable.bind(this);\n        this.iniciacionCampo = this.iniciacionCampo.bind(this);\n        this.crearCodigoFuenteDato = this.crearCodigoFuenteDato.bind(this);\n        this.crearCodigoReglas = this.crearCodigoReglas.bind(this);\n        this.arregloCodigoRegla = this.arregloCodigoRegla.bind(this);\n        this.agregarCodigoGuardarVariable = this.agregarCodigoGuardarVariable.bind(this);\n        this.crearNivel = this.crearNivel.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n    }\n\n    iniciarCalculo() {\n        this.getNivelMaximoVariables();\n    }\n\n    getNivelMaximoVariables() {\n        nivelMaximoVariables = 0;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select MAX(nivel) AS nivel from VariablesCampos\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            nivelMaximoVariables = result.recordset[0].nivel;\n                        }\n                        arregloDeVariables = [];\n                        this.traerVariables();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        arregloDeVariables = result.recordset;\n                        banderaImportacionCamposVariablesINICIO = 0;\n                        banderaImportacionCamposVariablesFIN = arregloDeVariables.length;\n                        for (var i = 0; i < arregloDeVariables.length; i++) {\n                            this.traerAtributosVariables(arregloDeVariables[i].ID, i);\n                        };\n                        if(arregloDeVariables.length == 0) {\n                            alert(\"No existen variables\");\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerAtributosVariables (variableID, index) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where variableID = \"+variableID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionCamposVariablesINICIO++;\n                        arregloDeVariables[index].atributos = result.recordset;\n                        this.revisarFinImportacionCamposVariables();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionCamposVariables () {\n        if(banderaImportacionCamposVariablesINICIO == banderaImportacionCamposVariablesFIN) {\n            this.inicioTraerSegmentosDeCampos();\n        }\n    }\n\n    inicioTraerSegmentosDeCampos () {\n        console.log('inicioTraerSegmentosDeCampos');\n        banderaImportacionSegmentosCamposVariablesINICIO = 0;\n        banderaImportacionSegmentosCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                banderaImportacionSegmentosCamposVariablesFIN++;\n                this.traerSegmentosDeCampos(arregloDeVariables[i].ID, arregloDeVariables[i].atributos[j].ID, i, j);\n            };\n        };\n    }\n\n    traerSegmentosDeCampos (variableID, variableCampoID, i, j) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglas where variableID = \"+variableID+\" and variableCampoID = \"+variableCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionSegmentosCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionSegmentosCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].segmentoReglas = result.recordset;\n                        this.revisarFinImportacionSegmentosCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionSegmentosCampos () {\n        if(banderaImportacionSegmentosCamposVariablesINICIO == banderaImportacionSegmentosCamposVariablesFIN) {\n            this.inicioTraerReglasDeSegmentos();\n        }\n    }\n\n    inicioTraerReglasDeSegmentos () {\n        console.log('inicioTraerReglasDeSegmentos');\n        banderaImportacionReglasSegmentosCamposVariablesINICIO = 0;\n        banderaImportacionReglasSegmentosCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].segmentoReglas.length; k++) {\n                    banderaImportacionReglasSegmentosCamposVariablesFIN++;\n                    this.traerReglasDeSegmentos(arregloDeVariables[i].ID, arregloDeVariables[i].atributos[j].ID, arregloDeVariables[i].atributos[j].segmentoReglas[k].ID,  i, j, k);\n                };\n            };\n        };\n    }\n\n    traerReglasDeSegmentos (variableID, variableCampoID, segmentoCampoID, i, j, k) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Reglas where variableID = \"+variableID+\" and variableCampoID = \"+variableCampoID+\" and segmentoReglaID = \"+segmentoCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionReglasSegmentosCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionReglasSegmentosCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].segmentoReglas[k].reglas = result.recordset;\n                        this.revisarFinImportacionReglasSegmentos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionReglasSegmentos () {\n        console.log('banderaImportacionReglasSegmentosCamposVariablesINICIO');\n        console.log(banderaImportacionReglasSegmentosCamposVariablesINICIO);\n        console.log('banderaImportacionReglasSegmentosCamposVariablesFIN');\n        console.log(banderaImportacionReglasSegmentosCamposVariablesFIN);\n        if(banderaImportacionReglasSegmentosCamposVariablesINICIO == banderaImportacionReglasSegmentosCamposVariablesFIN) {\n            this.inicioTraerFormulasDeCampos();\n        }\n    }\n\n    inicioTraerFormulasDeCampos () {\n        console.log('inicioTraerFormulasDeCampos');\n        banderaImportacionFormulasCamposVariablesINICIO = 0;\n        banderaImportacionFormulasCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                banderaImportacionFormulasCamposVariablesFIN++;\n                this.traerFormulasDeCampos(arregloDeVariables[i].atributos[j].ID, i, j);\n            };\n        };\n    }\n\n    traerFormulasDeCampos (variableCampoID, i, j) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableCampoID = \"+variableCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionFormulasCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionFormulasCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].formulas = result.recordset;\n                        this.revisarFinImportacionFormulasCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionFormulasCampos () {\n        if(banderaImportacionFormulasCamposVariablesINICIO == banderaImportacionFormulasCamposVariablesFIN) {\n            this.inicioTraerElementosFormulasDeCampos();\n        }\n    }\n\n    inicioTraerElementosFormulasDeCampos () {\n        console.log('inicioTraerElementosFormulasDeCampos');\n        banderaImportacionElementosFormulasCamposVariablesINICIO = 0;\n        banderaImportacionElementosFormulasCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    banderaImportacionElementosFormulasCamposVariablesFIN++;\n                    this.traerElementosFormulasDeCampos(arregloDeVariables[i].atributos[j].formulas[k].ID, i, j, k);\n                };\n            };\n        };\n    }\n\n    traerElementosFormulasDeCampos (idFormula, i, j, k) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoFormulasVariablesCampos where formulaID = \"+idFormula, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionElementosFormulasCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionElementosFormulasCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos = result.recordset;\n                        this.revisarFinImportacionElementosFormulasCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionElementosFormulasCampos () {\n        if(banderaImportacionElementosFormulasCamposVariablesINICIO == banderaImportacionElementosFormulasCamposVariablesFIN) {\n            this.inicioTraerConeccionesATablas();\n        }\n    }\n\n    inicioTraerConeccionesATablas () {\n        console.log('inicioTraerConeccionesATablas');\n        banderaImportacionConecionesATablasINICIO = 0;\n        banderaImportacionConecionesATablasFIN = 0;\n        arregloConexionesATablas = [];\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    for (var l = 0; l < arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos.length; l++) {\n                        if(this.noHaSidoImportadaConeccion(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l])) {\n                            banderaImportacionConecionesATablasFIN++;\n                            //para asegurar que ID no sea asyncrono\n                            arregloConexionesATablas.push({ID: arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l].conexionTablaID});\n                            arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]\n                            this.traerConeccionesATablas(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l].conexionTablaID, arregloConexionesATablas.length-1);\n                        }\n                    };\n                };\n            };\n        };\n    }\n\n    noHaSidoImportadaConeccion (fuenteDeDato) {\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            if(arregloConexionesATablas[i].ID == fuenteDeDato.conexionTablaID) {\n                return false;\n            }\n        };\n        return true;\n    }\n\n    traerConeccionesATablas (tablaID, indexARemplazar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Tablas where ID = \"+tablaID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionConecionesATablasINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionConecionesATablasINICIO++;\n                        if(result.recordset.length > 0)\n                            arregloConexionesATablas[indexARemplazar] = result.recordset[0];\n                        this.finTraerConeccionesATablas();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    finTraerConeccionesATablas () {\n        if(banderaImportacionConecionesATablasINICIO == banderaImportacionConecionesATablasFIN) {\n            this.inicioTraerResultadosDeFuenteDeDatos();\n        }\n    }\n\n    inicioTraerResultadosDeFuenteDeDatos () {\n        console.log('inicioTraerResultadosDeFuenteDeDatos');\n        banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO = 0;\n        banderaImportacionValoresDeTablasDeFuenteDeDatosFIN = 0;\n        arregloResultadosDeTablas = [];\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            banderaImportacionValoresDeTablasDeFuenteDeDatosFIN++;\n            this.traerResultadosDeFuenteDeDatos(arregloConexionesATablas[i], i);\n        };\n    }\n\n    traerResultadosDeFuenteDeDatos (tabla, index) {\n        const pool = new sql.ConnectionPool({\n            user: tabla.usuario,\n            password: tabla.contrasena,\n            server: tabla.servidor,\n            database: tabla.baseDatos,\n            stream: true,\n            connectionTimeout: 900000,\n            requestTimeout: 900000,\n            pool: {\n                max: 40,\n                min: 0,\n                idleTimeoutMillis: 30000\n            },\n            options: {\n                useUTC: false\n            }\n        });\n        pool.connect(err => {\n            pool.request().query(\"select * from \"+tabla.tabla, (err, result) => {\n                banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO++;\n                console.log('resultados tabla: '+tabla.tabla);\n                console.log(result.recordset);\n                if(result.recordset != undefined && result.recordset.length > 0)\n                    arregloResultadosDeTablas.splice(index, 0, result.recordset);\n                this.finTraerResultadosDeFuenteDeDatos();\n            });\n        }); // fin pool connect\n    }\n\n    finTraerResultadosDeFuenteDeDatos () {\n        if(banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO == banderaImportacionValoresDeTablasDeFuenteDeDatosFIN) {\n            this.iniciarHilo();\n        }\n    }\n\n    iniciarHilo () {\n        console.log('nivelMaximoVariables');\n        console.log(nivelMaximoVariables);\n        console.log('arregloDeFuentesDeDatos');\n        console.log(arregloDeFuentesDeDatos);\n        console.log('arregloDeVariables');\n        console.log(arregloDeVariables);\n        console.log('arregloResultadosDeTablas');\n        console.log(arregloResultadosDeTablas);\n        console.log('arregloConexionesATablas');\n        console.log(arregloConexionesATablas);\n        //DESCRIPCION DEL PROCEDIMIENTO\n        //1) PRIMERO CREAR CODIGO PARA CREAR VARIABLES DE ELEMENTOS DE FORMULAS, AGRUPADAS POR TABLAS CORRESPONDIENTES  -- SERA PRIMER METODO A LLAMAR\n        //2) CREAR METODO NIVEL XX, CONTENDRA LLAMADO A METODO 'CALCULO VARIABLES NIVEL XX', Y JUSTO DESPUES LLAMAR AL SIGUIENTE NIVEL QUE SIGUE, O AL METODO DE MENSAJE FINAL\n        //3) CREAR CODIGO 'CALCULO VARIABLES NIVEL XX'\n\n        //AGRUPANDO ELEMENTOS DE FORMULA POR CONEXION A TABLA\n        var arregloAgrupacionElementosFormulaPorConexionATabla = [];    //arreglo que contiene los elementos de formulas agrupados por tablas\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    for (var l = 0; l < arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos.length; l++) {\n                        for (var m = 0; m < arregloConexionesATablas.length; m++) {\n                            if (arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l].conexionTablaID == arregloConexionesATablas[m].ID) {\n                                if(arregloAgrupacionElementosFormulaPorConexionATabla[m] == undefined)\n                                    arregloAgrupacionElementosFormulaPorConexionATabla[m] = [];\n                                arregloAgrupacionElementosFormulaPorConexionATabla[m].push({fuenteDato: arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l], variable: arregloDeVariables[i], atributo: arregloDeVariables[i].atributos[j], index: l});\n                            }\n                        };\n                    };\n                };\n            };\n        };\n        console.log('arregloAgrupacionElementosFormulaPorConexionATabla');\n        console.log(arregloAgrupacionElementosFormulaPorConexionATabla);\n\n        //INICIALIZANDO / CREANDO VARIABLES CON SUS CAMPOS\n        /*var codigoIniciacionVariables = '';\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            if(i != 0)\n                codigoIniciacionVariables += '\\n\\n';\n            codigoIniciacionVariables += '\\n// INSTANCIACIONES VARIABLE: '+arregloDeVariables[i].nombre;\n            codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i], \"variable\"); //variable, tipoVariable, esObjeto, atributo\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i], \"atributo\", arregloDeVariables[i].atributos[j]); ////variable, tipoVariable, esObjeto, atributo\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    //codigoIniciacionVariables += this.codigoIniciacion(arregloDeVariables[i].atributos[j].formulas[k]);\n                    for (var l = 0; l < arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos.length; l++) {\n                        console.log('arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]');\n                        console.log(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]);\n                        codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l], \"fuenteDato\", l); ////variable, tipoVariable, esObjeto, atributo\n                    };\n                };\n            };\n        };\n        console.log('codigoIniciacionVariables');\n        console.log(codigoIniciacionVariables);*/\n\n        var codigo = '';\n\n        for (var i = 0; i <= nivelMaximoVariables; i++) {\n            if(i == 0) {\n                var llamarSiguienteNivel = false;\n                if(nivelMaximoVariables >= 1)\n                    llamarSiguienteNivel = true;\n                codigo += this.crearCodigoFuenteDato(llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorConexionATabla);\n            } else {\n                var llamarSiguienteNivel = false;\n                if(nivelMaximoVariables > i)\n                    llamarSiguienteNivel = true;\n                this.crearNivel(i, llamarSiguienteNivel);\n            }\n        };\n\n        window['calculoPrincipal'] = new Function(\n            'return function calculoPrincipalMain(){'+\n                    codigo+\n            '}'\n        )();\n\n        window['calculoPrincipal']();\n        console.log(window['calculoPrincipal']);\n        for (var a = 0; a < arregloDeVariables.length; a++) {\n            console.log('window[arregloDeVariables[a].nombre]');\n            console.log(window[arregloDeVariables[a].nombre]);\n        };\n\n        //CREAR CODIGO DE LLENAR / CALCULAR ELEMENTOS DE FORMULAS\n        /*var codigoElementosFormula = '';\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            if(i != 0)\n                codigoElementosFormula += '\\n\\n';\n            codigoElementosFormula += '\\n// TABLA: '+arregloConexionesATablas[i].nombre;\n            //codigoElementosFormula += 'for (int i = 0; i < arregloConexionesATablas['+i+'].length; i++) {';\n            codigoElementosFormula += 'for (int i = 0; i < arregloResultadosDeTablas['+i+'].length; i++) {';\n            for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                var codigoCalculoVariable = this.crearCampo(arregloAgrupacionElementosFormulaPorConexionATabla[i][j]);\n                for (var k = 0; k < codigoCalculoVariable.length; k++) {\n                    codigoElementosFormula += '\\n\\t' + codigoCalculoVariable[k];\n                };\n            };\n            codigoElementosFormula += '\\n}';\n\n            for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                var codigoCalculoVariable = this.codigoElementosFormula(arregloAgrupacionElementosFormulaPorConexionATabla[i][j]);\n                for (var k = 0; k < codigoCalculoVariable.length; k++) {\n                    codigoElementosFormula += '\\n\\t' + codigoCalculoVariable[k];\n                };\n            };\n        };*/\n    }\n\n    codigoIniciacion (variable, tipoVariable, atributo, tabsText) {\n        if(tipoVariable.localeCompare(\"fuenteDato\") == 0) {\n            //atributo en este caso, es el valor del index del elemento en formula\n            return this.iniciacionElementosFormula(variable, atributo, tabsText);\n        } else if(tipoVariable.localeCompare(\"variable\") == 0) {\n            return this.iniciacionVariable(variable, tabsText);\n        } else if(tipoVariable.localeCompare(\"atributo\") == 0) {\n            return this.iniciacionCampo(variable, atributo, tabsText);\n        }\n    }\n\n    iniciacionElementosFormula (variable, index) {\n        var iniciacionElementosFormula = '';\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"date\") == 0 && (variable.operacion.localeCompare(\"MAX\") == 0 || variable.operacion.localeCompare(\"MIN\") == 0) ) {\n            //CUANDO ES FECHA Y OPERACION ES MAX O MIN DE FUENTE DE DATOS, SE OBTIENE LA FECHA MAXIMA O MENOR ENCONTRADA\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = new Date(1964, 4, 28);'; //POPS BIRTHDAY -- FECHA NULA\n        } else if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"date\") == 0 && variable.operacion.length > 0) {\n            //CUANDO ES FECHA Y OPERACION NO ES MAX O MIN DE FUENTE DE DATOS, SE OBTIENE UN NUMERO QUE VARIA POR OPERACION (DIA, MES, AO, COUNT)\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"bool\") == 0 && variable.operacion.localeCompare(\"COUNT\") == 0) {\n            //CUANDO ES BOOL Y OPERACION ES COUNT DE FUENTE DE DATOS\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"numero\") == 0 && this.existeOperacion(variable.operacion) ) {\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"cadena\") == 0 && variable.operacion.localeCompare(\"COUNT\") == 0) {\n            //CUANDO ES BOOL Y OPERACION ES COUNT DE FUENTE DE DATOS\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n        return iniciacionElementosFormula;\n    }\n\n    iniciacionVariable (variable, tabsText) {\n        var iniciacionVariable = '';\n        if(variable.esObjeto) {\n            iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = {};';\n            iniciacionVariable += '\\n'+tabsText+'var ' + variable.nombre + 'GU4RD4RV4L0R = false;';\n        }\n        //validacion necesario porque cuando variable sea primitiva, codigo de instanciacion sera en campo / atributo\n        return iniciacionVariable;\n    }\n\n    iniciacionCampo (variable, campo, tabsText) {\n        var iniciacionVariable = '';\n        if(!variable.esObjeto) {\n            if(campo.tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = new Date(1964, 5, 28);'; //POPS BIRTHDAY == null\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"bool\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = false;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"numero\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = -1;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"cadena\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = \"\";';\n            }\n        } else {\n            if(campo.tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = new Date(1964, 5, 28);'; //POPS BIRTHDAY == null\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"bool\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = false;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"numero\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = -1;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"cadena\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = \"\";';\n            }\n        }\n        return iniciacionVariable;\n    }\n\n    crearCodigoFuenteDato (llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorConexionATabla) {\n        //la creacion del codigo en esta parte pertenece a los campos que tienen asignacion unica de columna de tabla, y asignacion unica de columna de tabla con operacion como SUM, COUNT ect\n        var codigo = '';\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            //if(i > 0)\n                codigo += '\\n';\n            codigo += '\\t//CODIGO TABLA: '+arregloConexionesATablas[i].nombre;\n            codigo += '\\n\\tfor ( var i = 0; i < arregloConexionesATablas.length; i++) {';\n            codigo += '\\n\\t\\tfor ( var j = 0; j < arregloResultadosDeTablas[i].length; j++) {';\n            for (var a = 0; a < arregloDeVariables.length; a++) {\n                window[arregloDeVariables[a].nombre] = [];\n                console.log('window[arregloDeVariables[a].nombre]');\n                console.log(window[arregloDeVariables[a].nombre]);\n                for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                    if(arregloDeVariables[a].ID == arregloAgrupacionElementosFormulaPorConexionATabla[i][j].variable.ID) {\n                        codigo += '\\n\\t\\t//INICIACION VARIABLE: '+arregloDeVariables[a].nombre;\n                        codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"variable\", {}, '\\t\\t\\t'); //variable, tipoVariable, atributo\n                        for (var b = 0; b < arregloDeVariables[a].atributos.length; b++) {\n                            codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"atributo\", arregloDeVariables[a].atributos[b], '\\t\\t\\t'); ////variable, tipoVariable, atributo\n                            for (var c = 0; c < arregloDeVariables[a].atributos[b].formulas.length; c++) {\n                                for (var d = 0; d < arregloDeVariables[a].atributos[b].formulas[c].fuenteDeDatos.length; d++) {\n                                    /*console.log('arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]');\n                                    console.log(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]);*/\n                                    codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a].atributos[b].formulas[c].fuenteDeDatos[d], \"fuenteDato\", d, '\\t\\t\\t'); ////variable, tipoVariable, atributo\n                                };\n                            };\n                            for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                //viendo si el segmento de reglas pertenece a la tabla\n                                if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                    codigo += this.crearCodigoReglas(arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas, 3, a, b);\n                                }\n                            };\n                            codigo += '\\n';\n                            //codigo final para guardar nuevo valor en arreglo\n                            if (b == arregloDeVariables[a].atributos.length-1) {\n                                //crear codigo guardar variable hasta llegar al ultimo campo\n                                for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                    //viendo si el segmento de reglas pertenece a la tabla\n                                    if(arregloDeVariables[a].atributos[b].segmentoReglas) {\n                                        //\n                                    }\n                                    if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                        for (var c = 0; c < arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas.length; c++) {\n                                            for (var d = 0; d < arregloDeVariables[a].atributos[b].formulas.length; d++) {\n                                                if (arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas[c].formulaID == arregloDeVariables[a].atributos[b].formulas[d].ID) {\n                                                    codigo += this.agregarCodigoGuardarVariable(arregloDeVariables[a], arregloDeVariables[a].atributos[b], arregloDeVariables[a].atributos[b].formulas[d], arregloDeVariables[a].atributos[b].formulas[d].fuenteDeDatos, 3);\n                                                }\n                                            };\n                                        };\n                                    }\n                                };\n                            }\n                        };\n                        break;\n                    }\n                };\n            };\n            codigo += '\\n\\t}';\n            codigo += '\\n}';\n            if(llamarSiguienteNivel) {\n                codigo += '\\nnivel1();';\n            }\n            /*for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                //viendo si el segmento de reglas pertenece a la tabla\n                if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                    codigo += this.agregarCodigoFinal(arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas, 2, a, b);\n                }\n            };*/\n        };\n        console.log('codigo');\n        console.log(codigo);\n        return codigo;\n    }\n\n    crearCodigoReglas (reglas, tabs, posicionVariable, posicionCampo) {\n        var codigo = '';\n        for (var n = 0; n < reglas.length; n++) {\n            if(reglas[n].reglaPadreID == -1) {\n                var resultado = this.arregloCodigoRegla(reglas[n], tabs, posicionVariable, posicionCampo, [], reglas);\n                if(resultado.length > 0)\n                    resultado[0].codigo = \"\\n\"+resultado[0].codigo;\n                //$.merge( prestamosCuerpo, resultado );\n                for (var i = 0; i < resultado.length; i++) {\n                    codigo += resultado[i].codigo;\n                };\n            }\n        };\n        return codigo;\n    }\n\n    agregarCodigoGuardarVariable (variable, campo, formulas, elementoFormula, tabs) {\n        var codigo = '';\n        var tabsText = '';\n        for (var i = 0; i < tabs; i++) {\n            tabsText+='\\t';\n        };\n        //ver si elementoFormula es asignacion de columna\n        for (var i = 0; i < elementoFormula.length; i++) {\n            if (elementoFormula[i].operacion.toLowerCase().localeCompare(\"asig\") == 0) {\n                codigo += '\\n'+tabsText+'if ('+variable.nombre+'GU4RD4RV4L0R'+') {';\n                if(variable.esObjeto) {\n                    codigo += '\\n'+tabsText+'\\twindow[\"'+variable.nombre+'\"].push('+variable.nombre+'NU3V0);';\n                } else {\n                    codigo += '\\n'+tabsText+'\\twindow[\"'+variable.nombre+'\"] = '+variable.nombre+'NU3V0;';\n                }\n                codigo += '\\n'+tabsText+'}';\n\n            }\n        };\n        return codigo;\n    }\n\n    crearNivel () {\n    }\n\n    //elementoFormula: objeto elementoFormula\n    codigoElementosFormula (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var columnasDeTablaSeleccionadas = this.getColumnasDeTablaSeleccionadas(elementoFormula);\n        if(elementoFormula.operacion.length == 0 && columnasDeTablaSeleccionadas.length == 1) {\n            this.codigoElementosFormulaAsignacion();\n        } else if(elementoFormula.operacion.length > 0 && columnasDeTablaSeleccionadas.length == 1) {\n            this.codigoElementosFormulaAsignacionOperacion();\n        } else {\n            this.codigoElementosFormulaGlobal();\n        }\n    }\n\n    codigoElementosFormulaAsignacion (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    codigoElementosFormulaAsignacionOperacion (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    codigoElementosFormulaGlobal (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    arregloCodigoRegla (regla, tabs, posicionVariable, posicionCampo, arreglo, arregloDeReglas) {\n        var tabsText = '';\n        for (var i = 0; i < tabs; i++) {\n            tabsText+='\\t';\n        };\n        var posicionesIF = [];\n        if(!regla.esCondicion) {\n            //asignaciones\n            //si no es condicion, la variable de referencia se le agrega NU3V0 que hace referencia al objeto temporal vacio\n            if(regla.operacion.indexOf('ASIG') == 0) {\n                //trayendo formula correcta\n                var formula = arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.filter(function( formula ) {\n                    return regla.formulaID == formula.ID;\n                });\n                if(formula.length > 0) {\n                    arreglo.push({codigo: tabsText+\"if (arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\" != undefined) {\", tipo: \"ASIG\"});\n                    arreglo.push({codigo: \"\\n\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\";\", tipo: \"ASIG\"});\n                    arreglo.push({codigo: \"\\n\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"GU4RD4RV4L0R = true;\", tipo: \"BANDERA_ASIG\"});\n                    arreglo.push({codigo: \"\\n\"+tabsText+\"}\", tipo: \"ASIG\"});\n                }\n            } else if(regla.operacion.indexOf('MAX') == 0) {\n                //trayendo formula correcta\n                var formula = arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.filter(function( formula ) {\n                    return regla.formulaID == formula.ID;\n                });\n                if(formula.length > 0) {\n                    if(arregloDeVariables[posicionVariable].atributos[posicionCampo].tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                        isValidDate\n                        arreglo.push({codigo: tabsText+\"if (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\".getTime() < arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\".getTime())\", tipo: \"MAX\"});\n                        arreglo.push({codigo: tabsText+\"\\tif (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\".getTime() < arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\".getTime())\", tipo: \"MAX\"});\n                        arreglo.push({codigo: tabsText+\"\\t\\t\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = new Date(arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\")\", tipo: \"MAX\"});\n                    } else if(arregloDeVariables[posicionVariable].atributos[posicionCampo].tipo.toLowerCase().localeCompare(\"int\") == 0) {\n                        arreglo.push({codigo: tabsText+\"if (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" < arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\")\", tipo: \"MAX\"});\n                        arreglo.push({codigo: tabsText+\"\\t\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = arregloResultadosDeTablas[i][j].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla, tipo: \"MAX\"});\n                    }\n                }\n            } else if(regla.operacion.indexOf('MIN') == 0) {\n            } else if(regla.operacion.indexOf('PROM') == 0) {\n            } else if(regla.operacion.indexOf('SUM') == 0) {\n            } else if(regla.operacion.indexOf('FORMULA') == 0) {\n                console.log(\"WINDSORSSS\");\n                /*for (var i = 0; i < arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.length; i++) {\n                    if(arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas[i].ID == regla.formulaID) {\n                        for (var j = 0; j < arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas[i].fuenteDeDatos.length; j++) {\n                            //obteniendo variable original a partir del elemento formula\n                            //puede ser var primitiva, campo de variable, o columna de tabla\n                            if(arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas[i].fuenteDeDatos[j].esFuenteDeDato) {\n                                //\n                            }\n                            arreglo.push({codigo: \"\\n\"+tabsText+\"var \"+arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas[i].fuenteDeDatos[j].nombreVariable+posicionVariable+posicionCampo+i+\" = \"+arregloDeVariables+\";\", tipo: \"INICIACION_TEMP_ELEMENTOSFORMULAS\"});\n                        };\n                    }\n                };*/\n            }\n        } else {\n            //condiciones if\n            var arregloValoresAComparar = [];\n            var copiaReglaOriginal = $.extend(true,{},arreglo);\n            var tamArreglo = arreglo.length;\n            for (var j = 0; j < tamArreglo; j++) {\n                for (var i = 0; i < arregloLista.length; i++) {\n                    if(i==0) {\n                        var textoFinal = ' != 0 ';\n                        if(i+1 == arregloLista.length)\n                            textoFinal += \" ) {\";\n                        var campo = regla.campoObjetivo.split(\"=\")[1];\n                        var valor = getListValue(arregloLista[i], campo);\n                        arreglo[j].codigo +=valor + \"')\" + textoFinal;\n                    } else {\n                        var textoFinal = ' != 0 ';\n                        if(i+1 == arregloLista.length)\n                            textoFinal += \" ) {\";\n                        var campo = regla.campoObjetivo.split(\"=\")[1];\n                        var valor = getListValue(arregloLista[i], campo);\n                        arreglo[j].codigo += \" && \"+copiaRegla[j].codigo.split(\" ( \")[1]+valor+\"')\"+textoFinal;\n                    }\n                };\n            };\n        }\n\n        if(regla.valor.indexOf('LISTA') == 0) {\n            if(esCondicion) {\n                var arregloLista = regla.valor.split(\"=\")[1].split(\",\");\n                var copiaRegla = $.extend(true,{},arreglo);\n                var tamArreglo = arreglo.length;\n                if(regla.operacion == \"no\") {\n                    \n                    for (var j = 0; j < tamArreglo; j++) {\n                        for (var i = 0; i < arregloLista.length; i++) {\n                            if(i==0) {\n                                var textoFinal = ' != 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo +=valor + \"')\" + textoFinal;\n                            } else {\n                                var textoFinal = ' != 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo += \" && \"+copiaRegla[j].codigo.split(\" ( \")[1]+valor+\"')\"+textoFinal;\n                            }\n                        }\n                    };\n                } else {\n                    for (var j = 0; j < tamArreglo; j++) {\n                        for (var i = 0; i < arregloLista.length; i++) {\n                            if(i==0) {\n                                var textoFinal = ' == 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo +=valor + \"')\" + textoFinal;\n                            } else {\n                                var textoFinal = ' == 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo += \" || \"+copiaRegla[j].codigo.split(\" ( \")[1]+valor+\"')\"+textoFinal;\n                            }\n                        }\n                    };\n                }\n            }\n        } else if(regla.valor.indexOf('FACTOR') == 0 && !noAgregarFactor) {\n        } else if(regla.valor.indexOf('COLUMNA') == 0) {\n        } else if(regla.valor.indexOf('FECHA') == 0 && !noAgregarFecha) {\n        }\n\n        var cuerpo = arregloDeReglas.filter(function( object ) {\n            return object.reglaPadre == regla.ID;\n        });\n        if(cuerpo.length > 0) {\n            var arregloCuerpo = [];\n            for (var i = 0; i < cuerpo.length; i++) {\n                var cuantasTabs = tabs;\n                if(regla.esCondicion)\n                    cuantasTabs++;\n                var retorno = this.arregloCodigoRegla(regla, tabs+1, posicionVariable, posicionCampo, arreglo, arregloDeReglas);\n                retorno[0].codigo = \"\\n\"+retorno[0].codigo;\n                $.merge( arregloCuerpo, retorno );\n            };\n            for (var i = 0; i < posicionesIF.length; i++) {\n                arreglo.splice(posicionesIF[i], 0, ...arregloCuerpo);\n                if(regla.esCondicion)\n                    arreglo.splice(posicionesIF[i]+arregloCuerpo.length, 0, {codigo: \"\\n\"+tabsText+\"}\", filtro: regla.filtro});\n                for (var j = i; j < posicionesIF.length; j++) {\n                    posicionesIF[j]+=arregloCuerpo.length;\n                };\n            };\n            if(posicionesIF.length == 0)\n                $.merge( arreglo, arregloCuerpo );\n            return arreglo;\n        } else {\n            if(regla.esCondicion){\n                for (var i = 0; i < posicionesIF.length; i++) {\n                    arreglo.splice(posicionesIF[i], 0, {codigo: \"\\n\"+tabsText+\"}\", filtro: regla.filtro})\n                };\n            }\n            return arreglo;\n        }\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n\n    existeOperacion (operacion) {\n        for (var i = 0; i < this.state.operaciones.length; i++) {\n            if( operacion.localeCompare(\"COUNT\") == 0 || \n                operacion.localeCompare(\"MAX\") == 0 || \n                operacion.localeCompare(\"MIN\") == 0 || \n                operacion.localeCompare(\"DIA\") == 0 || \n                operacion.localeCompare(\"MES\") == 0 || \n                operacion.localeCompare(\"AO\") == 0 || \n                operacion.localeCompare(\"PROM\") == 0 || \n                operacion.localeCompare(\"SUM\") == 0 ) {\n                return true;\n            }\n        };\n        return false;\n    }\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <a className={\"btn btn-brand btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.iniciarCalculo}>Iniciar</a>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"Calculo.js"}