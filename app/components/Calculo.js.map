{"version":3,"sources":["components/Calculo.js"],"names":["nivelMaximoVariables","arregloDeFuentesDeDatos","window","arregloDeVariables","arregloDeReglas","arregloDeFormulas","arregloDeElementosDeFormulas","arregloConexionesATablas","arregloResultadosDeTablas","banderaImportacionCamposVariablesINICIO","banderaImportacionCamposVariablesFIN","banderaImportacionSegmentosCamposVariablesINICIO","banderaImportacionSegmentosCamposVariablesFIN","banderaImportacionReglasSegmentosCamposVariablesINICIO","banderaImportacionReglasSegmentosCamposVariablesFIN","banderaImportacionFormulasCamposVariablesINICIO","banderaImportacionFormulasCamposVariablesFIN","banderaImportacionElementosFormulasCamposVariablesINICIO","banderaImportacionElementosFormulasCamposVariablesFIN","banderaImportacionConecionesATablasINICIO","banderaImportacionConecionesATablasFIN","banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO","banderaImportacionValoresDeTablasDeFuenteDeDatosFIN","myWorker","Worker","Calculo","props","iniciarCalculo","bind","getNivelMaximoVariables","traerVariables","traerAtributosVariables","revisarFinImportacionCamposVariables","inicioTraerSegmentosDeCampos","traerSegmentosDeCampos","revisarFinImportacionSegmentosCampos","inicioTraerReglasDeSegmentos","traerReglasDeSegmentos","revisarFinImportacionReglasSegmentos","inicioTraerFormulasDeCampos","traerFormulasDeCampos","revisarFinImportacionFormulasCampos","inicioTraerElementosFormulasDeCampos","traerElementosFormulasDeCampos","revisarFinImportacionElementosFormulasCampos","inicioTraerConeccionesATablas","noHaSidoImportadaConeccion","traerConeccionesATablas","finTraerConeccionesATablas","inicioTraerResultadosDeFuenteDeDatos","traerResultadosDeFuenteDeDatos","finTraerResultadosDeFuenteDeDatos","iniciarHilo","codigoIniciacion","iniciacionElementosFormula","iniciacionVariable","iniciacionCampo","crearCodigoFuenteDato","crearCodigoSegmentoReglas","arregloCodigoRegla","agregarCodigoGuardarVariable","crearNivel","isValidDate","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","length","nivel","i","ID","alert","variableID","index","atributos","j","variableCampoID","segmentoReglas","k","segmentoCampoID","reglas","formulas","idFormula","fuenteDeDatos","esConexionTabla","push","conexionTablaID","segmento","tablaID","indexARemplazar","tabla","ConnectionPool","user","usuario","password","contrasena","server","servidor","database","baseDatos","stream","connectionTimeout","requestTimeout","max","min","idleTimeoutMillis","options","useUTC","connect","undefined","splice","arregloAgrupacionElementosFormulaPorConexionATabla","arregloAgrupacionElementosFormulaPorVariables","m","segmentoRegla","variable","atributo","x","a","esObjeto","nombre","codigo","llamarSiguienteNivel","Function","tipoVariable","tabsText","localeCompare","tipoColumnaEnTabla","toLowerCase","operacion","nombreColumnaEnTabla","idConexionTabla","existeOperacion","campo","tipo","nivelACrear","inicializarVariable","b","p","c","d","formulaID","tabs","posicionVariable","posicionCampo","nombreReferenciaArregloEnCodigo","n","reglaPadreID","resultado","elementoFormula","cabecera","regla","arreglo","posicionesIF","esCondicion","indexOf","formula","filter","saltoLinea","esFuenteDeDato","nombreVariable","arregloValoresAComparar","valor","nombreCampoDeArregloEnCodigo","tamArreglo","comparacion","tipoCampoObjetivo","cuerpo","object","reglaPadre","arregloCuerpo","cuantasTabs","retorno","$","merge","filtro","fecha","Object","prototype","toString","call","isNaN","getTime","state","operaciones","tabSpaces","objetoEnTabla","instanciacion","columnasDeTablaSeleccionadas","getColumnasDeTablaSeleccionadas","codigoElementosFormulaAsignacion","codigoElementosFormulaAsignacionOperacion","codigoElementosFormulaGlobal","cadenaRetorno","fuenteDato","crearTablaDeResultadoCodigo","Date","getFullYear","getMonth","getDate","color","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,oBAAoB,GAAG,CAA3B;AACA,IAAIC,uBAAuB,GAAG,EAA9B,C,CAA4D;AACpD;AACI;;AACZC,MAAM,CAACC,kBAAP,GAA4B,EAA5B,C,CAA+D;AACvD;AACI;;AACZD,MAAM,CAACE,eAAP,GAAyB,EAAzB,C,CAA+C;;AAC/CF,MAAM,CAACG,iBAAP,GAA2B,EAA3B,C,CAA+C;;AAC/CH,MAAM,CAACI,4BAAP,GAAsC,EAAtC,C,CAA+C;;AAC/CJ,MAAM,CAACK,wBAAP,GAAkC,EAAlC,C,CAA+C;;AAC/CL,MAAM,CAACM,yBAAP,GAAmC,EAAnC,C,CAA+C;;AAE/C,IAAIC,uCAAuC,GAAG,CAA9C,C,CAAoE;;AACpE,IAAIC,oCAAoC,GAAG,CAA3C,C,CAAoE;;AACpE,IAAIC,gDAAgD,GAAG,CAAvD,C,CAAoE;;AACpE,IAAIC,6CAA6C,GAAG,CAApD,C,CAAoE;;AACpE,IAAIC,sDAAsD,GAAG,CAA7D,C,CAAoE;;AACpE,IAAIC,mDAAmD,GAAG,CAA1D,C,CAAoE;;AACpE,IAAIC,+CAA+C,GAAG,CAAtD,C,CAAoE;;AACpE,IAAIC,4CAA4C,GAAG,CAAnD,C,CAAoE;;AACpE,IAAIC,wDAAwD,GAAG,CAA/D,C,CAAoE;;AACpE,IAAIC,qDAAqD,GAAG,CAA5D,C,CAAoE;;AACpE,IAAIC,yCAAyC,GAAG,CAAhD,C,CAAoE;;AACpE,IAAIC,sCAAsC,GAAG,CAA7C,C,CAAoE;;AACpE,IAAIC,sDAAsD,GAAG,CAA7D,C,CAAoE;;AACpE,IAAIC,mDAAmD,GAAG,CAA1D,C,CAAoE;;AAEpE,IAAMC,QAAQ,GAAG,IAAIC,MAAJ,CAAW,wCAAX,CAAjB;;IAEqBC,O;;;;;AACjB,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,iFAAMA,KAAN;AACA;;;;;AAIA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,+BAAtB;AACA,UAAKC,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BD,IAA7B,+BAA/B;AACA,UAAKE,cAAL,GAAsB,MAAKA,cAAL,CAAoBF,IAApB,+BAAtB;AACA,UAAKG,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BH,IAA7B,+BAA/B;AACA,UAAKI,oCAAL,GAA4C,MAAKA,oCAAL,CAA0CJ,IAA1C,+BAA5C;AACA,UAAKK,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCL,IAAlC,+BAApC;AACA,UAAKM,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BN,IAA5B,+BAA9B;AACA,UAAKO,oCAAL,GAA4C,MAAKA,oCAAL,CAA0CP,IAA1C,+BAA5C;AACA,UAAKQ,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCR,IAAlC,+BAApC;AACA,UAAKS,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BT,IAA5B,+BAA9B;AACA,UAAKU,oCAAL,GAA4C,MAAKA,oCAAL,CAA0CV,IAA1C,+BAA5C;AACA,UAAKW,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCX,IAAjC,+BAAnC;AACA,UAAKY,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BZ,IAA3B,+BAA7B;AACA,UAAKa,mCAAL,GAA2C,MAAKA,mCAAL,CAAyCb,IAAzC,+BAA3C;AACA,UAAKc,oCAAL,GAA4C,MAAKA,oCAAL,CAA0Cd,IAA1C,+BAA5C;AACA,UAAKe,8BAAL,GAAsC,MAAKA,8BAAL,CAAoCf,IAApC,+BAAtC;AACA,UAAKgB,4CAAL,GAAoD,MAAKA,4CAAL,CAAkDhB,IAAlD,+BAApD;AACA,UAAKiB,6BAAL,GAAqC,MAAKA,6BAAL,CAAmCjB,IAAnC,+BAArC;AACA,UAAKkB,0BAAL,GAAkC,MAAKA,0BAAL,CAAgClB,IAAhC,+BAAlC;AACA,UAAKmB,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BnB,IAA7B,+BAA/B;AACA,UAAKoB,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCpB,IAAhC,+BAAlC;AACA,UAAKqB,oCAAL,GAA4C,MAAKA,oCAAL,CAA0CrB,IAA1C,+BAA5C;AACA,UAAKsB,8BAAL,GAAsC,MAAKA,8BAAL,CAAoCtB,IAApC,+BAAtC;AACA,UAAKuB,iCAAL,GAAyC,MAAKA,iCAAL,CAAuCvB,IAAvC,+BAAzC;AACA,UAAKwB,WAAL,GAAmB,MAAKA,WAAL,CAAiBxB,IAAjB,+BAAnB;AACA,UAAKyB,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBzB,IAAtB,+BAAxB;AACA,UAAK0B,0BAAL,GAAkC,MAAKA,0BAAL,CAAgC1B,IAAhC,+BAAlC;AACA,UAAK2B,kBAAL,GAA0B,MAAKA,kBAAL,CAAwB3B,IAAxB,+BAA1B;AACA,UAAK4B,eAAL,GAAuB,MAAKA,eAAL,CAAqB5B,IAArB,+BAAvB;AACA,UAAK6B,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B7B,IAA3B,+BAA7B;AACA,UAAK8B,yBAAL,GAAiC,MAAKA,yBAAL,CAA+B9B,IAA/B,+BAAjC;AACA,UAAK+B,kBAAL,GAA0B,MAAKA,kBAAL,CAAwB/B,IAAxB,+BAA1B;AACA,UAAKgC,4BAAL,GAAoC,MAAKA,4BAAL,CAAkChC,IAAlC,+BAApC;AACA,UAAKiC,UAAL,GAAkB,MAAKA,UAAL,CAAgBjC,IAAhB,+BAAlB;AACA,UAAKkC,WAAL,GAAmB,MAAKA,WAAL,CAAiBlC,IAAjB,+BAAnB;AAxCe;AAyClB;;;;qCAEgB;AACb,WAAKC,uBAAL;AACH;;;8CAEyB;AAAA;;AACtB7B,MAAAA,oBAAoB,GAAG,CAAvB;AACA,UAAM+D,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,iDAAd,EAAiE,UAACN,GAAD,EAAMO,MAAN,EAAiB;AAC9E,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB,kBAAGO,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EAAgC;AAC5BjF,gBAAAA,oBAAoB,GAAG2E,MAAM,CAACK,SAAP,CAAiB,CAAjB,EAAoBE,KAA3C;AACH;;AACD/E,cAAAA,kBAAkB,GAAG,EAArB;;AACA,cAAA,MAAI,CAAC2B,cAAL;AACH,aAND;AAOH;AACJ,SAhBD;AAiBH,OAvBD,EAHsB,CA0BlB;AACP;;;qCAEgB;AAAA;;AACb,UAAMiC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyC,UAACN,GAAD,EAAMO,MAAN,EAAiB;AACtD,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAL,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAND,MAMO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBjE,cAAAA,kBAAkB,GAAGwE,MAAM,CAACK,SAA5B;AACAvE,cAAAA,uCAAuC,GAAG,CAA1C;AACAC,cAAAA,oCAAoC,GAAGP,kBAAkB,CAAC8E,MAA1D;;AACA,mBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,gBAAA,MAAI,CAACpD,uBAAL,CAA6B5B,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBC,EAAnD,EAAuDD,CAAvD;AACH;;AAAA;;AACD,kBAAGhF,kBAAkB,CAAC8E,MAAnB,IAA6B,CAAhC,EAAmC;AAC/BI,gBAAAA,KAAK,CAAC,sBAAD,CAAL;AACH;AACJ,aAVD;AAWH;AACJ,SApBD;AAqBH,OA3BD,EAFa,CA6BT;AACP;;;4CAEwBC,U,EAAYC,K,EAAO;AAAA;;AACxC,UAAMxB,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,sDAAoDY,UAAlE,EAA8E,UAAClB,GAAD,EAAMO,MAAN,EAAiB;AAC3F,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACA3D,cAAAA,uCAAuC;AACvCsD,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtB3D,cAAAA,uCAAuC;AACvCN,cAAAA,kBAAkB,CAACoF,KAAD,CAAlB,CAA0BC,SAA1B,GAAsCb,MAAM,CAACK,SAA7C;;AACA,cAAA,MAAI,CAAChD,oCAAL;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAFwC,CAwBpC;AACP;;;2DAEuC;AACpC,UAAGvB,uCAAuC,IAAIC,oCAA9C,EAAoF;AAChF,aAAKuB,4BAAL;AACH;AACJ;;;mDAE+B;AAC5B2C,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACAlE,MAAAA,gDAAgD,GAAG,CAAnD;AACAC,MAAAA,6CAA6C,GAAG,CAAhD;;AACA,WAAK,IAAIuE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7D7E,UAAAA,6CAA6C;AAC7C,eAAKsB,sBAAL,CAA4B/B,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBC,EAAlD,EAAsDjF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCL,EAAzF,EAA6FD,CAA7F,EAAgGM,CAAhG;AACH;;AAAA;AACJ;;AAAA;AACJ;;;2CAEuBH,U,EAAYI,e,EAAiBP,C,EAAGM,C,EAAG;AAAA;;AACvD,UAAM1B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qDAAmDY,UAAnD,GAA8D,yBAA9D,GAAwFI,eAAtG,EAAuH,UAACtB,GAAD,EAAMO,MAAN,EAAiB;AACpI,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAzD,cAAAA,gDAAgD;AAChDoD,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBzD,cAAAA,gDAAgD;AAChDR,cAAAA,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,GAAoDhB,MAAM,CAACK,SAA3D;;AACA,cAAA,MAAI,CAAC7C,oCAAL;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAFuD,CAwBnD;AACP;;;2DAEuC;AACpC,UAAGxB,gDAAgD,IAAIC,6CAAvD,EAAsG;AAClG,aAAKwB,4BAAL;AACH;AACJ;;;mDAE+B;AAC5BwC,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACAhE,MAAAA,sDAAsD,GAAG,CAAzD;AACAC,MAAAA,mDAAmD,GAAG,CAAtD;;AACA,WAAK,IAAIqE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChDP,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAOM,CAAnB;;AACA,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7Db,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAOY,CAAnB;;AACA,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDV,MAAtE,EAA8EW,CAAC,EAA/E,EAAmF;AAC/EhB,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAOe,CAAnB;AACA9E,YAAAA,mDAAmD;AACnD,iBAAKuB,sBAAL,CAA4BlC,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBC,EAAlD,EAAsDjF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCL,EAAzF,EAA6FjF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDR,EAAlJ,EAAuJD,CAAvJ,EAA0JM,CAA1J,EAA6JG,CAA7J;AACH;;AAAA;AACJ;;AAAA;AACJ;;AAAA;AACJ;;;2CAEuBN,U,EAAYI,e,EAAiBG,e,EAAiBV,C,EAAGM,C,EAAGG,C,EAAG;AAAA;;AAC3E,UAAM7B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,6CAA2CY,UAA3C,GAAsD,yBAAtD,GAAgFI,eAAhF,GAAgG,yBAAhG,GAA0HG,eAAxI,EAAyJ,UAACzB,GAAD,EAAMO,MAAN,EAAiB;AACtK,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAvD,cAAAA,sDAAsD;AACtDkD,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBvD,cAAAA,sDAAsD;AACtDV,cAAAA,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDE,MAArD,GAA8DnB,MAAM,CAACK,SAArE;;AACA,cAAA,MAAI,CAAC1C,oCAAL;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAF2E,CAwBvE;AACP;;;2DAEuC;AACpCsC,MAAAA,OAAO,CAACC,GAAR,CAAY,wDAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYhE,sDAAZ;AACA+D,MAAAA,OAAO,CAACC,GAAR,CAAY,qDAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY/D,mDAAZ;;AACA,UAAGD,sDAAsD,IAAIC,mDAA7D,EAAkH;AAC9G,aAAKyB,2BAAL;AACH;AACJ;;;kDAE8B;AAC3BqC,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA9D,MAAAA,+CAA+C,GAAG,CAAlD;AACAC,MAAAA,4CAA4C,GAAG,CAA/C;;AACA,WAAK,IAAImE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7DzE,UAAAA,4CAA4C;AAC5C,eAAKwB,qBAAL,CAA2BrC,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCL,EAA9D,EAAkED,CAAlE,EAAqEM,CAArE;AACH;;AAAA;AACJ;;AAAA;AACJ;;;0CAEsBC,e,EAAiBP,C,EAAGM,C,EAAG;AAAA;;AAC1C,UAAM1B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,mEAAiEgB,eAA/E,EAAgG,UAACtB,GAAD,EAAMO,MAAN,EAAiB;AAC7G,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACArD,cAAAA,+CAA+C;AAC/CgD,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBrD,cAAAA,+CAA+C;AAC/CZ,cAAAA,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCM,QAAnC,GAA8CpB,MAAM,CAACK,SAArD;;AACA,cAAA,MAAI,CAACvC,mCAAL;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAF0C,CAwBtC;AACP;;;0DAEsC;AACnC,UAAG1B,+CAA+C,IAAIC,4CAAtD,EAAoG;AAChG,aAAK0B,oCAAL;AACH;AACJ;;;2DAEuC;AACpCkC,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACA5D,MAAAA,wDAAwD,GAAG,CAA3D;AACAC,MAAAA,qDAAqD,GAAG,CAAxD;;AACA,WAAK,IAAIiE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7D,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCM,QAAnC,CAA4Cd,MAAhE,EAAwEW,CAAC,EAAzE,EAA6E;AACzE1E,YAAAA,qDAAqD;AACrD,iBAAKyB,8BAAL,CAAoCxC,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCM,QAAnC,CAA4CH,CAA5C,EAA+CR,EAAnF,EAAuFD,CAAvF,EAA0FM,CAA1F,EAA6FG,CAA7F;AACH;;AAAA;AACJ;;AAAA;AACJ;;AAAA;AACJ;;;mDAE+BI,S,EAAWb,C,EAAGM,C,EAAGG,C,EAAG;AAAA;;AAChD,UAAM7B,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qEAAmEsB,SAAjF,EAA4F,UAAC5B,GAAD,EAAMO,MAAN,EAAiB;AACzG,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAnD,cAAAA,wDAAwD;AACxD8C,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBnD,cAAAA,wDAAwD;AACxDd,cAAAA,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCM,QAAnC,CAA4CH,CAA5C,EAA+CK,aAA/C,GAA+DtB,MAAM,CAACK,SAAtE;;AACA,cAAA,MAAI,CAACpC,4CAAL;AACH,aAJD;AAKH;AACJ,SAfD;AAgBH,OAtBD,EAFgD,CAwB5C;AACP;;;mEAE+C;AAC5C,UAAG3B,wDAAwD,IAAIC,qDAA/D,EAAsH;AAClH,aAAK2B,6BAAL;AACH;AACJ;;;oDAEgC;AAC7B+B,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA1D,MAAAA,yCAAyC,GAAG,CAA5C;AACAC,MAAAA,sCAAsC,GAAG,CAAzC;AACAb,MAAAA,wBAAwB,GAAG,EAA3B;;AACA,WAAK,IAAI4E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7D,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDV,MAAtE,EAA8EW,CAAC,EAA/E,EAAmF;AAC/E,gBAAGzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDM,eAArD,IAAwE,KAAKpD,0BAAL,CAAgC3C,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,CAAhC,CAA3E,EAAkK;AAC9JxE,cAAAA,sCAAsC,GADwH,CAE9J;;AACAb,cAAAA,wBAAwB,CAAC4F,IAAzB,CAA8B;AAACf,gBAAAA,EAAE,EAAEjF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDQ;AAA1D,eAA9B,EAH8J,CAI9J;;AACA,mBAAKrD,uBAAL,CAA6B5C,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDQ,eAAlF,EAAmG7F,wBAAwB,CAAC0E,MAAzB,GAAgC,CAAnI;AACH;AACJ;;AAAA;AACJ;;AAAA;AACJ;;AAAA;AACJ;;;+CAE2BoB,Q,EAAU;AAClC,WAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5E,wBAAwB,CAAC0E,MAA7C,EAAqDE,CAAC,EAAtD,EAA0D;AACtD,YAAG5E,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BC,EAA5B,IAAkCiB,QAAQ,CAACD,eAA9C,EAA+D;AAC3D,iBAAO,KAAP;AACH;AACJ;;AAAA;AACD,aAAO,IAAP;AACH;;;4CAEwBE,O,EAASC,e,EAAiB;AAAA;;AAC/C,UAAMxC,WAAW,GAAG,IAAIC,kBAAIC,WAAR,CAAqB,KAAKvC,KAAL,CAAWwC,IAAhC,CAApB;AACAH,MAAAA,WAAW,CAACI,KAAZ,CAAkB,UAAAC,GAAG,EAAI;AACrB,YAAIC,UAAU,GAAG,KAAjB;AACAN,QAAAA,WAAW,CAACO,EAAZ,CAAe,UAAf,EAA2B,UAAAC,OAAO,EAAI;AAClCF,UAAAA,UAAU,GAAG,IAAb;AACH,SAFD;AAGA,YAAMG,OAAO,GAAG,IAAIR,kBAAIS,OAAR,CAAgBV,WAAhB,CAAhB;AACAS,QAAAA,OAAO,CAACE,KAAR,CAAc,qCAAmC4B,OAAjD,EAA0D,UAAClC,GAAD,EAAMO,MAAN,EAAiB;AACvE,cAAIP,GAAJ,EAAS;AACL,gBAAI,CAACC,UAAL,EAAiB;AACbO,cAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAjD,cAAAA,yCAAyC;AACzC4C,cAAAA,WAAW,CAACe,QAAZ,CAAqB,UAAAV,GAAG,EAAI,CAC3B,CADD;AAEH;AACJ,WAPD,MAOO;AACHL,YAAAA,WAAW,CAACgB,MAAZ,CAAmB,UAAAX,GAAG,EAAI;AACtBjD,cAAAA,yCAAyC;AACzC,kBAAGwD,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA7B,EACI1E,wBAAwB,CAACgG,eAAD,CAAxB,GAA4C5B,MAAM,CAACK,SAAP,CAAiB,CAAjB,CAA5C;;AACJ,cAAA,MAAI,CAAChC,0BAAL;AACH,aALD;AAMH;AACJ,SAhBD;AAiBH,OAvBD,EAF+C,CAyB3C;AACP;;;iDAE6B;AAC1B,UAAG7B,yCAAyC,IAAIC,sCAAhD,EAAwF;AACpF,aAAK6B,oCAAL;AACH;AACJ;;;2DAEuC;AACpC2B,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAxD,MAAAA,sDAAsD,GAAG,CAAzD;AACAC,MAAAA,mDAAmD,GAAG,CAAtD;AACAd,MAAAA,yBAAyB,GAAG,EAA5B;;AACA,WAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5E,wBAAwB,CAAC0E,MAA7C,EAAqDE,CAAC,EAAtD,EAA0D;AACtD7D,QAAAA,mDAAmD;AACnD,aAAK4B,8BAAL,CAAoC3C,wBAAwB,CAAC4E,CAAD,CAA5D,EAAiEA,CAAjE;AACH;;AAAA;AACJ;;;mDAE+BqB,K,EAAOjB,K,EAAO;AAAA;;AAC1C,UAAMrB,IAAI,GAAG,IAAIF,kBAAIyC,cAAR,CAAuB;AAChCC,QAAAA,IAAI,EAAEF,KAAK,CAACG,OADoB;AAEhCC,QAAAA,QAAQ,EAAEJ,KAAK,CAACK,UAFgB;AAGhCC,QAAAA,MAAM,EAAEN,KAAK,CAACO,QAHkB;AAIhCC,QAAAA,QAAQ,EAAER,KAAK,CAACS,SAJgB;AAKhCC,QAAAA,MAAM,EAAE,IALwB;AAMhCC,QAAAA,iBAAiB,EAAE,MANa;AAOhCC,QAAAA,cAAc,EAAE,MAPgB;AAQhClD,QAAAA,IAAI,EAAE;AACFmD,UAAAA,GAAG,EAAE,EADH;AAEFC,UAAAA,GAAG,EAAE,CAFH;AAGFC,UAAAA,iBAAiB,EAAE;AAHjB,SAR0B;AAahCC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE;AADH;AAbuB,OAAvB,CAAb;AAiBAvD,MAAAA,IAAI,CAACwD,OAAL,CAAa,UAAAtD,GAAG,EAAI;AAChBF,QAAAA,IAAI,CAACM,OAAL,GAAeE,KAAf,CAAqB,mBAAiB8B,KAAK,CAACA,KAA5C,EAAmD,UAACpC,GAAD,EAAMO,MAAN,EAAiB;AAChEtD,UAAAA,sDAAsD;AACtDuD,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAqB2B,KAAK,CAACA,KAAvC;AACA5B,UAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACK,SAAnB;AACA,cAAGL,MAAM,CAACK,SAAP,IAAoB2C,SAApB,IAAiChD,MAAM,CAACK,SAAP,CAAiBC,MAAjB,GAA0B,CAA9D,EACIzE,yBAAyB,CAACoH,MAA1B,CAAiCrC,KAAjC,EAAwC,CAAxC,EAA2CZ,MAAM,CAACK,SAAlD;;AACJ,UAAA,OAAI,CAAC7B,iCAAL;AACH,SAPD;AAQH,OATD,EAlB0C,CA2BtC;AACP;;;wDAEoC;AACjC,UAAG9B,sDAAsD,IAAIC,mDAA7D,EAAkH;AAC9G,aAAK8B,WAAL;AACH;AACJ;;;kCAEc;AACXwB,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY7E,oBAAZ;AACA4E,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY5E,uBAAZ;AACA2E,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY1E,kBAAZ;AACAyE,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYrE,yBAAZ;AACAoE,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYtE,wBAAZ,EAVW,CAWX;AACA;AACA;AACA;AAEA;;AACA,UAAIsH,kDAAkD,GAAG,EAAzD,CAjBW,CAiBqD;AAChE;;AACA,UAAIC,6CAA6C,GAAG,EAApD,CAnBW,CAmBgD;AAC3D;;AACA,WAAK,IAAI3C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,aAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCP,MAApD,EAA4DQ,CAAC,EAA7D,EAAiE;AAC7D,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDV,MAAtE,EAA8EW,CAAC,EAA/E,EAAmF;AAC/E,gBAAIzF,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDM,eAAzD,EAA0E;AACtE,mBAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxH,wBAAwB,CAAC0E,MAA7C,EAAqD8C,CAAC,EAAtD,EAA0D;AAClD,oBAAI5H,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDQ,eAArD,IAAwE7F,wBAAwB,CAACwH,CAAD,CAAxB,CAA4B3C,EAAxG,EAA4G;AACxG,sBAAGyC,kDAAkD,CAACE,CAAD,CAAlD,IAAyDJ,SAA5D,EACIE,kDAAkD,CAACE,CAAD,CAAlD,GAAwD,EAAxD;AACJF,kBAAAA,kDAAkD,CAACE,CAAD,CAAlD,CAAsD5B,IAAtD,CAA2D;AAAC6B,oBAAAA,aAAa,EAAE7H,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,CAAhB;AAAsEqC,oBAAAA,QAAQ,EAAE9H,kBAAkB,CAACgF,CAAD,CAAlG;AAAuG+C,oBAAAA,QAAQ,EAAE/H,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,CAAjH;AAAqJF,oBAAAA,KAAK,EAAEK;AAA5J,mBAA3D;AACA;AACH;AACR;AACJ,aATD,MASO;AACH,mBAAK,IAAIuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhI,kBAAkB,CAAC8E,MAAvC,EAA+CkD,CAAC,EAAhD,EAAoD;AAChD,oBAAGhI,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,EAAqDN,UAArD,IAAmEnF,kBAAkB,CAACgI,CAAD,CAAlB,CAAsB/C,EAA5F,EAAgG;AAC5F,sBAAG0C,6CAA6C,CAACK,CAAD,CAA7C,IAAoDR,SAAvD,EACIG,6CAA6C,CAACK,CAAD,CAA7C,GAAmD,EAAnD;AACJL,kBAAAA,6CAA6C,CAACK,CAAD,CAA7C,CAAiDhC,IAAjD,CAAsD;AAAC6B,oBAAAA,aAAa,EAAE7H,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,EAAmCE,cAAnC,CAAkDC,CAAlD,CAAhB;AAAsEqC,oBAAAA,QAAQ,EAAE9H,kBAAkB,CAACgF,CAAD,CAAlG;AAAuG+C,oBAAAA,QAAQ,EAAE/H,kBAAkB,CAACgF,CAAD,CAAlB,CAAsBK,SAAtB,CAAgCC,CAAhC,CAAjH;AAAqJF,oBAAAA,KAAK,EAAEK;AAA5J,mBAAtD;AACA;AACH;AACJ;;AAAA;AACJ;AACJ;;AAAA;AACJ;;AAAA;AACJ;;AAAA;AACDhB,MAAAA,OAAO,CAACC,GAAR,CAAY,oDAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYgD,kDAAZ;AACAjD,MAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYiD,6CAAZ,EAjDW,CAmDX;;AACA,WAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,kBAAkB,CAAC8E,MAAvC,EAA+CmD,CAAC,EAAhD,EAAoD;AAChD,YAAIjI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBC,QAA1B,EAAoC;AAChC;AACAnI,UAAAA,MAAM,CAACC,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAvB,CAAN,GAAuC,EAAvC;AACH,SAHD,MAGO;AACH;AACApI,UAAAA,MAAM,CAACC,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAvB,CAAN,GAAuC,EAAvC;AACH;AACJ,OA5DU,CA8DX;;AACA;;;;;;;;;;;;;;;;;;;;;;AAqBA,UAAIC,MAAM,GAAG,EAAb;;AAEA,WAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAInF,oBAArB,EAA2CmF,CAAC,EAA5C,EAAgD;AAC5C,YAAGA,CAAC,IAAI,CAAR,EAAW;AACP,cAAIqD,oBAAoB,GAAG,KAA3B;AACA,cAAGxI,oBAAoB,IAAI,CAA3B,EACIwI,oBAAoB,GAAG,IAAvB;AACJD,UAAAA,MAAM,IAAI,KAAK9E,qBAAL,CAA2B+E,oBAA3B,EAAiDX,kDAAjD,EAAqG,CAArG,CAAV;AACH,SALD,MAKO;AACH,cAAIW,oBAAoB,GAAG,KAA3B;AACA,cAAGxI,oBAAoB,GAAGmF,CAA1B,EACIqD,oBAAoB,GAAG,IAAvB;AACJ,eAAK3E,UAAL,CAAgB2E,oBAAhB,EAAsCV,6CAAtC,EAAqF3C,CAArF;AACH;AACJ;;AAAA;AAEDjF,MAAAA,MAAM,CAAC,kBAAD,CAAN,GAA6B,IAAIuI,QAAJ,CACzB,4CACQF,MADR,GAEA,GAHyB,GAA7B;AAMArI,MAAAA,MAAM,CAAC,kBAAD,CAAN;AACA0E,MAAAA,OAAO,CAACC,GAAR,CAAY3E,MAAM,CAAC,kBAAD,CAAlB;;AACA,WAAK,IAAIkI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,kBAAkB,CAAC8E,MAAvC,EAA+CmD,CAAC,EAAhD,EAAoD;AAChDxD,QAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY3E,MAAM,CAACC,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAvB,CAAlB;AACH;;AAAA,OA/GU,CAiHX;;AACA;;;;;;;;;;;;;;;;;;;;;AAsBH;;;qCAEiBL,Q,EAAUS,Y,EAAcR,Q,EAAUS,Q,EAAU;AAC1D,UAAGD,YAAY,CAACE,aAAb,CAA2B,YAA3B,KAA4C,CAA/C,EAAkD;AAC9C;AACA,eAAO,KAAKtF,0BAAL,CAAgC2E,QAAhC,EAA0CC,QAA1C,EAAoDS,QAApD,CAAP;AACH,OAHD,MAGO,IAAGD,YAAY,CAACE,aAAb,CAA2B,UAA3B,KAA0C,CAA7C,EAAgD;AACnD,eAAO,KAAKrF,kBAAL,CAAwB0E,QAAxB,EAAkCU,QAAlC,CAAP;AACH,OAFM,MAEA,IAAGD,YAAY,CAACE,aAAb,CAA2B,UAA3B,KAA0C,CAA7C,EAAgD;AACnD,eAAO,KAAKpF,eAAL,CAAqByE,QAArB,EAA+BC,QAA/B,EAAyCS,QAAzC,CAAP;AACH;AACJ;;;+CAE2BV,Q,EAAU1C,K,EAAO;AACzC,UAAIjC,0BAA0B,GAAG,EAAjC;;AACA,UAAG2E,QAAQ,CAACY,kBAAT,CAA4BC,WAA5B,GAA0CF,aAA1C,CAAwD,MAAxD,KAAmE,CAAnE,KAAyEX,QAAQ,CAACc,SAAT,CAAmBH,aAAnB,CAAiC,KAAjC,KAA2C,CAA3C,IAAgDX,QAAQ,CAACc,SAAT,CAAmBH,aAAnB,CAAiC,KAAjC,KAA2C,CAApK,CAAH,EAA4K;AACxK;AACA;AACA;AACAtF,QAAAA,0BAA0B,IAAIqF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACe,oBAAzB,GACMf,QAAQ,CAAC3C,UADf,GAEM2C,QAAQ,CAACvC,eAFf,GAGMuC,QAAQ,CAACjC,SAHf,GAIMiC,QAAQ,CAACgB,eAJf,GAI+B1D,KAJ7D;AAKAjC,QAAAA,0BAA0B,IAAI,2BAA9B,CATwK,CAS7G;AAC9D,OAVD,MAUO,IAAG2E,QAAQ,CAACY,kBAAT,CAA4BC,WAA5B,GAA0CF,aAA1C,CAAwD,MAAxD,KAAmE,CAAnE,IAAwEX,QAAQ,CAACc,SAAT,CAAmB9D,MAAnB,GAA4B,CAAvG,EAA0G;AAC7G;AACA;AACA;AACA3B,QAAAA,0BAA0B,IAAIqF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACe,oBAAzB,GACMf,QAAQ,CAAC3C,UADf,GAEM2C,QAAQ,CAACvC,eAFf,GAGMuC,QAAQ,CAACjC,SAHf,GAIMiC,QAAQ,CAACgB,eAJf,GAI+B1D,KAJ7D;AAKAjC,QAAAA,0BAA0B,IAAI,OAA9B;AACH;;AAED,UAAG2E,QAAQ,CAACY,kBAAT,CAA4BC,WAA5B,GAA0CF,aAA1C,CAAwD,MAAxD,KAAmE,CAAnE,IAAwEX,QAAQ,CAACc,SAAT,CAAmBH,aAAnB,CAAiC,OAAjC,KAA6C,CAAxH,EAA2H;AACvH;AACA;AACA;AACAtF,QAAAA,0BAA0B,IAAIqF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACe,oBAAzB,GACMf,QAAQ,CAAC3C,UADf,GAEM2C,QAAQ,CAACvC,eAFf,GAGMuC,QAAQ,CAACjC,SAHf,GAIMiC,QAAQ,CAACgB,eAJf,GAI+B1D,KAJ7D;AAKAjC,QAAAA,0BAA0B,IAAI,OAA9B;AACH;;AAED,UAAG2E,QAAQ,CAACY,kBAAT,CAA4BC,WAA5B,GAA0CF,aAA1C,CAAwD,QAAxD,KAAqE,CAArE,IAA0E,KAAKM,eAAL,CAAqBjB,QAAQ,CAACc,SAA9B,CAA7E,EAAwH;AACpH;AACA;AACAzF,QAAAA,0BAA0B,IAAIqF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACe,oBAAzB,GACMf,QAAQ,CAAC3C,UADf,GAEM2C,QAAQ,CAACvC,eAFf,GAGMuC,QAAQ,CAACjC,SAHf,GAIMiC,QAAQ,CAACgB,eAJf,GAI+B1D,KAJ7D;AAKAjC,QAAAA,0BAA0B,IAAI,OAA9B;AACH;;AAED,UAAG2E,QAAQ,CAACY,kBAAT,CAA4BC,WAA5B,GAA0CF,aAA1C,CAAwD,QAAxD,KAAqE,CAArE,IAA0EX,QAAQ,CAACc,SAAT,CAAmBH,aAAnB,CAAiC,OAAjC,KAA6C,CAA1H,EAA6H;AACzH;AACA;AACA;AACAtF,QAAAA,0BAA0B,IAAIqF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACe,oBAAzB,GACMf,QAAQ,CAAC3C,UADf,GAEM2C,QAAQ,CAACvC,eAFf,GAGMuC,QAAQ,CAACjC,SAHf,GAIMiC,QAAQ,CAACgB,eAJf,GAI+B1D,KAJ7D;AAKAjC,QAAAA,0BAA0B,IAAI,OAA9B;AACH;;AACD,aAAOA,0BAAP;AACH;;;uCAEmB2E,Q,EAAUU,Q,EAAU;AACpC,UAAIpF,kBAAkB,GAAG,EAAzB;;AACA,UAAG0E,QAAQ,CAACI,QAAZ,EAAsB;AAClB9E,QAAAA,kBAAkB,IAAIoF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACK,MAAzB,GAAgC,aAAtD;AACA/E,QAAAA,kBAAkB,IAAI,OAAKoF,QAAL,GAAc,MAAd,GAAuBV,QAAQ,CAACK,MAAhC,GAAyC,uBAA/D;AACH,OALmC,CAMpC;;;AACA,aAAO/E,kBAAP;AACH;;;oCAEgB0E,Q,EAAUkB,K,EAAOR,Q,EAAU;AACxC,UAAIpF,kBAAkB,GAAG,EAAzB;;AACA,UAAG,CAAC0E,QAAQ,CAACI,QAAb,EAAuB;AACnB,YAAGc,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,MAAvC,KAAkD,CAArD,EAAwD;AACpDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACK,MAAzB,GAAgC,gCAAtD,CADoD,CACoC;AAC3F;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,MAAvC,KAAkD,CAArD,EAAwD;AACpDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACK,MAAzB,GAAgC,gBAAtD;AACH;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,QAAvC,KAAoD,CAAvD,EAA0D;AACtDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACK,MAAzB,GAAgC,aAAtD;AACH;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,QAAvC,KAAoD,CAAvD,EAA0D;AACtDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAAC,MAAT,GAAgBV,QAAQ,CAACK,MAAzB,GAAgC,aAAtD;AACH;AACJ,OAbD,MAaO;AACH,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,MAAvC,KAAkD,CAArD,EAAwD;AACpDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAACV,QAAQ,CAACK,MAAlB,GAAyB,QAAzB,GAAkCa,KAAK,CAACb,MAAxC,GAA+C,2BAArE,CADoD,CAC8C;AACrG;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,MAAvC,KAAkD,CAArD,EAAwD;AACpDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAACV,QAAQ,CAACK,MAAlB,GAAyB,QAAzB,GAAkCa,KAAK,CAACb,MAAxC,GAA+C,WAArE;AACH;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,QAAvC,KAAoD,CAAvD,EAA0D;AACtDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAACV,QAAQ,CAACK,MAAlB,GAAyB,QAAzB,GAAkCa,KAAK,CAACb,MAAxC,GAA+C,QAArE;AACH;;AACD,YAAGa,KAAK,CAACC,IAAN,CAAWN,WAAX,GAAyBF,aAAzB,CAAuC,QAAvC,KAAoD,CAAvD,EAA0D;AACtDrF,UAAAA,kBAAkB,IAAIoF,QAAQ,GAACV,QAAQ,CAACK,MAAlB,GAAyB,QAAzB,GAAkCa,KAAK,CAACb,MAAxC,GAA+C,QAArE;AACH;AACJ;;AACD,aAAO/E,kBAAP;AACH;;;0CAEsBiF,oB,EAAsBX,kD,EAAoDwB,W,EAAa;AAC1G;AACA,UAAId,MAAM,GAAG,EAAb;;AACA,WAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5E,wBAAwB,CAAC0E,MAA7C,EAAqDE,CAAC,EAAtD,EAA0D;AACtD,YAAGA,CAAC,GAAG,CAAP,EACIoD,MAAM,IAAI,IAAV;AACJA,QAAAA,MAAM,IAAI,uBAAqBhI,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BmD,MAA3D;AACAC,QAAAA,MAAM,IAAI,kEAAV;AACAA,QAAAA,MAAM,IAAI,wEAAV;;AACA,aAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,kBAAkB,CAAC8E,MAAvC,EAA+CmD,CAAC,EAAhD,EAAoD;AAChDxD,UAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAY3E,MAAM,CAACC,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAvB,CAAlB;AACA,cAAIgB,mBAAmB,GAAG,IAA1B;;AACA,eAAK,IAAI7D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoC,kDAAkD,CAAC1C,CAAD,CAAlD,CAAsDF,MAA1E,EAAkFQ,CAAC,EAAnF,EAAuF;AACnF,gBAAGtF,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBhD,EAAtB,IAA4ByC,kDAAkD,CAAC1C,CAAD,CAAlD,CAAsDM,CAAtD,EAAyDwC,QAAzD,CAAkE7C,EAAjG,EAAqG;AACjG,mBAAK,IAAImE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAApD,EAA4DsE,CAAC,EAA7D,EAAiE;AAC7D,oBAAGpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCnE,EAAnC,IAAyCyC,kDAAkD,CAAC1C,CAAD,CAAlD,CAAsDM,CAAtD,EAAyDyC,QAAzD,CAAkE9C,EAA9G,EAAkH;AAC9G;AACA,sBAAGjF,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCrE,KAAnC,IAA4CmE,WAA/C,EAA4D;AACxD,wBAAGC,mBAAH,EAAwB;AACpBf,sBAAAA,MAAM,IAAI,kCAAgCpI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAhE;AACAC,sBAAAA,MAAM,IAAI,OAAO,KAAKlF,gBAAL,CAAsBlD,kBAAkB,CAACiI,CAAD,CAAxC,EAA6C,UAA7C,EAAyD,EAAzD,EAA6D,MAA7D,CAAjB,CAFoB,CAEmE;;AACvF,2BAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAApD,EAA4DuE,CAAC,EAA7D,EAAiE;AAC7DjB,wBAAAA,MAAM,IAAI,OAAO,KAAKlF,gBAAL,CAAsBlD,kBAAkB,CAACiI,CAAD,CAAxC,EAA6C,UAA7C,EAAyDjI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCgE,CAAhC,CAAzD,EAA6F,MAA7F,CAAjB;AACH;;AAAA,uBALmB,CAMpB;;AACAF,sBAAAA,mBAAmB,GAAG,KAAtB;AACH;;AACD1E,oBAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAD,oBAAAA,OAAO,CAACC,GAAR,CAAY1E,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAA/C;;AACA,yBAAK,IAAI6D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkDV,MAAtE,EAA8EuE,CAAC,EAA/E,EAAmF;AAC/E;AACA,0BAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqDpD,eAArD,IAAwE7F,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BC,EAAvG,EAA2G;AACvGmD,wBAAAA,MAAM,IAAI,KAAK7E,yBAAL,CAA+BvD,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,CAA/B,EAAqFrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAA1I,EAAkJ,CAAlJ,EAAqJsC,CAArJ,EAAwJmB,CAAxJ,EAA2J,8BAA3J,CAAV;AACH;AACJ;;AAAA;AACDhB,oBAAAA,MAAM,IAAI,IAAV,CAlBwD,CAmBxD;;AACA,wBAAIgB,CAAC,IAAIpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAAhC,GAAuC,CAAhD,EAAmD;AAC/C;AACA,2BAAK,IAAIuE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkDV,MAAtE,EAA8EuE,CAAC,EAA/E,EAAmF;AAC/E;AACA,4BAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqDpD,eAArD,IAAwE7F,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BC,EAAvG,EAA2G;AACvG,+BAAK,IAAIqE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAArD,CAA4Db,MAAhF,EAAwFwE,CAAC,EAAzF,EAA6F;AACzF,iCAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4Cd,MAAhE,EAAwEyE,CAAC,EAAzE,EAA6E;AACzE,kCAAIvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAArD,CAA4D2D,CAA5D,EAA+DE,SAA/D,IAA4ExJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,EAA+CtE,EAA/H,EAAmI;AAC/HmD,gCAAAA,MAAM,IAAI,KAAK3E,4BAAL,CAAkCzD,kBAAkB,CAACiI,CAAD,CAApD,EAAyDjI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,CAAzD,EAA6FpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,CAA7F,EAA6IvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,EAA+CzD,aAA5L,EAA2M,CAA3M,CAAV;AACH;AACJ;;AAAA;AACJ;;AAAA;AACJ;AACJ;;AAAA;AACJ;AACJ;AACJ;AACJ;;AAAA;AACJ;AACJ;;AAAA;AACJ;;AAAA;AACDsC,QAAAA,MAAM,IAAI,SAAV;AACAA,QAAAA,MAAM,IAAI,SAAV;;AACA,YAAGC,oBAAH,EAAyB;AACrBD,UAAAA,MAAM,IAAI,aAAV;AACH;AACJ;;AAAA;AACD3D,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY0D,MAAZ;AACA,aAAOA,MAAP;AACH;;;8CAE0B5C,c,EAAgBG,M,EAAQ8D,I,EAAMC,gB,EAAkBC,a,EAAeC,+B,EAAiC;AACvH,UAAIxB,MAAM,GAAG,EAAb;AACA,UAAII,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyE,IAApB,EAA0BzE,CAAC,EAA3B,EAA+B;AAC3BwD,QAAAA,QAAQ,IAAE,IAAV;AACH;;AAAA;;AACD,WAAK,IAAIqB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlE,MAAM,CAACb,MAA3B,EAAmC+E,CAAC,EAApC,EAAwC;AACpC,YAAGlE,MAAM,CAACkE,CAAD,CAAN,CAAUC,YAAV,IAA0B,CAAC,CAA9B,EAAiC;AAC7B,cAAIC,SAAS,GAAG,KAAKvG,kBAAL,CAAwBmC,MAAM,CAACkE,CAAD,CAA9B,EAAmCJ,IAAnC,EAAyCC,gBAAzC,EAA2DC,aAA3D,EAA0E,EAA1E,EAA8EhE,MAA9E,EAAsFiE,+BAAtF,CAAhB;AACA,cAAGG,SAAS,CAACjF,MAAV,GAAmB,CAAtB,EACIiF,SAAS,CAAC,CAAD,CAAT,CAAa3B,MAAb,GAAsB,OAAK2B,SAAS,CAAC,CAAD,CAAT,CAAa3B,MAAxC,CAHyB,CAI7B;;AACA,eAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+E,SAAS,CAACjF,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;AACvCoD,YAAAA,MAAM,IAAI2B,SAAS,CAAC/E,CAAD,CAAT,CAAaoD,MAAvB;AACH;;AAAA;AACJ;AACJ;;AAAA;AACD,aAAOA,MAAP;AACH;;;iDAE6BN,Q,EAAUkB,K,EAAOpD,Q,EAAUoE,e,EAAiBP,I,EAAM;AAC5E,UAAIrB,MAAM,GAAG,EAAb;AACA,UAAII,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyE,IAApB,EAA0BzE,CAAC,EAA3B,EAA+B;AAC3BwD,QAAAA,QAAQ,IAAE,IAAV;AACH;;AAAA,OAL2E,CAM5E;;AACA,WAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgF,eAAe,CAAClF,MAApC,EAA4CE,CAAC,EAA7C,EAAiD;AAC7C,YAAIgF,eAAe,CAAChF,CAAD,CAAf,CAAmB4D,SAAnB,CAA6BD,WAA7B,GAA2CF,aAA3C,CAAyD,MAAzD,KAAoE,CAAxE,EAA2E;AACvEL,UAAAA,MAAM,IAAI,OAAKI,QAAL,GAAc,MAAd,GAAqBV,QAAQ,CAACK,MAA9B,GAAqC,cAArC,GAAoD,KAA9D;;AACA,cAAGL,QAAQ,CAACI,QAAZ,EAAsB;AAClBE,YAAAA,MAAM,IAAI,OAAKI,QAAL,GAAc,YAAd,GAA2BV,QAAQ,CAACK,MAApC,GAA2C,UAA3C,GAAsDL,QAAQ,CAACK,MAA/D,GAAsE,SAAhF;AACH,WAFD,MAEO;AACHC,YAAAA,MAAM,IAAI,OAAKI,QAAL,GAAc,YAAd,GAA2BV,QAAQ,CAACK,MAApC,GAA2C,OAA3C,GAAmDL,QAAQ,CAACK,MAA5D,GAAmE,QAA7E;AACH;;AACDC,UAAAA,MAAM,IAAI,OAAKI,QAAL,GAAc,GAAxB;AAEH;AACJ;;AAAA;AACD,aAAOJ,MAAP;AACH;;;+BAEWC,oB,EAAsBV,6C,EAA+CuB,W,EAAa;AAC1F;AACA,UAAId,MAAM,GAAG,EAAb;;AACA,WAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhF,kBAAkB,CAAC8E,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,YAAGoD,MAAM,CAACpD,CAAD,CAAN,IAAawC,SAAhB,EACIY,MAAM,CAACpD,CAAD,CAAN,GAAY;AAACiF,UAAAA,QAAQ,EAAE,EAAX;AAAe7B,UAAAA,MAAM,EAAE;AAAvB,SAAZ;AACJ,YAAGpD,CAAC,GAAG,CAAP,EACIoD,MAAM,CAACpD,CAAD,CAAN,CAAUiF,QAAV,IAAsB,IAAtB;AACJ7B,QAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUiF,QAAV,IAAsB,uBAAqB7J,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BmD,MAAvE;AACAC,QAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUiF,QAAV,IAAsB,sCAAoC7J,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BmD,MAAhE,GAAuE,mBAA7F;AACA;;;AAEA,aAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,kBAAkB,CAAC8E,MAAvC,EAA+CmD,CAAC,EAAhD,EAAoD;AAChDxD,UAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAY3E,MAAM,CAACC,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAAvB,CAAlB;AACA,cAAIgB,mBAAmB,GAAG,IAA1B;;AACA,eAAK,IAAI7D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqC,6CAA6C,CAACM,CAAD,CAA7C,CAAiDnD,MAArE,EAA6EQ,CAAC,EAA9E,EAAkF;AAC9E;AACA,gBAAGtF,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBhD,EAAtB,IAA4B0C,6CAA6C,CAACM,CAAD,CAA7C,CAAiD3C,CAAjD,EAAoDwC,QAApD,CAA6D7C,EAA5F,EAAgG;AAC5F,mBAAK,IAAImE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAApD,EAA4DsE,CAAC,EAA7D,EAAiE;AAC7D,oBAAGpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCnE,EAAnC,IAAyC0C,6CAA6C,CAACM,CAAD,CAA7C,CAAiD3C,CAAjD,EAAoDyC,QAApD,CAA6D9C,EAAzG,EAA6G;AACzG;AACA,sBAAGjF,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCrE,KAAnC,IAA4CmE,WAA/C,EAA4D;AACxD,wBAAGC,mBAAH,EAAwB;AACpBf,sBAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,kCAAgCpI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsBE,MAA1E;AACAC,sBAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,OAAO,KAAKlF,gBAAL,CAAsBlD,kBAAkB,CAACiI,CAAD,CAAxC,EAA6C,UAA7C,EAAyD,EAAzD,EAA6D,MAA7D,CAA3B,CAFoB,CAE6E;;AACjG,2BAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAApD,EAA4DuE,CAAC,EAA7D,EAAiE;AAC7DjB,wBAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,OAAO,KAAKlF,gBAAL,CAAsBlD,kBAAkB,CAACiI,CAAD,CAAxC,EAA6C,UAA7C,EAAyDjI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCgE,CAAhC,CAAzD,EAA6F,MAA7F,CAA3B;AACH;;AAAA,uBALmB,CAMpB;;AACAF,sBAAAA,mBAAmB,GAAG,KAAtB;AACH;;AACD,yBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkDV,MAAtE,EAA8EuE,CAAC,EAA/E,EAAmF;AAC/E;AACA,0BAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqDpD,eAArD,IAAwE7F,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BC,EAAvG,EAA2G;AACvGmD,wBAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,KAAK7E,yBAAL,CAA+BvD,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,CAA/B,EAAqFrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAA1I,EAAkJ,CAAlJ,EAAqJsC,CAArJ,EAAwJmB,CAAxJ,EAA2J,aAAWhJ,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BmD,MAAvC,GAA8C,IAAzM,CAApB;AACH;AACJ;;AAAA;AACDC,oBAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,IAApB,CAhBwD,CAiBxD;;AACA,wBAAIgB,CAAC,IAAIpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgCP,MAAhC,GAAuC,CAAhD,EAAmD;AAC/C;AACA,2BAAK,IAAIuE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkDV,MAAtE,EAA8EuE,CAAC,EAA/E,EAAmF;AAC/E;AACA,4BAAGrJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqDpD,eAArD,IAAwE7F,wBAAwB,CAAC4E,CAAD,CAAxB,CAA4BC,EAAvG,EAA2G;AACvG,+BAAK,IAAIqE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAArD,CAA4Db,MAAhF,EAAwFwE,CAAC,EAAzF,EAA6F;AACzF,iCAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4Cd,MAAhE,EAAwEyE,CAAC,EAAzE,EAA6E;AACzE,kCAAIvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmC5D,cAAnC,CAAkD6D,CAAlD,EAAqD1D,MAArD,CAA4D2D,CAA5D,EAA+DE,SAA/D,IAA4ExJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,EAA+CtE,EAA/H,EAAmI;AAC/HmD,gCAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,KAAK3E,4BAAL,CAAkCzD,kBAAkB,CAACiI,CAAD,CAApD,EAAyDjI,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,CAAzD,EAA6FpJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,CAA7F,EAA6IvJ,kBAAkB,CAACiI,CAAD,CAAlB,CAAsB5C,SAAtB,CAAgC+D,CAAhC,EAAmCxD,QAAnC,CAA4C2D,CAA5C,EAA+CzD,aAA5L,EAA2M,CAA3M,CAApB;AACH;AACJ;;AAAA;AACJ;;AAAA;AACJ;AACJ;;AAAA;AACJ;AACJ;AACJ;AACJ;;AAAA;AACJ;AACJ;;AAAA;AACJ;;AAAA,SAzD+C,CA0DhD;;AACAsC,QAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,SAApB;;AACA,YAAGC,oBAAH,EAAyB;AACrBD,UAAAA,MAAM,CAACpD,CAAD,CAAN,CAAUoD,MAAV,IAAoB,cAAYc,WAAZ,GAAwB,CAAxB,GAA0B,OAA9C;AACH;AACJ;;AAAA;AACDzE,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY0D,MAAZ;AACA,aAAOA,MAAP;AACH;;;uCAEmB8B,K,EAAOT,I,EAAMC,gB,EAAkBC,a,EAAeQ,O,EAASlK,e,EAAiB2J,+B,EAAiC;AACzH,UAAIpB,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyE,IAApB,EAA0BzE,CAAC,EAA3B,EAA+B;AAC3BwD,QAAAA,QAAQ,IAAE,IAAV;AACH;;AAAA;AACD,UAAI4B,YAAY,GAAG,EAAnB;AACA3F,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYwF,KAAZ;;AACA,UAAG,CAACA,KAAK,CAACG,WAAV,EAAuB;AACnB;AACA;AACA,YAAGH,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,MAAxB,KAAmC,CAAtC,EAAyC;AACrC;AACA,cAAIC,OAAO,GAAGvK,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8D/D,QAA9D,CAAuE4E,MAAvE,CAA8E,UAAUD,OAAV,EAAoB;AAC5G,mBAAOL,KAAK,CAACV,SAAN,IAAmBe,OAAO,CAACtF,EAAlC;AACH,WAFa,CAAd;AAGAR,UAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AACA,cAAG6F,OAAO,CAACzF,MAAR,GAAiB,CAApB,EAAuB;AACnBL,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EADmB,CAEnB;;AACAyF,YAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,cAAAA,MAAM,EAAEI,QAAQ,GAAC,MAAT,GAAgBoB,+BAAhB,GAAgD,MAAhD,GAAuDW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAnF,GAAwG,kBAAjH;AAAqII,cAAAA,IAAI,EAAE;AAA3I,aAAb;AACAkB,YAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,cAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAArD,GAA4D,QAA5D,GAAqEnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAAnI,GAA0I,KAA1I,GAAgJyB,+BAAhJ,GAAgL,MAAhL,GAAuLW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAnN,GAAwO,GAAjP;AAAsPI,cAAAA,IAAI,EAAE;AAA5P,aAAb;AACAkB,YAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,cAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAArD,GAA4D,sBAArE;AAA6Fc,cAAAA,IAAI,EAAE;AAAnG,aAAb;AACAkB,YAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,cAAAA,MAAM,EAAE,OAAKI,QAAL,GAAc,GAAvB;AAA4BS,cAAAA,IAAI,EAAE;AAAlC,aAAb;AACH;AACJ,SAdD,MAcO,IAAGiB,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,KAAxB,KAAkC,CAArC,EAAwC;AAC3C;AACA,cAAIC,OAAO,GAAGvK,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8D/D,QAA9D,CAAuE4E,MAAvE,CAA8E,UAAUD,OAAV,EAAoB;AAC5G,mBAAOL,KAAK,CAACV,SAAN,IAAmBe,OAAO,CAACtF,EAAlC;AACH,WAFa,CAAd;;AAGA,cAAGsF,OAAO,CAACzF,MAAR,GAAiB,CAApB,EAAuB;AACnB;AACA,gBAAG9E,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DV,IAA9D,CAAmEN,WAAnE,GAAiFF,aAAjF,CAA+F,MAA/F,KAA0G,CAA7G,EAAgH;AAC5G9E,cAAAA,WAAW;AACXwG,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAEI,QAAQ,GAAC,MAAT,GAAgBoB,+BAAhB,GAAgD,MAAhD,GAAuDW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAnF,GAAwG,gBAAjH;AAAmII,gBAAAA,IAAI,EAAE;AAAzI,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgB,MAAhB,GAAuBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAA5D,GAAmE,QAAnE,GAA4EnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAA1I,GAAiJ,eAAjJ,GAAiKyB,+BAAjK,GAAiM,MAAjM,GAAwMW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAApO,GAAyP,aAAlQ;AAAiRI,gBAAAA,IAAI,EAAE;AAAvR,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,WAASI,QAAT,GAAkB,MAAlB,GAAyBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAA9D,GAAqE,QAArE,GAA8EnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAA5I,GAAmJ,eAAnJ,GAAmKyB,+BAAnK,GAAmM,MAAnM,GAA0MW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAtO,GAA2P,aAApQ;AAAmRI,gBAAAA,IAAI,EAAE;AAAzR,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,aAAWI,QAAX,GAAoBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAAzD,GAAgE,QAAhE,GAAyEnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAAvI,GAA8I,cAA9I,GAA6JyB,+BAA7J,GAA6L,MAA7L,GAAoMW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAhO,GAAqP,IAA9P;AAAoQI,gBAAAA,IAAI,EAAE;AAA1Q,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,WAASI,QAAT,GAAkB,GAA3B;AAAgCS,gBAAAA,IAAI,EAAE;AAAtC,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgB,GAAzB;AAA8BS,gBAAAA,IAAI,EAAE;AAApC,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,OAAKI,QAAL,GAAc,GAAvB;AAA4BS,gBAAAA,IAAI,EAAE;AAAlC,eAAb;AACH,aATD,MASO,IAAGjJ,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DV,IAA9D,CAAmEN,WAAnE,GAAiFF,aAAjF,CAA+F,KAA/F,KAAyG,CAA5G,EAA+G;AAClH0B,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAEI,QAAQ,GAAC,MAAT,GAAgBoB,+BAAhB,GAAgD,MAAhD,GAAuDW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAAnF,GAAwG,gBAAjH;AAAmII,gBAAAA,IAAI,EAAE;AAAzI,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgB,MAAhB,GAAuBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAA5D,GAAmE,QAAnE,GAA4EnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAA1I,GAAiJ,KAAjJ,GAAuJyB,+BAAvJ,GAAuL,MAAvL,GAA8LW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAA1N,GAA+O,GAAxP;AAA6PI,gBAAAA,IAAI,EAAE;AAAnQ,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,WAASI,QAAT,GAAkBxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAAvD,GAA8D,QAA9D,GAAuEnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAArI,GAA4I,KAA5I,GAAkJyB,+BAAlJ,GAAkL,MAAlL,GAAyLW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyB,CAAzB,EAA4B+C,oBAA9N;AAAoPI,gBAAAA,IAAI,EAAE;AAA1P,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,SAAOI,QAAP,GAAgB,GAAzB;AAA8BS,gBAAAA,IAAI,EAAE;AAApC,eAAb;AACAkB,cAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,gBAAAA,MAAM,EAAE,OAAKI,QAAL,GAAc,GAAvB;AAA4BS,gBAAAA,IAAI,EAAE;AAAlC,eAAb;AACH;AACJ;AACJ,SAxBM,MAwBA,IAAGiB,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,KAAxB,KAAkC,CAArC,EAAwC,CAC9C,CADM,MACA,IAAGJ,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,MAAxB,KAAmC,CAAtC,EAAyC,CAC/C,CADM,MACA,IAAGJ,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,KAAxB,KAAkC,CAArC,EAAwC,CAC9C,CADM,MACA,IAAGJ,KAAK,CAACtB,SAAN,CAAgB0B,OAAhB,CAAwB,SAAxB,KAAsC,CAAzC,EAA4C;AAC/C,cAAIC,OAAO,GAAGvK,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8D/D,QAA9D,CAAuE4E,MAAvE,CAA8E,UAAUD,OAAV,EAAoB;AAC5G,mBAAOL,KAAK,CAACV,SAAN,IAAmBe,OAAO,CAACtF,EAAlC;AACH,WAFa,CAAd;;AAGA,eAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuF,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBhB,MAA7C,EAAqDE,CAAC,EAAtD,EAA0D;AACtD,gBAAIyF,UAAU,GAAG,EAAjB;AACA,gBAAGzF,CAAC,GAAG,CAAP,EACIyF,UAAU,GAAG,IAAb;AACJhG,YAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAY6F,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,CAAZ;;AACA,gBAAGuF,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B4D,SAA5B,IAAyCpB,SAAzC,IAAsD+C,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B4D,SAA5B,CAAsC9D,MAAtC,GAA+C,CAAxG,EAA2G;AACvG,kBAAGyF,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B0F,cAA/B,EAA+C;AAC3C;AACA,oBAAG1F,CAAC,GAAG,CAAP,EAAU;AACNmF,kBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,oBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,MAA5G,GAAmHW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B6D,oBAA/I,GAAoK,GAA7K;AAAkLI,oBAAAA,IAAI,EAAE;AAAxL,mBAAb;AACH,iBAFD,MAEO;AACHkB,kBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,oBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,MAA5G,GAAmHW,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B6D,oBAA/I,GAAoK,GAA7K;AAAkLI,oBAAAA,IAAI,EAAE;AAAxL,mBAAb;AACH;AACJ,eAPD,MAOO;AACH,oBAAI,CAACjJ,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCxB,QAA1C,EAAoD;AAChD;AACA,sBAAGlD,CAAC,GAAG,CAAP,EAAU;AACNmF,oBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,sBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,GAArH;AAA0HX,sBAAAA,IAAI,EAAE;AAAhI,qBAAb;AACH,mBAFD,MAEO;AACHkB,oBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,sBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,GAArH;AAA0HX,sBAAAA,IAAI,EAAE;AAAhI,qBAAb;AACH;AACJ,iBAPD,MAOO;AACH,sBAAGjE,CAAC,GAAG,CAAP,EAAU;AACNmF,oBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,sBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,MAA5G,GAAmH5J,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAAjL,GAAwL,GAAjM;AAAsMc,sBAAAA,IAAI,EAAE;AAA5M,qBAAb;AACH,mBAFD,MAEO;AACHkB,oBAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,sBAAAA,MAAM,EAAEqC,UAAU,GAACjC,QAAX,GAAoB,MAApB,GAA2B+B,OAAO,CAAC,CAAD,CAAP,CAAWzE,aAAX,CAAyBd,CAAzB,EAA4B2F,cAAvD,GAAsE,KAAtE,GAA4Ef,+BAA5E,GAA4G,MAA5G,GAAmH5J,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAAjL,GAAwL,GAAjM;AAAsMc,sBAAAA,IAAI,EAAE;AAA5M,qBAAb;AACH;AACJ;AACJ;AACJ;AACJ;;AAAA,WAnC8C,CAoC/C;;AACAkB,UAAAA,OAAO,CAACnE,IAAR,CAAa;AAACoC,YAAAA,MAAM,EAAE,OAAKI,QAAL,GAAcxI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCvB,MAAnD,GAA0D,QAA1D,GAAmEnI,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAAjI,GAAwI,KAAxI,GAA8IoC,OAAO,CAAC,CAAD,CAAP,CAAWA,OAAzJ,GAAiK;AAA1K,WAAb;AACH;AACJ,OAnFD,MAmFO;AACH;AACA,YAAIK,uBAAuB,GAAG,CAACV,KAAK,CAACW,KAAP,CAA9B;AACA,YAAIC,4BAA4B,GAAG,EAAnC;;AACA,YAAGZ,KAAK,CAACnE,eAAT,EAA0B;AACtB+E,UAAAA,4BAA4B,GAAGZ,KAAK,CAACrB,oBAArC;AACH,SAFD,MAEO;AACHiC,UAAAA,4BAA4B,GAAG9K,kBAAkB,CAAC0J,gBAAD,CAAlB,CAAqCrE,SAArC,CAA+CsE,aAA/C,EAA8DxB,MAA7F;AACH;;AACD,YAAI4C,UAAU,GAAGZ,OAAO,CAACrF,MAAzB;;AACA,aAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyF,UAApB,EAAgCzF,CAAC,EAAjC,EAAqC;AACjC,eAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4F,uBAAuB,CAAC9F,MAA5C,EAAoDE,CAAC,EAArD,EAAyD;AACrD,gBAAIgG,WAAW,GAAG,EAAlB;;AACA,gBAAId,KAAK,CAACe,iBAAN,CAAwBxC,aAAxB,CAAsC,MAAtC,KAAiD,CAArD,EAAwD;AACpD,kBAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,WAA9B,KAA8C,CAAjD,EAAoD,CAChD;AACH,eAFD,MAEO,IAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,cAA9B,KAAiD,CAApD,EAAuD,CAC1D;AACH,eAFM,MAEA;AACHuC,gBAAAA,WAAW,GAAGpB,+BAA+B,GAAC,MAAhC,GAAuCkB,4BAAvC,GAAoE,aAApE,GAAkFZ,KAAK,CAACtB,SAAxF,GAAkG,GAAlG,GAAsGgC,uBAApH;AACH;AACJ,aARD,MAQO,IAAIV,KAAK,CAACe,iBAAN,CAAwBxC,aAAxB,CAAsC,SAAtC,KAAoD,CAAxD,EAA2D;AAC9D,kBAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,WAA9B,KAA8C,CAAjD,EAAoD,CAChD;AACH,eAFD,MAEO,IAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,cAA9B,KAAiD,CAApD,EAAuD,CAC1D;AACH,eAFM,MAEA;AACHuC,gBAAAA,WAAW,GAAGpB,+BAA+B,GAAC,MAAhC,GAAuCkB,4BAAvC,GAAoE,kBAApE,GAAuFF,uBAAvF,GAA+G,KAA/G,GAAqHV,KAAK,CAACtB,SAA3H,GAAqI,IAAnJ;AACH;AACJ,aARM,MAQA,IAAIsB,KAAK,CAACe,iBAAN,CAAwBxC,aAAxB,CAAsC,KAAtC,KAAgD,CAAhD,IAAqDyB,KAAK,CAACe,iBAAN,CAAwBxC,aAAxB,CAAsC,SAAtC,KAAoD,CAA7G,EAAgH;AACnH,kBAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,WAA9B,KAA8C,CAAjD,EAAoD,CAChD;AACH,eAFD,MAEO,IAAGyB,KAAK,CAACtB,SAAN,CAAgBH,aAAhB,CAA8B,cAA9B,KAAiD,CAApD,EAAuD,CAC1D;AACH,eAFM,MAEA;AACHuC,gBAAAA,WAAW,GAAGpB,+BAA+B,GAAC,MAAhC,GAAuCkB,4BAAvC,GAAoE,GAApE,GAAwEZ,KAAK,CAACtB,SAA9E,GAAwF,GAAxF,GAA4FgC,uBAA1G;AACH;AACJ,aARM,MAQA,IAAIV,KAAK,CAACe,iBAAN,CAAwBxC,aAAxB,CAAsC,KAAtC,KAAgD,CAApD,EAAuD;AAC1DuC,cAAAA,WAAW,GAAGpB,+BAA+B,GAAC,MAAhC,GAAuCkB,4BAAvC,GAAoE,GAApE,GAAwEZ,KAAK,CAACtB,SAA9E,GAAwF,GAAxF,GAA4FgC,uBAA1G;AACH;;AACD,gBAAG5F,CAAC,GAAC,CAAF,IAAO4F,uBAAuB,CAAC9F,MAAlC,EAA0C;AACtCkG,cAAAA,WAAW,IAAI,MAAf;AACH;;AACD,gBAAGhG,CAAC,IAAE,CAAN,EAAS;AACLmF,cAAAA,OAAO,CAAC7E,CAAD,CAAP,CAAW8C,MAAX,IAAqB4C,WAArB;AACH,aAFD,MAEO;AACHb,cAAAA,OAAO,CAAC7E,CAAD,CAAP,CAAW8C,MAAX,IAAqB,SAAO4C,WAA5B;AACH;AACJ;;AAAA;AACJ;;AAAA;AACDZ,QAAAA,YAAY,CAACpE,IAAb,CAAkBmE,OAAO,CAACrF,MAA1B;AACH;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,UAAIoG,MAAM,GAAGjL,eAAe,CAACuK,MAAhB,CAAuB,UAAUW,MAAV,EAAmB;AACnD,eAAOA,MAAM,CAACC,UAAP,IAAqBlB,KAAK,CAACjF,EAAlC;AACH,OAFY,CAAb;;AAGA,UAAGiG,MAAM,CAACpG,MAAP,GAAgB,CAAnB,EAAsB;AAClB,YAAIuG,aAAa,GAAG,EAApB;;AACA,aAAK,IAAIrG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkG,MAAM,CAACpG,MAA3B,EAAmCE,CAAC,EAApC,EAAwC;AACpC,cAAIsG,WAAW,GAAG7B,IAAlB;AACA,cAAGS,KAAK,CAACG,WAAT,EACIiB,WAAW;AACf,cAAIC,OAAO,GAAG,KAAK/H,kBAAL,CAAwB0G,KAAxB,EAA+BT,IAAI,GAAC,CAApC,EAAuCC,gBAAvC,EAAyDC,aAAzD,EAAwEQ,OAAxE,EAAiFlK,eAAjF,CAAd;AACAsL,UAAAA,OAAO,CAAC,CAAD,CAAP,CAAWnD,MAAX,GAAoB,OAAKmD,OAAO,CAAC,CAAD,CAAP,CAAWnD,MAApC;AACAoD,UAAAA,CAAC,CAACC,KAAF,CAASJ,aAAT,EAAwBE,OAAxB;AACH;;AAAA;;AACD,aAAK,IAAIvG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoF,YAAY,CAACtF,MAAjC,EAAyCE,CAAC,EAA1C,EAA8C;AAC1CmF,UAAAA,OAAO,CAAC1C,MAAR,OAAA0C,OAAO,GAAQC,YAAY,CAACpF,CAAD,CAApB,EAAyB,CAAzB,SAA+BqG,aAA/B,EAAP;AACA,cAAGnB,KAAK,CAACG,WAAT,EACIF,OAAO,CAAC1C,MAAR,CAAe2C,YAAY,CAACpF,CAAD,CAAZ,GAAgBqG,aAAa,CAACvG,MAA7C,EAAqD,CAArD,EAAwD;AAACsD,YAAAA,MAAM,EAAE,OAAKI,QAAL,GAAc,GAAvB;AAA4BkD,YAAAA,MAAM,EAAExB,KAAK,CAACwB;AAA1C,WAAxD;;AACJ,eAAK,IAAIpG,CAAC,GAAGN,CAAb,EAAgBM,CAAC,GAAG8E,YAAY,CAACtF,MAAjC,EAAyCQ,CAAC,EAA1C,EAA8C;AAC1C8E,YAAAA,YAAY,CAAC9E,CAAD,CAAZ,IAAiB+F,aAAa,CAACvG,MAA/B;AACH;;AAAA;AACJ;;AAAA;AACD,YAAGsF,YAAY,CAACtF,MAAb,IAAuB,CAA1B,EACI0G,CAAC,CAACC,KAAF,CAAStB,OAAT,EAAkBkB,aAAlB;AACJ,eAAOlB,OAAP;AACH,OArBD,MAqBO;AACH,YAAGD,KAAK,CAACG,WAAT,EAAqB;AACjB,eAAK,IAAIrF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoF,YAAY,CAACtF,MAAjC,EAAyCE,CAAC,EAA1C,EAA8C;AAC1CmF,YAAAA,OAAO,CAAC1C,MAAR,CAAe2C,YAAY,CAACpF,CAAD,CAA3B,EAAgC,CAAhC,EAAmC;AAACoD,cAAAA,MAAM,EAAE,OAAKI,QAAL,GAAc,GAAvB;AAA4BkD,cAAAA,MAAM,EAAExB,KAAK,CAACwB;AAA1C,aAAnC;AACH;;AAAA;AACJ;;AACD,eAAOvB,OAAP;AACH;AACJ;;;gCAEYwB,K,EAAO;AAChB,UAAIC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,KAA/B,MAA0C,eAA9C,EAA+D;AAC3D,YAAIK,KAAK,CAACL,KAAK,CAACM,OAAN,EAAD,CAAT,EAA4B;AACxB/G,UAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,iBAAO,KAAP;AACH,SAHD,MAGO;AACH,iBAAO,IAAP;AACH;AACJ,OAPD,MAOO;AACHA,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,eAAO,KAAP;AACH;AACJ;;;oCAEgB0D,S,EAAW;AACxB,WAAK,IAAI5D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKkH,KAAL,CAAWC,WAAX,CAAuBrH,MAA3C,EAAmDE,CAAC,EAApD,EAAwD;AACpD,YAAI4D,SAAS,CAACH,aAAV,CAAwB,OAAxB,KAAoC,CAApC,IACAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CADlC,IAEAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CAFlC,IAGAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CAHlC,IAIAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CAJlC,IAKAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CALlC,IAMAG,SAAS,CAACH,aAAV,CAAwB,MAAxB,KAAmC,CANnC,IAOAG,SAAS,CAACH,aAAV,CAAwB,KAAxB,KAAkC,CAPtC,EAO0C;AACtC,iBAAO,IAAP;AACH;AACJ;;AAAA;AACD,aAAO,KAAP;AACH,K,CAED;;;;2CACwBuB,e,EAAiBoC,S,EAAWC,a,EAAeC,a,EAAe;AAC9E,UAAIC,4BAA4B,GAAG,KAAKC,+BAAL,CAAqCxC,eAArC,CAAnC;;AACA,UAAGA,eAAe,CAACpB,SAAhB,CAA0B9D,MAA1B,IAAoC,CAApC,IAAyCyH,4BAA4B,CAACzH,MAA7B,IAAuC,CAAnF,EAAsF;AAClF,aAAK2H,gCAAL;AACH,OAFD,MAEO,IAAGzC,eAAe,CAACpB,SAAhB,CAA0B9D,MAA1B,GAAmC,CAAnC,IAAwCyH,4BAA4B,CAACzH,MAA7B,IAAuC,CAAlF,EAAqF;AACxF,aAAK4H,yCAAL;AACH,OAFM,MAEA;AACH,aAAKC,4BAAL;AACH;AACJ;;;qDAEiC3C,e,EAAiBoC,S,EAAWC,a,EAAeC,a,EAAe;AACxF,UAAIM,aAAa,GAAG,EAApB;;AACA,UAAG5C,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AACzE,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AAC/DmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJ+D,CAIqI;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARD,MAQO,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJsE,CAI8H;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARM,MAQA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACxEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqC9D,MAArC,IAA+C,CAAlD,EAAqD,CAC3D;AACJ,OA7BD,MA6BO,IAAGkF,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,QAA5D,KAAyE,CAA5E,EAA+E;AAClF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ;AACJ;;;8DAE0CpC,e,EAAiBoC,S,EAAWC,a,EAAeC,a,EAAe;AACjG,UAAIM,aAAa,GAAG,EAApB;;AACA,UAAG5C,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AACzE,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AAC/DmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJ+D,CAIqI;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARD,MAQO,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJsE,CAI8H;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARM,MAQA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACxEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqC9D,MAArC,IAA+C,CAAlD,EAAqD,CAC3D;AACJ,OA7BD,MA6BO,IAAGkF,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,QAA5D,KAAyE,CAA5E,EAA+E;AAClF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ;AACJ;;;iDAE6BpC,e,EAAiBoC,S,EAAWC,a,EAAeC,a,EAAe;AACpF,UAAIM,aAAa,GAAG,EAApB;;AACA,UAAG5C,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AACzE,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AAC/DmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJ+D,CAIqI;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARD,MAQO,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,OAAf,GAAuBC,aAAvB,GAAqC,GAArC,GAAyCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApE,GAAyF,sBAAzF,GAAgHyD,aAAhH,GAA8H,yBAA9H,GAAwJA,aAAxJ,GAAsK,8BAAtK,GAAqMA,aAArM,GAAmN,8BAAnN,GAAkPA,aAAlP,GAAgQ,8BAA/Q;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,sBAAf,GAAsCE,aAAtC,GAAoD,8BAApD,GAAmFA,aAAnF,GAAiG,8BAAjG,GAAgIA,aAAhI,GAA8I,4BAA7J,CAJsE,CAI8H;;AACpMM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,aAAf,GAA6BE,aAA7B,GAA2C,eAA3C,GAA2DD,aAA3D,GAAyE,GAAzE,GAA6ErC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAAxG,GAA6H,GAA5I;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,KAA9B;AACAQ,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SARM,MAQA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE;AACtEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,KAAnD,KAA6D,CAAhE,EAAmE,CACzE,CADM,MACA,IAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACxEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH,SAJM,MAIA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqC9D,MAArC,IAA+C,CAAlD,EAAqD,CAC3D;AACJ,OA7BD,MA6BO,IAAGkF,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,MAA5D,KAAuE,CAA1E,EAA6E;AAChF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ,OANM,MAMA,IAAGpC,eAAe,CAAC6C,UAAhB,CAA2BnE,kBAA3B,CAA8CD,aAA9C,CAA4D,QAA5D,KAAyE,CAA5E,EAA+E;AAClF,YAAGuB,eAAe,CAAC6C,UAAhB,CAA2BjE,SAA3B,CAAqCH,aAArC,CAAmD,OAAnD,KAA+D,CAAlE,EAAqE;AACjEmE,UAAAA,aAAa,IAAER,SAAS,GAAC,KAAV,GAAgBC,aAAhB,GAA8B,GAA9B,GAAkCrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAA7D,GAAkF,oCAAlF,GAAuHwD,aAAvH,GAAqI,GAArI,GAAyIrC,eAAe,CAAC6C,UAAhB,CAA2BhE,oBAApK,GAAyL,OAAxM;AACA+D,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,WAAf,GAA2BE,aAA3B,GAAyC,KAAxD;AACAM,UAAAA,aAAa,IAAE,OAAKR,SAAL,GAAe,GAA9B;AACH;AACJ;AACJ;;;iDAE6B;AAC1B,WAAK,IAAInE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,kBAAkB,CAAC8E,MAAvC,EAA+CmD,CAAC,EAAhD,EAAoD;AAChD;AACA,aAAK6E,2BAAL,CAAiC9M,kBAAkB,CAACiI,CAAD,CAAnD;AACA;;;AAGH;;AAAA;AACJ;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gDA4B6BH,Q,EAAU;AACnC,UAAIM,MAAM,GAAG,EAAb,CADmC,CAEnC;;AACAA,MAAAA,MAAM,IAAI,sHAAV;AACA3D,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYoD,QAAQ,CAACK,MAAT,GAAgB,GAAhB,GAAoB,IAAI4E,IAAJ,GAAWC,WAAX,EAApB,GAA6C,GAA7C,GAAiD,IAAID,IAAJ,GAAWE,QAAX,EAAjD,GAAuE,GAAvE,GAA2E,IAAIF,IAAJ,GAAWG,OAAX,EAAvF;AACAzI,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA0D,MAAAA,MAAM,IAAI,+CAAV;AACAA,MAAAA,MAAM,IAAI,0BAAV;;AACA,WAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8C,QAAQ,CAACzC,SAAT,CAAmBP,MAAvC,EAA+CE,CAAC,EAAhD,EAAoD;AAChD,YAAG8C,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBiE,IAAtB,CAA2BR,aAA3B,CAAyC,KAAzC,KAAmD,CAAtD,EAAyD;AACrDL,UAAAA,MAAM,IAAI,2BAAyBN,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBmD,MAA/C,GAAsD,+BAAhE;AACH,SAFD,MAEO,IAAGL,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBiE,IAAtB,CAA2BR,aAA3B,CAAyC,SAAzC,KAAuD,CAA1D,EAA6D;AAChEL,UAAAA,MAAM,IAAI,2BAAyBN,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBmD,MAA/C,GAAsD,mCAAhE;AACH,SAFM,MAEA,IAAGL,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBiE,IAAtB,CAA2BR,aAA3B,CAAyC,SAAzC,KAAuD,CAA1D,EAA6D;AAChEL,UAAAA,MAAM,IAAI,2BAAyBN,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBmD,MAA/C,GAAsD,yCAAhE;AACH,SAFM,MAEA,IAAGL,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBiE,IAAtB,CAA2BR,aAA3B,CAAyC,KAAzC,KAAmD,CAAtD,EAAyD;AAC5DL,UAAAA,MAAM,IAAI,2BAAyBN,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBmD,MAA/C,GAAsD,+BAAhE;AACH,SAFM,MAEA,IAAGL,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBiE,IAAtB,CAA2BR,aAA3B,CAAyC,MAAzC,KAAoD,CAAvD,EAA0D;AAC7DL,UAAAA,MAAM,IAAI,2BAAyBN,QAAQ,CAACzC,SAAT,CAAmBL,CAAnB,EAAsBmD,MAA/C,GAAsD,gCAAhE;AACH;AACJ;;AAAA;AACDC,MAAAA,MAAM,IAAI,oCAAkCN,QAAQ,CAACK,MAA3C,GAAkD,kBAA5D;AACAC,MAAAA,MAAM,IAAI,uBAAV;;AACI,WAAK,IAAI9C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwC,QAAQ,CAACzC,SAAT,CAAmBP,MAAvC,EAA+CQ,CAAC,EAAhD,EAAoD;AAChD8C,QAAAA,MAAM,IAAI,YAAUN,QAAQ,CAACK,MAAnB,GAA0B,OAA1B,GAAkCL,QAAQ,CAACzC,SAAT,CAAmBC,CAAnB,EAAsB6C,MAAlE;AACA,YAAG7C,CAAC,GAAC,CAAF,GAAMwC,QAAQ,CAACzC,SAAT,CAAmBP,MAA5B,EACIsD,MAAM,IAAI,IAAV;AACP;;AAAA;AACLA,MAAAA,MAAM,IAAI,IAAV;AACAA,MAAAA,MAAM,IAAI,QAAV,CA/BmC,CAgCnC;;AAEAA,MAAAA,MAAM,IAAI,wCAAV;AACAA,MAAAA,MAAM,IAAI,4CAAV;AACIA,MAAAA,MAAM,IAAI,8BAAV;AACIA,MAAAA,MAAM,IAAI,2BAAV;AACJA,MAAAA,MAAM,IAAI,SAAV;AACJA,MAAAA,MAAM,IAAI,SAAV;AACH;;;6BAEQ;AACL,aACI,6CACI,2CADJ,EAEI;AAAG,QAAA,SAAS,EAAE,8DAAd;AAA8E,QAAA,KAAK,EAAE;AAAC+E,UAAAA,KAAK,EAAE;AAAR,SAArF;AAAyG,QAAA,OAAO,EAAE,KAAK3L;AAAvH,mBAFJ,EAGI,2CAHJ,CADJ;AAOH;;;;EAj3CgC4L,kBAAMC,S","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nvar nivelMaximoVariables = 0;\nvar arregloDeFuentesDeDatos = [];                           //Arreglo con las fuentes de datos\n        //objeto: {tablaID, nombre, descripcion, esObjeto, objetoPadreID, guardar, nivel, [arreglo de atributos]}\n            //objeto arreglo de atributos: {nombre, tipo, formula}\nwindow.arregloDeVariables = [];                                //Arreglo con las variables\n        //objeto: {nombre, descripcion, esObjeto, objetoPadreID, guardar, nivel, [arreglo de atributos]}\n            //objeto arreglo de atributos: {nombre, tipo, formula}\nwindow.arregloDeReglas = [];                   //Arreglo con las reglas / instrucciones correspondientes a la posicion del atributo\nwindow.arregloDeFormulas = [];                 //Arreglo con las formulas / asignaciones correspondientes a la posicion del atributo\nwindow.arregloDeElementosDeFormulas = [];      //Arreglo con las fuentes de datos correspondientes a la posicion de la formula\nwindow.arregloConexionesATablas = [];          //Arreglo con los valores para poder conectarse a las tablas\nwindow.arregloResultadosDeTablas = [];         //Arreglo con los valores obtenidos despues de conectarse a las tablas\n\nvar banderaImportacionCamposVariablesINICIO = 0;                    //Bandera para saber si termino de importar los campos de las variables\nvar banderaImportacionCamposVariablesFIN = 0;                       //Bandera para saber si termino de importar los campos de las variables\nvar banderaImportacionSegmentosCamposVariablesINICIO = 0;           //Bandera para saber si termino de importar los segmentos de reglas de los campos de las variables\nvar banderaImportacionSegmentosCamposVariablesFIN = 0;              //Bandera para saber si termino de importar los segmentos de reglas de los campos de las variables\nvar banderaImportacionReglasSegmentosCamposVariablesINICIO = 0;     //Bandera para saber si termino de importar las reglas de los segmentos de los campos de las variables\nvar banderaImportacionReglasSegmentosCamposVariablesFIN = 0;        //Bandera para saber si termino de importar las reglas de los segmentos de los campos de las variables\nvar banderaImportacionFormulasCamposVariablesINICIO = 0;            //Bandera para saber si termino de importar las formulas de los campos de las variables\nvar banderaImportacionFormulasCamposVariablesFIN = 0;               //Bandera para saber si termino de importar las formulas de los campos de las variables\nvar banderaImportacionElementosFormulasCamposVariablesINICIO = 0;   //Bandera para saber si termino de importar los elementos de las formulas de los campos de las variables\nvar banderaImportacionElementosFormulasCamposVariablesFIN = 0;      //Bandera para saber si termino de importar los elementos de las formulas de los campos de las variables\nvar banderaImportacionConecionesATablasINICIO = 0;                  //Bandera para saber si termino de importar los valores para poder conetarse a las tablas\nvar banderaImportacionConecionesATablasFIN = 0;                     //Bandera para saber si termino de importar los valores para poder conetarse a las tablas\nvar banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO = 0;     //Bandera para saber si termino de importar los valores de las tablas de fuentes de datos\nvar banderaImportacionValoresDeTablasDeFuenteDeDatosFIN = 0;        //Bandera para saber si termino de importar los valores de las tablas de fuentes de datos\n\nconst myWorker = new Worker(\"./components/CalculoVariablesWorker.js\");\n\nexport default class Calculo extends React.Component {\n    constructor(props) {\n        super(props);\n        /*this.state = {\n            showLoadingScreen: false,\n            mensajeLoadingScreen: ''\n        }*/\n        this.iniciarCalculo = this.iniciarCalculo.bind(this);\n        this.getNivelMaximoVariables = this.getNivelMaximoVariables.bind(this);\n        this.traerVariables = this.traerVariables.bind(this);\n        this.traerAtributosVariables = this.traerAtributosVariables.bind(this);\n        this.revisarFinImportacionCamposVariables = this.revisarFinImportacionCamposVariables.bind(this);\n        this.inicioTraerSegmentosDeCampos = this.inicioTraerSegmentosDeCampos.bind(this);\n        this.traerSegmentosDeCampos = this.traerSegmentosDeCampos.bind(this);\n        this.revisarFinImportacionSegmentosCampos = this.revisarFinImportacionSegmentosCampos.bind(this);\n        this.inicioTraerReglasDeSegmentos = this.inicioTraerReglasDeSegmentos.bind(this);\n        this.traerReglasDeSegmentos = this.traerReglasDeSegmentos.bind(this);\n        this.revisarFinImportacionReglasSegmentos = this.revisarFinImportacionReglasSegmentos.bind(this);\n        this.inicioTraerFormulasDeCampos = this.inicioTraerFormulasDeCampos.bind(this);\n        this.traerFormulasDeCampos = this.traerFormulasDeCampos.bind(this);\n        this.revisarFinImportacionFormulasCampos = this.revisarFinImportacionFormulasCampos.bind(this);\n        this.inicioTraerElementosFormulasDeCampos = this.inicioTraerElementosFormulasDeCampos.bind(this);\n        this.traerElementosFormulasDeCampos = this.traerElementosFormulasDeCampos.bind(this);\n        this.revisarFinImportacionElementosFormulasCampos = this.revisarFinImportacionElementosFormulasCampos.bind(this);\n        this.inicioTraerConeccionesATablas = this.inicioTraerConeccionesATablas.bind(this);\n        this.noHaSidoImportadaConeccion = this.noHaSidoImportadaConeccion.bind(this);\n        this.traerConeccionesATablas = this.traerConeccionesATablas.bind(this);\n        this.finTraerConeccionesATablas = this.finTraerConeccionesATablas.bind(this);\n        this.inicioTraerResultadosDeFuenteDeDatos = this.inicioTraerResultadosDeFuenteDeDatos.bind(this);\n        this.traerResultadosDeFuenteDeDatos = this.traerResultadosDeFuenteDeDatos.bind(this);\n        this.finTraerResultadosDeFuenteDeDatos = this.finTraerResultadosDeFuenteDeDatos.bind(this);\n        this.iniciarHilo = this.iniciarHilo.bind(this);\n        this.codigoIniciacion = this.codigoIniciacion.bind(this);\n        this.iniciacionElementosFormula = this.iniciacionElementosFormula.bind(this);\n        this.iniciacionVariable = this.iniciacionVariable.bind(this);\n        this.iniciacionCampo = this.iniciacionCampo.bind(this);\n        this.crearCodigoFuenteDato = this.crearCodigoFuenteDato.bind(this);\n        this.crearCodigoSegmentoReglas = this.crearCodigoSegmentoReglas.bind(this);\n        this.arregloCodigoRegla = this.arregloCodigoRegla.bind(this);\n        this.agregarCodigoGuardarVariable = this.agregarCodigoGuardarVariable.bind(this);\n        this.crearNivel = this.crearNivel.bind(this);\n        this.isValidDate = this.isValidDate.bind(this);\n    }\n\n    iniciarCalculo() {\n        this.getNivelMaximoVariables();\n    }\n\n    getNivelMaximoVariables() {\n        nivelMaximoVariables = 0;\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select MAX(nivel) AS nivel from VariablesCampos\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            nivelMaximoVariables = result.recordset[0].nivel;\n                        }\n                        arregloDeVariables = [];\n                        this.traerVariables();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerVariables() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Variables\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        arregloDeVariables = result.recordset;\n                        banderaImportacionCamposVariablesINICIO = 0;\n                        banderaImportacionCamposVariablesFIN = arregloDeVariables.length;\n                        for (var i = 0; i < arregloDeVariables.length; i++) {\n                            this.traerAtributosVariables(arregloDeVariables[i].ID, i);\n                        };\n                        if(arregloDeVariables.length == 0) {\n                            alert(\"No existen variables\");\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    traerAtributosVariables (variableID, index) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from VariablesCampos where variableID = \"+variableID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionCamposVariablesINICIO++;\n                        arregloDeVariables[index].atributos = result.recordset;\n                        this.revisarFinImportacionCamposVariables();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionCamposVariables () {\n        if(banderaImportacionCamposVariablesINICIO == banderaImportacionCamposVariablesFIN) {\n            this.inicioTraerSegmentosDeCampos();\n        }\n    }\n\n    inicioTraerSegmentosDeCampos () {\n        console.log('inicioTraerSegmentosDeCampos');\n        banderaImportacionSegmentosCamposVariablesINICIO = 0;\n        banderaImportacionSegmentosCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                banderaImportacionSegmentosCamposVariablesFIN++;\n                this.traerSegmentosDeCampos(arregloDeVariables[i].ID, arregloDeVariables[i].atributos[j].ID, i, j);\n            };\n        };\n    }\n\n    traerSegmentosDeCampos (variableID, variableCampoID, i, j) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from SegmentoReglas where variableID = \"+variableID+\" and variableCampoID = \"+variableCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionSegmentosCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionSegmentosCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].segmentoReglas = result.recordset;\n                        this.revisarFinImportacionSegmentosCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionSegmentosCampos () {\n        if(banderaImportacionSegmentosCamposVariablesINICIO == banderaImportacionSegmentosCamposVariablesFIN) {\n            this.inicioTraerReglasDeSegmentos();\n        }\n    }\n\n    inicioTraerReglasDeSegmentos () {\n        console.log('inicioTraerReglasDeSegmentos');\n        banderaImportacionReglasSegmentosCamposVariablesINICIO = 0;\n        banderaImportacionReglasSegmentosCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            console.log('i = '+i);\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                console.log('j = '+j);\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].segmentoReglas.length; k++) {\n                    console.log('k = '+k);\n                    banderaImportacionReglasSegmentosCamposVariablesFIN++;\n                    this.traerReglasDeSegmentos(arregloDeVariables[i].ID, arregloDeVariables[i].atributos[j].ID, arregloDeVariables[i].atributos[j].segmentoReglas[k].ID,  i, j, k);\n                };\n            };\n        };\n    }\n\n    traerReglasDeSegmentos (variableID, variableCampoID, segmentoCampoID, i, j, k) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Reglas where variableID = \"+variableID+\" and variableCampoID = \"+variableCampoID+\" and segmentoReglaID = \"+segmentoCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionReglasSegmentosCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionReglasSegmentosCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].segmentoReglas[k].reglas = result.recordset;\n                        this.revisarFinImportacionReglasSegmentos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionReglasSegmentos () {\n        console.log('banderaImportacionReglasSegmentosCamposVariablesINICIO');\n        console.log(banderaImportacionReglasSegmentosCamposVariablesINICIO);\n        console.log('banderaImportacionReglasSegmentosCamposVariablesFIN');\n        console.log(banderaImportacionReglasSegmentosCamposVariablesFIN);\n        if(banderaImportacionReglasSegmentosCamposVariablesINICIO == banderaImportacionReglasSegmentosCamposVariablesFIN) {\n            this.inicioTraerFormulasDeCampos();\n        }\n    }\n\n    inicioTraerFormulasDeCampos () {\n        console.log('inicioTraerFormulasDeCampos');\n        banderaImportacionFormulasCamposVariablesINICIO = 0;\n        banderaImportacionFormulasCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                banderaImportacionFormulasCamposVariablesFIN++;\n                this.traerFormulasDeCampos(arregloDeVariables[i].atributos[j].ID, i, j);\n            };\n        };\n    }\n\n    traerFormulasDeCampos (variableCampoID, i, j) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from FormulasVariablesCampos where variableCampoID = \"+variableCampoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionFormulasCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionFormulasCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].formulas = result.recordset;\n                        this.revisarFinImportacionFormulasCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionFormulasCampos () {\n        if(banderaImportacionFormulasCamposVariablesINICIO == banderaImportacionFormulasCamposVariablesFIN) {\n            this.inicioTraerElementosFormulasDeCampos();\n        }\n    }\n\n    inicioTraerElementosFormulasDeCampos () {\n        console.log('inicioTraerElementosFormulasDeCampos');\n        banderaImportacionElementosFormulasCamposVariablesINICIO = 0;\n        banderaImportacionElementosFormulasCamposVariablesFIN = 0;\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    banderaImportacionElementosFormulasCamposVariablesFIN++;\n                    this.traerElementosFormulasDeCampos(arregloDeVariables[i].atributos[j].formulas[k].ID, i, j, k);\n                };\n            };\n        };\n    }\n\n    traerElementosFormulasDeCampos (idFormula, i, j, k) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ElementoFormulasVariablesCampos where formulaID = \"+idFormula, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionElementosFormulasCamposVariablesINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionElementosFormulasCamposVariablesINICIO++;\n                        arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos = result.recordset;\n                        this.revisarFinImportacionElementosFormulasCampos();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    revisarFinImportacionElementosFormulasCampos () {\n        if(banderaImportacionElementosFormulasCamposVariablesINICIO == banderaImportacionElementosFormulasCamposVariablesFIN) {\n            this.inicioTraerConeccionesATablas();\n        }\n    }\n\n    inicioTraerConeccionesATablas () {\n        console.log('inicioTraerConeccionesATablas');\n        banderaImportacionConecionesATablasINICIO = 0;\n        banderaImportacionConecionesATablasFIN = 0;\n        arregloConexionesATablas = [];\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].segmentoReglas.length; k++) {\n                    if(arregloDeVariables[i].atributos[j].segmentoReglas[k].esConexionTabla && this.noHaSidoImportadaConeccion(arregloDeVariables[i].atributos[j].segmentoReglas[k])) {\n                        banderaImportacionConecionesATablasFIN++;\n                        //para asegurar que ID no sea asyncrono\n                        arregloConexionesATablas.push({ID: arregloDeVariables[i].atributos[j].segmentoReglas[k].conexionTablaID});\n                        //arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]\n                        this.traerConeccionesATablas(arregloDeVariables[i].atributos[j].segmentoReglas[k].conexionTablaID, arregloConexionesATablas.length-1);\n                    }\n                };\n            };\n        };\n    }\n\n    noHaSidoImportadaConeccion (segmento) {\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            if(arregloConexionesATablas[i].ID == segmento.conexionTablaID) {\n                return false;\n            }\n        };\n        return true;\n    }\n\n    traerConeccionesATablas (tablaID, indexARemplazar) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Tablas where ID = \"+tablaID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        banderaImportacionConecionesATablasINICIO++;\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        banderaImportacionConecionesATablasINICIO++;\n                        if(result.recordset.length > 0)\n                            arregloConexionesATablas[indexARemplazar] = result.recordset[0];\n                        this.finTraerConeccionesATablas();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    finTraerConeccionesATablas () {\n        if(banderaImportacionConecionesATablasINICIO == banderaImportacionConecionesATablasFIN) {\n            this.inicioTraerResultadosDeFuenteDeDatos();\n        }\n    }\n\n    inicioTraerResultadosDeFuenteDeDatos () {\n        console.log('inicioTraerResultadosDeFuenteDeDatos');\n        banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO = 0;\n        banderaImportacionValoresDeTablasDeFuenteDeDatosFIN = 0;\n        arregloResultadosDeTablas = [];\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            banderaImportacionValoresDeTablasDeFuenteDeDatosFIN++;\n            this.traerResultadosDeFuenteDeDatos(arregloConexionesATablas[i], i);\n        };\n    }\n\n    traerResultadosDeFuenteDeDatos (tabla, index) {\n        const pool = new sql.ConnectionPool({\n            user: tabla.usuario,\n            password: tabla.contrasena,\n            server: tabla.servidor,\n            database: tabla.baseDatos,\n            stream: true,\n            connectionTimeout: 900000,\n            requestTimeout: 900000,\n            pool: {\n                max: 40,\n                min: 0,\n                idleTimeoutMillis: 30000\n            },\n            options: {\n                useUTC: false\n            }\n        });\n        pool.connect(err => {\n            pool.request().query(\"select * from \"+tabla.tabla, (err, result) => {\n                banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO++;\n                console.log('resultados tabla: '+tabla.tabla);\n                console.log(result.recordset);\n                if(result.recordset != undefined && result.recordset.length > 0)\n                    arregloResultadosDeTablas.splice(index, 0, result.recordset);\n                this.finTraerResultadosDeFuenteDeDatos();\n            });\n        }); // fin pool connect\n    }\n\n    finTraerResultadosDeFuenteDeDatos () {\n        if(banderaImportacionValoresDeTablasDeFuenteDeDatosINICIO == banderaImportacionValoresDeTablasDeFuenteDeDatosFIN) {\n            this.iniciarHilo();\n        }\n    }\n\n    iniciarHilo () {\n        console.log('nivelMaximoVariables');\n        console.log(nivelMaximoVariables);\n        console.log('arregloDeFuentesDeDatos');\n        console.log(arregloDeFuentesDeDatos);\n        console.log('arregloDeVariables');\n        console.log(arregloDeVariables);\n        console.log('arregloResultadosDeTablas');\n        console.log(arregloResultadosDeTablas);\n        console.log('arregloConexionesATablas');\n        console.log(arregloConexionesATablas);\n        //DESCRIPCION DEL PROCEDIMIENTO\n        //1) PRIMERO CREAR CODIGO PARA CREAR VARIABLES DE ELEMENTOS DE FORMULAS, AGRUPADAS POR TABLAS CORRESPONDIENTES  -- SERA PRIMER METODO A LLAMAR\n        //2) CREAR METODO NIVEL XX, CONTENDRA LLAMADO A METODO 'CALCULO VARIABLES NIVEL XX', Y JUSTO DESPUES LLAMARÁ AL SIGUIENTE NIVEL QUE SIGUE, O AL METODO DE MENSAJE FINAL\n        //3) CREAR CODIGO 'CALCULO VARIABLES NIVEL XX'\n\n        //AGRUPANDO ELEMENTOS DE FORMULA POR CONEXION A TABLA\n        var arregloAgrupacionElementosFormulaPorConexionATabla = [];    //arreglo que contiene los segmento de reglas agrupados por el arreglo de tablas\n        //la variable es insertado una unica vez cada por cada segmento de regla que pertenezca a la tabla\n        var arregloAgrupacionElementosFormulaPorVariables = [];    //arreglo que contiene los segmento de reglas de la variable a calcular agrupados por la posicion de la variable a comparar en el arregloDeVariables\n        //la variable es insertado una unica vez cada por cada segmento de regla que pertenezca a la tabla\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].segmentoReglas.length; k++) {\n                    if (arregloDeVariables[i].atributos[j].segmentoReglas[k].esConexionTabla) {\n                        for (var m = 0; m < arregloConexionesATablas.length; m++) {\n                                if (arregloDeVariables[i].atributos[j].segmentoReglas[k].conexionTablaID == arregloConexionesATablas[m].ID) {\n                                    if(arregloAgrupacionElementosFormulaPorConexionATabla[m] == undefined)\n                                        arregloAgrupacionElementosFormulaPorConexionATabla[m] = [];\n                                    arregloAgrupacionElementosFormulaPorConexionATabla[m].push({segmentoRegla: arregloDeVariables[i].atributos[j].segmentoReglas[k], variable: arregloDeVariables[i], atributo: arregloDeVariables[i].atributos[j], index: k});\n                                    break;\n                                }\n                        }\n                    } else {\n                        for (var x = 0; x < arregloDeVariables.length; x++) {\n                            if(arregloDeVariables[i].atributos[j].segmentoReglas[k].variableID == arregloDeVariables[x].ID) {\n                                if(arregloAgrupacionElementosFormulaPorVariables[x] == undefined)\n                                    arregloAgrupacionElementosFormulaPorVariables[x] = [];\n                                arregloAgrupacionElementosFormulaPorVariables[x].push({segmentoRegla: arregloDeVariables[i].atributos[j].segmentoReglas[k], variable: arregloDeVariables[i], atributo: arregloDeVariables[i].atributos[j], index: k});\n                                break;\n                            }\n                        };\n                    }\n                };\n            };\n        };\n        console.log('arregloAgrupacionElementosFormulaPorConexionATabla');\n        console.log(arregloAgrupacionElementosFormulaPorConexionATabla);\n        console.log('arregloAgrupacionElementosFormulaPorVariables');\n        console.log(arregloAgrupacionElementosFormulaPorVariables);\n\n        //INICIALIZANDO VARIABLES EN MEMORIA\n        for (var a = 0; a < arregloDeVariables.length; a++) {\n            if (arregloDeVariables[a].esObjeto) {\n                //CREANDO ESPACIO EN MEMORIA DE ARREGLO DE VARIABLE SI ES ARREGLO\n                window[arregloDeVariables[a].nombre] = [];\n            } else {\n                //CREANDO ESPACIO EN MEMORIA DE ARREGLO DE VARIABLE SI ES VAR PRIMITVA\n                window[arregloDeVariables[a].nombre] = {};\n            }\n        }\n\n        //INICIALIZANDO / CREANDO VARIABLES CON SUS CAMPOS\n        /*var codigoIniciacionVariables = '';\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            if(i != 0)\n                codigoIniciacionVariables += '\\n\\n';\n            codigoIniciacionVariables += '\\n// INSTANCIACIONES VARIABLE: '+arregloDeVariables[i].nombre;\n            codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i], \"variable\"); //variable, tipoVariable, esObjeto, atributo\n            for (var j = 0; j < arregloDeVariables[i].atributos.length; j++) {\n                codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i], \"atributo\", arregloDeVariables[i].atributos[j]); ////variable, tipoVariable, esObjeto, atributo\n                for (var k = 0; k < arregloDeVariables[i].atributos[j].formulas.length; k++) {\n                    //codigoIniciacionVariables += this.codigoIniciacion(arregloDeVariables[i].atributos[j].formulas[k]);\n                    for (var l = 0; l < arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos.length; l++) {\n                        console.log('arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]');\n                        console.log(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l]);\n                        codigoIniciacionVariables += '\\n' + this.codigoIniciacion(arregloDeVariables[i].atributos[j].formulas[k].fuenteDeDatos[l], \"fuenteDato\", l); ////variable, tipoVariable, esObjeto, atributo\n                    };\n                };\n            };\n        };\n        console.log('codigoIniciacionVariables');\n        console.log(codigoIniciacionVariables);*/\n\n        var codigo = '';\n\n        for (var i = 0; i <= nivelMaximoVariables; i++) {\n            if(i == 0) {\n                var llamarSiguienteNivel = false;\n                if(nivelMaximoVariables >= 1)\n                    llamarSiguienteNivel = true;\n                codigo += this.crearCodigoFuenteDato(llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorConexionATabla, 0);\n            } else {\n                var llamarSiguienteNivel = false;\n                if(nivelMaximoVariables > i)\n                    llamarSiguienteNivel = true;\n                this.crearNivel(llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorVariables, i);\n            }\n        };\n\n        window['calculoPrincipal'] = new Function(\n            'return function calculoPrincipalMain(){'+\n                    codigo+\n            '}'\n        )();\n\n        window['calculoPrincipal']();\n        console.log(window['calculoPrincipal']);\n        for (var a = 0; a < arregloDeVariables.length; a++) {\n            console.log('window[arregloDeVariables[a].nombre]');\n            console.log(window[arregloDeVariables[a].nombre]);\n        };\n\n        //CREAR CODIGO DE LLENAR / CALCULAR ELEMENTOS DE FORMULAS\n        /*var codigoElementosFormula = '';\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            if(i != 0)\n                codigoElementosFormula += '\\n\\n';\n            codigoElementosFormula += '\\n// TABLA: '+arregloConexionesATablas[i].nombre;\n            //codigoElementosFormula += 'for (int i = 0; i < arregloConexionesATablas['+i+'].length; i++) {';\n            codigoElementosFormula += 'for (int i = 0; i < arregloResultadosDeTablas['+i+'].length; i++) {';\n            for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                var codigoCalculoVariable = this.crearCampo(arregloAgrupacionElementosFormulaPorConexionATabla[i][j]);\n                for (var k = 0; k < codigoCalculoVariable.length; k++) {\n                    codigoElementosFormula += '\\n\\t' + codigoCalculoVariable[k];\n                };\n            };\n            codigoElementosFormula += '\\n}';\n\n            for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                var codigoCalculoVariable = this.codigoElementosFormula(arregloAgrupacionElementosFormulaPorConexionATabla[i][j]);\n                for (var k = 0; k < codigoCalculoVariable.length; k++) {\n                    codigoElementosFormula += '\\n\\t' + codigoCalculoVariable[k];\n                };\n            };\n        };*/\n    }\n\n    codigoIniciacion (variable, tipoVariable, atributo, tabsText) {\n        if(tipoVariable.localeCompare(\"fuenteDato\") == 0) {\n            //atributo en este caso, es el valor del index del elemento en formula\n            return this.iniciacionElementosFormula(variable, atributo, tabsText);\n        } else if(tipoVariable.localeCompare(\"variable\") == 0) {\n            return this.iniciacionVariable(variable, tabsText);\n        } else if(tipoVariable.localeCompare(\"atributo\") == 0) {\n            return this.iniciacionCampo(variable, atributo, tabsText);\n        }\n    }\n\n    iniciacionElementosFormula (variable, index) {\n        var iniciacionElementosFormula = '';\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"date\") == 0 && (variable.operacion.localeCompare(\"MAX\") == 0 || variable.operacion.localeCompare(\"MIN\") == 0) ) {\n            //CUANDO ES FECHA Y OPERACION ES MAX O MIN DE FUENTE DE DATOS, SE OBTIENE LA FECHA MAXIMA O MENOR ENCONTRADA\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = new Date(1964, 4, 28);'; //POPS BIRTHDAY -- FECHA NULA\n        } else if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"date\") == 0 && variable.operacion.length > 0) {\n            //CUANDO ES FECHA Y OPERACION NO ES MAX O MIN DE FUENTE DE DATOS, SE OBTIENE UN NUMERO QUE VARIA POR OPERACION (DIA, MES, AÑO, COUNT)\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"bool\") == 0 && variable.operacion.localeCompare(\"COUNT\") == 0) {\n            //CUANDO ES BOOL Y OPERACION ES COUNT DE FUENTE DE DATOS\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"numero\") == 0 && this.existeOperacion(variable.operacion) ) {\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n\n        if(variable.tipoColumnaEnTabla.toLowerCase().localeCompare(\"cadena\") == 0 && variable.operacion.localeCompare(\"COUNT\") == 0) {\n            //CUANDO ES BOOL Y OPERACION ES COUNT DE FUENTE DE DATOS\n            //FORMULA NOMBRE FUENTE DE DATO (ELEMENTO DE FORMULA):\n            //[nombreColumnaEnTabla]+[variableID]+[variableCampoID]+[idFormula]+[idConexionTabla]+[i]\n            iniciacionElementosFormula += tabsText+'var '+variable.nombreColumnaEnTabla+\n                                                variable.variableID+\n                                                variable.variableCampoID+\n                                                variable.idFormula+\n                                                variable.idConexionTabla+index;\n            iniciacionElementosFormula += ' = 0;';\n        }\n        return iniciacionElementosFormula;\n    }\n\n    iniciacionVariable (variable, tabsText) {\n        var iniciacionVariable = '';\n        if(variable.esObjeto) {\n            iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = {};';\n            iniciacionVariable += '\\n'+tabsText+'var ' + variable.nombre + 'GU4RD4RV4L0R = false;';\n        }\n        //validacion necesario porque cuando variable sea primitiva, codigo de instanciacion sera en campo / atributo\n        return iniciacionVariable;\n    }\n\n    iniciacionCampo (variable, campo, tabsText) {\n        var iniciacionVariable = '';\n        if(!variable.esObjeto) {\n            if(campo.tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = new Date(1964, 5, 28);'; //POPS BIRTHDAY == null\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"bool\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = false;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"numero\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = -1;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"cadena\") == 0) {\n                iniciacionVariable += tabsText+'var '+variable.nombre+'NU3V0 = \"\";';\n            }\n        } else {\n            if(campo.tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = new Date(1964, 5, 28);'; //POPS BIRTHDAY == null\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"bool\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = false;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"numero\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = -1;';\n            }\n            if(campo.tipo.toLowerCase().localeCompare(\"cadena\") == 0) {\n                iniciacionVariable += tabsText+variable.nombre+'NU3V0.'+campo.nombre+' = \"\";';\n            }\n        }\n        return iniciacionVariable;\n    }\n\n    crearCodigoFuenteDato (llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorConexionATabla, nivelACrear) {\n        //la creacion del codigo en esta parte pertenece a los campos que tienen asignacion unica de columna de tabla, y asignacion unica de columna de tabla con operacion como SUM, COUNT ect\n        var codigo = '';\n        for (var i = 0; i < arregloConexionesATablas.length; i++) {\n            if(i > 0)\n                codigo += '\\n';\n            codigo += '\\t//CODIGO TABLA: '+arregloConexionesATablas[i].nombre;\n            codigo += '\\n\\tfor ( var i = 0; i < arregloConexionesATablas.length; i++) {';\n            codigo += '\\n\\t\\tfor ( var x = 0; x < arregloResultadosDeTablas[i].length; x++) {';\n            for (var a = 0; a < arregloDeVariables.length; a++) {\n                console.log('window[arregloDeVariables[a].nombre]');\n                console.log(window[arregloDeVariables[a].nombre]);\n                var inicializarVariable = true;\n                for (var j = 0; j < arregloAgrupacionElementosFormulaPorConexionATabla[i].length; j++) {\n                    if(arregloDeVariables[a].ID == arregloAgrupacionElementosFormulaPorConexionATabla[i][j].variable.ID) {\n                        for (var b = 0; b < arregloDeVariables[a].atributos.length; b++) {\n                            if(arregloDeVariables[a].atributos[b].ID == arregloAgrupacionElementosFormulaPorConexionATabla[i][j].atributo.ID) {\n                                //SOLO ENTRA A LA CONDICION SI EN EL ARREGLO ELEMENTOS AGRUPADOS POR CONEXIONES EL CAMPO PERTENECE A LA CONEXION / TABLA Y ES DEL MISMO NIVEL\n                                if(arregloDeVariables[a].atributos[b].nivel == nivelACrear) {\n                                    if(inicializarVariable) {\n                                        codigo += '\\n\\t\\t//INICIACION VARIABLE: '+arregloDeVariables[a].nombre;\n                                        codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"variable\", {}, '\\t\\t'); //variable, tipoVariable, atributo\n                                        for (var p = 0; p < arregloDeVariables[a].atributos.length; p++) {\n                                            codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"atributo\", arregloDeVariables[a].atributos[p], '\\t\\t');\n                                        };\n                                        //SOLO ENTRA UNA VEZ POR VARIABLE\n                                        inicializarVariable = false;\n                                    }\n                                    console.log('1');\n                                    console.log(arregloDeVariables[a].atributos[b].segmentoReglas);\n                                    for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                        //viendo si el segmento de reglas pertenece a la tabla\n                                        if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                            codigo += this.crearCodigoSegmentoReglas(arregloDeVariables[a].atributos[b].segmentoReglas[p], arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas, 2, a, b, \"arregloResultadosDeTablas[i]\");\n                                        }\n                                    };\n                                    codigo += '\\n';\n                                    //codigo final para guardar nuevo valor en arreglo\n                                    if (b == arregloDeVariables[a].atributos.length-1) {\n                                        //crear codigo guardar variable hasta llegar al ultimo campo\n                                        for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                            //viendo si el segmento de reglas pertenece a la tabla\n                                            if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                                for (var c = 0; c < arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas.length; c++) {\n                                                    for (var d = 0; d < arregloDeVariables[a].atributos[b].formulas.length; d++) {\n                                                        if (arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas[c].formulaID == arregloDeVariables[a].atributos[b].formulas[d].ID) {\n                                                            codigo += this.agregarCodigoGuardarVariable(arregloDeVariables[a], arregloDeVariables[a].atributos[b], arregloDeVariables[a].atributos[b].formulas[d], arregloDeVariables[a].atributos[b].formulas[d].fuenteDeDatos, 3);\n                                                        }\n                                                    };\n                                                };\n                                            }\n                                        };\n                                    }\n                                }\n                            }\n                        };\n                    }\n                };\n            };\n            codigo += '\\n\\t\\t}';\n            codigo += '\\n\\t}\\n';\n            if(llamarSiguienteNivel) {\n                codigo += '\\nnivel1();';\n            }\n        };\n        console.log('codigo');\n        console.log(codigo);\n        return codigo;\n    }\n\n    crearCodigoSegmentoReglas (segmentoReglas, reglas, tabs, posicionVariable, posicionCampo, nombreReferenciaArregloEnCodigo) {\n        var codigo = '';\n        var tabsText = '';\n        for (var i = 0; i < tabs; i++) {\n            tabsText+='\\t';\n        };\n        for (var n = 0; n < reglas.length; n++) {\n            if(reglas[n].reglaPadreID == -1) {\n                var resultado = this.arregloCodigoRegla(reglas[n], tabs, posicionVariable, posicionCampo, [], reglas, nombreReferenciaArregloEnCodigo);\n                if(resultado.length > 0)\n                    resultado[0].codigo = \"\\n\"+resultado[0].codigo;\n                //$.merge( prestamosCuerpo, resultado );\n                for (var i = 0; i < resultado.length; i++) {\n                    codigo += resultado[i].codigo;\n                };\n            }\n        };\n        return codigo;\n    }\n\n    agregarCodigoGuardarVariable (variable, campo, formulas, elementoFormula, tabs) {\n        var codigo = '';\n        var tabsText = '';\n        for (var i = 0; i < tabs; i++) {\n            tabsText+='\\t';\n        };\n        //ver si elementoFormula es asignacion de columna\n        for (var i = 0; i < elementoFormula.length; i++) {\n            if (elementoFormula[i].operacion.toLowerCase().localeCompare(\"asig\") == 0) {\n                codigo += '\\n'+tabsText+'if ('+variable.nombre+'GU4RD4RV4L0R'+') {';\n                if(variable.esObjeto) {\n                    codigo += '\\n'+tabsText+'\\twindow[\"'+variable.nombre+'\"].push('+variable.nombre+'NU3V0);';\n                } else {\n                    codigo += '\\n'+tabsText+'\\twindow[\"'+variable.nombre+'\"] = '+variable.nombre+'NU3V0;';\n                }\n                codigo += '\\n'+tabsText+'}';\n\n            }\n        };\n        return codigo;\n    }\n\n    crearNivel (llamarSiguienteNivel, arregloAgrupacionElementosFormulaPorVariables, nivelACrear) {\n        //la creacion del codigo en esta parte pertenece a los campos que tienen asignacion unica de columna de tabla, y asignacion unica de columna de tabla con operacion como SUM, COUNT ect\n        var codigo = [];\n        for (var i = 0; i < arregloDeVariables.length; i++) {\n            if(codigo[i] == undefined)\n                codigo[i] = {cabecera: '', codigo: ''};\n            if(i > 0)\n                codigo[i].cabecera += '\\n';\n            codigo[i].cabecera += '\\t//CODIGO TABLA: '+arregloConexionesATablas[i].nombre;\n            codigo[i].cabecera += '\\n\\tfor ( var x = 0; x < window[\"'+arregloConexionesATablas[i].nombre+'\"].length; x++) {';\n            /*codigo[i].cabecera += '\\n\\tfor ( var i = 0; i < arregloConexionesATablas.length; i++) {';\n            codigo[i].cabecera += '\\n\\t\\tfor ( var j = 0; j < arregloResultadosDeTablas[i].length; j++) {';*/\n            for (var a = 0; a < arregloDeVariables.length; a++) {\n                console.log('window[arregloDeVariables[a].nombre]');\n                console.log(window[arregloDeVariables[a].nombre]);\n                var inicializarVariable = true;\n                for (var j = 0; j < arregloAgrupacionElementosFormulaPorVariables[a].length; j++) {\n                    //PARA ESA VARIABLE, EXISTE UN SEGMENTO DE REGLA DE OTRA VARIABLE QUE LA OCUPA PARA EL CALCULO\n                    if(arregloDeVariables[a].ID == arregloAgrupacionElementosFormulaPorVariables[a][j].variable.ID) {\n                        for (var b = 0; b < arregloDeVariables[a].atributos.length; b++) {\n                            if(arregloDeVariables[a].atributos[b].ID == arregloAgrupacionElementosFormulaPorVariables[a][j].atributo.ID) {\n                                //SOLO ENTRA A LA CONDICION SI EN EL ARREGLO ELEMENTOS AGRUPADOS POR CONEXIONES EL CAMPO PERTENECE A LA CONEXION / TABLA Y ES DEL MISMO NIVEL\n                                if(arregloDeVariables[a].atributos[b].nivel == nivelACrear) {\n                                    if(inicializarVariable) {\n                                        codigo[i].codigo += '\\n\\t\\t//INICIACION VARIABLE: '+arregloDeVariables[a].nombre;\n                                        codigo[i].codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"variable\", {}, '\\t\\t'); //variable, tipoVariable, atributo\n                                        for (var p = 0; p < arregloDeVariables[a].atributos.length; p++) {\n                                            codigo[i].codigo += '\\n' + this.codigoIniciacion(arregloDeVariables[a], \"atributo\", arregloDeVariables[a].atributos[p], '\\t\\t');\n                                        };\n                                        //SOLO ENTRA UNA VEZ POR VARIABLE\n                                        inicializarVariable = false;\n                                    }\n                                    for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                        //viendo si el segmento de reglas pertenece a la tabla\n                                        if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                            codigo[i].codigo += this.crearCodigoSegmentoReglas(arregloDeVariables[a].atributos[b].segmentoReglas[p], arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas, 2, a, b, 'window[\"'+arregloConexionesATablas[i].nombre+'\"]');\n                                        }\n                                    };\n                                    codigo[i].codigo += '\\n';\n                                    //codigo final para guardar nuevo valor en arreglo\n                                    if (b == arregloDeVariables[a].atributos.length-1) {\n                                        //crear codigo guardar variable hasta llegar al ultimo campo\n                                        for (var p = 0; p < arregloDeVariables[a].atributos[b].segmentoReglas.length; p++) {\n                                            //viendo si el segmento de reglas pertenece a la tabla\n                                            if(arregloDeVariables[a].atributos[b].segmentoReglas[p].conexionTablaID == arregloConexionesATablas[i].ID) {\n                                                for (var c = 0; c < arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas.length; c++) {\n                                                    for (var d = 0; d < arregloDeVariables[a].atributos[b].formulas.length; d++) {\n                                                        if (arregloDeVariables[a].atributos[b].segmentoReglas[p].reglas[c].formulaID == arregloDeVariables[a].atributos[b].formulas[d].ID) {\n                                                            codigo[i].codigo += this.agregarCodigoGuardarVariable(arregloDeVariables[a], arregloDeVariables[a].atributos[b], arregloDeVariables[a].atributos[b].formulas[d], arregloDeVariables[a].atributos[b].formulas[d].fuenteDeDatos, 3);\n                                                        }\n                                                    };\n                                                };\n                                            }\n                                        };\n                                    }\n                                }\n                            }\n                        };\n                    }\n                };\n            };\n            //codigo[i].codigo += '\\n\\t}';\n            codigo[i].codigo += '\\n\\t}\\n';\n            if(llamarSiguienteNivel) {\n                codigo[i].codigo += '\\n\\tnivel'+nivelACrear+1+'();\\n';\n            }\n        };\n        console.log('codigo');\n        console.log(codigo);\n        return codigo;\n    }\n\n    arregloCodigoRegla (regla, tabs, posicionVariable, posicionCampo, arreglo, arregloDeReglas, nombreReferenciaArregloEnCodigo) {\n        var tabsText = '';\n        for (var i = 0; i < tabs; i++) {\n            tabsText+='\\t';\n        };\n        var posicionesIF = [];\n        console.log('regla');\n        console.log(regla);\n        if(!regla.esCondicion) {\n            //asignaciones\n            //si no es condicion, la variable de referencia se le agrega NU3V0 que hace referencia al objeto temporal vacio\n            if(regla.operacion.indexOf('ASIG') == 0) {\n                //trayendo formula correcta\n                var formula = arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.filter(function( formula ) {\n                    return regla.formulaID == formula.ID;\n                });\n                console.log('1');\n                if(formula.length > 0) {\n                    console.log('1.1');\n                    //este tipo de operacion siempre sera una formula con un elemento de formula\n                    arreglo.push({codigo: tabsText+\"if (\"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\" != undefined) {\", tipo: \"ASIG\"});\n                    arreglo.push({codigo: \"\\n\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\";\", tipo: \"ASIG\"});\n                    arreglo.push({codigo: \"\\n\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"GU4RD4RV4L0R = true;\", tipo: \"BANDERA_ASIG\"});\n                    arreglo.push({codigo: \"\\n\"+tabsText+\"}\", tipo: \"ASIG\"});\n                }\n            } else if(regla.operacion.indexOf('MAX') == 0) {\n                //trayendo formula correcta\n                var formula = arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.filter(function( formula ) {\n                    return regla.formulaID == formula.ID;\n                });\n                if(formula.length > 0) {\n                    //este tipo de operacion siempre sera una formula con un elemento de formula\n                    if(arregloDeVariables[posicionVariable].atributos[posicionCampo].tipo.toLowerCase().localeCompare(\"date\") == 0) {\n                        isValidDate\n                        arreglo.push({codigo: tabsText+\"if (\"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\" != undefined)\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\"+tabsText+\"if (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\".getTime() < \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\".getTime())\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\\t\"+tabsText+\"if (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\".getTime() < \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\".getTime())\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\\t\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = new Date(\"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\");\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\\t\"+tabsText+\"}\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\"+tabsText+\"}\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\"+tabsText+\"}\", tipo: \"MAX\"});\n                    } else if(arregloDeVariables[posicionVariable].atributos[posicionCampo].tipo.toLowerCase().localeCompare(\"int\") == 0) {\n                        arreglo.push({codigo: tabsText+\"if (\"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\" != undefined)\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\"+tabsText+\"if (\"+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" < \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla+\")\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[0].nombreColumnaEnTabla, tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\\t\"+tabsText+\"}\", tipo: \"MAX\"});\n                        arreglo.push({codigo: \"\\n\"+tabsText+\"}\", tipo: \"MAX\"});\n                    }\n                }\n            } else if(regla.operacion.indexOf('MIN') == 0) {\n            } else if(regla.operacion.indexOf('PROM') == 0) {\n            } else if(regla.operacion.indexOf('SUM') == 0) {\n            } else if(regla.operacion.indexOf('FORMULA') == 0) {\n                var formula = arregloDeVariables[posicionVariable].atributos[posicionCampo].formulas.filter(function( formula ) {\n                    return regla.formulaID == formula.ID;\n                });\n                for (var i = 0; i < formula[0].fuenteDeDatos.length; i++) {\n                    var saltoLinea = '';\n                    if(i > 0)\n                        saltoLinea = '\\n';\n                    console.log('formula[0].fuenteDeDatos[i]')\n                    console.log(formula[0].fuenteDeDatos[i])\n                    if(formula[0].fuenteDeDatos[i].operacion != undefined && formula[0].fuenteDeDatos[i].operacion.length > 0) {\n                        if(formula[0].fuenteDeDatos[i].esFuenteDeDato) {\n                            //elemento formula es de conexion de tabla\n                            if(i > 0) {\n                                arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[i].nombreColumnaEnTabla+\";\", tipo: \"FORMULA\"});\n                            } else {\n                                arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+formula[0].fuenteDeDatos[i].nombreColumnaEnTabla+\";\", tipo: \"FORMULA\"});\n                            }\n                        } else {\n                            if (!arregloDeVariables[posicionVariable].esObjeto) {\n                                //elemento formula es variable primitiva\n                                if(i > 0) {\n                                    arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\";\", tipo: \"FORMULA\"});\n                                } else {\n                                    arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\";\", tipo: \"FORMULA\"});\n                                }\n                            } else {\n                                if(i > 0) {\n                                    arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\";\", tipo: \"FORMULA\"});\n                                } else {\n                                    arreglo.push({codigo: saltoLinea+tabsText+\"var \"+formula[0].fuenteDeDatos[i].nombreVariable+\" = \"+nombreReferenciaArregloEnCodigo+\"[x].\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\";\", tipo: \"FORMULA\"});\n                                }\n                            }\n                        }\n                    }\n                };\n                //arreglo.push({codigo: \"\\n\\t\\t\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = math.eval(formula[0].formula);\"});\n                arreglo.push({codigo: \"\\n\"+tabsText+arregloDeVariables[posicionVariable].nombre+\"NU3V0.\"+arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre+\" = \"+formula[0].formula+\";\"});\n            }\n        } else {\n            //condiciones if\n            var arregloValoresAComparar = [regla.valor];\n            var nombreCampoDeArregloEnCodigo = '';\n            if(regla.esConexionTabla) {\n                nombreCampoDeArregloEnCodigo = regla.nombreColumnaEnTabla;\n            } else {\n                nombreCampoDeArregloEnCodigo = arregloDeVariables[posicionVariable].atributos[posicionCampo].nombre;\n            }\n            var tamArreglo = arreglo.length;\n            for (var j = 0; j < tamArreglo; j++) {\n                for (var i = 0; i < arregloValoresAComparar.length; i++) {\n                    var comparacion = \"\";\n                    if (regla.tipoCampoObjetivo.localeCompare(\"date\") == 0) {\n                        if(regla.operacion.localeCompare(\"encuentra\") == 0) {\n                            //\n                        } else if(regla.operacion.localeCompare(\"no_encuentra\") == 0) {\n                            //\n                        } else {\n                            comparacion = nombreReferenciaArregloEnCodigo+\"[x].\"+nombreCampoDeArregloEnCodigo+\".getTime() \"+regla.operacion+\" \"+arregloValoresAComparar;\n                        }\n                    } else if (regla.tipoCampoObjetivo.localeCompare(\"varchar\") == 0) {\n                        if(regla.operacion.localeCompare(\"encuentra\") == 0) {\n                            //\n                        } else if(regla.operacion.localeCompare(\"no_encuentra\") == 0) {\n                            //\n                        } else {\n                            comparacion = nombreReferenciaArregloEnCodigo+\"[x].\"+nombreCampoDeArregloEnCodigo+\".localeCompare('\"+arregloValoresAComparar+\"') \"+regla.operacion+\" 0\";\n                        }\n                    } else if (regla.tipoCampoObjetivo.localeCompare(\"int\") == 0 || regla.tipoCampoObjetivo.localeCompare(\"decimal\") == 0) {\n                        if(regla.operacion.localeCompare(\"encuentra\") == 0) {\n                            //\n                        } else if(regla.operacion.localeCompare(\"no_encuentra\") == 0) {\n                            //\n                        } else {\n                            comparacion = nombreReferenciaArregloEnCodigo+\"[x].\"+nombreCampoDeArregloEnCodigo+\" \"+regla.operacion+\" \"+arregloValoresAComparar;\n                        }\n                    } else if (regla.tipoCampoObjetivo.localeCompare(\"bit\") == 0) {\n                        comparacion = nombreReferenciaArregloEnCodigo+\"[x].\"+nombreCampoDeArregloEnCodigo+\" \"+regla.operacion+\" \"+arregloValoresAComparar;\n                    }\n                    if(i+1 == arregloValoresAComparar.length) {\n                        comparacion += \" ) {\";\n                    }\n                    if(i==0) {\n                        arreglo[j].codigo += comparacion;\n                    } else {\n                        arreglo[j].codigo += \" && \"+comparacion;\n                    }\n                };\n            };\n            posicionesIF.push(arreglo.length);\n        }\n\n        /*if(regla.valor.indexOf('LISTA') == 0) {\n            if(esCondicion) {\n                var arregloLista = regla.valor.split(\"=\")[1].split(\",\");\n                var copiaRegla = $.extend(true,{},arreglo);\n                var tamArreglo = arreglo.length;\n                if(regla.operacion == \"no\") {\n                    \n                    for (var j = 0; j < tamArreglo; j++) {\n                        for (var i = 0; i < arregloLista.length; i++) {\n                            if(i==0) {\n                                var textoFinal = ' != 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo +=valor + \"')\" + textoFinal;\n                            } else {\n                                var textoFinal = ' != 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo += \" && \"+copiaRegla[j].codigo.split(\" ( \")[1]+valor+\"')\"+textoFinal;\n                            }\n                        }\n                    };\n                } else {\n                    for (var j = 0; j < tamArreglo; j++) {\n                        for (var i = 0; i < arregloLista.length; i++) {\n                            if(i==0) {\n                                var textoFinal = ' == 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo +=valor + \"')\" + textoFinal;\n                            } else {\n                                var textoFinal = ' == 0 ';\n                                if(i+1 == arregloLista.length)\n                                    textoFinal += \" ) {\";\n                                var campo = regla.campoObjetivo.split(\"=\")[1];\n                                var valor = getListValue(arregloLista[i], campo);\n                                arreglo[j].codigo += \" || \"+copiaRegla[j].codigo.split(\" ( \")[1]+valor+\"')\"+textoFinal;\n                            }\n                        }\n                    };\n                }\n            }\n        }*/\n\n        var cuerpo = arregloDeReglas.filter(function( object ) {\n            return object.reglaPadre == regla.ID;\n        });\n        if(cuerpo.length > 0) {\n            var arregloCuerpo = [];\n            for (var i = 0; i < cuerpo.length; i++) {\n                var cuantasTabs = tabs;\n                if(regla.esCondicion)\n                    cuantasTabs++;\n                var retorno = this.arregloCodigoRegla(regla, tabs+1, posicionVariable, posicionCampo, arreglo, arregloDeReglas);\n                retorno[0].codigo = \"\\n\"+retorno[0].codigo;\n                $.merge( arregloCuerpo, retorno );\n            };\n            for (var i = 0; i < posicionesIF.length; i++) {\n                arreglo.splice(posicionesIF[i], 0, ...arregloCuerpo);\n                if(regla.esCondicion)\n                    arreglo.splice(posicionesIF[i]+arregloCuerpo.length, 0, {codigo: \"\\n\"+tabsText+\"}\", filtro: regla.filtro});\n                for (var j = i; j < posicionesIF.length; j++) {\n                    posicionesIF[j]+=arregloCuerpo.length;\n                };\n            };\n            if(posicionesIF.length == 0)\n                $.merge( arreglo, arregloCuerpo );\n            return arreglo;\n        } else {\n            if(regla.esCondicion){\n                for (var i = 0; i < posicionesIF.length; i++) {\n                    arreglo.splice(posicionesIF[i], 0, {codigo: \"\\n\"+tabsText+\"}\", filtro: regla.filtro})\n                };\n            }\n            return arreglo;\n        }\n    }\n\n    isValidDate (fecha) {\n        if (Object.prototype.toString.call(fecha) === \"[object Date]\") {\n            if (isNaN(fecha.getTime())) {\n                alert(\"Ingrese una fecha valida.\");\n                return false;\n            } else {\n                return true;\n            }\n        } else {\n            alert(\"Ingrese una fecha valida.\");\n            return false;\n        }\n    }\n\n    existeOperacion (operacion) {\n        for (var i = 0; i < this.state.operaciones.length; i++) {\n            if( operacion.localeCompare(\"COUNT\") == 0 || \n                operacion.localeCompare(\"MAX\") == 0 || \n                operacion.localeCompare(\"MIN\") == 0 || \n                operacion.localeCompare(\"DIA\") == 0 || \n                operacion.localeCompare(\"MES\") == 0 || \n                operacion.localeCompare(\"AÑO\") == 0 || \n                operacion.localeCompare(\"PROM\") == 0 || \n                operacion.localeCompare(\"SUM\") == 0 ) {\n                return true;\n            }\n        };\n        return false;\n    }\n\n    //elementoFormula: objeto elementoFormula\n    codigoElementosFormula (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var columnasDeTablaSeleccionadas = this.getColumnasDeTablaSeleccionadas(elementoFormula);\n        if(elementoFormula.operacion.length == 0 && columnasDeTablaSeleccionadas.length == 1) {\n            this.codigoElementosFormulaAsignacion();\n        } else if(elementoFormula.operacion.length > 0 && columnasDeTablaSeleccionadas.length == 1) {\n            this.codigoElementosFormulaAsignacionOperacion();\n        } else {\n            this.codigoElementosFormulaGlobal();\n        }\n    }\n\n    codigoElementosFormulaAsignacion (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AÑO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    codigoElementosFormulaAsignacionOperacion (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AÑO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    codigoElementosFormulaGlobal (elementoFormula, tabSpaces, objetoEnTabla, instanciacion) {\n        var cadenaRetorno = '';\n        if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"date\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"MAX\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() > window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MIN\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\tif('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+'.getTime() < window['+instanciacion+'].getTime() && (window['+instanciacion+'].getDate() != 28 && window['+instanciacion+'].getMonth() != 4 && window['+instanciacion+'].getFullYear() != 1964) ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t} else if (window['+instanciacion+'].getDate() == 28 && window['+instanciacion+'].getMonth() == 4 && window['+instanciacion+'].getFullYear() == 1964) {'           //valor nulo\n                cadenaRetorno+='\\n'+tabSpaces+'\\t\\twindow['+instanciacion+'] = new Date('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+')';\n                cadenaRetorno+='\\n'+tabSpaces+'\\t}';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"DIA\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"MES\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"AÑO\") == 0) {\n            } else if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            } else if(elementoFormula.fuenteDato.operacion.length == 0) {\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"bool\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        } else if(elementoFormula.fuenteDato.tipoColumnaEnTabla.localeCompare(\"cadena\") == 0) {\n            if(elementoFormula.fuenteDato.operacion.localeCompare(\"COUNT\") == 0) {\n                cadenaRetorno+=tabSpaces+'if('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+' != undefined && this.isValidDate('+objetoEnTabla+'.'+elementoFormula.fuenteDato.nombreColumnaEnTabla+') ) {';\n                cadenaRetorno+='\\n'+tabSpaces+'\\twindow['+instanciacion+']++';\n                cadenaRetorno+='\\n'+tabSpaces+'}';\n            }\n        }\n    }\n\n    guardarVariablesCalculadas () {\n        for (var a = 0; a < arregloDeVariables.length; a++) {\n            //arregloDeVariables[a]\n            this.crearTablaDeResultadoCodigo(arregloDeVariables[a]);\n            /*for (var b = 0; b < arregloDeVariables[a].atributos.length; b++) {\n                //arregloDeVariables[a].atributos[b]\n            };*/\n        };\n    }\n\n    /*verificarSiExisteVariableEnResultadosHistoricos (variable) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from ResultadosNombreVariables where nombreVariable = \"+variable.nombre+\" and finVigencia is null\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset.length > 0) {\n                            //existe\n                        } else {\n                            //no existe\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }*/\n\n    crearTablaDeResultadoCodigo (variable) {\n        var codigo = '';\n        //nombre tabla\n        codigo += \"\\tvar nombreTabla = variable.nombre+'_'+new Date().getFullYear()+'_'+new Date().getMonth()+'_'+new Date().getDate();\";\n        console.log('========================')\n        console.log('NOMBRE')\n        console.log(variable.nombre+'_'+new Date().getFullYear()+'_'+new Date().getMonth()+'_'+new Date().getDate())\n        console.log('========================')\n        codigo += \"\\n\\tconst table = new sql.Table(nombreTabla);\";\n        codigo += \"\\n\\ttable.create = true;\";\n        for (var i = 0; i < variable.atributos.length; i++) {\n            if(variable.atributos[i].tipo.localeCompare(\"int\") == 0) {\n                codigo += \"\\n\\ttable.columns.add(\"+variable.atributos[i].nombre+\", sql.Int, {nullable: true});\";\n            } else if(variable.atributos[i].tipo.localeCompare(\"decimal\") == 0) {\n                codigo += \"\\n\\ttable.columns.add(\"+variable.atributos[i].nombre+\", sql.Decimal, {nullable: true});\";\n            } else if(variable.atributos[i].tipo.localeCompare(\"varchar\") == 0) {\n                codigo += \"\\n\\ttable.columns.add(\"+variable.atributos[i].nombre+\", sql.VarChar(1000), {nullable: true});\";\n            } else if(variable.atributos[i].tipo.localeCompare(\"bit\") == 0) {\n                codigo += \"\\n\\ttable.columns.add(\"+variable.atributos[i].nombre+\", sql.Bit, {nullable: true});\";\n            } else if(variable.atributos[i].tipo.localeCompare(\"date\") == 0) {\n                codigo += \"\\n\\ttable.columns.add(\"+variable.atributos[i].nombre+\", sql.Date, {nullable: true});\";\n            }\n        };\n        codigo += \"\\n\\tfor (var i = 0; i < window[\"+variable.nombre+\"].length; i++) {\";\n        codigo += \"\\n\\t\\ttable.rows.add(\";\n            for (var j = 0; j < variable.atributos.length; j++) {\n                codigo += \"window[\"+variable.nombre+\"][i].\"+variable.atributos[j].nombre;\n                if(j+1 < variable.atributos.length)\n                    codigo += \", \";\n            };\n        codigo += \");\";\n        codigo += \"\\n\\t};\";\n        //table.rows.add(777, 'test')\n         \n        codigo += \"\\n\\tconst request = new sql.Request();\";\n        codigo += \"\\n\\trequest.bulk(table, (err, result) => {\";\n            codigo += \"\\n\\t\\tif(err != undefined) {\";\n                codigo += \"\\n\\t\\t\\tconsole.log(err);\";\n            codigo += \"\\n\\t\\t}\";\n        codigo += \"\\n\\t});\";\n    }\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <a className={\"btn btn-brand btn-block btnWhiteColorHover font-bold font-20\"} style={{color: \"#fafafa\"}} onClick={this.iniciarCalculo}>Iniciar</a>\n                <br/>\n            </div>\n        );\n    }\n}\n"],"file":"Calculo.js"}