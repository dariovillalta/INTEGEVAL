{"version":3,"sources":["components/Dashboards/EditarDashboardHome.js"],"names":["EditarDashboardHome","props","state","componenteActual","idVariable","tipoVariable","esObjetoVariable","esInstruccionSQLVariable","esPrimeraVez","crearVariables","bind","retornoSeleccionVariables","editarVariables","changeStateFirstTimeToFalse","terminoCrearVariablesPasarAEdit","actualizarIDVariableModificada","setState","nombreFuenteDatos","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","recordset","undefined","length","editarFuenteDatos","ID","nombre","descripcion","esObjeto","objetoPadreID","guardar","tablaDeVariableModificada","localeCompare","esInstruccionSQL","configuracionHome","goOptions","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarDashboard from './SeleccionarDashboard.js';\n//import CrearDashboardHome from './CrearVariables/CrearVariablesHome.js';\n//import EditarDashboardHome from './EditarVariable/EditarVariablesHome.js';\n\nexport default class EditarDashboardHome extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            componenteActual: \"selVariables\",\n            idVariable: -1,\n            tipoVariable: \"\",\n            esObjetoVariable: \"\",\n            esInstruccionSQLVariable: \"\",\n            esPrimeraVez: true\n        }\n        this.crearVariables = this.crearVariables.bind(this);\n        this.retornoSeleccionVariables = this.retornoSeleccionVariables.bind(this);\n        this.editarVariables = this.editarVariables.bind(this);\n        this.changeStateFirstTimeToFalse = this.changeStateFirstTimeToFalse.bind(this);\n        this.terminoCrearVariablesPasarAEdit = this.terminoCrearVariablesPasarAEdit.bind(this);\n        this.actualizarIDVariableModificada = this.actualizarIDVariableModificada.bind(this);\n    }\n\n    componentDidMount () {\n        //\n    }\n\n    crearVariables () {\n        this.setState({\n            componenteActual: \"crearVariables\"\n        });\n    }\n\n    retornoSeleccionVariables () {\n        this.setState({\n            componenteActual: \"selVariables\",\n            idVariable: -1,\n            tipoVariable: \"\",\n            esObjetoVariable: \"\",\n            esInstruccionSQLVariable: \"\"\n        });\n    }\n\n    editarVariables (idVariable, esObjetoVariable, esInstruccionSQLVariable, tipoVariable) {\n        this.setState({\n            idVariable: idVariable,\n            componenteActual: \"editarVariables\",\n            tipoVariable: tipoVariable,\n            esObjetoVariable: esObjetoVariable,\n            esInstruccionSQLVariable: esInstruccionSQLVariable,\n            esPrimeraVez: true\n        });\n    }\n\n    changeStateFirstTimeToFalse() {\n        this.setState({\n            esPrimeraVez: false\n        });\n    }\n\n    terminoCrearVariablesPasarAEdit (nombreFuenteDatos) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from Campos where nombre = '\"+nombreFuenteDatos+\"'\", (err, result) => {\n                if (err) {\n                    console.log(err);\n                    if (!rolledBack) {\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(result.recordset != undefined) {\n                            if(result.recordset.length) {\n                                this.editarFuenteDatos(result.recordset[0].ID, result.recordset[0].nombre, result.recordset[0].descripcion, result.recordset[0].esObjeto, result.recordset[0].objetoPadreID, result.recordset[0].guardar);\n                            }\n                        }\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    actualizarIDVariableModificada (tablaDeVariableModificada) {\n        if(tablaDeVariableModificada.localeCompare(\"excel\") == 0) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"select top 1 * from ExcelArchivos order by ID desc\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(result.recordset.length > 0) {\n                                this.editarVariables(result.recordset[0].ID, false, false, \"excel\");\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else if(tablaDeVariableModificada.localeCompare(\"forma\") == 0) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"select top 1 * from FormasVariables order by ID desc\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(result.recordset.length > 0) {\n                                console.log(\"yeah\");\n                                this.editarVariables(result.recordset[0].ID, false, false, \"forma\");\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        } else if(tablaDeVariableModificada.localeCompare(\"variable\") == 0) {\n            const transaction = new sql.Transaction( this.props.pool );\n            transaction.begin(err => {\n                var rolledBack = false;\n                transaction.on('rollback', aborted => {\n                    rolledBack = true;\n                });\n                const request = new sql.Request(transaction);\n                request.query(\"select top 1 * from Variables order by ID desc\", (err, result) => {\n                    if (err) {\n                        console.log(err);\n                        if (!rolledBack) {\n                            transaction.rollback(err => {\n                            });\n                        }\n                    } else {\n                        transaction.commit(err => {\n                            if(result.recordset.length > 0) {\n                                this.editarVariables(result.recordset[0].ID, result.recordset[0].esObjeto, result.recordset[0].esInstruccionSQL, \"variable\");\n                            }\n                        });\n                    }\n                });\n            }); // fin transaction\n        }\n    }\n\n    render() {\n        if(this.state.componenteActual.localeCompare(\"selVariables\") == 0) {\n            return (\n                <div>\n                    <SeleccionarDashboard pool={this.props.pool}\n                                            configuracionHome={this.props.configuracionHome}\n                                            crearVariables={this.crearVariables}\n                                            goOptions={this.props.goOptions}\n                                            editarVariable={this.editarVariables}>\n                    </SeleccionarDashboard>\n                </div>\n            );\n        } /*else if(this.state.componenteActual.localeCompare(\"crearVariables\") == 0) {\n            return (\n                <div>\n                    <CrearVariablesHome pool={this.props.pool}\n                                            showCondicionVar={this.props.showCondicionVar}\n                                            terminoCrearCampo={this.terminoCrearFuenteDatosPasarAEdit}\n                                            idTablaSeleccionada={this.props.idTablaSeleccionada}\n                                            columnas={this.state.columnas}\n                                            nombreTablaSeleccionada={this.props.nombreTablaSeleccionada}\n                                            goOptions={this.props.goOptions}\n                                            retornoSeleccionVariables={this.retornoSeleccionVariables}\n                                            configuracionHome={this.props.configuracionHome}>\n                    </CrearVariablesHome>\n                </div>\n            );\n        }*/\n    }\n}\n"],"file":"EditarDashboardHome.js"}