{"version":3,"sources":["components/TipoCredito/SeleccionarTipoCredito.js"],"names":["SeleccionarTipoCredito","props","state","tipoCreditos","tipoCreditosHijos","creditoSel","mostrarVista","loadTypeCredit","bind","goCreateTypeCredit","returnChooseTypeCredit","createCreditTypeSonsArray","insertCreditTypeSon","entrarEdit","returnEditCredit","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","arregloTemp","i","length","ID","creditoID","index","array","undefined","$","merge","tipoCreditoN","localeCompare","tablaID","retornoTablas","showConfigurationComponent","seleccionarCredito","color","fontSize","fontWeight","margin","display","map","tipoCredito","nombre","tipoCreditoH","j","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport CrearTipoCredito from './CrearTipoCredito.js';\nimport EditarTipoCredito from './EditarTipoCredito.js';\nimport Accordion from '../Accordion/Accordion.js';\n\nexport default class SeleccionarTipoCredito extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            tipoCreditos: [],\n            tipoCreditosHijos: [],\n            creditoSel: {},\n            mostrarVista: \"selTipoCredito\"\n        }\n        this.loadTypeCredit = this.loadTypeCredit.bind(this);\n        this.goCreateTypeCredit = this.goCreateTypeCredit.bind(this);\n        this.returnChooseTypeCredit = this.returnChooseTypeCredit.bind(this);\n        this.createCreditTypeSonsArray = this.createCreditTypeSonsArray.bind(this);\n        this.insertCreditTypeSon = this.insertCreditTypeSon.bind(this);\n        this.entrarEdit = this.entrarEdit.bind(this);\n        this.returnEditCredit = this.returnEditCredit.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTypeCredit();\n    }\n\n    loadTypeCredit() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from TipoCredito where tipoCreditoPadreID = -1\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            tipoCreditos: result.recordset\n                        });\n                        this.createCreditTypeSonsArray();\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    createCreditTypeSonsArray() {\n        var arregloTemp = [];\n        for (var i = 0; i < this.state.tipoCreditos.length; i++) {\n            this.insertCreditTypeSon(this.state.tipoCreditos[i].ID, i, arregloTemp);\n        };\n    }\n\n    insertCreditTypeSon(creditoID, index, array) {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from TipoCredito where tipoCreditoPadreID = \"+creditoID, (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        if(array[index] == undefined) {\n                            array[index] = [];\n                        }\n                        array[index] = $.merge(array[index], result.recordset);\n                        this.setState({\n                            tipoCreditosHijos: array\n                        });\n                        console.log('array');\n                        console.log(array);\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    goCreateTypeCredit() {\n        this.setState({\n            mostrarVista: \"crearTipoCredito\"\n        });\n    }\n\n    returnChooseTypeCredit() {\n        this.setState({\n            mostrarVista: \"selTipoCredito\"\n        });\n        this.loadTypeCredit();\n    }\n\n    entrarEdit(tipoCreditoN) {\n        this.setState({\n            creditoSel: tipoCreditoN,\n            mostrarVista: \"editTipoCredito\"\n        });\n    }\n\n    returnEditCredit() {\n        this.setState({\n            mostrarVista: \"editTipoCredito\"\n        });\n    }\n\n    render() {\n        if(this.state.mostrarVista.localeCompare(\"crearTipoCredito\") == 0) {\n            return (\n                <div>\n                    <CrearTipoCredito tablaID={this.props.tablaID} pool={this.props.pool} retornoSelCreditos={this.returnChooseTypeCredit} retornoTablas={this.props.retornoTablas} showConfigurationComponent={this.props.showConfigurationComponent} tipoCreditos={this.state.tipoCreditos} loadTypeCredit={this.loadTypeCredit}> </CrearTipoCredito>\n                </div>\n            );\n        } else if(this.state.mostrarVista.localeCompare(\"editTipoCredito\") == 0) {\n            return (\n                <div>\n                    <EditarTipoCredito tablaID={this.props.tablaID} seleccionarCredito={this.props.seleccionarCredito} pool={this.props.pool} tipoCredito={this.state.creditoSel} retornoSelCreditos={this.returnChooseTypeCredit} retornoTablas={this.props.retornoTablas} showConfigurationComponent={this.props.showConfigurationComponent} tipoCreditos={this.state.tipoCreditos} loadTypeCredit={this.loadTypeCredit}> </EditarTipoCredito>\n                </div>\n            );\n        } else if(this.state.mostrarVista.localeCompare(\"selTipoCredito\") == 0) {\n            return (\n                <div>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            <div className={\"page-header\"}>\n                                <h2 className={\"pageheader-title\"}>Configuraci&oacute;n</h2>\n                                <div className={\"page-breadcrumb\"}>\n                                    <nav aria-label=\"breadcrumb\">\n                                        <ol className={\"breadcrumb\"}>\n                                            <li className={\"breadcrumb-item\"} aria-current=\"page\" onClick={this.props.showConfigurationComponent}><a href=\"#\" className={\"breadcrumb-link\"}>Configuraci&oacute;n</a></li>\n                                            <li className={\"breadcrumb-item active\"} aria-current=\"page\">Seleccionar Tipo de Cr&eacute;dito</li>\n                                        </ol>\n                                    </nav>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"row\"}>\n                        <button onClick={this.goCreateTypeCredit} className={\"btn btn-success btn-block col-xl-10 col-10\"} style={{color: \"white\", fontSize: \"1.2em\", fontWeight: \"bold\", margin: \"0 auto\", display: \"block\"}}>Crear</button>\n                    </div>\n                    <br/>\n                    <div className={\"row\"}>\n                        <div className={\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\"}>\n                            {this.state.tipoCreditos.map((tipoCredito, i) => (\n                                <Accordion key={tipoCredito.ID} showTrash={false} showEdit={true} editVariable={() => this.entrarEdit(tipoCredito)} allowMultipleOpen color={\"#ffffff\"}>\n                                    <div label={tipoCredito.nombre} key={tipoCredito.ID}>\n                                        { this.state.tipoCreditosHijos[i] != undefined ? (\n                                            <div>\n                                                {this.state.tipoCreditosHijos[i].map((tipoCreditoH, j) =>\n                                                    <a className={\"btn btn-outline-info btn-block btnWhiteColorHover fontSize1EM\"} onClick={() => this.entrarEdit(tipoCreditoH)} key={tipoCreditoH.ID}>{tipoCreditoH.nombre}</a>\n                                                )}\n                                                { this.state.tipoCreditosHijos[i].length == 0 ? (\n                                                    <a className={\"btn btn-outline-dark btn-block btnWhiteColorHover fontSize1EM\"}>No existen tipos de cr&eacute;ditos creados</a>\n                                                ) : (\n                                                    <span></span>\n                                                )}\n                                            </div>\n                                        ) : (\n                                            <span></span>\n                                        )}\n                                    </div>\n                                </Accordion>\n                            ))}\n                            { this.state.tipoCreditos.length == 0 ? (\n                                <a className={\"btn btn-outline-dark btn-block btnWhiteColorHover fontSize1EM\"}>No existen tipos de cr&eacute;ditos creados</a>\n                            ) : (\n                                <span></span>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"SeleccionarTipoCredito.js"}